-- Parsing issue-5555.mo:
-- Checking issue-5555.mo:
(Prog
  (ExpD (IgnoreE (BinE Nat (LitE (NatLit 57)) AddOp (LitE (NatLit 0)))))
  (ExpD (IgnoreE (BinE Int (LitE (NatLit 42)) AddOp (LitE (IntLit 0)))))
  (ExpD (IgnoreE (BinE Nat (LitE (NatLit 25)) MulOp (LitE (NatLit 1)))))
  (ExpD (IgnoreE (BinE Int (LitE (NatLit 25)) MulOp (LitE (IntLit 1)))))
  (ExpD
    (IgnoreE
      (AnnotE
        (BinE Nat (LitE (NatLit 42)) SubOp (LitE (NatLit 0)))
        (PathT (IdH (ID Nat)))
      )
    )
  )
  (ExpD (IgnoreE (BinE Nat (LitE (NatLit 42)) SubOp (LitE (NatLit 0)))))
  (ExpD (IgnoreE (BinE Int (LitE (NatLit 42)) SubOp (LitE (IntLit 0)))))
  (ExpD (IgnoreE (BinE Nat (LitE (NatLit 25)) DivOp (LitE (NatLit 1)))))
  (ExpD (IgnoreE (BinE Int (LitE (NatLit 25)) DivOp (LitE (IntLit 1)))))
  (ExpD (IgnoreE (BinE Nat (LitE (NatLit 0)) AddOp (LitE (NatLit 42)))))
  (ExpD (IgnoreE (BinE Int (LitE (IntLit 0)) AddOp (LitE (NatLit 42)))))
  (ExpD (IgnoreE (BinE Nat (LitE (NatLit 1)) MulOp (LitE (NatLit 25)))))
  (ExpD (IgnoreE (BinE Int (LitE (IntLit 1)) MulOp (LitE (NatLit 25)))))
  (ExpD
    (IgnoreE
      (BinE
        Int
        (AnnotE (LitE (IntLit 42)) (PathT (IdH (ID Int))))
        AddOp
        (LitE (IntLit 0))
      )
    )
  )
  (ExpD
    (IgnoreE
      (BinE
        Nat8
        (AnnotE (LitE (Nat8Lit 42)) (PathT (IdH (ID Nat8))))
        AddOp
        (LitE (Nat8Lit 0))
      )
    )
  )
  (ExpD
    (IgnoreE
      (AnnotE
        (BinE Nat16 (LitE (Nat16Lit 42)) AddOp (LitE (Nat16Lit 0)))
        (PathT (IdH (ID Nat16)))
      )
    )
  )
  (ExpD
    (IgnoreE
      (AnnotE
        (BinE Nat32 (LitE (Nat32Lit 42)) AddOp (LitE (Nat32Lit 0)))
        (PathT (IdH (ID Nat32)))
      )
    )
  )
  (ExpD
    (IgnoreE
      (AnnotE
        (BinE Nat64 (LitE (Nat64Lit 42)) AddOp (LitE (Nat64Lit 0)))
        (PathT (IdH (ID Nat64)))
      )
    )
  )
  (ExpD
    (IgnoreE
      (BinE
        Nat8
        (AnnotE (LitE (Nat8Lit 25)) (PathT (IdH (ID Nat8))))
        MulOp
        (LitE (Nat8Lit 1))
      )
    )
  )
  (ExpD
    (IgnoreE
      (AnnotE
        (BinE Nat16 (LitE (Nat16Lit 25)) MulOp (LitE (Nat16Lit 1)))
        (PathT (IdH (ID Nat16)))
      )
    )
  )
  (ExpD
    (IgnoreE
      (AnnotE
        (BinE Nat32 (LitE (Nat32Lit 25)) MulOp (LitE (Nat32Lit 1)))
        (PathT (IdH (ID Nat32)))
      )
    )
  )
  (ExpD
    (IgnoreE
      (AnnotE
        (BinE Nat64 (LitE (Nat64Lit 25)) MulOp (LitE (Nat64Lit 1)))
        (PathT (IdH (ID Nat64)))
      )
    )
  )
)
-- Definedness issue-5555.mo:
-- Desugaring issue-5555.mo:
(ProgU
  (VarD @cycles Nat (LitE (NatLit 0)))
  (VarD @timeout ?Nat32 (LitE NullLit))
  (LetD
    (VarP @add_cycles)
    (FuncE
      @add_cycles
      Local
      Returns
      ($ Any)
      ()
      (BlockE
        (LetD (VarP cycles) (VarE! @cycles))
        (LetD WildP (PrimE (CallPrim) (VarE @reset_cycles) (PrimE TupPrim)))
        (LetD
          WildP
          (IfE
            (PrimE
              (RelPrim Bool EqOp)
              (PrimE (RelPrim Nat EqOp) (VarE cycles) (LitE (NatLit 0)))
              (LitE (BoolLit false))
            )
            (PrimE SystemCyclesAddPrim (VarE cycles))
            (PrimE TupPrim)
          )
        )
        (SwitchE
          (VarE! @timeout)
          (case
            (OptP (VarP timeout))
            (BlockE
              (LetD WildP (AssignE (VarLE @timeout) (LitE NullLit)))
              (PrimE SystemTimeoutSetPrim (VarE timeout))
            )
          )
          (case (LitP NullLit) (PrimE TupPrim))
        )
      )
    )
  )
  (LetD
    (VarP @reset_cycles)
    (FuncE
      @reset_cycles
      Local
      Returns
      ()
      (AssignE (VarLE @cycles) (LitE (NatLit 0)))
    )
  )
  (LetD
    (VarP @immut_array_get)
    (FuncE
      @immut_array_get
      Local
      Returns
      (A Any)
      (params xs)
      Nat -> A
      (FuncE
        @anon-func-45.49
        Local
        Returns
        (params n)
        A
        (PrimE IdxPrim (VarE xs) (VarE n))
      )
    )
  )
  (LetD
    (VarP @mut_array_get)
    (FuncE
      @mut_array_get
      Local
      Returns
      (A Any)
      (params xs)
      Nat -> A
      (FuncE
        @anon-func-46.51
        Local
        Returns
        (params n)
        A
        (PrimE IdxPrim (VarE xs) (VarE n))
      )
    )
  )
  (LetD
    (VarP @immut_array_size)
    (FuncE
      @immut_array_size
      Local
      Returns
      (A Any)
      (params xs)
      () -> Nat
      (FuncE @anon-func-47.51 Local Returns Nat (PrimE array_len (VarE xs)))
    )
  )
  (LetD
    (VarP @mut_array_size)
    (FuncE
      @mut_array_size
      Local
      Returns
      (A Any)
      (params xs)
      () -> Nat
      (FuncE @anon-func-48.53 Local Returns Nat (PrimE array_len (VarE xs)))
    )
  )
  (LetD
    (VarP @mut_array_put)
    (FuncE
      @mut_array_put
      Local
      Returns
      (A Any)
      (params xs)
      (Nat, A) -> ()
      (FuncE
        @anon-func-49.57
        Local
        Returns
        (params n x)
        ()
        (AssignE (IdxLE (VarE xs) (VarE n)) (VarE x))
      )
    )
  )
  (LetD
    (VarP @immut_array_keys)
    (FuncE
      @immut_array_keys
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<Nat>
      (FuncE
        @anon-func-50.58
        Local
        Returns
        @Iter<Nat>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (VarE j))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat})
        )
      )
    )
  )
  (LetD
    (VarP @mut_array_keys)
    (FuncE
      @mut_array_keys
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<Nat>
      (FuncE
        @anon-func-55.60
        Local
        Returns
        @Iter<Nat>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (VarE j))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat})
        )
      )
    )
  )
  (LetD
    (VarP @immut_array_vals)
    (FuncE
      @immut_array_vals
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<A>
      (FuncE
        @anon-func-60.56
        Local
        Returns
        @Iter<A>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?A
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (PrimE IdxPrim (VarE xs) (VarE j)))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?A})
        )
      )
    )
  )
  (LetD
    (VarP @mut_array_vals)
    (FuncE
      @mut_array_vals
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<A>
      (FuncE
        @anon-func-67.58
        Local
        Returns
        @Iter<A>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?A
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (PrimE IdxPrim (VarE xs) (VarE j)))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?A})
        )
      )
    )
  )
  (LetD
    (VarP @blob_size)
    (FuncE
      @blob_size
      Local
      Returns
      (params b)
      () -> Nat
      (FuncE @anon-func-74.41 Local Returns Nat (PrimE blob_size (VarE b)))
    )
  )
  (LetD
    (VarP @blob_keys)
    (FuncE
      @blob_keys
      Local
      Returns
      (params b)
      () -> @Iter<Nat>
      (FuncE
        @anon-func-75.48
        Local
        Returns
        @Iter<Nat>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE blob_size (VarE b)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (VarE j))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat})
        )
      )
    )
  )
  (LetD
    (VarP @blob_get)
    (FuncE
      @blob_get
      Local
      Returns
      (params b)
      Nat -> Nat8
      (FuncE
        @anon-func-80.42
        Local
        Returns
        (params n)
        Nat8
        (PrimE IdxBlobPrim (VarE b) (VarE n))
      )
    )
  )
  (LetD
    (VarP @blob_vals)
    (FuncE
      @blob_vals
      Local
      Returns
      (params xs)
      () -> @Iter<Nat8>
      (FuncE
        @anon-func-81.50
        Local
        Returns
        @Iter<Nat8>
        (BlockE
          (LetD (VarP i) (PrimE blob_vals_iter (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat8
              (IfE
                (PrimE blob_iter_done (VarE i))
                (LitE NullLit)
                (PrimE OptPrim (PrimE blob_iter_next (VarE i)))
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat8})
        )
      )
    )
  )
  (LetD
    (VarP @text_size)
    (FuncE
      @text_size
      Local
      Returns
      (params xs)
      () -> Nat
      (FuncE @anon-func-88.42 Local Returns Nat (PrimE text_len (VarE xs)))
    )
  )
  (LetD
    (VarP @text_chars)
    (FuncE
      @text_chars
      Local
      Returns
      (params xs)
      () -> @Iter<Char>
      (FuncE
        @anon-func-89.51
        Local
        Returns
        @Iter<Char>
        (BlockE
          (LetD (VarP i) (PrimE text_iter (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Char
              (IfE
                (PrimE text_iter_done (VarE i))
                (LitE NullLit)
                (PrimE OptPrim (PrimE text_iter_next (VarE i)))
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Char})
        )
      )
    )
  )
  (LetD
    (VarP @text_of_num)
    (FuncE
      @text_of_num
      Local
      Returns
      (params x base sep digits)
      Text
      (BlockE
        (VarD text Text (LitE (TextLit )))
        (VarD n Nat (VarE x))
        (LetD
          WildP
          (IfE
            (PrimE (RelPrim Nat EqOp) (VarE! n) (LitE (NatLit 0)))
            (PrimE RetPrim (LitE (TextLit 0)))
            (PrimE TupPrim)
          )
        )
        (VarD i Nat (LitE (NatLit 0)))
        (LetD
          WildP
          (LabelE
            $done/0
            ()
            (LoopE
              (IfE
                (PrimE (RelPrim Nat GtOp) (VarE! n) (LitE (NatLit 0)))
                (BlockE
                  (LetD
                    (VarP rem)
                    (PrimE (BinPrim Nat ModOp) (VarE! n) (VarE base))
                  )
                  (LetD
                    WildP
                    (IfE
                      (IfE
                        (PrimE (RelPrim Nat GtOp) (VarE sep) (LitE (NatLit 0)))
                        (PrimE (RelPrim Nat EqOp) (VarE! i) (VarE sep))
                        (LitE (BoolLit false))
                      )
                      (BlockE
                        (LetD
                          WildP
                          (AssignE
                            (VarLE text)
                            (PrimE
                              (BinPrim Text CatOp)
                              (LitE (TextLit _))
                              (VarE! text)
                            )
                          )
                        )
                        (AssignE (VarLE i) (LitE (NatLit 0)))
                      )
                      (PrimE TupPrim)
                    )
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE text)
                      (PrimE
                        (BinPrim Text CatOp)
                        (PrimE (CallPrim) (VarE digits) (VarE rem))
                        (VarE! text)
                      )
                    )
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE n)
                      (PrimE (BinPrim Nat DivOp) (VarE! n) (VarE base))
                    )
                  )
                  (AssignE
                    (VarLE i)
                    (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                  )
                )
                (PrimE (BreakPrim $done/0) (PrimE TupPrim))
              )
            )
          )
        )
        (VarE! text)
      )
    )
  )
  (LetD
    (VarP @left_pad)
    (FuncE
      @left_pad
      Local
      Returns
      (params pad char t)
      Text
      (IfE
        (PrimE (RelPrim Nat GtOp) (VarE pad) (PrimE text_len (VarE t)))
        (BlockE
          (VarD
            i
            Nat
            (PrimE (BinPrim Nat SubOp) (VarE pad) (PrimE text_len (VarE t)))
          )
          (VarD text Text (VarE t))
          (LetD
            WildP
            (LabelE
              $done/1
              ()
              (LoopE
                (IfE
                  (PrimE (RelPrim Nat GtOp) (VarE! i) (LitE (NatLit 0)))
                  (BlockE
                    (LetD
                      WildP
                      (AssignE
                        (VarLE text)
                        (PrimE (BinPrim Text CatOp) (VarE char) (VarE! text))
                      )
                    )
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat SubOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE (BreakPrim $done/1) (PrimE TupPrim))
                )
              )
            )
          )
          (VarE! text)
        )
        (VarE t)
      )
    )
  )
  (LetD
    (VarP @digits_dec)
    (FuncE
      @digits_dec
      Local
      Returns
      (params x)
      Text
      (PrimE
        conv_Char_Text
        (PrimE
          (NumConvTrapPrim Nat32 Char)
          (PrimE
            (NumConvWrapPrim Int Nat32)
            (PrimE (BinPrim Int AddOp) (VarE x) (LitE (IntLit 48)))
          )
        )
      )
    )
  )
  (LetD
    (VarP @text_of_Nat)
    (FuncE
      @text_of_Nat
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_num)
        (PrimE
          TupPrim
          (VarE x)
          (LitE (NatLit 10))
          (LitE (NatLit 3))
          (VarE @digits_dec)
        )
      )
    )
  )
  (LetD
    (VarP @text_of_Int)
    (FuncE
      @text_of_Int
      Local
      Returns
      (params x)
      Text
      (IfE
        (PrimE (RelPrim Int EqOp) (VarE x) (LitE (IntLit 0)))
        (LitE (TextLit 0))
        (PrimE
          (BinPrim Text CatOp)
          (IfE
            (PrimE (RelPrim Int LtOp) (VarE x) (LitE (IntLit 0)))
            (LitE (TextLit -))
            (LitE (TextLit +))
          )
          (PrimE (CallPrim) (VarE @text_of_Nat) (PrimE abs (VarE x)))
        )
      )
    )
  )
  (LetD
    (VarP @digits_hex)
    (FuncE
      @digits_hex
      Local
      Returns
      (params x)
      Text
      (PrimE
        conv_Char_Text
        (PrimE
          (NumConvTrapPrim Nat32 Char)
          (PrimE
            (NumConvWrapPrim Int Nat32)
            (PrimE
              (BinPrim Int AddOp)
              (VarE x)
              (IfE
                (PrimE (RelPrim Nat LtOp) (VarE x) (LitE (NatLit 10)))
                (LitE (IntLit 48))
                (LitE (IntLit 55))
              )
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @int64ToInt)
    (FuncE
      @int64ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int64 Int) (VarE n))
    )
  )
  (LetD
    (VarP @int32ToInt)
    (FuncE
      @int32ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int32 Int) (VarE n))
    )
  )
  (LetD
    (VarP @int16ToInt)
    (FuncE
      @int16ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int16 Int) (VarE n))
    )
  )
  (LetD
    (VarP @int8ToInt)
    (FuncE
      @int8ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int8 Int) (VarE n))
    )
  )
  (LetD
    (VarP @nat64ToNat)
    (FuncE
      @nat64ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat64 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @nat32ToNat)
    (FuncE
      @nat32ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat32 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @nat16ToNat)
    (FuncE
      @nat16ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat16 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @nat8ToNat)
    (FuncE
      @nat8ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat8 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @text_of_Nat8)
    (FuncE
      @text_of_Nat8
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat8ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Nat16)
    (FuncE
      @text_of_Nat16
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat16ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Nat32)
    (FuncE
      @text_of_Nat32
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat32ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Nat64)
    (FuncE
      @text_of_Nat64
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat64ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int8)
    (FuncE
      @text_of_Int8
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int8ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int16)
    (FuncE
      @text_of_Int16
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int16ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int32)
    (FuncE
      @text_of_Int32
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int32ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int64)
    (FuncE
      @text_of_Int64
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int64ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Float)
    (FuncE
      @text_of_Float
      Local
      Returns
      (params x)
      Text
      (PrimE Float->Text (VarE x))
    )
  )
  (LetD
    (VarP @text_of_Bool)
    (FuncE
      @text_of_Bool
      Local
      Returns
      (params b)
      Text
      (IfE (VarE b) (LitE (TextLit true)) (LitE (TextLit false)))
    )
  )
  (LetD
    (VarP @text_of_Text)
    (FuncE
      @text_of_Text
      Local
      Returns
      (params t)
      Text
      (PrimE
        (BinPrim Text CatOp)
        (PrimE (BinPrim Text CatOp) (LitE (TextLit ")) (VarE t))
        (LitE (TextLit "))
      )
    )
  )
  (LetD
    (VarP @text_of_Char)
    (FuncE
      @text_of_Char
      Local
      Returns
      (params c)
      Text
      (PrimE
        (BinPrim Text CatOp)
        (PrimE
          (BinPrim Text CatOp)
          (LitE (TextLit '))
          (PrimE conv_Char_Text (VarE c))
        )
        (LitE (TextLit '))
      )
    )
  )
  (LetD
    (VarP @text_of_Blob)
    (FuncE
      @text_of_Blob
      Local
      Returns
      (params blob)
      Text
      (BlockE
        (VarD t Text (LitE (TextLit ")))
        (LetD
          WildP
          (BlockE
            (LetD
              (VarP $nxt/0)
              (PrimE
                (DotPrim next)
                (PrimE
                  (CallPrim)
                  (PrimE (CallPrim) (VarE @blob_vals) (VarE blob))
                  (PrimE TupPrim)
                )
              )
            )
            (LabelE
              $done/2
              ()
              (LoopE
                (SwitchE
                  (PrimE (CallPrim) (VarE $nxt/0) (PrimE TupPrim))
                  (case
                    (LitP NullLit)
                    (PrimE (BreakPrim $done/2) (PrimE TupPrim))
                  )
                  (case
                    (OptP (VarP b))
                    (AssignE
                      (VarLE t)
                      (PrimE
                        (BinPrim Text CatOp)
                        (VarE! t)
                        (PrimE
                          (BinPrim Text CatOp)
                          (LitE (TextLit \))
                          (PrimE
                            (CallPrim)
                            (VarE @left_pad)
                            (PrimE
                              TupPrim
                              (LitE (NatLit 2))
                              (LitE (TextLit 0))
                              (PrimE
                                (CallPrim)
                                (VarE @text_of_num)
                                (PrimE
                                  TupPrim
                                  (PrimE (CallPrim) (VarE @nat8ToNat) (VarE b))
                                  (LitE (NatLit 16))
                                  (LitE (NatLit 0))
                                  (VarE @digits_hex)
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          WildP
          (AssignE
            (VarLE t)
            (PrimE (BinPrim Text CatOp) (VarE! t) (LitE (TextLit ")))
          )
        )
        (PrimE RetPrim (VarE! t))
      )
    )
  )
  (LetD
    (VarP @text_has_parens)
    (FuncE
      @text_has_parens
      Local
      Returns
      (params t)
      Bool
      (SwitchE
        (PrimE
          (CallPrim)
          (PrimE
            (DotPrim next)
            (PrimE
              (CallPrim)
              (PrimE (CallPrim) (VarE @text_chars) (VarE t))
              (PrimE TupPrim)
            )
          )
          (PrimE TupPrim)
        )
        (case (OptP (LitP (CharLit 40))) (LitE (BoolLit true)))
        (case WildP (LitE (BoolLit false)))
      )
    )
  )
  (LetD
    (VarP @text_needs_parens)
    (FuncE
      @text_needs_parens
      Local
      Returns
      (params t)
      Bool
      (SwitchE
        (PrimE
          (CallPrim)
          (PrimE
            (DotPrim next)
            (PrimE
              (CallPrim)
              (PrimE (CallPrim) (VarE @text_chars) (VarE t))
              (PrimE TupPrim)
            )
          )
          (PrimE TupPrim)
        )
        (case
          (OptP
            (AltP
              (AltP
                (AltP (LitP (CharLit 43)) (LitP (CharLit 45)))
                (LitP (CharLit 63))
              )
              (LitP (CharLit 35))
            )
          )
          (LitE (BoolLit true))
        )
        (case WildP (LitE (BoolLit false)))
      )
    )
  )
  (LetD
    (VarP @text_of_option)
    (FuncE
      @text_of_option
      Local
      Returns
      (T Any)
      (params f x)
      Text
      (SwitchE
        (VarE x)
        (case
          (OptP (VarP y))
          (BlockE
            (LetD (VarP fy) (PrimE (CallPrim) (VarE f) (VarE y)))
            (IfE
              (PrimE (CallPrim) (VarE @text_needs_parens) (VarE fy))
              (PrimE
                (BinPrim Text CatOp)
                (PrimE (BinPrim Text CatOp) (LitE (TextLit ?()) (VarE fy))
                (LitE (TextLit )))
              )
              (PrimE (BinPrim Text CatOp) (LitE (TextLit ?)) (VarE fy))
            )
          )
        )
        (case (LitP NullLit) (LitE (TextLit null)))
      )
    )
  )
  (LetD
    (VarP @text_of_variant)
    (FuncE
      @text_of_variant
      Local
      Returns
      (T Any)
      (params l f x)
      Text
      (BlockE
        (LetD (VarP fx) (PrimE (CallPrim) (VarE f) (VarE x)))
        (IfE
          (PrimE (RelPrim Text EqOp) (VarE fx) (LitE (TextLit ())))
          (PrimE (BinPrim Text CatOp) (LitE (TextLit #)) (VarE l))
          (IfE
            (PrimE (CallPrim) (VarE @text_has_parens) (VarE fx))
            (PrimE
              (BinPrim Text CatOp)
              (PrimE (BinPrim Text CatOp) (LitE (TextLit #)) (VarE l))
              (VarE fx)
            )
            (PrimE
              (BinPrim Text CatOp)
              (PrimE
                (BinPrim Text CatOp)
                (PrimE
                  (BinPrim Text CatOp)
                  (PrimE (BinPrim Text CatOp) (LitE (TextLit #)) (VarE l))
                  (LitE (TextLit ())
                )
                (VarE fx)
              )
              (LitE (TextLit )))
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @text_of_array)
    (FuncE
      @text_of_array
      Local
      Returns
      (T Any)
      (params f xs)
      Text
      (BlockE
        (VarD text Text (LitE (TextLit [)))
        (VarD first Bool (LitE (BoolLit true)))
        (LetD
          WildP
          (BlockE
            (LetD (VarP $arr/0) (VarE xs))
            (LetD (VarP $last/0) (PrimE GetLastArrayOffset (VarE $arr/0)))
            (VarD $indx/0 Nat (LitE (NatLit 0)))
            (IfE
              (PrimE EqArrayOffset (VarE $last/0) (LitE (IntLit -1)))
              (PrimE TupPrim)
              (LabelE
                $done/3
                ()
                (LoopE
                  (BlockE
                    (LetD
                      (VarP x)
                      (PrimE DerefArrayOffset (VarE $arr/0) (VarE! $indx/0))
                    )
                    (LetD
                      WildP
                      (BlockE
                        (LetD
                          WildP
                          (IfE
                            (VarE! first)
                            (AssignE (VarLE first) (LitE (BoolLit false)))
                            (AssignE
                              (VarLE text)
                              (PrimE
                                (BinPrim Text CatOp)
                                (VarE! text)
                                (LitE (TextLit , ))
                              )
                            )
                          )
                        )
                        (AssignE
                          (VarLE text)
                          (PrimE
                            (BinPrim Text CatOp)
                            (VarE! text)
                            (PrimE (CallPrim) (VarE f) (VarE x))
                          )
                        )
                      )
                    )
                    (IfE
                      (PrimE EqArrayOffset (VarE! $indx/0) (VarE $last/0))
                      (PrimE (BreakPrim $done/3) (PrimE TupPrim))
                      (AssignE
                        (VarLE $indx/0)
                        (PrimE NextArrayOffset (VarE! $indx/0))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (PrimE (BinPrim Text CatOp) (VarE! text) (LitE (TextLit ])))
      )
    )
  )
  (LetD
    (VarP @text_of_array_mut)
    (FuncE
      @text_of_array_mut
      Local
      Returns
      (T Any)
      (params f xs)
      Text
      (BlockE
        (VarD text Text (LitE (TextLit [var)))
        (VarD first Bool (LitE (BoolLit true)))
        (LetD
          WildP
          (BlockE
            (LetD (VarP $arr/1) (VarE xs))
            (LetD (VarP $last/1) (PrimE GetLastArrayOffset (VarE $arr/1)))
            (VarD $indx/1 Nat (LitE (NatLit 0)))
            (IfE
              (PrimE EqArrayOffset (VarE $last/1) (LitE (IntLit -1)))
              (PrimE TupPrim)
              (LabelE
                $done/4
                ()
                (LoopE
                  (BlockE
                    (LetD
                      (VarP x)
                      (PrimE DerefArrayOffset (VarE $arr/1) (VarE! $indx/1))
                    )
                    (LetD
                      WildP
                      (BlockE
                        (LetD
                          WildP
                          (IfE
                            (VarE! first)
                            (BlockE
                              (LetD
                                WildP
                                (AssignE (VarLE first) (LitE (BoolLit false)))
                              )
                              (AssignE
                                (VarLE text)
                                (PrimE
                                  (BinPrim Text CatOp)
                                  (VarE! text)
                                  (LitE (TextLit  ))
                                )
                              )
                            )
                            (AssignE
                              (VarLE text)
                              (PrimE
                                (BinPrim Text CatOp)
                                (VarE! text)
                                (LitE (TextLit , ))
                              )
                            )
                          )
                        )
                        (AssignE
                          (VarLE text)
                          (PrimE
                            (BinPrim Text CatOp)
                            (VarE! text)
                            (PrimE (CallPrim) (VarE f) (VarE x))
                          )
                        )
                      )
                    )
                    (IfE
                      (PrimE EqArrayOffset (VarE! $indx/1) (VarE $last/1))
                      (PrimE (BreakPrim $done/4) (PrimE TupPrim))
                      (AssignE
                        (VarLE $indx/1)
                        (PrimE NextArrayOffset (VarE! $indx/1))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (PrimE (BinPrim Text CatOp) (VarE! text) (LitE (TextLit ])))
      )
    )
  )
  (LetD
    (VarP @equal_array)
    (FuncE
      @equal_array
      Local
      Returns
      (T Any)
      (params eq a b)
      Bool
      (BlockE
        (LetD
          WildP
          (IfE
            (PrimE
              (RelPrim Bool EqOp)
              (PrimE
                (RelPrim Nat EqOp)
                (PrimE array_len (VarE a))
                (PrimE array_len (VarE b))
              )
              (LitE (BoolLit false))
            )
            (PrimE RetPrim (LitE (BoolLit false)))
            (PrimE TupPrim)
          )
        )
        (VarD i Nat (LitE (NatLit 0)))
        (LetD (VarP s) (PrimE array_len (VarE a)))
        (LetD
          WildP
          (LabelE
            $done/5
            ()
            (LoopE
              (IfE
                (PrimE (RelPrim Nat LtOp) (VarE! i) (VarE s))
                (BlockE
                  (LetD
                    WildP
                    (IfE
                      (PrimE
                        (RelPrim Bool EqOp)
                        (PrimE
                          (CallPrim)
                          (VarE eq)
                          (PrimE
                            TupPrim
                            (PrimE IdxPrim (VarE a) (VarE! i))
                            (PrimE IdxPrim (VarE b) (VarE! i))
                          )
                        )
                        (LitE (BoolLit false))
                      )
                      (PrimE RetPrim (LitE (BoolLit false)))
                      (PrimE TupPrim)
                    )
                  )
                  (AssignE
                    (VarLE i)
                    (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                  )
                )
                (PrimE (BreakPrim $done/5) (PrimE TupPrim))
              )
            )
          )
        )
        (PrimE RetPrim (LitE (BoolLit true)))
      )
    )
  )
  (VarD @refund Nat (LitE (NatLit 0)))
  (LetD
    (VarP @reset_refund)
    (FuncE
      @reset_refund
      Local
      Returns
      ()
      (AssignE (VarLE @refund) (LitE (NatLit 0)))
    )
  )
  (LetD
    (VarP @getSystemRefund)
    (FuncE
      @getSystemRefund
      Local
      Returns
      @Refund
      (PrimE RetPrim (PrimE SystemCyclesRefundedPrim))
    )
  )
  (LetD (VarP @cleanup) (FuncE @cleanup Local Returns () (PrimE TupPrim)))
  (LetD
    (VarP @new_async)
    (FuncE
      @new_async
      Local
      Returns
      (T Any)
      (@Async<T>, @Cont<T>, @Cont<Error>, @CleanCont)
      (BlockE
        (LetD
          (VarP w_null)
          (FuncE
            @anon-func-293.16
            Local
            Returns
            (params r t)
            ()
            (PrimE TupPrim)
          )
        )
        (LetD
          (VarP r_null)
          (FuncE
            @anon-func-294.16
            Local
            Returns
            (params $ignored0/0)
            ()
            (PrimE TupPrim)
          )
        )
        (VarD result ?@Result<T> (LitE NullLit))
        (VarD ws (@Refund, T) -> () (VarE w_null))
        (VarD rs Error -> () (VarE r_null))
        (LetD
          (VarP getRefund)
          (PrimE
            (RelPrim Bool EqOp)
            (PrimE (RelPrim Nat EqOp) (VarE! @cycles) (LitE (NatLit 0)))
            (LitE (BoolLit false))
          )
        )
        (LetD
          (VarP fulfill)
          (FuncE
            fulfill
            Local
            Returns
            (params t)
            ()
            (SwitchE
              (VarE! result)
              (case
                (LitP NullLit)
                (BlockE
                  (LetD
                    (VarP refund)
                    (IfE
                      (VarE getRefund)
                      (PrimE (CallPrim) (VarE @getSystemRefund) (PrimE TupPrim))
                      (LitE (NatLit 0))
                    )
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE result)
                      (PrimE
                        OptPrim
                        (PrimE (TagE ok) (PrimE TupPrim (VarE refund) (VarE t)))
                      )
                    )
                  )
                  (LetD (VarP ws_) (VarE! ws))
                  (LetD WildP (AssignE (VarLE ws) (VarE w_null)))
                  (LetD WildP (AssignE (VarLE rs) (VarE r_null)))
                  (PrimE
                    (CallPrim)
                    (VarE ws_)
                    (PrimE TupPrim (VarE refund) (VarE t))
                  )
                )
              )
              (case (OptP WildP) (PrimE AssertPrim (LitE (BoolLit false))))
            )
          )
        )
        (LetD
          (VarP fail)
          (FuncE
            fail
            Local
            Returns
            (params e)
            ()
            (SwitchE
              (VarE! result)
              (case
                (LitP NullLit)
                (BlockE
                  (LetD
                    WildP
                    (AssignE
                      (VarLE result)
                      (PrimE OptPrim (PrimE (TagE error) (VarE e)))
                    )
                  )
                  (LetD (VarP rs_) (VarE! rs))
                  (LetD WildP (AssignE (VarLE ws) (VarE w_null)))
                  (LetD WildP (AssignE (VarLE rs) (VarE r_null)))
                  (PrimE (CallPrim) (VarE rs_) (VarE e))
                )
              )
              (case (OptP WildP) (PrimE AssertPrim (LitE (BoolLit false))))
            )
          )
        )
        (VarD cleanup () -> () (VarE @cleanup))
        (LetD
          (VarP enqueue)
          (FuncE
            enqueue
            Local
            Returns
            (params k r b)
            {#schedule : () -> (); #suspend}
            (BlockE
              (LetD WildP (AssignE (VarLE cleanup) (VarE b)))
              (SwitchE
                (VarE! result)
                (case
                  (LitP NullLit)
                  (BlockE
                    (LetD (VarP ws_) (VarE! ws))
                    (LetD
                      WildP
                      (AssignE
                        (VarLE ws)
                        (FuncE
                          @anon-func-337.15
                          Local
                          Returns
                          (params r t)
                          ()
                          (BlockE
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE ws_)
                                (PrimE TupPrim (VarE r) (VarE t))
                              )
                            )
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE @reset_cycles)
                                (PrimE TupPrim)
                              )
                            )
                            (LetD WildP (AssignE (VarLE @refund) (VarE r)))
                            (PrimE (CallPrim) (VarE k) (VarE t))
                          )
                        )
                      )
                    )
                    (LetD (VarP rs_) (VarE! rs))
                    (LetD
                      WildP
                      (AssignE
                        (VarLE rs)
                        (FuncE
                          @anon-func-344.15
                          Local
                          Returns
                          (params e)
                          ()
                          (BlockE
                            (LetD WildP (PrimE (CallPrim) (VarE rs_) (VarE e)))
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE @reset_cycles)
                                (PrimE TupPrim)
                              )
                            )
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE @reset_refund)
                                (PrimE TupPrim)
                              )
                            )
                            (PrimE (CallPrim) (VarE r) (VarE e))
                          )
                        )
                      )
                    )
                    (PrimE (TagE suspend) (PrimE TupPrim))
                  )
                )
                (case
                  (OptP (TagP ok (TupP (VarP r) (VarP t))))
                  (PrimE
                    (TagE schedule)
                    (FuncE
                      @anon-func-353.19
                      Local
                      Returns
                      ()
                      (BlockE
                        (LetD WildP (AssignE (VarLE @refund) (VarE r)))
                        (PrimE (CallPrim) (VarE k) (VarE t))
                      )
                    )
                  )
                )
                (case
                  (OptP (TagP error (VarP e)))
                  (PrimE
                    (TagE schedule)
                    (FuncE
                      @anon-func-356.19
                      Local
                      Returns
                      ()
                      (PrimE (CallPrim) (VarE r) (VarE e))
                    )
                  )
                )
              )
            )
          )
        )
        (PrimE
          TupPrim
          (VarE enqueue)
          (VarE fulfill)
          (VarE fail)
          (FuncE
            @anon-func-361.28
            Local
            Returns
            ()
            (PrimE (CallPrim) (VarE! cleanup) (PrimE TupPrim))
          )
        )
      )
    )
  )
  (LetD
    (VarP @ManagementCanister)
    (NewObjE
      Module
      module {type canister_settings = {compute_allocation : ?Nat; controllers : ?[Principal]; freezing_threshold : ?Nat; memory_allocation : ?Nat}; type wasm_module = Blob}
    )
  )
  (LetD
    (VarP @ic00)
    (PrimE
      (ActorOfIdBlob
        actor {create_canister : shared {sender_canister_version : ?Nat64; settings : ?canister_settings} -> async {canister_id : Principal}; install_code : shared {arg : Blob; canister_id : Principal; mode : {#install; #reinstall; #upgrade : ?@UpgradeOptions}; sender_canister_version : ?Nat64; wasm_module : wasm_module} -> async ()}
      )
      (PrimE BlobOfIcUrl (LitE (TextLit aaaaa-aa)))
    )
  )
  (LetD
    (VarP @install_actor_helper)
    (FuncE
      @install_actor_helper
      Local
      Returns
      ($ Any)
      (params install_arg enhanced_orthogonal_persistence wasm_module arg)
      async*<$> Principal
      (AsyncE*
        ($@anon-async*-416.24 Any)
        (BlockE
          (LetD
            (TupP (VarP mode) (VarP canister_id))
            (SwitchE
              (VarE install_arg)
              (case
                (TagP new (VarP settings))
                (BlockE
                  (LetD (VarP available) (PrimE SystemCyclesAvailablePrim))
                  (LetD
                    (VarP accepted)
                    (PrimE SystemCyclesAcceptPrim (VarE available))
                  )
                  (LetD
                    (VarP sender_canister_version)
                    (PrimE OptPrim (PrimE canister_version))
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE @cycles)
                      (PrimE
                        (BinPrim Nat AddOp)
                        (VarE! @cycles)
                        (VarE accepted)
                      )
                    )
                  )
                  (LetD
                    (ObjP (canister_id (VarP canister_id)))
                    (PrimE
                      AwaitPrim
                      (PrimE
                        (CallPrim $@anon-async*-416.24)
                        (PrimE (ActorDotPrim create_canister) (VarE @ic00))
                        (BlockE
                          (LetD (VarP $base/0) (VarE settings))
                          (LetD
                            (VarP $settings/0)
                            (PrimE (DotPrim settings) (VarE $base/0))
                          )
                          (NewObjE
                            Object
                            (settings $settings/0)
                            (sender_canister_version sender_canister_version)
                            {sender_canister_version : ?Nat64; settings : ?canister_settings}
                          )
                        )
                      )
                    )
                  )
                  (PrimE
                    TupPrim
                    (PrimE (TagE install) (PrimE TupPrim))
                    (VarE canister_id)
                  )
                )
              )
              (case
                (TagP install (VarP principal1))
                (PrimE
                  TupPrim
                  (PrimE (TagE install) (PrimE TupPrim))
                  (VarE principal1)
                )
              )
              (case
                (TagP reinstall (VarP actor1))
                (PrimE
                  TupPrim
                  (PrimE (TagE reinstall) (PrimE TupPrim))
                  (PrimE principalOfActor (VarE actor1))
                )
              )
              (case
                (TagP upgrade (VarP actor2))
                (BlockE
                  (LetD
                    (VarP wasm_memory_persistence)
                    (IfE
                      (VarE enhanced_orthogonal_persistence)
                      (PrimE OptPrim (PrimE (TagE keep) (PrimE TupPrim)))
                      (LitE NullLit)
                    )
                  )
                  (LetD
                    (VarP upgradeOptions)
                    (NewObjE
                      Object
                      (wasm_memory_persistence wasm_memory_persistence)
                      {wasm_memory_persistence : ?{#keep}}
                    )
                  )
                  (PrimE
                    TupPrim
                    (PrimE (TagE upgrade) (PrimE OptPrim (VarE upgradeOptions)))
                    (PrimE principalOfActor (VarE actor2))
                  )
                )
              )
              (case
                (TagP
                  upgrade_with_persistence
                  (ObjP
                    (wasm_memory_persistence (VarP wasm_memory_persistence))
                    (canister (VarP canister))
                  )
                )
                (BlockE
                  (LetD
                    (VarP upgradeOptions)
                    (BlockE
                      (LetD
                        (VarP $wasm_memory_persistence/0)
                        (PrimE OptPrim (VarE wasm_memory_persistence))
                      )
                      (NewObjE
                        Object
                        (wasm_memory_persistence $wasm_memory_persistence/0)
                        {wasm_memory_persistence : ?{#keep; #replace}}
                      )
                    )
                  )
                  (PrimE
                    TupPrim
                    (PrimE (TagE upgrade) (PrimE OptPrim (VarE upgradeOptions)))
                    (PrimE principalOfActor (VarE canister))
                  )
                )
              )
            )
          )
          (LetD
            WildP
            (PrimE
              AwaitPrim
              (PrimE
                (CallPrim $@anon-async*-416.24)
                (PrimE (ActorDotPrim install_code) (VarE @ic00))
                (BlockE
                  (LetD
                    (VarP $sender_canister_version/0)
                    (PrimE OptPrim (PrimE canister_version))
                  )
                  (NewObjE
                    Object
                    (sender_canister_version $sender_canister_version/0)
                    (arg arg)
                    (wasm_module wasm_module)
                    (canister_id canister_id)
                    (mode mode)
                    {arg : Blob; canister_id : Principal; mode : {#install; #reinstall; #upgrade : ?@UpgradeOptions}; sender_canister_version : ?Nat64; wasm_module : wasm_module}
                  )
                )
              )
            )
          )
          (PrimE RetPrim (VarE canister_id))
        )
        $
      )
    )
  )
  (LetD
    (VarP @create_actor_helper)
    (FuncE
      @create_actor_helper
      Local
      Returns
      ($ Any)
      (params wasm_module arg)
      async<$> Principal
      (AsyncE
        ($@anon-async-464.79 Any)
        (BlockE
          (LetD (VarP available) (PrimE SystemCyclesAvailablePrim))
          (LetD (VarP accepted) (PrimE SystemCyclesAcceptPrim (VarE available)))
          (LetD
            (VarP sender_canister_version)
            (PrimE OptPrim (PrimE canister_version))
          )
          (LetD
            WildP
            (AssignE
              (VarLE @cycles)
              (PrimE (BinPrim Nat AddOp) (VarE! @cycles) (VarE accepted))
            )
          )
          (LetD
            (ObjP (canister_id (VarP canister_id)))
            (PrimE
              AwaitPrim
              (PrimE
                (CallPrim $@anon-async-464.79)
                (PrimE (ActorDotPrim create_canister) (VarE @ic00))
                (BlockE
                  (LetD (VarP $settings/1) (LitE NullLit))
                  (NewObjE
                    Object
                    (sender_canister_version sender_canister_version)
                    (settings $settings/1)
                    {sender_canister_version : ?Nat64; settings : ?canister_settings}
                  )
                )
              )
            )
          )
          (LetD
            WildP
            (PrimE
              AwaitPrim
              (PrimE
                (CallPrim $@anon-async-464.79)
                (PrimE (ActorDotPrim install_code) (VarE @ic00))
                (BlockE
                  (LetD (VarP $mode/0) (PrimE (TagE install) (PrimE TupPrim)))
                  (LetD
                    (VarP $sender_canister_version/1)
                    (PrimE OptPrim (PrimE canister_version))
                  )
                  (NewObjE
                    Object
                    (sender_canister_version $sender_canister_version/1)
                    (arg arg)
                    (wasm_module wasm_module)
                    (canister_id canister_id)
                    (mode $mode/0)
                    {arg : Blob; canister_id : Principal; mode : {#install; #reinstall; #upgrade : ?@UpgradeOptions}; sender_canister_version : ?Nat64; wasm_module : wasm_module}
                  )
                )
              )
            )
          )
          (PrimE RetPrim (VarE canister_id))
        )
        $
      )
    )
  )
  (LetD
    (VarP @call_raw)
    (FuncE
      @call_raw
      Local
      Returns
      ($ Any)
      (params p m a)
      async<$> Blob
      (AsyncE
        ($@call_raw Any)
        (BlockE
          (LetD (VarP available) (PrimE SystemCyclesAvailablePrim))
          (LetD
            WildP
            (IfE
              (PrimE
                (RelPrim Bool EqOp)
                (PrimE (RelPrim Nat EqOp) (VarE available) (LitE (NatLit 0)))
                (LitE (BoolLit false))
              )
              (AssignE
                (VarLE @cycles)
                (PrimE SystemCyclesAcceptPrim (VarE available))
              )
              (PrimE TupPrim)
            )
          )
          (PrimE AwaitPrim (PrimE call_raw (VarE p) (VarE m) (VarE a)))
        )
        $
      )
    )
  )
  (LetD
    (VarP @call_succeeded)
    (FuncE
      @call_succeeded
      Local
      Returns
      Bool
      (PrimE
        (RelPrim Nat32 EqOp)
        (PrimE call_perform_status)
        (LitE (Nat32Lit 0))
      )
    )
  )
  (LetD
    (VarP @call_error)
    (FuncE
      @call_error
      Local
      Returns
      Error
      (BlockE
        (LetD (VarP status) (PrimE call_perform_status))
        (LetD (VarP message) (PrimE call_perform_message))
        (LetD
          (VarP code)
          (PrimE
            (TagE call_error)
            (NewObjE Object (err_code status) {err_code : Nat32})
          )
        )
        (PrimE
          (CastPrim ({#call_error : {err_code : Nat32}}, Text) Error)
          (PrimE TupPrim (VarE code) (VarE message))
        )
      )
    )
  )
  (VarD @timers ?@Node (LitE NullLit))
  (LetD
    (VarP @prune)
    (FuncE
      @prune
      Local
      Returns
      (params n)
      ?@Node
      (SwitchE
        (VarE n)
        (case (LitP NullLit) (LitE NullLit))
        (case
          (OptP (VarP n))
          (IfE
            (PrimE
              (RelPrim Nat64 EqOp)
              (PrimE
                IdxPrim
                (PrimE (DotPrim expire) (VarE n))
                (LitE (NatLit 0))
              )
              (LitE (Nat64Lit 0))
            )
            (PrimE (CallPrim) (VarE @prune) (PrimE (DotPrim post) (VarE n)))
            (PrimE
              OptPrim
              (BlockE
                (LetD (VarP $base/1) (VarE n))
                (LetD
                  (VarP $pre/0)
                  (PrimE
                    (CallPrim)
                    (VarE @prune)
                    (PrimE (DotPrim pre) (VarE n))
                  )
                )
                (LetD (VarP $delay/0) (PrimE (DotPrim delay) (VarE $base/1)))
                (LetD (VarP $expire/0) (PrimE (DotPrim expire) (VarE $base/1)))
                (LetD (VarP $id/0) (PrimE (DotPrim id) (VarE $base/1)))
                (LetD (VarP $job/0) (PrimE (DotPrim job) (VarE $base/1)))
                (LetD (VarP $post/0) (PrimE (DotPrim post) (VarE $base/1)))
                (NewObjE
                  Object
                  (post $post/0)
                  (job $job/0)
                  (id $id/0)
                  (expire $expire/0)
                  (delay $delay/0)
                  (pre $pre/0)
                  {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                )
              )
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @nextExpiration)
    (FuncE
      @nextExpiration
      Local
      Returns
      (params n)
      Nat64
      (SwitchE
        (VarE n)
        (case (LitP NullLit) (LitE (Nat64Lit 0)))
        (case
          (OptP (VarP n))
          (BlockE
            (LetD
              (VarP pivot)
              (PrimE
                IdxPrim
                (PrimE (DotPrim expire) (VarE n))
                (LitE (NatLit 0))
              )
            )
            (LetD
              WildP
              (IfE
                (PrimE (RelPrim Nat64 EqOp) (VarE pivot) (LitE (Nat64Lit 0)))
                (PrimE
                  RetPrim
                  (PrimE
                    (CallPrim)
                    (VarE @nextExpiration)
                    (PrimE (DotPrim post) (VarE n))
                  )
                )
                (PrimE TupPrim)
              )
            )
            (LetD
              (VarP exp)
              (PrimE
                (CallPrim)
                (VarE @nextExpiration)
                (PrimE (DotPrim pre) (VarE n))
              )
            )
            (IfE
              (PrimE (RelPrim Nat64 EqOp) (VarE exp) (LitE (Nat64Lit 0)))
              (VarE pivot)
              (VarE exp)
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @timer_helper)
    (FuncE
      @timer_helper
      Local
      Returns
      ($ Any)
      async<$> ()
      (AsyncE
        ($@timer_helper Any)
        (BlockE
          (LetD
            (VarP Array_init)
            (FuncE
              Array_init
              Local
              Returns
              (T Any)
              (params len x)
              [var T]
              (PrimE Array.init (VarE len) (VarE x))
            )
          )
          (LetD (VarP now) (PrimE SystemTimePrim))
          (VarD gathered Nat (LitE (NatLit 0)))
          (LetD
            (VarP thunks)
            (PrimE
              (CallPrim ?(() -> async ()))
              (VarE Array_init)
              (PrimE TupPrim (LitE (NatLit 10)) (LitE NullLit))
            )
          )
          (LetD
            (VarP gatherExpired)
            (FuncE
              gatherExpired
              Local
              Returns
              (params n)
              ()
              (SwitchE
                (VarE n)
                (case (LitP NullLit) (PrimE TupPrim))
                (case
                  (OptP (VarP n))
                  (BlockE
                    (LetD
                      (VarP pivot)
                      (PrimE
                        IdxPrim
                        (PrimE (DotPrim expire) (VarE n))
                        (LitE (NatLit 0))
                      )
                    )
                    (LetD
                      WildP
                      (IfE
                        (PrimE
                          (RelPrim Nat64 GtOp)
                          (VarE pivot)
                          (LitE (Nat64Lit 0))
                        )
                        (PrimE
                          (CallPrim)
                          (VarE gatherExpired)
                          (PrimE (DotPrim pre) (VarE n))
                        )
                        (PrimE TupPrim)
                      )
                    )
                    (IfE
                      (IfE
                        (PrimE (RelPrim Nat64 LeOp) (VarE pivot) (VarE now))
                        (PrimE
                          (RelPrim Nat LtOp)
                          (VarE! gathered)
                          (PrimE array_len (VarE thunks))
                        )
                        (LitE (BoolLit false))
                      )
                      (BlockE
                        (LetD
                          WildP
                          (IfE
                            (PrimE
                              (RelPrim Nat64 GtOp)
                              (VarE pivot)
                              (LitE (Nat64Lit 0))
                            )
                            (BlockE
                              (LetD
                                WildP
                                (AssignE
                                  (IdxLE (VarE thunks) (VarE! gathered))
                                  (PrimE OptPrim (PrimE (DotPrim job) (VarE n)))
                                )
                              )
                              (LetD
                                WildP
                                (SwitchE
                                  (PrimE (DotPrim delay) (VarE n))
                                  (case
                                    (AltP
                                      (LitP NullLit)
                                      (OptP (LitP (Nat64Lit 0)))
                                    )
                                    (AssignE
                                      (IdxLE
                                        (PrimE (DotPrim expire) (VarE n))
                                        (LitE (NatLit 0))
                                      )
                                      (LitE (Nat64Lit 0))
                                    )
                                  )
                                  (case
                                    (OptP (VarP delay))
                                    (BlockE
                                      (LetD
                                        (VarP expire)
                                        (PrimE
                                          (BinPrim Nat64 AddOp)
                                          (VarE pivot)
                                          (PrimE
                                            (BinPrim Nat64 MulOp)
                                            (VarE delay)
                                            (PrimE
                                              (BinPrim Nat64 AddOp)
                                              (LitE (Nat64Lit 1))
                                              (PrimE
                                                (BinPrim Nat64 DivOp)
                                                (PrimE
                                                  (BinPrim Nat64 SubOp)
                                                  (VarE now)
                                                  (VarE pivot)
                                                )
                                                (VarE delay)
                                              )
                                            )
                                          )
                                        )
                                      )
                                      (LetD
                                        WildP
                                        (AssignE
                                          (IdxLE
                                            (PrimE (DotPrim expire) (VarE n))
                                            (LitE (NatLit 0))
                                          )
                                          (LitE (Nat64Lit 0))
                                        )
                                      )
                                      (LetD
                                        (VarP reinsert)
                                        (FuncE
                                          reinsert
                                          Local
                                          Returns
                                          (params m)
                                          @Node
                                          (SwitchE
                                            (VarE m)
                                            (case
                                              (LitP NullLit)
                                              (BlockE
                                                (LetD (VarP $base/2) (VarE n))
                                                (LetD
                                                  (VarP $expire/1)
                                                  (PrimE
                                                    (ArrayPrim Var Nat64)
                                                    (VarE expire)
                                                  )
                                                )
                                                (LetD
                                                  (VarP $pre/1)
                                                  (LitE NullLit)
                                                )
                                                (LetD
                                                  (VarP $post/1)
                                                  (LitE NullLit)
                                                )
                                                (LetD
                                                  (VarP $delay/1)
                                                  (PrimE
                                                    (DotPrim delay)
                                                    (VarE $base/2)
                                                  )
                                                )
                                                (LetD
                                                  (VarP $id/1)
                                                  (PrimE
                                                    (DotPrim id)
                                                    (VarE $base/2)
                                                  )
                                                )
                                                (LetD
                                                  (VarP $job/1)
                                                  (PrimE
                                                    (DotPrim job)
                                                    (VarE $base/2)
                                                  )
                                                )
                                                (NewObjE
                                                  Object
                                                  (job $job/1)
                                                  (id $id/1)
                                                  (delay $delay/1)
                                                  (post $post/1)
                                                  (pre $pre/1)
                                                  (expire $expire/1)
                                                  {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                                                )
                                              )
                                            )
                                            (case
                                              (OptP (VarP m))
                                              (BlockE
                                                (LetD
                                                  WildP
                                                  (PrimE
                                                    AssertPrim
                                                    (PrimE
                                                      (RelPrim Bool EqOp)
                                                      (PrimE
                                                        (RelPrim Nat64 EqOp)
                                                        (PrimE
                                                          IdxPrim
                                                          (PrimE
                                                            (DotPrim expire)
                                                            (VarE m)
                                                          )
                                                          (LitE (NatLit 0))
                                                        )
                                                        (LitE (Nat64Lit 0))
                                                      )
                                                      (LitE (BoolLit false))
                                                    )
                                                  )
                                                )
                                                (IfE
                                                  (PrimE
                                                    (RelPrim Nat64 LtOp)
                                                    (VarE expire)
                                                    (PrimE
                                                      IdxPrim
                                                      (PrimE
                                                        (DotPrim expire)
                                                        (VarE m)
                                                      )
                                                      (LitE (NatLit 0))
                                                    )
                                                  )
                                                  (BlockE
                                                    (LetD
                                                      (VarP $base/4)
                                                      (VarE m)
                                                    )
                                                    (LetD
                                                      (VarP $pre/3)
                                                      (PrimE
                                                        OptPrim
                                                        (PrimE
                                                          (CallPrim)
                                                          (VarE reinsert)
                                                          (PrimE
                                                            (DotPrim pre)
                                                            (VarE m)
                                                          )
                                                        )
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $delay/3)
                                                      (PrimE
                                                        (DotPrim delay)
                                                        (VarE $base/4)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $expire/3)
                                                      (PrimE
                                                        (DotPrim expire)
                                                        (VarE $base/4)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $id/3)
                                                      (PrimE
                                                        (DotPrim id)
                                                        (VarE $base/4)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $job/3)
                                                      (PrimE
                                                        (DotPrim job)
                                                        (VarE $base/4)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $post/3)
                                                      (PrimE
                                                        (DotPrim post)
                                                        (VarE $base/4)
                                                      )
                                                    )
                                                    (NewObjE
                                                      Object
                                                      (post $post/3)
                                                      (job $job/3)
                                                      (id $id/3)
                                                      (expire $expire/3)
                                                      (delay $delay/3)
                                                      (pre $pre/3)
                                                      {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                                                    )
                                                  )
                                                  (BlockE
                                                    (LetD
                                                      (VarP $base/3)
                                                      (VarE m)
                                                    )
                                                    (LetD
                                                      (VarP $post/2)
                                                      (PrimE
                                                        OptPrim
                                                        (PrimE
                                                          (CallPrim)
                                                          (VarE reinsert)
                                                          (PrimE
                                                            (DotPrim post)
                                                            (VarE m)
                                                          )
                                                        )
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $delay/2)
                                                      (PrimE
                                                        (DotPrim delay)
                                                        (VarE $base/3)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $expire/2)
                                                      (PrimE
                                                        (DotPrim expire)
                                                        (VarE $base/3)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $id/2)
                                                      (PrimE
                                                        (DotPrim id)
                                                        (VarE $base/3)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $job/2)
                                                      (PrimE
                                                        (DotPrim job)
                                                        (VarE $base/3)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $pre/2)
                                                      (PrimE
                                                        (DotPrim pre)
                                                        (VarE $base/3)
                                                      )
                                                    )
                                                    (NewObjE
                                                      Object
                                                      (pre $pre/2)
                                                      (job $job/2)
                                                      (id $id/2)
                                                      (expire $expire/2)
                                                      (delay $delay/2)
                                                      (post $post/2)
                                                      {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                                                    )
                                                  )
                                                )
                                              )
                                            )
                                          )
                                        )
                                      )
                                      (AssignE
                                        (VarLE @timers)
                                        (PrimE
                                          OptPrim
                                          (PrimE
                                            (CallPrim)
                                            (VarE reinsert)
                                            (PrimE
                                              (CallPrim)
                                              (VarE @prune)
                                              (VarE! @timers)
                                            )
                                          )
                                        )
                                      )
                                    )
                                  )
                                )
                              )
                              (AssignE
                                (VarLE gathered)
                                (PrimE
                                  (BinPrim Nat AddOp)
                                  (VarE! gathered)
                                  (LitE (NatLit 1))
                                )
                              )
                            )
                            (PrimE TupPrim)
                          )
                        )
                        (PrimE
                          (CallPrim)
                          (VarE gatherExpired)
                          (PrimE (DotPrim post) (VarE n))
                        )
                      )
                      (PrimE TupPrim)
                    )
                  )
                )
              )
            )
          )
          (LetD WildP (PrimE (CallPrim) (VarE gatherExpired) (VarE! @timers)))
          (LetD
            (VarP exp)
            (PrimE (CallPrim) (VarE @nextExpiration) (VarE! @timers))
          )
          (LetD
            WildP
            (BlockE
              (LetD WildP (PrimE global_timer_set (VarE exp)))
              (PrimE TupPrim)
            )
          )
          (LetD
            WildP
            (IfE
              (PrimE (RelPrim Nat64 EqOp) (VarE exp) (LitE (Nat64Lit 0)))
              (AssignE (VarLE @timers) (LitE NullLit))
              (PrimE TupPrim)
            )
          )
          (VarD failed Nat64 (LitE (Nat64Lit 0)))
          (LetD
            (VarP reinsert)
            (FuncE
              reinsert
              Local
              Returns
              (params job)
              ()
              (BlockE
                (LetD
                  WildP
                  (IfE
                    (PrimE
                      (RelPrim Nat64 EqOp)
                      (VarE! failed)
                      (LitE (Nat64Lit 0))
                    )
                    (BlockE
                      (LetD
                        WildP
                        (AssignE
                          (VarLE @timers)
                          (PrimE (CallPrim) (VarE @prune) (VarE! @timers))
                        )
                      )
                      (BlockE
                        (LetD
                          WildP
                          (PrimE global_timer_set (LitE (Nat64Lit 1)))
                        )
                        (PrimE TupPrim)
                      )
                    )
                    (PrimE TupPrim)
                  )
                )
                (LetD
                  WildP
                  (AssignE
                    (VarLE failed)
                    (PrimE
                      (BinPrim Nat64 AddOp)
                      (VarE! failed)
                      (LitE (Nat64Lit 1))
                    )
                  )
                )
                (AssignE
                  (VarLE @timers)
                  (PrimE
                    OptPrim
                    (SwitchE
                      (VarE! @timers)
                      (case
                        (OptP
                          (ObjP
                            (id (LitP (IntLit 0)))
                            (pre (VarP pre))
                            (post (VarP post))
                            (job (VarP j))
                            (expire (VarP expire))
                            (delay (VarP delay))
                          )
                        )
                        (BlockE
                          (LetD
                            (VarP $expire/4)
                            (PrimE (ArrayPrim Var Nat64) (VarE! failed))
                          )
                          (LetD (VarP $id/4) (LitE (NatLit 0)))
                          (LetD
                            (VarP $pre/4)
                            (PrimE
                              OptPrim
                              (BlockE
                                (LetD (VarP $id/5) (LitE (NatLit 0)))
                                (LetD (VarP $post/4) (LitE NullLit))
                                (NewObjE
                                  Object
                                  (job j)
                                  (delay delay)
                                  (post $post/4)
                                  (pre pre)
                                  (expire expire)
                                  (id $id/5)
                                  {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                                )
                              )
                            )
                          )
                          (NewObjE
                            Object
                            (pre $pre/4)
                            (post post)
                            (job job)
                            (delay delay)
                            (id $id/4)
                            (expire $expire/4)
                            {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                          )
                        )
                      )
                      (case
                        WildP
                        (BlockE
                          (LetD
                            (VarP $expire/5)
                            (PrimE (ArrayPrim Var Nat64) (VarE! failed))
                          )
                          (LetD (VarP $id/6) (LitE (NatLit 0)))
                          (LetD (VarP $delay/4) (LitE NullLit))
                          (LetD (VarP $pre/5) (LitE NullLit))
                          (LetD (VarP $post/5) (VarE! @timers))
                          (NewObjE
                            Object
                            (post $post/5)
                            (pre $pre/5)
                            (job job)
                            (delay $delay/4)
                            (id $id/6)
                            (expire $expire/5)
                            {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
          (BlockE
            (LetD (VarP $arr/2) (VarE thunks))
            (LetD (VarP $last/2) (PrimE GetLastArrayOffset (VarE $arr/2)))
            (VarD $indx/2 Nat (LitE (NatLit 0)))
            (IfE
              (PrimE EqArrayOffset (VarE $last/2) (LitE (IntLit -1)))
              (PrimE TupPrim)
              (LabelE
                $done/6
                ()
                (LoopE
                  (BlockE
                    (LetD
                      (VarP o)
                      (PrimE DerefArrayOffset (VarE $arr/2) (VarE! $indx/2))
                    )
                    (LetD
                      WildP
                      (SwitchE
                        (VarE o)
                        (case
                          (OptP (VarP thunk))
                          (TryE
                            (BlockE
                              (LetD
                                WildP
                                (PrimE
                                  (CallPrim $@timer_helper)
                                  (VarE thunk)
                                  (PrimE TupPrim)
                                )
                              )
                              (PrimE TupPrim)
                            )
                            (case
                              WildP
                              (PrimE (CallPrim) (VarE reinsert) (VarE thunk))
                            )
                          )
                        )
                        (case WildP (PrimE RetPrim (PrimE TupPrim)))
                      )
                    )
                    (IfE
                      (PrimE EqArrayOffset (VarE! $indx/2) (VarE $last/2))
                      (PrimE (BreakPrim $done/6) (PrimE TupPrim))
                      (AssignE
                        (VarLE $indx/2)
                        (PrimE NextArrayOffset (VarE! $indx/2))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        $
      )
    )
  )
  (VarD @lastTimerId Nat (LitE (NatLit 0)))
  (LetD
    (VarP @setTimer)
    (FuncE
      @setTimer
      Local
      Returns
      ($ Any)
      (params delayNanos recurring job)
      (id : Nat)
      (BlockE
        (LetD
          WildP
          (AssignE
            (VarLE @lastTimerId)
            (PrimE (BinPrim Nat AddOp) (VarE! @lastTimerId) (LitE (NatLit 1)))
          )
        )
        (LetD (VarP id) (VarE! @lastTimerId))
        (LetD (VarP now) (PrimE SystemTimePrim))
        (LetD
          (VarP expire)
          (PrimE (BinPrim Nat64 AddOp) (VarE now) (VarE delayNanos))
        )
        (LetD
          (VarP delay)
          (IfE
            (VarE recurring)
            (PrimE OptPrim (VarE delayNanos))
            (LitE NullLit)
          )
        )
        (LetD
          (VarP insert)
          (FuncE
            insert
            Local
            Returns
            (params n)
            @Node
            (SwitchE
              (VarE n)
              (case
                (LitP NullLit)
                (BlockE
                  (LetD
                    (VarP $expire/6)
                    (PrimE (ArrayPrim Var Nat64) (VarE expire))
                  )
                  (LetD (VarP $pre/6) (LitE NullLit))
                  (LetD (VarP $post/6) (LitE NullLit))
                  (NewObjE
                    Object
                    (post $post/6)
                    (pre $pre/6)
                    (job job)
                    (delay delay)
                    (id id)
                    (expire $expire/6)
                    {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                  )
                )
              )
              (case
                (OptP (VarP n))
                (BlockE
                  (LetD
                    WildP
                    (PrimE
                      AssertPrim
                      (PrimE
                        (RelPrim Bool EqOp)
                        (PrimE
                          (RelPrim Nat64 EqOp)
                          (PrimE
                            IdxPrim
                            (PrimE (DotPrim expire) (VarE n))
                            (LitE (NatLit 0))
                          )
                          (LitE (Nat64Lit 0))
                        )
                        (LitE (BoolLit false))
                      )
                    )
                  )
                  (IfE
                    (PrimE
                      (RelPrim Nat64 LtOp)
                      (VarE expire)
                      (PrimE
                        IdxPrim
                        (PrimE (DotPrim expire) (VarE n))
                        (LitE (NatLit 0))
                      )
                    )
                    (BlockE
                      (LetD (VarP $base/6) (VarE n))
                      (LetD
                        (VarP $pre/8)
                        (PrimE
                          OptPrim
                          (PrimE
                            (CallPrim)
                            (VarE insert)
                            (PrimE (DotPrim pre) (VarE n))
                          )
                        )
                      )
                      (LetD
                        (VarP $delay/6)
                        (PrimE (DotPrim delay) (VarE $base/6))
                      )
                      (LetD
                        (VarP $expire/8)
                        (PrimE (DotPrim expire) (VarE $base/6))
                      )
                      (LetD (VarP $id/8) (PrimE (DotPrim id) (VarE $base/6)))
                      (LetD (VarP $job/5) (PrimE (DotPrim job) (VarE $base/6)))
                      (LetD
                        (VarP $post/8)
                        (PrimE (DotPrim post) (VarE $base/6))
                      )
                      (NewObjE
                        Object
                        (post $post/8)
                        (job $job/5)
                        (id $id/8)
                        (expire $expire/8)
                        (delay $delay/6)
                        (pre $pre/8)
                        {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                      )
                    )
                    (BlockE
                      (LetD (VarP $base/5) (VarE n))
                      (LetD
                        (VarP $post/7)
                        (PrimE
                          OptPrim
                          (PrimE
                            (CallPrim)
                            (VarE insert)
                            (PrimE (DotPrim post) (VarE n))
                          )
                        )
                      )
                      (LetD
                        (VarP $delay/5)
                        (PrimE (DotPrim delay) (VarE $base/5))
                      )
                      (LetD
                        (VarP $expire/7)
                        (PrimE (DotPrim expire) (VarE $base/5))
                      )
                      (LetD (VarP $id/7) (PrimE (DotPrim id) (VarE $base/5)))
                      (LetD (VarP $job/4) (PrimE (DotPrim job) (VarE $base/5)))
                      (LetD (VarP $pre/7) (PrimE (DotPrim pre) (VarE $base/5)))
                      (NewObjE
                        Object
                        (pre $pre/7)
                        (job $job/4)
                        (id $id/7)
                        (expire $expire/7)
                        (delay $delay/5)
                        (post $post/7)
                        {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          WildP
          (AssignE
            (VarLE @timers)
            (PrimE
              OptPrim
              (PrimE
                (CallPrim)
                (VarE insert)
                (PrimE (CallPrim) (VarE @prune) (VarE! @timers))
              )
            )
          )
        )
        (LetD
          (VarP exp)
          (PrimE (CallPrim) (VarE @nextExpiration) (VarE! @timers))
        )
        (LetD
          WildP
          (IfE
            (PrimE (RelPrim Nat64 EqOp) (VarE exp) (LitE (Nat64Lit 0)))
            (AssignE (VarLE @timers) (LitE NullLit))
            (PrimE TupPrim)
          )
        )
        (LetD
          WildP
          (BlockE
            (LetD WildP (PrimE global_timer_set (VarE exp)))
            (PrimE TupPrim)
          )
        )
        (VarE id)
      )
    )
  )
  (LetD
    (VarP @cancelTimer)
    (FuncE
      @cancelTimer
      Local
      Returns
      (params id)
      ()
      (BlockE
        (LetD
          (VarP graft)
          (FuncE
            graft
            Local
            Returns
            (params onto branch)
            ?@Node
            (SwitchE
              (PrimE TupPrim (VarE onto) (VarE branch))
              (case (TupP (LitP NullLit) (LitP NullLit)) (LitE NullLit))
              (case (TupP (LitP NullLit) WildP) (VarE branch))
              (case (TupP WildP (LitP NullLit)) (VarE onto))
              (case
                (TupP (OptP (VarP onto)) WildP)
                (PrimE
                  OptPrim
                  (BlockE
                    (LetD (VarP $base/7) (VarE onto))
                    (LetD
                      (VarP $post/9)
                      (PrimE
                        (CallPrim)
                        (VarE graft)
                        (PrimE
                          TupPrim
                          (PrimE (DotPrim post) (VarE onto))
                          (VarE branch)
                        )
                      )
                    )
                    (LetD
                      (VarP $delay/7)
                      (PrimE (DotPrim delay) (VarE $base/7))
                    )
                    (LetD
                      (VarP $expire/9)
                      (PrimE (DotPrim expire) (VarE $base/7))
                    )
                    (LetD (VarP $id/9) (PrimE (DotPrim id) (VarE $base/7)))
                    (LetD (VarP $job/6) (PrimE (DotPrim job) (VarE $base/7)))
                    (LetD (VarP $pre/9) (PrimE (DotPrim pre) (VarE $base/7)))
                    (NewObjE
                      Object
                      (pre $pre/9)
                      (job $job/6)
                      (id $id/9)
                      (expire $expire/9)
                      (delay $delay/7)
                      (post $post/9)
                      {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          (VarP hunt)
          (FuncE
            hunt
            Local
            Returns
            (params n)
            ?@Node
            (SwitchE
              (VarE n)
              (case (LitP NullLit) (VarE n))
              (case
                (OptP
                  (ObjP (id (VarP node)) (pre (VarP pre)) (post (VarP post)))
                )
                (IfE
                  (PrimE (RelPrim Nat EqOp) (VarE node) (VarE id))
                  (PrimE
                    (CallPrim)
                    (VarE graft)
                    (PrimE TupPrim (VarE pre) (VarE post))
                  )
                  (LabelE
                    !
                    ?@Node
                    (PrimE
                      OptPrim
                      (BlockE
                        (LetD
                          (VarP $base/8)
                          (SwitchE
                            (VarE n)
                            (case
                              (LitP NullLit)
                              (PrimE (BreakPrim !) (LitE NullLit))
                            )
                            (case (OptP (VarP $v/0)) (VarE $v/0))
                          )
                        )
                        (LetD
                          (VarP $pre/10)
                          (PrimE (CallPrim) (VarE hunt) (VarE pre))
                        )
                        (LetD
                          (VarP $post/10)
                          (PrimE (CallPrim) (VarE hunt) (VarE post))
                        )
                        (LetD
                          (VarP $delay/8)
                          (PrimE (DotPrim delay) (VarE $base/8))
                        )
                        (LetD
                          (VarP $expire/10)
                          (PrimE (DotPrim expire) (VarE $base/8))
                        )
                        (LetD (VarP $id/10) (PrimE (DotPrim id) (VarE $base/8)))
                        (LetD
                          (VarP $job/7)
                          (PrimE (DotPrim job) (VarE $base/8))
                        )
                        (NewObjE
                          Object
                          (job $job/7)
                          (id $id/10)
                          (expire $expire/10)
                          (delay $delay/8)
                          (post $post/10)
                          (pre $pre/10)
                          {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          WildP
          (AssignE
            (VarLE @timers)
            (PrimE (CallPrim) (VarE hunt) (VarE! @timers))
          )
        )
        (IfE
          (PrimE
            (RelPrim Nat64 EqOp)
            (PrimE (CallPrim) (VarE @nextExpiration) (VarE! @timers))
            (LitE (Nat64Lit 0))
          )
          (BlockE
            (LetD
              WildP
              (BlockE
                (LetD WildP (PrimE global_timer_set (LitE (Nat64Lit 0))))
                (PrimE TupPrim)
              )
            )
            (AssignE (VarLE @timers) (LitE NullLit))
          )
          (PrimE TupPrim)
        )
      )
    )
  )
  (LetD
    (VarP @set_global_timer)
    (FuncE
      @set_global_timer
      Local
      Returns
      (params time)
      ()
      (BlockE (LetD WildP (PrimE global_timer_set (VarE time))) (PrimE TupPrim))
    )
  )
  (LetD
    (VarP @dedup)
    (FuncE
      @dedup
      Local
      Returns
      (params b)
      Blob
      (BlockE
        (LetD
          (VarP Array_tabulate)
          (FuncE
            Array_tabulate
            Local
            Returns
            (T Any)
            (params len gen)
            [T]
            (PrimE Array.tabulate (VarE len) (VarE gen))
          )
        )
        (LetD
          (VarP Array_tabulateVar)
          (FuncE
            Array_tabulateVar
            Local
            Returns
            (T Any)
            (params len gen)
            [var T]
            (PrimE Array.tabulateVar (VarE len) (VarE gen))
          )
        )
        (LetD (VarP HASH_ARRAY_SIZE) (LitE (NatLit 16_384)))
        (LetD
          (VarP debugPrint)
          (FuncE debugPrint Local Returns (params x) () (PrimE print (VarE x)))
        )
        (LetD
          (VarP hashBlob)
          (FuncE
            hashBlob
            Local
            Returns
            (params b)
            Nat32
            (PrimE crc32Hash (VarE b))
          )
        )
        (LetD
          (VarP allocWeakRef)
          (FuncE
            allocWeakRef
            Local
            Returns
            (T Any)
            (params obj)
            weak T
            (PrimE alloc_weak_ref (VarE obj))
          )
        )
        (LetD
          (VarP weakGet)
          (FuncE
            weakGet
            Local
            Returns
            (T Any)
            (params w)
            ?T
            (PrimE weak_get (VarE w))
          )
        )
        (LetD
          (VarP getDedupTable)
          (FuncE
            getDedupTable
            Local
            Returns
            ?[var List]
            (PrimE get_dedup_table)
          )
        )
        (LetD
          (VarP setDedupTable)
          (FuncE
            setDedupTable
            Local
            Returns
            (params dedupTable)
            ()
            (PrimE set_dedup_table (VarE dedupTable))
          )
        )
        (LetD
          (VarP arrayToBlob)
          (FuncE
            arrayToBlob
            Local
            Returns
            (params a)
            Blob
            (PrimE arrayToBlob (VarE a))
          )
        )
        (LetD
          (VarP getOriginalBlob)
          (FuncE
            getOriginalBlob
            Local
            Returns
            (params b)
            Blob
            (BlockE
              (LetD
                (VarP copiedArr)
                (PrimE
                  (CallPrim Nat8)
                  (VarE Array_tabulate)
                  (PrimE
                    TupPrim
                    (PrimE
                      (BinPrim Nat SubOp)
                      (PrimE blob_size (VarE b))
                      (LitE (NatLit 5))
                    )
                    (FuncE
                      @anon-func-744.50
                      Local
                      Returns
                      (params i)
                      Nat8
                      (PrimE
                        IdxBlobPrim
                        (VarE b)
                        (PrimE (BinPrim Nat AddOp) (VarE i) (LitE (NatLit 5)))
                      )
                    )
                  )
                )
              )
              (LetD
                (VarP originalBlob)
                (PrimE (CallPrim) (VarE arrayToBlob) (VarE copiedArr))
              )
              (VarE originalBlob)
            )
          )
        )
        (LetD
          (VarP blobCompare)
          (FuncE
            blobCompare
            Local
            Returns
            (params b1 b2)
            Int8
            (PrimE blob_compare (VarE b1) (VarE b2))
          )
        )
        (LetD
          (VarP addToList)
          (FuncE
            addToList
            Local
            Returns
            (params list originalBlob weakRef)
            List
            (BlockE
              (LetD
                (VarP newList)
                (BlockE
                  (VarD
                    $next/0
                    ?{index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}
                    (PrimE OptPrim (VarE list))
                  )
                  (LetD (VarP $value/0) (PrimE OptPrim (VarE weakRef)))
                  (LetD
                    (VarP $index/0)
                    (PrimE
                      (BinPrim Nat AddOp)
                      (PrimE (DotPrim index) (VarE list))
                      (LitE (NatLit 1))
                    )
                  )
                  (NewObjE
                    Object
                    (index $index/0)
                    (originalBlob originalBlob)
                    (value $value/0)
                    (next $next/0)
                    {index : Nat; var next : ?{index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}; originalBlob : Blob; value : ?{ref : weak Blob}}
                  )
                )
              )
              (VarE newList)
            )
          )
        )
        (LetD
          (VarP getFromList)
          (FuncE
            getFromList
            Local
            Returns
            (params list originalBlob)
            ?WeakRef
            (BlockE
              (VarD
                copy
                {index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}
                (VarE list)
              )
              (LoopE
                (IfE
                  (PrimE
                    (RelPrim Int8 EqOp)
                    (PrimE
                      (CallPrim)
                      (VarE blobCompare)
                      (PrimE
                        TupPrim
                        (PrimE (DotPrim originalBlob) (VarE! copy))
                        (VarE originalBlob)
                      )
                    )
                    (LitE (Int8Lit 0))
                  )
                  (PrimE RetPrim (PrimE (DotPrim value) (VarE! copy)))
                  (BlockE
                    (LetD (VarP next) (PrimE (DotPrim next) (VarE! copy)))
                    (SwitchE
                      (VarE next)
                      (case (LitP NullLit) (PrimE RetPrim (LitE NullLit)))
                      (case
                        (OptP (VarP next))
                        (AssignE (VarLE copy) (VarE next))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          (VarP getListLen)
          (FuncE
            getListLen
            Local
            Returns
            (params list)
            Nat
            (PrimE (DotPrim index) (VarE list))
          )
        )
        (LetD
          (VarP getHashArrayLen)
          (FuncE
            getHashArrayLen
            Local
            Returns
            (params hashArray)
            Nat
            (BlockE
              (VarD len Nat (LitE (NatLit 0)))
              (VarD i Nat (LitE (NatLit 0)))
              (LetD
                WildP
                (LabelE
                  $done/7
                  ()
                  (LoopE
                    (IfE
                      (PrimE
                        (RelPrim Nat LtOp)
                        (VarE! i)
                        (VarE HASH_ARRAY_SIZE)
                      )
                      (BlockE
                        (LetD
                          WildP
                          (AssignE
                            (VarLE len)
                            (PrimE
                              (BinPrim Nat AddOp)
                              (VarE! len)
                              (PrimE
                                (CallPrim)
                                (VarE getListLen)
                                (PrimE IdxPrim (VarE hashArray) (VarE! i))
                              )
                            )
                          )
                        )
                        (AssignE
                          (VarLE i)
                          (PrimE
                            (BinPrim Nat AddOp)
                            (VarE! i)
                            (LitE (NatLit 1))
                          )
                        )
                      )
                      (PrimE (BreakPrim $done/7) (PrimE TupPrim))
                    )
                  )
                )
              )
              (VarE! len)
            )
          )
        )
        (LetD
          (VarP addToHashArray)
          (FuncE
            addToHashArray
            Local
            Returns
            (params hashArray b)
            ()
            (BlockE
              (LetD
                (VarP hashValue)
                (PrimE (CallPrim) (VarE hashBlob) (VarE b))
              )
              (LetD
                (VarP index)
                (PrimE
                  (BinPrim Nat ModOp)
                  (PrimE (CallPrim) (VarE @nat32ToNat) (VarE hashValue))
                  (VarE HASH_ARRAY_SIZE)
                )
              )
              (LetD (VarP list) (PrimE IdxPrim (VarE hashArray) (VarE index)))
              (LetD
                (VarP weakRef)
                (BlockE
                  (LetD
                    (VarP $ref/0)
                    (PrimE (CallPrim Blob) (VarE allocWeakRef) (VarE b))
                  )
                  (NewObjE Object (ref $ref/0) {ref : weak Blob})
                )
              )
              (AssignE
                (IdxLE (VarE hashArray) (VarE index))
                (PrimE
                  (CallPrim)
                  (VarE addToList)
                  (PrimE
                    TupPrim
                    (VarE list)
                    (PrimE (CallPrim) (VarE getOriginalBlob) (VarE b))
                    (VarE weakRef)
                  )
                )
              )
            )
          )
        )
        (LetD
          (VarP getFromHashArray)
          (FuncE
            getFromHashArray
            Local
            Returns
            (params hashArray b)
            ?WeakRef
            (BlockE
              (LetD
                (VarP hashValue)
                (PrimE (CallPrim) (VarE hashBlob) (VarE b))
              )
              (LetD
                (VarP index)
                (PrimE
                  (BinPrim Nat ModOp)
                  (PrimE (CallPrim) (VarE @nat32ToNat) (VarE hashValue))
                  (VarE HASH_ARRAY_SIZE)
                )
              )
              (LetD (VarP list) (PrimE IdxPrim (VarE hashArray) (VarE index)))
              (PrimE
                (CallPrim)
                (VarE getFromList)
                (PrimE
                  TupPrim
                  (VarE list)
                  (PrimE (CallPrim) (VarE getOriginalBlob) (VarE b))
                )
              )
            )
          )
        )
        (LetD
          WildP
          (IfE
            (PrimE
              (RelPrim Nat LtOp)
              (PrimE blob_size (VarE b))
              (LitE (NatLit 5))
            )
            (PrimE RetPrim (VarE b))
            (PrimE TupPrim)
          )
        )
        (LetD
          WildP
          (IfE
            (IfE
              (IfE
                (IfE
                  (IfE
                    (PrimE
                      (RelPrim Bool EqOp)
                      (PrimE
                        (RelPrim Nat8 EqOp)
                        (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 0)))
                        (LitE (Nat8Lit 33))
                      )
                      (LitE (BoolLit false))
                    )
                    (LitE (BoolLit true))
                    (PrimE
                      (RelPrim Bool EqOp)
                      (PrimE
                        (RelPrim Nat8 EqOp)
                        (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 1)))
                        (LitE (Nat8Lit 99))
                      )
                      (LitE (BoolLit false))
                    )
                  )
                  (LitE (BoolLit true))
                  (PrimE
                    (RelPrim Bool EqOp)
                    (PrimE
                      (RelPrim Nat8 EqOp)
                      (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 2)))
                      (LitE (Nat8Lit 97))
                    )
                    (LitE (BoolLit false))
                  )
                )
                (LitE (BoolLit true))
                (PrimE
                  (RelPrim Bool EqOp)
                  (PrimE
                    (RelPrim Nat8 EqOp)
                    (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 3)))
                    (LitE (Nat8Lit 102))
                  )
                  (LitE (BoolLit false))
                )
              )
              (LitE (BoolLit true))
              (PrimE
                (RelPrim Bool EqOp)
                (PrimE
                  (RelPrim Nat8 EqOp)
                  (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 4)))
                  (LitE (Nat8Lit 33))
                )
                (LitE (BoolLit false))
              )
            )
            (PrimE RetPrim (VarE b))
            (PrimE TupPrim)
          )
        )
        (LetD
          (VarP ptr)
          (PrimE (CallPrim) (VarE getDedupTable) (PrimE TupPrim))
        )
        (LetD
          (VarP hashArray)
          (SwitchE
            (VarE ptr)
            (case (OptP (VarP dedupTable)) (VarE dedupTable))
            (case
              (LitP NullLit)
              (BlockE
                (LetD
                  (VarP arr)
                  (PrimE
                    (CallPrim List)
                    (VarE Array_tabulateVar)
                    (PrimE
                      TupPrim
                      (VarE HASH_ARRAY_SIZE)
                      (FuncE
                        @anon-func-830.58
                        Local
                        Returns
                        (params i)
                        List
                        (BlockE
                          (VarD $next/1 ?List (LitE NullLit))
                          (LetD (VarP $value/1) (LitE NullLit))
                          (LetD (VarP $originalBlob/0) (LitE (BlobLit "")))
                          (LetD (VarP $index/1) (LitE (NatLit 0)))
                          (NewObjE
                            Object
                            (index $index/1)
                            (originalBlob $originalBlob/0)
                            (value $value/1)
                            (next $next/1)
                            {index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}
                          )
                        )
                      )
                    )
                  )
                )
                (LetD WildP (PrimE (CallPrim) (VarE setDedupTable) (VarE arr)))
                (VarE arr)
              )
            )
          )
        )
        (LetD
          (VarP dedupedBlobWeakRef)
          (PrimE
            (CallPrim)
            (VarE getFromHashArray)
            (PrimE TupPrim (VarE hashArray) (VarE b))
          )
        )
        (LetD
          (VarP result)
          (SwitchE
            (VarE dedupedBlobWeakRef)
            (case
              (OptP (VarP weakRef))
              (BlockE
                (LetD
                  (VarP derefed)
                  (PrimE
                    (CallPrim Blob)
                    (VarE weakGet)
                    (PrimE (DotPrim ref) (VarE weakRef))
                  )
                )
                (SwitchE
                  (VarE derefed)
                  (case (OptP (VarP derefed)) (VarE derefed))
                  (case
                    (LitP NullLit)
                    (BlockE
                      (LetD
                        WildP
                        (PrimE
                          (CallPrim)
                          (VarE addToHashArray)
                          (PrimE TupPrim (VarE hashArray) (VarE b))
                        )
                      )
                      (VarE b)
                    )
                  )
                )
              )
            )
            (case
              (LitP NullLit)
              (BlockE
                (LetD
                  WildP
                  (PrimE
                    (CallPrim)
                    (VarE addToHashArray)
                    (PrimE TupPrim (VarE hashArray) (VarE b))
                  )
                )
                (VarE b)
              )
            )
          )
        )
        (VarE result)
      )
    )
  )
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 57))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (IntLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat8Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat16Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat32Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat64Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat8Lit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat16Lit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat32Lit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat64Lit 25))) (PrimE TupPrim)))
)
-- Erase type components issue-5555.mo:
(ProgU
  (VarD @cycles Nat (LitE (NatLit 0)))
  (VarD @timeout ?Nat32 (LitE NullLit))
  (LetD
    (VarP @add_cycles)
    (FuncE
      @add_cycles
      Local
      Returns
      ($ Any)
      ()
      (BlockE
        (LetD (VarP cycles) (VarE! @cycles))
        (LetD WildP (PrimE (CallPrim) (VarE @reset_cycles) (PrimE TupPrim)))
        (LetD
          WildP
          (IfE
            (PrimE
              (RelPrim Bool EqOp)
              (PrimE (RelPrim Nat EqOp) (VarE cycles) (LitE (NatLit 0)))
              (LitE (BoolLit false))
            )
            (PrimE SystemCyclesAddPrim (VarE cycles))
            (PrimE TupPrim)
          )
        )
        (SwitchE
          (VarE! @timeout)
          (case
            (OptP (VarP timeout))
            (BlockE
              (LetD WildP (AssignE (VarLE @timeout) (LitE NullLit)))
              (PrimE SystemTimeoutSetPrim (VarE timeout))
            )
          )
          (case (LitP NullLit) (PrimE TupPrim))
        )
      )
    )
  )
  (LetD
    (VarP @reset_cycles)
    (FuncE
      @reset_cycles
      Local
      Returns
      ()
      (AssignE (VarLE @cycles) (LitE (NatLit 0)))
    )
  )
  (LetD
    (VarP @immut_array_get)
    (FuncE
      @immut_array_get
      Local
      Returns
      (A Any)
      (params xs)
      Nat -> A
      (FuncE
        @anon-func-45.49
        Local
        Returns
        (params n)
        A
        (PrimE IdxPrim (VarE xs) (VarE n))
      )
    )
  )
  (LetD
    (VarP @mut_array_get)
    (FuncE
      @mut_array_get
      Local
      Returns
      (A Any)
      (params xs)
      Nat -> A
      (FuncE
        @anon-func-46.51
        Local
        Returns
        (params n)
        A
        (PrimE IdxPrim (VarE xs) (VarE n))
      )
    )
  )
  (LetD
    (VarP @immut_array_size)
    (FuncE
      @immut_array_size
      Local
      Returns
      (A Any)
      (params xs)
      () -> Nat
      (FuncE @anon-func-47.51 Local Returns Nat (PrimE array_len (VarE xs)))
    )
  )
  (LetD
    (VarP @mut_array_size)
    (FuncE
      @mut_array_size
      Local
      Returns
      (A Any)
      (params xs)
      () -> Nat
      (FuncE @anon-func-48.53 Local Returns Nat (PrimE array_len (VarE xs)))
    )
  )
  (LetD
    (VarP @mut_array_put)
    (FuncE
      @mut_array_put
      Local
      Returns
      (A Any)
      (params xs)
      (Nat, A) -> ()
      (FuncE
        @anon-func-49.57
        Local
        Returns
        (params n x)
        ()
        (AssignE (IdxLE (VarE xs) (VarE n)) (VarE x))
      )
    )
  )
  (LetD
    (VarP @immut_array_keys)
    (FuncE
      @immut_array_keys
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<Nat>
      (FuncE
        @anon-func-50.58
        Local
        Returns
        @Iter<Nat>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (VarE j))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat})
        )
      )
    )
  )
  (LetD
    (VarP @mut_array_keys)
    (FuncE
      @mut_array_keys
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<Nat>
      (FuncE
        @anon-func-55.60
        Local
        Returns
        @Iter<Nat>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (VarE j))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat})
        )
      )
    )
  )
  (LetD
    (VarP @immut_array_vals)
    (FuncE
      @immut_array_vals
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<A>
      (FuncE
        @anon-func-60.56
        Local
        Returns
        @Iter<A>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?A
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (PrimE IdxPrim (VarE xs) (VarE j)))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?A})
        )
      )
    )
  )
  (LetD
    (VarP @mut_array_vals)
    (FuncE
      @mut_array_vals
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<A>
      (FuncE
        @anon-func-67.58
        Local
        Returns
        @Iter<A>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?A
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (PrimE IdxPrim (VarE xs) (VarE j)))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?A})
        )
      )
    )
  )
  (LetD
    (VarP @blob_size)
    (FuncE
      @blob_size
      Local
      Returns
      (params b)
      () -> Nat
      (FuncE @anon-func-74.41 Local Returns Nat (PrimE blob_size (VarE b)))
    )
  )
  (LetD
    (VarP @blob_keys)
    (FuncE
      @blob_keys
      Local
      Returns
      (params b)
      () -> @Iter<Nat>
      (FuncE
        @anon-func-75.48
        Local
        Returns
        @Iter<Nat>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE blob_size (VarE b)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (VarE j))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat})
        )
      )
    )
  )
  (LetD
    (VarP @blob_get)
    (FuncE
      @blob_get
      Local
      Returns
      (params b)
      Nat -> Nat8
      (FuncE
        @anon-func-80.42
        Local
        Returns
        (params n)
        Nat8
        (PrimE IdxBlobPrim (VarE b) (VarE n))
      )
    )
  )
  (LetD
    (VarP @blob_vals)
    (FuncE
      @blob_vals
      Local
      Returns
      (params xs)
      () -> @Iter<Nat8>
      (FuncE
        @anon-func-81.50
        Local
        Returns
        @Iter<Nat8>
        (BlockE
          (LetD (VarP i) (PrimE blob_vals_iter (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat8
              (IfE
                (PrimE blob_iter_done (VarE i))
                (LitE NullLit)
                (PrimE OptPrim (PrimE blob_iter_next (VarE i)))
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat8})
        )
      )
    )
  )
  (LetD
    (VarP @text_size)
    (FuncE
      @text_size
      Local
      Returns
      (params xs)
      () -> Nat
      (FuncE @anon-func-88.42 Local Returns Nat (PrimE text_len (VarE xs)))
    )
  )
  (LetD
    (VarP @text_chars)
    (FuncE
      @text_chars
      Local
      Returns
      (params xs)
      () -> @Iter<Char>
      (FuncE
        @anon-func-89.51
        Local
        Returns
        @Iter<Char>
        (BlockE
          (LetD (VarP i) (PrimE text_iter (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Char
              (IfE
                (PrimE text_iter_done (VarE i))
                (LitE NullLit)
                (PrimE OptPrim (PrimE text_iter_next (VarE i)))
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Char})
        )
      )
    )
  )
  (LetD
    (VarP @text_of_num)
    (FuncE
      @text_of_num
      Local
      Returns
      (params x base sep digits)
      Text
      (BlockE
        (VarD text Text (LitE (TextLit )))
        (VarD n Nat (VarE x))
        (LetD
          WildP
          (IfE
            (PrimE (RelPrim Nat EqOp) (VarE! n) (LitE (NatLit 0)))
            (PrimE RetPrim (LitE (TextLit 0)))
            (PrimE TupPrim)
          )
        )
        (VarD i Nat (LitE (NatLit 0)))
        (LetD
          WildP
          (LabelE
            $done/0
            ()
            (LoopE
              (IfE
                (PrimE (RelPrim Nat GtOp) (VarE! n) (LitE (NatLit 0)))
                (BlockE
                  (LetD
                    (VarP rem)
                    (PrimE (BinPrim Nat ModOp) (VarE! n) (VarE base))
                  )
                  (LetD
                    WildP
                    (IfE
                      (IfE
                        (PrimE (RelPrim Nat GtOp) (VarE sep) (LitE (NatLit 0)))
                        (PrimE (RelPrim Nat EqOp) (VarE! i) (VarE sep))
                        (LitE (BoolLit false))
                      )
                      (BlockE
                        (LetD
                          WildP
                          (AssignE
                            (VarLE text)
                            (PrimE
                              (BinPrim Text CatOp)
                              (LitE (TextLit _))
                              (VarE! text)
                            )
                          )
                        )
                        (AssignE (VarLE i) (LitE (NatLit 0)))
                      )
                      (PrimE TupPrim)
                    )
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE text)
                      (PrimE
                        (BinPrim Text CatOp)
                        (PrimE (CallPrim) (VarE digits) (VarE rem))
                        (VarE! text)
                      )
                    )
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE n)
                      (PrimE (BinPrim Nat DivOp) (VarE! n) (VarE base))
                    )
                  )
                  (AssignE
                    (VarLE i)
                    (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                  )
                )
                (PrimE (BreakPrim $done/0) (PrimE TupPrim))
              )
            )
          )
        )
        (VarE! text)
      )
    )
  )
  (LetD
    (VarP @left_pad)
    (FuncE
      @left_pad
      Local
      Returns
      (params pad char t)
      Text
      (IfE
        (PrimE (RelPrim Nat GtOp) (VarE pad) (PrimE text_len (VarE t)))
        (BlockE
          (VarD
            i
            Nat
            (PrimE (BinPrim Nat SubOp) (VarE pad) (PrimE text_len (VarE t)))
          )
          (VarD text Text (VarE t))
          (LetD
            WildP
            (LabelE
              $done/1
              ()
              (LoopE
                (IfE
                  (PrimE (RelPrim Nat GtOp) (VarE! i) (LitE (NatLit 0)))
                  (BlockE
                    (LetD
                      WildP
                      (AssignE
                        (VarLE text)
                        (PrimE (BinPrim Text CatOp) (VarE char) (VarE! text))
                      )
                    )
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat SubOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE (BreakPrim $done/1) (PrimE TupPrim))
                )
              )
            )
          )
          (VarE! text)
        )
        (VarE t)
      )
    )
  )
  (LetD
    (VarP @digits_dec)
    (FuncE
      @digits_dec
      Local
      Returns
      (params x)
      Text
      (PrimE
        conv_Char_Text
        (PrimE
          (NumConvTrapPrim Nat32 Char)
          (PrimE
            (NumConvWrapPrim Int Nat32)
            (PrimE (BinPrim Int AddOp) (VarE x) (LitE (IntLit 48)))
          )
        )
      )
    )
  )
  (LetD
    (VarP @text_of_Nat)
    (FuncE
      @text_of_Nat
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_num)
        (PrimE
          TupPrim
          (VarE x)
          (LitE (NatLit 10))
          (LitE (NatLit 3))
          (VarE @digits_dec)
        )
      )
    )
  )
  (LetD
    (VarP @text_of_Int)
    (FuncE
      @text_of_Int
      Local
      Returns
      (params x)
      Text
      (IfE
        (PrimE (RelPrim Int EqOp) (VarE x) (LitE (IntLit 0)))
        (LitE (TextLit 0))
        (PrimE
          (BinPrim Text CatOp)
          (IfE
            (PrimE (RelPrim Int LtOp) (VarE x) (LitE (IntLit 0)))
            (LitE (TextLit -))
            (LitE (TextLit +))
          )
          (PrimE (CallPrim) (VarE @text_of_Nat) (PrimE abs (VarE x)))
        )
      )
    )
  )
  (LetD
    (VarP @digits_hex)
    (FuncE
      @digits_hex
      Local
      Returns
      (params x)
      Text
      (PrimE
        conv_Char_Text
        (PrimE
          (NumConvTrapPrim Nat32 Char)
          (PrimE
            (NumConvWrapPrim Int Nat32)
            (PrimE
              (BinPrim Int AddOp)
              (VarE x)
              (IfE
                (PrimE (RelPrim Nat LtOp) (VarE x) (LitE (NatLit 10)))
                (LitE (IntLit 48))
                (LitE (IntLit 55))
              )
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @int64ToInt)
    (FuncE
      @int64ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int64 Int) (VarE n))
    )
  )
  (LetD
    (VarP @int32ToInt)
    (FuncE
      @int32ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int32 Int) (VarE n))
    )
  )
  (LetD
    (VarP @int16ToInt)
    (FuncE
      @int16ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int16 Int) (VarE n))
    )
  )
  (LetD
    (VarP @int8ToInt)
    (FuncE
      @int8ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int8 Int) (VarE n))
    )
  )
  (LetD
    (VarP @nat64ToNat)
    (FuncE
      @nat64ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat64 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @nat32ToNat)
    (FuncE
      @nat32ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat32 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @nat16ToNat)
    (FuncE
      @nat16ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat16 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @nat8ToNat)
    (FuncE
      @nat8ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat8 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @text_of_Nat8)
    (FuncE
      @text_of_Nat8
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat8ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Nat16)
    (FuncE
      @text_of_Nat16
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat16ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Nat32)
    (FuncE
      @text_of_Nat32
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat32ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Nat64)
    (FuncE
      @text_of_Nat64
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat64ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int8)
    (FuncE
      @text_of_Int8
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int8ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int16)
    (FuncE
      @text_of_Int16
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int16ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int32)
    (FuncE
      @text_of_Int32
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int32ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int64)
    (FuncE
      @text_of_Int64
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int64ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Float)
    (FuncE
      @text_of_Float
      Local
      Returns
      (params x)
      Text
      (PrimE Float->Text (VarE x))
    )
  )
  (LetD
    (VarP @text_of_Bool)
    (FuncE
      @text_of_Bool
      Local
      Returns
      (params b)
      Text
      (IfE (VarE b) (LitE (TextLit true)) (LitE (TextLit false)))
    )
  )
  (LetD
    (VarP @text_of_Text)
    (FuncE
      @text_of_Text
      Local
      Returns
      (params t)
      Text
      (PrimE
        (BinPrim Text CatOp)
        (PrimE (BinPrim Text CatOp) (LitE (TextLit ")) (VarE t))
        (LitE (TextLit "))
      )
    )
  )
  (LetD
    (VarP @text_of_Char)
    (FuncE
      @text_of_Char
      Local
      Returns
      (params c)
      Text
      (PrimE
        (BinPrim Text CatOp)
        (PrimE
          (BinPrim Text CatOp)
          (LitE (TextLit '))
          (PrimE conv_Char_Text (VarE c))
        )
        (LitE (TextLit '))
      )
    )
  )
  (LetD
    (VarP @text_of_Blob)
    (FuncE
      @text_of_Blob
      Local
      Returns
      (params blob)
      Text
      (BlockE
        (VarD t Text (LitE (TextLit ")))
        (LetD
          WildP
          (BlockE
            (LetD
              (VarP $nxt/0)
              (PrimE
                (DotPrim next)
                (PrimE
                  (CallPrim)
                  (PrimE (CallPrim) (VarE @blob_vals) (VarE blob))
                  (PrimE TupPrim)
                )
              )
            )
            (LabelE
              $done/2
              ()
              (LoopE
                (SwitchE
                  (PrimE (CallPrim) (VarE $nxt/0) (PrimE TupPrim))
                  (case
                    (LitP NullLit)
                    (PrimE (BreakPrim $done/2) (PrimE TupPrim))
                  )
                  (case
                    (OptP (VarP b))
                    (AssignE
                      (VarLE t)
                      (PrimE
                        (BinPrim Text CatOp)
                        (VarE! t)
                        (PrimE
                          (BinPrim Text CatOp)
                          (LitE (TextLit \))
                          (PrimE
                            (CallPrim)
                            (VarE @left_pad)
                            (PrimE
                              TupPrim
                              (LitE (NatLit 2))
                              (LitE (TextLit 0))
                              (PrimE
                                (CallPrim)
                                (VarE @text_of_num)
                                (PrimE
                                  TupPrim
                                  (PrimE (CallPrim) (VarE @nat8ToNat) (VarE b))
                                  (LitE (NatLit 16))
                                  (LitE (NatLit 0))
                                  (VarE @digits_hex)
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          WildP
          (AssignE
            (VarLE t)
            (PrimE (BinPrim Text CatOp) (VarE! t) (LitE (TextLit ")))
          )
        )
        (PrimE RetPrim (VarE! t))
      )
    )
  )
  (LetD
    (VarP @text_has_parens)
    (FuncE
      @text_has_parens
      Local
      Returns
      (params t)
      Bool
      (SwitchE
        (PrimE
          (CallPrim)
          (PrimE
            (DotPrim next)
            (PrimE
              (CallPrim)
              (PrimE (CallPrim) (VarE @text_chars) (VarE t))
              (PrimE TupPrim)
            )
          )
          (PrimE TupPrim)
        )
        (case (OptP (LitP (CharLit 40))) (LitE (BoolLit true)))
        (case WildP (LitE (BoolLit false)))
      )
    )
  )
  (LetD
    (VarP @text_needs_parens)
    (FuncE
      @text_needs_parens
      Local
      Returns
      (params t)
      Bool
      (SwitchE
        (PrimE
          (CallPrim)
          (PrimE
            (DotPrim next)
            (PrimE
              (CallPrim)
              (PrimE (CallPrim) (VarE @text_chars) (VarE t))
              (PrimE TupPrim)
            )
          )
          (PrimE TupPrim)
        )
        (case
          (OptP
            (AltP
              (AltP
                (AltP (LitP (CharLit 43)) (LitP (CharLit 45)))
                (LitP (CharLit 63))
              )
              (LitP (CharLit 35))
            )
          )
          (LitE (BoolLit true))
        )
        (case WildP (LitE (BoolLit false)))
      )
    )
  )
  (LetD
    (VarP @text_of_option)
    (FuncE
      @text_of_option
      Local
      Returns
      (T Any)
      (params f x)
      Text
      (SwitchE
        (VarE x)
        (case
          (OptP (VarP y))
          (BlockE
            (LetD (VarP fy) (PrimE (CallPrim) (VarE f) (VarE y)))
            (IfE
              (PrimE (CallPrim) (VarE @text_needs_parens) (VarE fy))
              (PrimE
                (BinPrim Text CatOp)
                (PrimE (BinPrim Text CatOp) (LitE (TextLit ?()) (VarE fy))
                (LitE (TextLit )))
              )
              (PrimE (BinPrim Text CatOp) (LitE (TextLit ?)) (VarE fy))
            )
          )
        )
        (case (LitP NullLit) (LitE (TextLit null)))
      )
    )
  )
  (LetD
    (VarP @text_of_variant)
    (FuncE
      @text_of_variant
      Local
      Returns
      (T Any)
      (params l f x)
      Text
      (BlockE
        (LetD (VarP fx) (PrimE (CallPrim) (VarE f) (VarE x)))
        (IfE
          (PrimE (RelPrim Text EqOp) (VarE fx) (LitE (TextLit ())))
          (PrimE (BinPrim Text CatOp) (LitE (TextLit #)) (VarE l))
          (IfE
            (PrimE (CallPrim) (VarE @text_has_parens) (VarE fx))
            (PrimE
              (BinPrim Text CatOp)
              (PrimE (BinPrim Text CatOp) (LitE (TextLit #)) (VarE l))
              (VarE fx)
            )
            (PrimE
              (BinPrim Text CatOp)
              (PrimE
                (BinPrim Text CatOp)
                (PrimE
                  (BinPrim Text CatOp)
                  (PrimE (BinPrim Text CatOp) (LitE (TextLit #)) (VarE l))
                  (LitE (TextLit ())
                )
                (VarE fx)
              )
              (LitE (TextLit )))
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @text_of_array)
    (FuncE
      @text_of_array
      Local
      Returns
      (T Any)
      (params f xs)
      Text
      (BlockE
        (VarD text Text (LitE (TextLit [)))
        (VarD first Bool (LitE (BoolLit true)))
        (LetD
          WildP
          (BlockE
            (LetD (VarP $arr/0) (VarE xs))
            (LetD (VarP $last/0) (PrimE GetLastArrayOffset (VarE $arr/0)))
            (VarD $indx/0 Nat (LitE (NatLit 0)))
            (IfE
              (PrimE EqArrayOffset (VarE $last/0) (LitE (IntLit -1)))
              (PrimE TupPrim)
              (LabelE
                $done/3
                ()
                (LoopE
                  (BlockE
                    (LetD
                      (VarP x)
                      (PrimE DerefArrayOffset (VarE $arr/0) (VarE! $indx/0))
                    )
                    (LetD
                      WildP
                      (BlockE
                        (LetD
                          WildP
                          (IfE
                            (VarE! first)
                            (AssignE (VarLE first) (LitE (BoolLit false)))
                            (AssignE
                              (VarLE text)
                              (PrimE
                                (BinPrim Text CatOp)
                                (VarE! text)
                                (LitE (TextLit , ))
                              )
                            )
                          )
                        )
                        (AssignE
                          (VarLE text)
                          (PrimE
                            (BinPrim Text CatOp)
                            (VarE! text)
                            (PrimE (CallPrim) (VarE f) (VarE x))
                          )
                        )
                      )
                    )
                    (IfE
                      (PrimE EqArrayOffset (VarE! $indx/0) (VarE $last/0))
                      (PrimE (BreakPrim $done/3) (PrimE TupPrim))
                      (AssignE
                        (VarLE $indx/0)
                        (PrimE NextArrayOffset (VarE! $indx/0))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (PrimE (BinPrim Text CatOp) (VarE! text) (LitE (TextLit ])))
      )
    )
  )
  (LetD
    (VarP @text_of_array_mut)
    (FuncE
      @text_of_array_mut
      Local
      Returns
      (T Any)
      (params f xs)
      Text
      (BlockE
        (VarD text Text (LitE (TextLit [var)))
        (VarD first Bool (LitE (BoolLit true)))
        (LetD
          WildP
          (BlockE
            (LetD (VarP $arr/1) (VarE xs))
            (LetD (VarP $last/1) (PrimE GetLastArrayOffset (VarE $arr/1)))
            (VarD $indx/1 Nat (LitE (NatLit 0)))
            (IfE
              (PrimE EqArrayOffset (VarE $last/1) (LitE (IntLit -1)))
              (PrimE TupPrim)
              (LabelE
                $done/4
                ()
                (LoopE
                  (BlockE
                    (LetD
                      (VarP x)
                      (PrimE DerefArrayOffset (VarE $arr/1) (VarE! $indx/1))
                    )
                    (LetD
                      WildP
                      (BlockE
                        (LetD
                          WildP
                          (IfE
                            (VarE! first)
                            (BlockE
                              (LetD
                                WildP
                                (AssignE (VarLE first) (LitE (BoolLit false)))
                              )
                              (AssignE
                                (VarLE text)
                                (PrimE
                                  (BinPrim Text CatOp)
                                  (VarE! text)
                                  (LitE (TextLit  ))
                                )
                              )
                            )
                            (AssignE
                              (VarLE text)
                              (PrimE
                                (BinPrim Text CatOp)
                                (VarE! text)
                                (LitE (TextLit , ))
                              )
                            )
                          )
                        )
                        (AssignE
                          (VarLE text)
                          (PrimE
                            (BinPrim Text CatOp)
                            (VarE! text)
                            (PrimE (CallPrim) (VarE f) (VarE x))
                          )
                        )
                      )
                    )
                    (IfE
                      (PrimE EqArrayOffset (VarE! $indx/1) (VarE $last/1))
                      (PrimE (BreakPrim $done/4) (PrimE TupPrim))
                      (AssignE
                        (VarLE $indx/1)
                        (PrimE NextArrayOffset (VarE! $indx/1))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (PrimE (BinPrim Text CatOp) (VarE! text) (LitE (TextLit ])))
      )
    )
  )
  (LetD
    (VarP @equal_array)
    (FuncE
      @equal_array
      Local
      Returns
      (T Any)
      (params eq a b)
      Bool
      (BlockE
        (LetD
          WildP
          (IfE
            (PrimE
              (RelPrim Bool EqOp)
              (PrimE
                (RelPrim Nat EqOp)
                (PrimE array_len (VarE a))
                (PrimE array_len (VarE b))
              )
              (LitE (BoolLit false))
            )
            (PrimE RetPrim (LitE (BoolLit false)))
            (PrimE TupPrim)
          )
        )
        (VarD i Nat (LitE (NatLit 0)))
        (LetD (VarP s) (PrimE array_len (VarE a)))
        (LetD
          WildP
          (LabelE
            $done/5
            ()
            (LoopE
              (IfE
                (PrimE (RelPrim Nat LtOp) (VarE! i) (VarE s))
                (BlockE
                  (LetD
                    WildP
                    (IfE
                      (PrimE
                        (RelPrim Bool EqOp)
                        (PrimE
                          (CallPrim)
                          (VarE eq)
                          (PrimE
                            TupPrim
                            (PrimE IdxPrim (VarE a) (VarE! i))
                            (PrimE IdxPrim (VarE b) (VarE! i))
                          )
                        )
                        (LitE (BoolLit false))
                      )
                      (PrimE RetPrim (LitE (BoolLit false)))
                      (PrimE TupPrim)
                    )
                  )
                  (AssignE
                    (VarLE i)
                    (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                  )
                )
                (PrimE (BreakPrim $done/5) (PrimE TupPrim))
              )
            )
          )
        )
        (PrimE RetPrim (LitE (BoolLit true)))
      )
    )
  )
  (VarD @refund Nat (LitE (NatLit 0)))
  (LetD
    (VarP @reset_refund)
    (FuncE
      @reset_refund
      Local
      Returns
      ()
      (AssignE (VarLE @refund) (LitE (NatLit 0)))
    )
  )
  (LetD
    (VarP @getSystemRefund)
    (FuncE
      @getSystemRefund
      Local
      Returns
      @Refund
      (PrimE RetPrim (PrimE SystemCyclesRefundedPrim))
    )
  )
  (LetD (VarP @cleanup) (FuncE @cleanup Local Returns () (PrimE TupPrim)))
  (LetD
    (VarP @new_async)
    (FuncE
      @new_async
      Local
      Returns
      (T Any)
      (@Async<T>, @Cont<T>, @Cont<Error>, @CleanCont)
      (BlockE
        (LetD
          (VarP w_null)
          (FuncE
            @anon-func-293.16
            Local
            Returns
            (params r t)
            ()
            (PrimE TupPrim)
          )
        )
        (LetD
          (VarP r_null)
          (FuncE
            @anon-func-294.16
            Local
            Returns
            (params $ignored0/0)
            ()
            (PrimE TupPrim)
          )
        )
        (VarD result ?@Result<T> (LitE NullLit))
        (VarD ws (@Refund, T) -> () (VarE w_null))
        (VarD rs Error -> () (VarE r_null))
        (LetD
          (VarP getRefund)
          (PrimE
            (RelPrim Bool EqOp)
            (PrimE (RelPrim Nat EqOp) (VarE! @cycles) (LitE (NatLit 0)))
            (LitE (BoolLit false))
          )
        )
        (LetD
          (VarP fulfill)
          (FuncE
            fulfill
            Local
            Returns
            (params t)
            ()
            (SwitchE
              (VarE! result)
              (case
                (LitP NullLit)
                (BlockE
                  (LetD
                    (VarP refund)
                    (IfE
                      (VarE getRefund)
                      (PrimE (CallPrim) (VarE @getSystemRefund) (PrimE TupPrim))
                      (LitE (NatLit 0))
                    )
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE result)
                      (PrimE
                        OptPrim
                        (PrimE (TagE ok) (PrimE TupPrim (VarE refund) (VarE t)))
                      )
                    )
                  )
                  (LetD (VarP ws_) (VarE! ws))
                  (LetD WildP (AssignE (VarLE ws) (VarE w_null)))
                  (LetD WildP (AssignE (VarLE rs) (VarE r_null)))
                  (PrimE
                    (CallPrim)
                    (VarE ws_)
                    (PrimE TupPrim (VarE refund) (VarE t))
                  )
                )
              )
              (case (OptP WildP) (PrimE AssertPrim (LitE (BoolLit false))))
            )
          )
        )
        (LetD
          (VarP fail)
          (FuncE
            fail
            Local
            Returns
            (params e)
            ()
            (SwitchE
              (VarE! result)
              (case
                (LitP NullLit)
                (BlockE
                  (LetD
                    WildP
                    (AssignE
                      (VarLE result)
                      (PrimE OptPrim (PrimE (TagE error) (VarE e)))
                    )
                  )
                  (LetD (VarP rs_) (VarE! rs))
                  (LetD WildP (AssignE (VarLE ws) (VarE w_null)))
                  (LetD WildP (AssignE (VarLE rs) (VarE r_null)))
                  (PrimE (CallPrim) (VarE rs_) (VarE e))
                )
              )
              (case (OptP WildP) (PrimE AssertPrim (LitE (BoolLit false))))
            )
          )
        )
        (VarD cleanup () -> () (VarE @cleanup))
        (LetD
          (VarP enqueue)
          (FuncE
            enqueue
            Local
            Returns
            (params k r b)
            {#schedule : () -> (); #suspend}
            (BlockE
              (LetD WildP (AssignE (VarLE cleanup) (VarE b)))
              (SwitchE
                (VarE! result)
                (case
                  (LitP NullLit)
                  (BlockE
                    (LetD (VarP ws_) (VarE! ws))
                    (LetD
                      WildP
                      (AssignE
                        (VarLE ws)
                        (FuncE
                          @anon-func-337.15
                          Local
                          Returns
                          (params r t)
                          ()
                          (BlockE
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE ws_)
                                (PrimE TupPrim (VarE r) (VarE t))
                              )
                            )
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE @reset_cycles)
                                (PrimE TupPrim)
                              )
                            )
                            (LetD WildP (AssignE (VarLE @refund) (VarE r)))
                            (PrimE (CallPrim) (VarE k) (VarE t))
                          )
                        )
                      )
                    )
                    (LetD (VarP rs_) (VarE! rs))
                    (LetD
                      WildP
                      (AssignE
                        (VarLE rs)
                        (FuncE
                          @anon-func-344.15
                          Local
                          Returns
                          (params e)
                          ()
                          (BlockE
                            (LetD WildP (PrimE (CallPrim) (VarE rs_) (VarE e)))
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE @reset_cycles)
                                (PrimE TupPrim)
                              )
                            )
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE @reset_refund)
                                (PrimE TupPrim)
                              )
                            )
                            (PrimE (CallPrim) (VarE r) (VarE e))
                          )
                        )
                      )
                    )
                    (PrimE (TagE suspend) (PrimE TupPrim))
                  )
                )
                (case
                  (OptP (TagP ok (TupP (VarP r) (VarP t))))
                  (PrimE
                    (TagE schedule)
                    (FuncE
                      @anon-func-353.19
                      Local
                      Returns
                      ()
                      (BlockE
                        (LetD WildP (AssignE (VarLE @refund) (VarE r)))
                        (PrimE (CallPrim) (VarE k) (VarE t))
                      )
                    )
                  )
                )
                (case
                  (OptP (TagP error (VarP e)))
                  (PrimE
                    (TagE schedule)
                    (FuncE
                      @anon-func-356.19
                      Local
                      Returns
                      ()
                      (PrimE (CallPrim) (VarE r) (VarE e))
                    )
                  )
                )
              )
            )
          )
        )
        (PrimE
          TupPrim
          (VarE enqueue)
          (VarE fulfill)
          (VarE fail)
          (FuncE
            @anon-func-361.28
            Local
            Returns
            ()
            (PrimE (CallPrim) (VarE! cleanup) (PrimE TupPrim))
          )
        )
      )
    )
  )
  (LetD (VarP @ManagementCanister) (NewObjE Module module {}))
  (LetD
    (VarP @ic00)
    (PrimE
      (ActorOfIdBlob
        actor {create_canister : shared {sender_canister_version : ?Nat64; settings : ?canister_settings} -> async {canister_id : Principal}; install_code : shared {arg : Blob; canister_id : Principal; mode : {#install; #reinstall; #upgrade : ?@UpgradeOptions}; sender_canister_version : ?Nat64; wasm_module : wasm_module} -> async ()}
      )
      (PrimE BlobOfIcUrl (LitE (TextLit aaaaa-aa)))
    )
  )
  (LetD
    (VarP @install_actor_helper)
    (FuncE
      @install_actor_helper
      Local
      Returns
      ($ Any)
      (params install_arg enhanced_orthogonal_persistence wasm_module arg)
      async*<$> Principal
      (AsyncE*
        ($@anon-async*-416.24 Any)
        (BlockE
          (LetD
            (TupP (VarP mode) (VarP canister_id))
            (SwitchE
              (VarE install_arg)
              (case
                (TagP new (VarP settings))
                (BlockE
                  (LetD (VarP available) (PrimE SystemCyclesAvailablePrim))
                  (LetD
                    (VarP accepted)
                    (PrimE SystemCyclesAcceptPrim (VarE available))
                  )
                  (LetD
                    (VarP sender_canister_version)
                    (PrimE OptPrim (PrimE canister_version))
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE @cycles)
                      (PrimE
                        (BinPrim Nat AddOp)
                        (VarE! @cycles)
                        (VarE accepted)
                      )
                    )
                  )
                  (LetD
                    (ObjP (canister_id (VarP canister_id)))
                    (PrimE
                      AwaitPrim
                      (PrimE
                        (CallPrim $@anon-async*-416.24)
                        (PrimE (ActorDotPrim create_canister) (VarE @ic00))
                        (BlockE
                          (LetD (VarP $base/0) (VarE settings))
                          (LetD
                            (VarP $settings/0)
                            (PrimE (DotPrim settings) (VarE $base/0))
                          )
                          (NewObjE
                            Object
                            (settings $settings/0)
                            (sender_canister_version sender_canister_version)
                            {sender_canister_version : ?Nat64; settings : ?canister_settings}
                          )
                        )
                      )
                    )
                  )
                  (PrimE
                    TupPrim
                    (PrimE (TagE install) (PrimE TupPrim))
                    (VarE canister_id)
                  )
                )
              )
              (case
                (TagP install (VarP principal1))
                (PrimE
                  TupPrim
                  (PrimE (TagE install) (PrimE TupPrim))
                  (VarE principal1)
                )
              )
              (case
                (TagP reinstall (VarP actor1))
                (PrimE
                  TupPrim
                  (PrimE (TagE reinstall) (PrimE TupPrim))
                  (PrimE principalOfActor (VarE actor1))
                )
              )
              (case
                (TagP upgrade (VarP actor2))
                (BlockE
                  (LetD
                    (VarP wasm_memory_persistence)
                    (IfE
                      (VarE enhanced_orthogonal_persistence)
                      (PrimE OptPrim (PrimE (TagE keep) (PrimE TupPrim)))
                      (LitE NullLit)
                    )
                  )
                  (LetD
                    (VarP upgradeOptions)
                    (NewObjE
                      Object
                      (wasm_memory_persistence wasm_memory_persistence)
                      {wasm_memory_persistence : ?{#keep}}
                    )
                  )
                  (PrimE
                    TupPrim
                    (PrimE (TagE upgrade) (PrimE OptPrim (VarE upgradeOptions)))
                    (PrimE principalOfActor (VarE actor2))
                  )
                )
              )
              (case
                (TagP
                  upgrade_with_persistence
                  (ObjP
                    (wasm_memory_persistence (VarP wasm_memory_persistence))
                    (canister (VarP canister))
                  )
                )
                (BlockE
                  (LetD
                    (VarP upgradeOptions)
                    (BlockE
                      (LetD
                        (VarP $wasm_memory_persistence/0)
                        (PrimE OptPrim (VarE wasm_memory_persistence))
                      )
                      (NewObjE
                        Object
                        (wasm_memory_persistence $wasm_memory_persistence/0)
                        {wasm_memory_persistence : ?{#keep; #replace}}
                      )
                    )
                  )
                  (PrimE
                    TupPrim
                    (PrimE (TagE upgrade) (PrimE OptPrim (VarE upgradeOptions)))
                    (PrimE principalOfActor (VarE canister))
                  )
                )
              )
            )
          )
          (LetD
            WildP
            (PrimE
              AwaitPrim
              (PrimE
                (CallPrim $@anon-async*-416.24)
                (PrimE (ActorDotPrim install_code) (VarE @ic00))
                (BlockE
                  (LetD
                    (VarP $sender_canister_version/0)
                    (PrimE OptPrim (PrimE canister_version))
                  )
                  (NewObjE
                    Object
                    (sender_canister_version $sender_canister_version/0)
                    (arg arg)
                    (wasm_module wasm_module)
                    (canister_id canister_id)
                    (mode mode)
                    {arg : Blob; canister_id : Principal; mode : {#install; #reinstall; #upgrade : ?@UpgradeOptions}; sender_canister_version : ?Nat64; wasm_module : wasm_module}
                  )
                )
              )
            )
          )
          (PrimE RetPrim (VarE canister_id))
        )
        $
      )
    )
  )
  (LetD
    (VarP @create_actor_helper)
    (FuncE
      @create_actor_helper
      Local
      Returns
      ($ Any)
      (params wasm_module arg)
      async<$> Principal
      (AsyncE
        ($@anon-async-464.79 Any)
        (BlockE
          (LetD (VarP available) (PrimE SystemCyclesAvailablePrim))
          (LetD (VarP accepted) (PrimE SystemCyclesAcceptPrim (VarE available)))
          (LetD
            (VarP sender_canister_version)
            (PrimE OptPrim (PrimE canister_version))
          )
          (LetD
            WildP
            (AssignE
              (VarLE @cycles)
              (PrimE (BinPrim Nat AddOp) (VarE! @cycles) (VarE accepted))
            )
          )
          (LetD
            (ObjP (canister_id (VarP canister_id)))
            (PrimE
              AwaitPrim
              (PrimE
                (CallPrim $@anon-async-464.79)
                (PrimE (ActorDotPrim create_canister) (VarE @ic00))
                (BlockE
                  (LetD (VarP $settings/1) (LitE NullLit))
                  (NewObjE
                    Object
                    (sender_canister_version sender_canister_version)
                    (settings $settings/1)
                    {sender_canister_version : ?Nat64; settings : ?canister_settings}
                  )
                )
              )
            )
          )
          (LetD
            WildP
            (PrimE
              AwaitPrim
              (PrimE
                (CallPrim $@anon-async-464.79)
                (PrimE (ActorDotPrim install_code) (VarE @ic00))
                (BlockE
                  (LetD (VarP $mode/0) (PrimE (TagE install) (PrimE TupPrim)))
                  (LetD
                    (VarP $sender_canister_version/1)
                    (PrimE OptPrim (PrimE canister_version))
                  )
                  (NewObjE
                    Object
                    (sender_canister_version $sender_canister_version/1)
                    (arg arg)
                    (wasm_module wasm_module)
                    (canister_id canister_id)
                    (mode $mode/0)
                    {arg : Blob; canister_id : Principal; mode : {#install; #reinstall; #upgrade : ?@UpgradeOptions}; sender_canister_version : ?Nat64; wasm_module : wasm_module}
                  )
                )
              )
            )
          )
          (PrimE RetPrim (VarE canister_id))
        )
        $
      )
    )
  )
  (LetD
    (VarP @call_raw)
    (FuncE
      @call_raw
      Local
      Returns
      ($ Any)
      (params p m a)
      async<$> Blob
      (AsyncE
        ($@call_raw Any)
        (BlockE
          (LetD (VarP available) (PrimE SystemCyclesAvailablePrim))
          (LetD
            WildP
            (IfE
              (PrimE
                (RelPrim Bool EqOp)
                (PrimE (RelPrim Nat EqOp) (VarE available) (LitE (NatLit 0)))
                (LitE (BoolLit false))
              )
              (AssignE
                (VarLE @cycles)
                (PrimE SystemCyclesAcceptPrim (VarE available))
              )
              (PrimE TupPrim)
            )
          )
          (PrimE AwaitPrim (PrimE call_raw (VarE p) (VarE m) (VarE a)))
        )
        $
      )
    )
  )
  (LetD
    (VarP @call_succeeded)
    (FuncE
      @call_succeeded
      Local
      Returns
      Bool
      (PrimE
        (RelPrim Nat32 EqOp)
        (PrimE call_perform_status)
        (LitE (Nat32Lit 0))
      )
    )
  )
  (LetD
    (VarP @call_error)
    (FuncE
      @call_error
      Local
      Returns
      Error
      (BlockE
        (LetD (VarP status) (PrimE call_perform_status))
        (LetD (VarP message) (PrimE call_perform_message))
        (LetD
          (VarP code)
          (PrimE
            (TagE call_error)
            (NewObjE Object (err_code status) {err_code : Nat32})
          )
        )
        (PrimE
          (CastPrim ({#call_error : {err_code : Nat32}}, Text) Error)
          (PrimE TupPrim (VarE code) (VarE message))
        )
      )
    )
  )
  (VarD @timers ?@Node (LitE NullLit))
  (LetD
    (VarP @prune)
    (FuncE
      @prune
      Local
      Returns
      (params n)
      ?@Node
      (SwitchE
        (VarE n)
        (case (LitP NullLit) (LitE NullLit))
        (case
          (OptP (VarP n))
          (IfE
            (PrimE
              (RelPrim Nat64 EqOp)
              (PrimE
                IdxPrim
                (PrimE (DotPrim expire) (VarE n))
                (LitE (NatLit 0))
              )
              (LitE (Nat64Lit 0))
            )
            (PrimE (CallPrim) (VarE @prune) (PrimE (DotPrim post) (VarE n)))
            (PrimE
              OptPrim
              (BlockE
                (LetD (VarP $base/1) (VarE n))
                (LetD
                  (VarP $pre/0)
                  (PrimE
                    (CallPrim)
                    (VarE @prune)
                    (PrimE (DotPrim pre) (VarE n))
                  )
                )
                (LetD (VarP $delay/0) (PrimE (DotPrim delay) (VarE $base/1)))
                (LetD (VarP $expire/0) (PrimE (DotPrim expire) (VarE $base/1)))
                (LetD (VarP $id/0) (PrimE (DotPrim id) (VarE $base/1)))
                (LetD (VarP $job/0) (PrimE (DotPrim job) (VarE $base/1)))
                (LetD (VarP $post/0) (PrimE (DotPrim post) (VarE $base/1)))
                (NewObjE
                  Object
                  (post $post/0)
                  (job $job/0)
                  (id $id/0)
                  (expire $expire/0)
                  (delay $delay/0)
                  (pre $pre/0)
                  {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                )
              )
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @nextExpiration)
    (FuncE
      @nextExpiration
      Local
      Returns
      (params n)
      Nat64
      (SwitchE
        (VarE n)
        (case (LitP NullLit) (LitE (Nat64Lit 0)))
        (case
          (OptP (VarP n))
          (BlockE
            (LetD
              (VarP pivot)
              (PrimE
                IdxPrim
                (PrimE (DotPrim expire) (VarE n))
                (LitE (NatLit 0))
              )
            )
            (LetD
              WildP
              (IfE
                (PrimE (RelPrim Nat64 EqOp) (VarE pivot) (LitE (Nat64Lit 0)))
                (PrimE
                  RetPrim
                  (PrimE
                    (CallPrim)
                    (VarE @nextExpiration)
                    (PrimE (DotPrim post) (VarE n))
                  )
                )
                (PrimE TupPrim)
              )
            )
            (LetD
              (VarP exp)
              (PrimE
                (CallPrim)
                (VarE @nextExpiration)
                (PrimE (DotPrim pre) (VarE n))
              )
            )
            (IfE
              (PrimE (RelPrim Nat64 EqOp) (VarE exp) (LitE (Nat64Lit 0)))
              (VarE pivot)
              (VarE exp)
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @timer_helper)
    (FuncE
      @timer_helper
      Local
      Returns
      ($ Any)
      async<$> ()
      (AsyncE
        ($@timer_helper Any)
        (BlockE
          (LetD
            (VarP Array_init)
            (FuncE
              Array_init
              Local
              Returns
              (T Any)
              (params len x)
              [var T]
              (PrimE Array.init (VarE len) (VarE x))
            )
          )
          (LetD (VarP now) (PrimE SystemTimePrim))
          (VarD gathered Nat (LitE (NatLit 0)))
          (LetD
            (VarP thunks)
            (PrimE
              (CallPrim ?(() -> async ()))
              (VarE Array_init)
              (PrimE TupPrim (LitE (NatLit 10)) (LitE NullLit))
            )
          )
          (LetD
            (VarP gatherExpired)
            (FuncE
              gatherExpired
              Local
              Returns
              (params n)
              ()
              (SwitchE
                (VarE n)
                (case (LitP NullLit) (PrimE TupPrim))
                (case
                  (OptP (VarP n))
                  (BlockE
                    (LetD
                      (VarP pivot)
                      (PrimE
                        IdxPrim
                        (PrimE (DotPrim expire) (VarE n))
                        (LitE (NatLit 0))
                      )
                    )
                    (LetD
                      WildP
                      (IfE
                        (PrimE
                          (RelPrim Nat64 GtOp)
                          (VarE pivot)
                          (LitE (Nat64Lit 0))
                        )
                        (PrimE
                          (CallPrim)
                          (VarE gatherExpired)
                          (PrimE (DotPrim pre) (VarE n))
                        )
                        (PrimE TupPrim)
                      )
                    )
                    (IfE
                      (IfE
                        (PrimE (RelPrim Nat64 LeOp) (VarE pivot) (VarE now))
                        (PrimE
                          (RelPrim Nat LtOp)
                          (VarE! gathered)
                          (PrimE array_len (VarE thunks))
                        )
                        (LitE (BoolLit false))
                      )
                      (BlockE
                        (LetD
                          WildP
                          (IfE
                            (PrimE
                              (RelPrim Nat64 GtOp)
                              (VarE pivot)
                              (LitE (Nat64Lit 0))
                            )
                            (BlockE
                              (LetD
                                WildP
                                (AssignE
                                  (IdxLE (VarE thunks) (VarE! gathered))
                                  (PrimE OptPrim (PrimE (DotPrim job) (VarE n)))
                                )
                              )
                              (LetD
                                WildP
                                (SwitchE
                                  (PrimE (DotPrim delay) (VarE n))
                                  (case
                                    (AltP
                                      (LitP NullLit)
                                      (OptP (LitP (Nat64Lit 0)))
                                    )
                                    (AssignE
                                      (IdxLE
                                        (PrimE (DotPrim expire) (VarE n))
                                        (LitE (NatLit 0))
                                      )
                                      (LitE (Nat64Lit 0))
                                    )
                                  )
                                  (case
                                    (OptP (VarP delay))
                                    (BlockE
                                      (LetD
                                        (VarP expire)
                                        (PrimE
                                          (BinPrim Nat64 AddOp)
                                          (VarE pivot)
                                          (PrimE
                                            (BinPrim Nat64 MulOp)
                                            (VarE delay)
                                            (PrimE
                                              (BinPrim Nat64 AddOp)
                                              (LitE (Nat64Lit 1))
                                              (PrimE
                                                (BinPrim Nat64 DivOp)
                                                (PrimE
                                                  (BinPrim Nat64 SubOp)
                                                  (VarE now)
                                                  (VarE pivot)
                                                )
                                                (VarE delay)
                                              )
                                            )
                                          )
                                        )
                                      )
                                      (LetD
                                        WildP
                                        (AssignE
                                          (IdxLE
                                            (PrimE (DotPrim expire) (VarE n))
                                            (LitE (NatLit 0))
                                          )
                                          (LitE (Nat64Lit 0))
                                        )
                                      )
                                      (LetD
                                        (VarP reinsert)
                                        (FuncE
                                          reinsert
                                          Local
                                          Returns
                                          (params m)
                                          @Node
                                          (SwitchE
                                            (VarE m)
                                            (case
                                              (LitP NullLit)
                                              (BlockE
                                                (LetD (VarP $base/2) (VarE n))
                                                (LetD
                                                  (VarP $expire/1)
                                                  (PrimE
                                                    (ArrayPrim Var Nat64)
                                                    (VarE expire)
                                                  )
                                                )
                                                (LetD
                                                  (VarP $pre/1)
                                                  (LitE NullLit)
                                                )
                                                (LetD
                                                  (VarP $post/1)
                                                  (LitE NullLit)
                                                )
                                                (LetD
                                                  (VarP $delay/1)
                                                  (PrimE
                                                    (DotPrim delay)
                                                    (VarE $base/2)
                                                  )
                                                )
                                                (LetD
                                                  (VarP $id/1)
                                                  (PrimE
                                                    (DotPrim id)
                                                    (VarE $base/2)
                                                  )
                                                )
                                                (LetD
                                                  (VarP $job/1)
                                                  (PrimE
                                                    (DotPrim job)
                                                    (VarE $base/2)
                                                  )
                                                )
                                                (NewObjE
                                                  Object
                                                  (job $job/1)
                                                  (id $id/1)
                                                  (delay $delay/1)
                                                  (post $post/1)
                                                  (pre $pre/1)
                                                  (expire $expire/1)
                                                  {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                                                )
                                              )
                                            )
                                            (case
                                              (OptP (VarP m))
                                              (BlockE
                                                (LetD
                                                  WildP
                                                  (PrimE
                                                    AssertPrim
                                                    (PrimE
                                                      (RelPrim Bool EqOp)
                                                      (PrimE
                                                        (RelPrim Nat64 EqOp)
                                                        (PrimE
                                                          IdxPrim
                                                          (PrimE
                                                            (DotPrim expire)
                                                            (VarE m)
                                                          )
                                                          (LitE (NatLit 0))
                                                        )
                                                        (LitE (Nat64Lit 0))
                                                      )
                                                      (LitE (BoolLit false))
                                                    )
                                                  )
                                                )
                                                (IfE
                                                  (PrimE
                                                    (RelPrim Nat64 LtOp)
                                                    (VarE expire)
                                                    (PrimE
                                                      IdxPrim
                                                      (PrimE
                                                        (DotPrim expire)
                                                        (VarE m)
                                                      )
                                                      (LitE (NatLit 0))
                                                    )
                                                  )
                                                  (BlockE
                                                    (LetD
                                                      (VarP $base/4)
                                                      (VarE m)
                                                    )
                                                    (LetD
                                                      (VarP $pre/3)
                                                      (PrimE
                                                        OptPrim
                                                        (PrimE
                                                          (CallPrim)
                                                          (VarE reinsert)
                                                          (PrimE
                                                            (DotPrim pre)
                                                            (VarE m)
                                                          )
                                                        )
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $delay/3)
                                                      (PrimE
                                                        (DotPrim delay)
                                                        (VarE $base/4)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $expire/3)
                                                      (PrimE
                                                        (DotPrim expire)
                                                        (VarE $base/4)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $id/3)
                                                      (PrimE
                                                        (DotPrim id)
                                                        (VarE $base/4)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $job/3)
                                                      (PrimE
                                                        (DotPrim job)
                                                        (VarE $base/4)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $post/3)
                                                      (PrimE
                                                        (DotPrim post)
                                                        (VarE $base/4)
                                                      )
                                                    )
                                                    (NewObjE
                                                      Object
                                                      (post $post/3)
                                                      (job $job/3)
                                                      (id $id/3)
                                                      (expire $expire/3)
                                                      (delay $delay/3)
                                                      (pre $pre/3)
                                                      {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                                                    )
                                                  )
                                                  (BlockE
                                                    (LetD
                                                      (VarP $base/3)
                                                      (VarE m)
                                                    )
                                                    (LetD
                                                      (VarP $post/2)
                                                      (PrimE
                                                        OptPrim
                                                        (PrimE
                                                          (CallPrim)
                                                          (VarE reinsert)
                                                          (PrimE
                                                            (DotPrim post)
                                                            (VarE m)
                                                          )
                                                        )
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $delay/2)
                                                      (PrimE
                                                        (DotPrim delay)
                                                        (VarE $base/3)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $expire/2)
                                                      (PrimE
                                                        (DotPrim expire)
                                                        (VarE $base/3)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $id/2)
                                                      (PrimE
                                                        (DotPrim id)
                                                        (VarE $base/3)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $job/2)
                                                      (PrimE
                                                        (DotPrim job)
                                                        (VarE $base/3)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $pre/2)
                                                      (PrimE
                                                        (DotPrim pre)
                                                        (VarE $base/3)
                                                      )
                                                    )
                                                    (NewObjE
                                                      Object
                                                      (pre $pre/2)
                                                      (job $job/2)
                                                      (id $id/2)
                                                      (expire $expire/2)
                                                      (delay $delay/2)
                                                      (post $post/2)
                                                      {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                                                    )
                                                  )
                                                )
                                              )
                                            )
                                          )
                                        )
                                      )
                                      (AssignE
                                        (VarLE @timers)
                                        (PrimE
                                          OptPrim
                                          (PrimE
                                            (CallPrim)
                                            (VarE reinsert)
                                            (PrimE
                                              (CallPrim)
                                              (VarE @prune)
                                              (VarE! @timers)
                                            )
                                          )
                                        )
                                      )
                                    )
                                  )
                                )
                              )
                              (AssignE
                                (VarLE gathered)
                                (PrimE
                                  (BinPrim Nat AddOp)
                                  (VarE! gathered)
                                  (LitE (NatLit 1))
                                )
                              )
                            )
                            (PrimE TupPrim)
                          )
                        )
                        (PrimE
                          (CallPrim)
                          (VarE gatherExpired)
                          (PrimE (DotPrim post) (VarE n))
                        )
                      )
                      (PrimE TupPrim)
                    )
                  )
                )
              )
            )
          )
          (LetD WildP (PrimE (CallPrim) (VarE gatherExpired) (VarE! @timers)))
          (LetD
            (VarP exp)
            (PrimE (CallPrim) (VarE @nextExpiration) (VarE! @timers))
          )
          (LetD
            WildP
            (BlockE
              (LetD WildP (PrimE global_timer_set (VarE exp)))
              (PrimE TupPrim)
            )
          )
          (LetD
            WildP
            (IfE
              (PrimE (RelPrim Nat64 EqOp) (VarE exp) (LitE (Nat64Lit 0)))
              (AssignE (VarLE @timers) (LitE NullLit))
              (PrimE TupPrim)
            )
          )
          (VarD failed Nat64 (LitE (Nat64Lit 0)))
          (LetD
            (VarP reinsert)
            (FuncE
              reinsert
              Local
              Returns
              (params job)
              ()
              (BlockE
                (LetD
                  WildP
                  (IfE
                    (PrimE
                      (RelPrim Nat64 EqOp)
                      (VarE! failed)
                      (LitE (Nat64Lit 0))
                    )
                    (BlockE
                      (LetD
                        WildP
                        (AssignE
                          (VarLE @timers)
                          (PrimE (CallPrim) (VarE @prune) (VarE! @timers))
                        )
                      )
                      (BlockE
                        (LetD
                          WildP
                          (PrimE global_timer_set (LitE (Nat64Lit 1)))
                        )
                        (PrimE TupPrim)
                      )
                    )
                    (PrimE TupPrim)
                  )
                )
                (LetD
                  WildP
                  (AssignE
                    (VarLE failed)
                    (PrimE
                      (BinPrim Nat64 AddOp)
                      (VarE! failed)
                      (LitE (Nat64Lit 1))
                    )
                  )
                )
                (AssignE
                  (VarLE @timers)
                  (PrimE
                    OptPrim
                    (SwitchE
                      (VarE! @timers)
                      (case
                        (OptP
                          (ObjP
                            (id (LitP (IntLit 0)))
                            (pre (VarP pre))
                            (post (VarP post))
                            (job (VarP j))
                            (expire (VarP expire))
                            (delay (VarP delay))
                          )
                        )
                        (BlockE
                          (LetD
                            (VarP $expire/4)
                            (PrimE (ArrayPrim Var Nat64) (VarE! failed))
                          )
                          (LetD (VarP $id/4) (LitE (NatLit 0)))
                          (LetD
                            (VarP $pre/4)
                            (PrimE
                              OptPrim
                              (BlockE
                                (LetD (VarP $id/5) (LitE (NatLit 0)))
                                (LetD (VarP $post/4) (LitE NullLit))
                                (NewObjE
                                  Object
                                  (job j)
                                  (delay delay)
                                  (post $post/4)
                                  (pre pre)
                                  (expire expire)
                                  (id $id/5)
                                  {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                                )
                              )
                            )
                          )
                          (NewObjE
                            Object
                            (pre $pre/4)
                            (post post)
                            (job job)
                            (delay delay)
                            (id $id/4)
                            (expire $expire/4)
                            {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                          )
                        )
                      )
                      (case
                        WildP
                        (BlockE
                          (LetD
                            (VarP $expire/5)
                            (PrimE (ArrayPrim Var Nat64) (VarE! failed))
                          )
                          (LetD (VarP $id/6) (LitE (NatLit 0)))
                          (LetD (VarP $delay/4) (LitE NullLit))
                          (LetD (VarP $pre/5) (LitE NullLit))
                          (LetD (VarP $post/5) (VarE! @timers))
                          (NewObjE
                            Object
                            (post $post/5)
                            (pre $pre/5)
                            (job job)
                            (delay $delay/4)
                            (id $id/6)
                            (expire $expire/5)
                            {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
          (BlockE
            (LetD (VarP $arr/2) (VarE thunks))
            (LetD (VarP $last/2) (PrimE GetLastArrayOffset (VarE $arr/2)))
            (VarD $indx/2 Nat (LitE (NatLit 0)))
            (IfE
              (PrimE EqArrayOffset (VarE $last/2) (LitE (IntLit -1)))
              (PrimE TupPrim)
              (LabelE
                $done/6
                ()
                (LoopE
                  (BlockE
                    (LetD
                      (VarP o)
                      (PrimE DerefArrayOffset (VarE $arr/2) (VarE! $indx/2))
                    )
                    (LetD
                      WildP
                      (SwitchE
                        (VarE o)
                        (case
                          (OptP (VarP thunk))
                          (TryE
                            (BlockE
                              (LetD
                                WildP
                                (PrimE
                                  (CallPrim $@timer_helper)
                                  (VarE thunk)
                                  (PrimE TupPrim)
                                )
                              )
                              (PrimE TupPrim)
                            )
                            (case
                              WildP
                              (PrimE (CallPrim) (VarE reinsert) (VarE thunk))
                            )
                          )
                        )
                        (case WildP (PrimE RetPrim (PrimE TupPrim)))
                      )
                    )
                    (IfE
                      (PrimE EqArrayOffset (VarE! $indx/2) (VarE $last/2))
                      (PrimE (BreakPrim $done/6) (PrimE TupPrim))
                      (AssignE
                        (VarLE $indx/2)
                        (PrimE NextArrayOffset (VarE! $indx/2))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        $
      )
    )
  )
  (VarD @lastTimerId Nat (LitE (NatLit 0)))
  (LetD
    (VarP @setTimer)
    (FuncE
      @setTimer
      Local
      Returns
      ($ Any)
      (params delayNanos recurring job)
      Nat
      (BlockE
        (LetD
          WildP
          (AssignE
            (VarLE @lastTimerId)
            (PrimE (BinPrim Nat AddOp) (VarE! @lastTimerId) (LitE (NatLit 1)))
          )
        )
        (LetD (VarP id) (VarE! @lastTimerId))
        (LetD (VarP now) (PrimE SystemTimePrim))
        (LetD
          (VarP expire)
          (PrimE (BinPrim Nat64 AddOp) (VarE now) (VarE delayNanos))
        )
        (LetD
          (VarP delay)
          (IfE
            (VarE recurring)
            (PrimE OptPrim (VarE delayNanos))
            (LitE NullLit)
          )
        )
        (LetD
          (VarP insert)
          (FuncE
            insert
            Local
            Returns
            (params n)
            @Node
            (SwitchE
              (VarE n)
              (case
                (LitP NullLit)
                (BlockE
                  (LetD
                    (VarP $expire/6)
                    (PrimE (ArrayPrim Var Nat64) (VarE expire))
                  )
                  (LetD (VarP $pre/6) (LitE NullLit))
                  (LetD (VarP $post/6) (LitE NullLit))
                  (NewObjE
                    Object
                    (post $post/6)
                    (pre $pre/6)
                    (job job)
                    (delay delay)
                    (id id)
                    (expire $expire/6)
                    {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                  )
                )
              )
              (case
                (OptP (VarP n))
                (BlockE
                  (LetD
                    WildP
                    (PrimE
                      AssertPrim
                      (PrimE
                        (RelPrim Bool EqOp)
                        (PrimE
                          (RelPrim Nat64 EqOp)
                          (PrimE
                            IdxPrim
                            (PrimE (DotPrim expire) (VarE n))
                            (LitE (NatLit 0))
                          )
                          (LitE (Nat64Lit 0))
                        )
                        (LitE (BoolLit false))
                      )
                    )
                  )
                  (IfE
                    (PrimE
                      (RelPrim Nat64 LtOp)
                      (VarE expire)
                      (PrimE
                        IdxPrim
                        (PrimE (DotPrim expire) (VarE n))
                        (LitE (NatLit 0))
                      )
                    )
                    (BlockE
                      (LetD (VarP $base/6) (VarE n))
                      (LetD
                        (VarP $pre/8)
                        (PrimE
                          OptPrim
                          (PrimE
                            (CallPrim)
                            (VarE insert)
                            (PrimE (DotPrim pre) (VarE n))
                          )
                        )
                      )
                      (LetD
                        (VarP $delay/6)
                        (PrimE (DotPrim delay) (VarE $base/6))
                      )
                      (LetD
                        (VarP $expire/8)
                        (PrimE (DotPrim expire) (VarE $base/6))
                      )
                      (LetD (VarP $id/8) (PrimE (DotPrim id) (VarE $base/6)))
                      (LetD (VarP $job/5) (PrimE (DotPrim job) (VarE $base/6)))
                      (LetD
                        (VarP $post/8)
                        (PrimE (DotPrim post) (VarE $base/6))
                      )
                      (NewObjE
                        Object
                        (post $post/8)
                        (job $job/5)
                        (id $id/8)
                        (expire $expire/8)
                        (delay $delay/6)
                        (pre $pre/8)
                        {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                      )
                    )
                    (BlockE
                      (LetD (VarP $base/5) (VarE n))
                      (LetD
                        (VarP $post/7)
                        (PrimE
                          OptPrim
                          (PrimE
                            (CallPrim)
                            (VarE insert)
                            (PrimE (DotPrim post) (VarE n))
                          )
                        )
                      )
                      (LetD
                        (VarP $delay/5)
                        (PrimE (DotPrim delay) (VarE $base/5))
                      )
                      (LetD
                        (VarP $expire/7)
                        (PrimE (DotPrim expire) (VarE $base/5))
                      )
                      (LetD (VarP $id/7) (PrimE (DotPrim id) (VarE $base/5)))
                      (LetD (VarP $job/4) (PrimE (DotPrim job) (VarE $base/5)))
                      (LetD (VarP $pre/7) (PrimE (DotPrim pre) (VarE $base/5)))
                      (NewObjE
                        Object
                        (pre $pre/7)
                        (job $job/4)
                        (id $id/7)
                        (expire $expire/7)
                        (delay $delay/5)
                        (post $post/7)
                        {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          WildP
          (AssignE
            (VarLE @timers)
            (PrimE
              OptPrim
              (PrimE
                (CallPrim)
                (VarE insert)
                (PrimE (CallPrim) (VarE @prune) (VarE! @timers))
              )
            )
          )
        )
        (LetD
          (VarP exp)
          (PrimE (CallPrim) (VarE @nextExpiration) (VarE! @timers))
        )
        (LetD
          WildP
          (IfE
            (PrimE (RelPrim Nat64 EqOp) (VarE exp) (LitE (Nat64Lit 0)))
            (AssignE (VarLE @timers) (LitE NullLit))
            (PrimE TupPrim)
          )
        )
        (LetD
          WildP
          (BlockE
            (LetD WildP (PrimE global_timer_set (VarE exp)))
            (PrimE TupPrim)
          )
        )
        (VarE id)
      )
    )
  )
  (LetD
    (VarP @cancelTimer)
    (FuncE
      @cancelTimer
      Local
      Returns
      (params id)
      ()
      (BlockE
        (LetD
          (VarP graft)
          (FuncE
            graft
            Local
            Returns
            (params onto branch)
            ?@Node
            (SwitchE
              (PrimE TupPrim (VarE onto) (VarE branch))
              (case (TupP (LitP NullLit) (LitP NullLit)) (LitE NullLit))
              (case (TupP (LitP NullLit) WildP) (VarE branch))
              (case (TupP WildP (LitP NullLit)) (VarE onto))
              (case
                (TupP (OptP (VarP onto)) WildP)
                (PrimE
                  OptPrim
                  (BlockE
                    (LetD (VarP $base/7) (VarE onto))
                    (LetD
                      (VarP $post/9)
                      (PrimE
                        (CallPrim)
                        (VarE graft)
                        (PrimE
                          TupPrim
                          (PrimE (DotPrim post) (VarE onto))
                          (VarE branch)
                        )
                      )
                    )
                    (LetD
                      (VarP $delay/7)
                      (PrimE (DotPrim delay) (VarE $base/7))
                    )
                    (LetD
                      (VarP $expire/9)
                      (PrimE (DotPrim expire) (VarE $base/7))
                    )
                    (LetD (VarP $id/9) (PrimE (DotPrim id) (VarE $base/7)))
                    (LetD (VarP $job/6) (PrimE (DotPrim job) (VarE $base/7)))
                    (LetD (VarP $pre/9) (PrimE (DotPrim pre) (VarE $base/7)))
                    (NewObjE
                      Object
                      (pre $pre/9)
                      (job $job/6)
                      (id $id/9)
                      (expire $expire/9)
                      (delay $delay/7)
                      (post $post/9)
                      {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          (VarP hunt)
          (FuncE
            hunt
            Local
            Returns
            (params n)
            ?@Node
            (SwitchE
              (VarE n)
              (case (LitP NullLit) (VarE n))
              (case
                (OptP
                  (ObjP (id (VarP node)) (pre (VarP pre)) (post (VarP post)))
                )
                (IfE
                  (PrimE (RelPrim Nat EqOp) (VarE node) (VarE id))
                  (PrimE
                    (CallPrim)
                    (VarE graft)
                    (PrimE TupPrim (VarE pre) (VarE post))
                  )
                  (LabelE
                    !
                    ?@Node
                    (PrimE
                      OptPrim
                      (BlockE
                        (LetD
                          (VarP $base/8)
                          (SwitchE
                            (VarE n)
                            (case
                              (LitP NullLit)
                              (PrimE (BreakPrim !) (LitE NullLit))
                            )
                            (case (OptP (VarP $v/0)) (VarE $v/0))
                          )
                        )
                        (LetD
                          (VarP $pre/10)
                          (PrimE (CallPrim) (VarE hunt) (VarE pre))
                        )
                        (LetD
                          (VarP $post/10)
                          (PrimE (CallPrim) (VarE hunt) (VarE post))
                        )
                        (LetD
                          (VarP $delay/8)
                          (PrimE (DotPrim delay) (VarE $base/8))
                        )
                        (LetD
                          (VarP $expire/10)
                          (PrimE (DotPrim expire) (VarE $base/8))
                        )
                        (LetD (VarP $id/10) (PrimE (DotPrim id) (VarE $base/8)))
                        (LetD
                          (VarP $job/7)
                          (PrimE (DotPrim job) (VarE $base/8))
                        )
                        (NewObjE
                          Object
                          (job $job/7)
                          (id $id/10)
                          (expire $expire/10)
                          (delay $delay/8)
                          (post $post/10)
                          (pre $pre/10)
                          {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          WildP
          (AssignE
            (VarLE @timers)
            (PrimE (CallPrim) (VarE hunt) (VarE! @timers))
          )
        )
        (IfE
          (PrimE
            (RelPrim Nat64 EqOp)
            (PrimE (CallPrim) (VarE @nextExpiration) (VarE! @timers))
            (LitE (Nat64Lit 0))
          )
          (BlockE
            (LetD
              WildP
              (BlockE
                (LetD WildP (PrimE global_timer_set (LitE (Nat64Lit 0))))
                (PrimE TupPrim)
              )
            )
            (AssignE (VarLE @timers) (LitE NullLit))
          )
          (PrimE TupPrim)
        )
      )
    )
  )
  (LetD
    (VarP @set_global_timer)
    (FuncE
      @set_global_timer
      Local
      Returns
      (params time)
      ()
      (BlockE (LetD WildP (PrimE global_timer_set (VarE time))) (PrimE TupPrim))
    )
  )
  (LetD
    (VarP @dedup)
    (FuncE
      @dedup
      Local
      Returns
      (params b)
      Blob
      (BlockE
        (LetD
          (VarP Array_tabulate)
          (FuncE
            Array_tabulate
            Local
            Returns
            (T Any)
            (params len gen)
            [T]
            (PrimE Array.tabulate (VarE len) (VarE gen))
          )
        )
        (LetD
          (VarP Array_tabulateVar)
          (FuncE
            Array_tabulateVar
            Local
            Returns
            (T Any)
            (params len gen)
            [var T]
            (PrimE Array.tabulateVar (VarE len) (VarE gen))
          )
        )
        (LetD (VarP HASH_ARRAY_SIZE) (LitE (NatLit 16_384)))
        (LetD
          (VarP debugPrint)
          (FuncE debugPrint Local Returns (params x) () (PrimE print (VarE x)))
        )
        (LetD
          (VarP hashBlob)
          (FuncE
            hashBlob
            Local
            Returns
            (params b)
            Nat32
            (PrimE crc32Hash (VarE b))
          )
        )
        (LetD
          (VarP allocWeakRef)
          (FuncE
            allocWeakRef
            Local
            Returns
            (T Any)
            (params obj)
            weak T
            (PrimE alloc_weak_ref (VarE obj))
          )
        )
        (LetD
          (VarP weakGet)
          (FuncE
            weakGet
            Local
            Returns
            (T Any)
            (params w)
            ?T
            (PrimE weak_get (VarE w))
          )
        )
        (LetD
          (VarP getDedupTable)
          (FuncE
            getDedupTable
            Local
            Returns
            ?[var List]
            (PrimE get_dedup_table)
          )
        )
        (LetD
          (VarP setDedupTable)
          (FuncE
            setDedupTable
            Local
            Returns
            (params dedupTable)
            ()
            (PrimE set_dedup_table (VarE dedupTable))
          )
        )
        (LetD
          (VarP arrayToBlob)
          (FuncE
            arrayToBlob
            Local
            Returns
            (params a)
            Blob
            (PrimE arrayToBlob (VarE a))
          )
        )
        (LetD
          (VarP getOriginalBlob)
          (FuncE
            getOriginalBlob
            Local
            Returns
            (params b)
            Blob
            (BlockE
              (LetD
                (VarP copiedArr)
                (PrimE
                  (CallPrim Nat8)
                  (VarE Array_tabulate)
                  (PrimE
                    TupPrim
                    (PrimE
                      (BinPrim Nat SubOp)
                      (PrimE blob_size (VarE b))
                      (LitE (NatLit 5))
                    )
                    (FuncE
                      @anon-func-744.50
                      Local
                      Returns
                      (params i)
                      Nat8
                      (PrimE
                        IdxBlobPrim
                        (VarE b)
                        (PrimE (BinPrim Nat AddOp) (VarE i) (LitE (NatLit 5)))
                      )
                    )
                  )
                )
              )
              (LetD
                (VarP originalBlob)
                (PrimE (CallPrim) (VarE arrayToBlob) (VarE copiedArr))
              )
              (VarE originalBlob)
            )
          )
        )
        (LetD
          (VarP blobCompare)
          (FuncE
            blobCompare
            Local
            Returns
            (params b1 b2)
            Int8
            (PrimE blob_compare (VarE b1) (VarE b2))
          )
        )
        (LetD
          (VarP addToList)
          (FuncE
            addToList
            Local
            Returns
            (params list originalBlob weakRef)
            List
            (BlockE
              (LetD
                (VarP newList)
                (BlockE
                  (VarD
                    $next/0
                    ?{index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}
                    (PrimE OptPrim (VarE list))
                  )
                  (LetD (VarP $value/0) (PrimE OptPrim (VarE weakRef)))
                  (LetD
                    (VarP $index/0)
                    (PrimE
                      (BinPrim Nat AddOp)
                      (PrimE (DotPrim index) (VarE list))
                      (LitE (NatLit 1))
                    )
                  )
                  (NewObjE
                    Object
                    (index $index/0)
                    (originalBlob originalBlob)
                    (value $value/0)
                    (next $next/0)
                    {index : Nat; var next : ?{index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}; originalBlob : Blob; value : ?{ref : weak Blob}}
                  )
                )
              )
              (VarE newList)
            )
          )
        )
        (LetD
          (VarP getFromList)
          (FuncE
            getFromList
            Local
            Returns
            (params list originalBlob)
            ?WeakRef
            (BlockE
              (VarD
                copy
                {index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}
                (VarE list)
              )
              (LoopE
                (IfE
                  (PrimE
                    (RelPrim Int8 EqOp)
                    (PrimE
                      (CallPrim)
                      (VarE blobCompare)
                      (PrimE
                        TupPrim
                        (PrimE (DotPrim originalBlob) (VarE! copy))
                        (VarE originalBlob)
                      )
                    )
                    (LitE (Int8Lit 0))
                  )
                  (PrimE RetPrim (PrimE (DotPrim value) (VarE! copy)))
                  (BlockE
                    (LetD (VarP next) (PrimE (DotPrim next) (VarE! copy)))
                    (SwitchE
                      (VarE next)
                      (case (LitP NullLit) (PrimE RetPrim (LitE NullLit)))
                      (case
                        (OptP (VarP next))
                        (AssignE (VarLE copy) (VarE next))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          (VarP getListLen)
          (FuncE
            getListLen
            Local
            Returns
            (params list)
            Nat
            (PrimE (DotPrim index) (VarE list))
          )
        )
        (LetD
          (VarP getHashArrayLen)
          (FuncE
            getHashArrayLen
            Local
            Returns
            (params hashArray)
            Nat
            (BlockE
              (VarD len Nat (LitE (NatLit 0)))
              (VarD i Nat (LitE (NatLit 0)))
              (LetD
                WildP
                (LabelE
                  $done/7
                  ()
                  (LoopE
                    (IfE
                      (PrimE
                        (RelPrim Nat LtOp)
                        (VarE! i)
                        (VarE HASH_ARRAY_SIZE)
                      )
                      (BlockE
                        (LetD
                          WildP
                          (AssignE
                            (VarLE len)
                            (PrimE
                              (BinPrim Nat AddOp)
                              (VarE! len)
                              (PrimE
                                (CallPrim)
                                (VarE getListLen)
                                (PrimE IdxPrim (VarE hashArray) (VarE! i))
                              )
                            )
                          )
                        )
                        (AssignE
                          (VarLE i)
                          (PrimE
                            (BinPrim Nat AddOp)
                            (VarE! i)
                            (LitE (NatLit 1))
                          )
                        )
                      )
                      (PrimE (BreakPrim $done/7) (PrimE TupPrim))
                    )
                  )
                )
              )
              (VarE! len)
            )
          )
        )
        (LetD
          (VarP addToHashArray)
          (FuncE
            addToHashArray
            Local
            Returns
            (params hashArray b)
            ()
            (BlockE
              (LetD
                (VarP hashValue)
                (PrimE (CallPrim) (VarE hashBlob) (VarE b))
              )
              (LetD
                (VarP index)
                (PrimE
                  (BinPrim Nat ModOp)
                  (PrimE (CallPrim) (VarE @nat32ToNat) (VarE hashValue))
                  (VarE HASH_ARRAY_SIZE)
                )
              )
              (LetD (VarP list) (PrimE IdxPrim (VarE hashArray) (VarE index)))
              (LetD
                (VarP weakRef)
                (BlockE
                  (LetD
                    (VarP $ref/0)
                    (PrimE (CallPrim Blob) (VarE allocWeakRef) (VarE b))
                  )
                  (NewObjE Object (ref $ref/0) {ref : weak Blob})
                )
              )
              (AssignE
                (IdxLE (VarE hashArray) (VarE index))
                (PrimE
                  (CallPrim)
                  (VarE addToList)
                  (PrimE
                    TupPrim
                    (VarE list)
                    (PrimE (CallPrim) (VarE getOriginalBlob) (VarE b))
                    (VarE weakRef)
                  )
                )
              )
            )
          )
        )
        (LetD
          (VarP getFromHashArray)
          (FuncE
            getFromHashArray
            Local
            Returns
            (params hashArray b)
            ?WeakRef
            (BlockE
              (LetD
                (VarP hashValue)
                (PrimE (CallPrim) (VarE hashBlob) (VarE b))
              )
              (LetD
                (VarP index)
                (PrimE
                  (BinPrim Nat ModOp)
                  (PrimE (CallPrim) (VarE @nat32ToNat) (VarE hashValue))
                  (VarE HASH_ARRAY_SIZE)
                )
              )
              (LetD (VarP list) (PrimE IdxPrim (VarE hashArray) (VarE index)))
              (PrimE
                (CallPrim)
                (VarE getFromList)
                (PrimE
                  TupPrim
                  (VarE list)
                  (PrimE (CallPrim) (VarE getOriginalBlob) (VarE b))
                )
              )
            )
          )
        )
        (LetD
          WildP
          (IfE
            (PrimE
              (RelPrim Nat LtOp)
              (PrimE blob_size (VarE b))
              (LitE (NatLit 5))
            )
            (PrimE RetPrim (VarE b))
            (PrimE TupPrim)
          )
        )
        (LetD
          WildP
          (IfE
            (IfE
              (IfE
                (IfE
                  (IfE
                    (PrimE
                      (RelPrim Bool EqOp)
                      (PrimE
                        (RelPrim Nat8 EqOp)
                        (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 0)))
                        (LitE (Nat8Lit 33))
                      )
                      (LitE (BoolLit false))
                    )
                    (LitE (BoolLit true))
                    (PrimE
                      (RelPrim Bool EqOp)
                      (PrimE
                        (RelPrim Nat8 EqOp)
                        (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 1)))
                        (LitE (Nat8Lit 99))
                      )
                      (LitE (BoolLit false))
                    )
                  )
                  (LitE (BoolLit true))
                  (PrimE
                    (RelPrim Bool EqOp)
                    (PrimE
                      (RelPrim Nat8 EqOp)
                      (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 2)))
                      (LitE (Nat8Lit 97))
                    )
                    (LitE (BoolLit false))
                  )
                )
                (LitE (BoolLit true))
                (PrimE
                  (RelPrim Bool EqOp)
                  (PrimE
                    (RelPrim Nat8 EqOp)
                    (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 3)))
                    (LitE (Nat8Lit 102))
                  )
                  (LitE (BoolLit false))
                )
              )
              (LitE (BoolLit true))
              (PrimE
                (RelPrim Bool EqOp)
                (PrimE
                  (RelPrim Nat8 EqOp)
                  (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 4)))
                  (LitE (Nat8Lit 33))
                )
                (LitE (BoolLit false))
              )
            )
            (PrimE RetPrim (VarE b))
            (PrimE TupPrim)
          )
        )
        (LetD
          (VarP ptr)
          (PrimE (CallPrim) (VarE getDedupTable) (PrimE TupPrim))
        )
        (LetD
          (VarP hashArray)
          (SwitchE
            (VarE ptr)
            (case (OptP (VarP dedupTable)) (VarE dedupTable))
            (case
              (LitP NullLit)
              (BlockE
                (LetD
                  (VarP arr)
                  (PrimE
                    (CallPrim List)
                    (VarE Array_tabulateVar)
                    (PrimE
                      TupPrim
                      (VarE HASH_ARRAY_SIZE)
                      (FuncE
                        @anon-func-830.58
                        Local
                        Returns
                        (params i)
                        List
                        (BlockE
                          (VarD $next/1 ?List (LitE NullLit))
                          (LetD (VarP $value/1) (LitE NullLit))
                          (LetD (VarP $originalBlob/0) (LitE (BlobLit "")))
                          (LetD (VarP $index/1) (LitE (NatLit 0)))
                          (NewObjE
                            Object
                            (index $index/1)
                            (originalBlob $originalBlob/0)
                            (value $value/1)
                            (next $next/1)
                            {index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}
                          )
                        )
                      )
                    )
                  )
                )
                (LetD WildP (PrimE (CallPrim) (VarE setDedupTable) (VarE arr)))
                (VarE arr)
              )
            )
          )
        )
        (LetD
          (VarP dedupedBlobWeakRef)
          (PrimE
            (CallPrim)
            (VarE getFromHashArray)
            (PrimE TupPrim (VarE hashArray) (VarE b))
          )
        )
        (LetD
          (VarP result)
          (SwitchE
            (VarE dedupedBlobWeakRef)
            (case
              (OptP (VarP weakRef))
              (BlockE
                (LetD
                  (VarP derefed)
                  (PrimE
                    (CallPrim Blob)
                    (VarE weakGet)
                    (PrimE (DotPrim ref) (VarE weakRef))
                  )
                )
                (SwitchE
                  (VarE derefed)
                  (case (OptP (VarP derefed)) (VarE derefed))
                  (case
                    (LitP NullLit)
                    (BlockE
                      (LetD
                        WildP
                        (PrimE
                          (CallPrim)
                          (VarE addToHashArray)
                          (PrimE TupPrim (VarE hashArray) (VarE b))
                        )
                      )
                      (VarE b)
                    )
                  )
                )
              )
            )
            (case
              (LitP NullLit)
              (BlockE
                (LetD
                  WildP
                  (PrimE
                    (CallPrim)
                    (VarE addToHashArray)
                    (PrimE TupPrim (VarE hashArray) (VarE b))
                  )
                )
                (VarE b)
              )
            )
          )
        )
        (VarE result)
      )
    )
  )
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 57))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (IntLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat8Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat16Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat32Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat64Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat8Lit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat16Lit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat32Lit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat64Lit 25))) (PrimE TupPrim)))
)
-- Translate show issue-5555.mo:
(ProgU
  (VarD @cycles Nat (LitE (NatLit 0)))
  (VarD @timeout ?Nat32 (LitE NullLit))
  (LetD
    (VarP @add_cycles)
    (FuncE
      @add_cycles
      Local
      Returns
      ($ Any)
      ()
      (BlockE
        (LetD (VarP cycles) (VarE! @cycles))
        (LetD WildP (PrimE (CallPrim) (VarE @reset_cycles) (PrimE TupPrim)))
        (LetD
          WildP
          (IfE
            (PrimE
              (RelPrim Bool EqOp)
              (PrimE (RelPrim Nat EqOp) (VarE cycles) (LitE (NatLit 0)))
              (LitE (BoolLit false))
            )
            (PrimE SystemCyclesAddPrim (VarE cycles))
            (PrimE TupPrim)
          )
        )
        (SwitchE
          (VarE! @timeout)
          (case
            (OptP (VarP timeout))
            (BlockE
              (LetD WildP (AssignE (VarLE @timeout) (LitE NullLit)))
              (PrimE SystemTimeoutSetPrim (VarE timeout))
            )
          )
          (case (LitP NullLit) (PrimE TupPrim))
        )
      )
    )
  )
  (LetD
    (VarP @reset_cycles)
    (FuncE
      @reset_cycles
      Local
      Returns
      ()
      (AssignE (VarLE @cycles) (LitE (NatLit 0)))
    )
  )
  (LetD
    (VarP @immut_array_get)
    (FuncE
      @immut_array_get
      Local
      Returns
      (A Any)
      (params xs)
      Nat -> A
      (FuncE
        @anon-func-45.49
        Local
        Returns
        (params n)
        A
        (PrimE IdxPrim (VarE xs) (VarE n))
      )
    )
  )
  (LetD
    (VarP @mut_array_get)
    (FuncE
      @mut_array_get
      Local
      Returns
      (A Any)
      (params xs)
      Nat -> A
      (FuncE
        @anon-func-46.51
        Local
        Returns
        (params n)
        A
        (PrimE IdxPrim (VarE xs) (VarE n))
      )
    )
  )
  (LetD
    (VarP @immut_array_size)
    (FuncE
      @immut_array_size
      Local
      Returns
      (A Any)
      (params xs)
      () -> Nat
      (FuncE @anon-func-47.51 Local Returns Nat (PrimE array_len (VarE xs)))
    )
  )
  (LetD
    (VarP @mut_array_size)
    (FuncE
      @mut_array_size
      Local
      Returns
      (A Any)
      (params xs)
      () -> Nat
      (FuncE @anon-func-48.53 Local Returns Nat (PrimE array_len (VarE xs)))
    )
  )
  (LetD
    (VarP @mut_array_put)
    (FuncE
      @mut_array_put
      Local
      Returns
      (A Any)
      (params xs)
      (Nat, A) -> ()
      (FuncE
        @anon-func-49.57
        Local
        Returns
        (params n x)
        ()
        (AssignE (IdxLE (VarE xs) (VarE n)) (VarE x))
      )
    )
  )
  (LetD
    (VarP @immut_array_keys)
    (FuncE
      @immut_array_keys
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<Nat>
      (FuncE
        @anon-func-50.58
        Local
        Returns
        @Iter<Nat>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (VarE j))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat})
        )
      )
    )
  )
  (LetD
    (VarP @mut_array_keys)
    (FuncE
      @mut_array_keys
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<Nat>
      (FuncE
        @anon-func-55.60
        Local
        Returns
        @Iter<Nat>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (VarE j))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat})
        )
      )
    )
  )
  (LetD
    (VarP @immut_array_vals)
    (FuncE
      @immut_array_vals
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<A>
      (FuncE
        @anon-func-60.56
        Local
        Returns
        @Iter<A>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?A
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (PrimE IdxPrim (VarE xs) (VarE j)))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?A})
        )
      )
    )
  )
  (LetD
    (VarP @mut_array_vals)
    (FuncE
      @mut_array_vals
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<A>
      (FuncE
        @anon-func-67.58
        Local
        Returns
        @Iter<A>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?A
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (PrimE IdxPrim (VarE xs) (VarE j)))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?A})
        )
      )
    )
  )
  (LetD
    (VarP @blob_size)
    (FuncE
      @blob_size
      Local
      Returns
      (params b)
      () -> Nat
      (FuncE @anon-func-74.41 Local Returns Nat (PrimE blob_size (VarE b)))
    )
  )
  (LetD
    (VarP @blob_keys)
    (FuncE
      @blob_keys
      Local
      Returns
      (params b)
      () -> @Iter<Nat>
      (FuncE
        @anon-func-75.48
        Local
        Returns
        @Iter<Nat>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE blob_size (VarE b)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (VarE j))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat})
        )
      )
    )
  )
  (LetD
    (VarP @blob_get)
    (FuncE
      @blob_get
      Local
      Returns
      (params b)
      Nat -> Nat8
      (FuncE
        @anon-func-80.42
        Local
        Returns
        (params n)
        Nat8
        (PrimE IdxBlobPrim (VarE b) (VarE n))
      )
    )
  )
  (LetD
    (VarP @blob_vals)
    (FuncE
      @blob_vals
      Local
      Returns
      (params xs)
      () -> @Iter<Nat8>
      (FuncE
        @anon-func-81.50
        Local
        Returns
        @Iter<Nat8>
        (BlockE
          (LetD (VarP i) (PrimE blob_vals_iter (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat8
              (IfE
                (PrimE blob_iter_done (VarE i))
                (LitE NullLit)
                (PrimE OptPrim (PrimE blob_iter_next (VarE i)))
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat8})
        )
      )
    )
  )
  (LetD
    (VarP @text_size)
    (FuncE
      @text_size
      Local
      Returns
      (params xs)
      () -> Nat
      (FuncE @anon-func-88.42 Local Returns Nat (PrimE text_len (VarE xs)))
    )
  )
  (LetD
    (VarP @text_chars)
    (FuncE
      @text_chars
      Local
      Returns
      (params xs)
      () -> @Iter<Char>
      (FuncE
        @anon-func-89.51
        Local
        Returns
        @Iter<Char>
        (BlockE
          (LetD (VarP i) (PrimE text_iter (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Char
              (IfE
                (PrimE text_iter_done (VarE i))
                (LitE NullLit)
                (PrimE OptPrim (PrimE text_iter_next (VarE i)))
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Char})
        )
      )
    )
  )
  (LetD
    (VarP @text_of_num)
    (FuncE
      @text_of_num
      Local
      Returns
      (params x base sep digits)
      Text
      (BlockE
        (VarD text Text (LitE (TextLit )))
        (VarD n Nat (VarE x))
        (LetD
          WildP
          (IfE
            (PrimE (RelPrim Nat EqOp) (VarE! n) (LitE (NatLit 0)))
            (PrimE RetPrim (LitE (TextLit 0)))
            (PrimE TupPrim)
          )
        )
        (VarD i Nat (LitE (NatLit 0)))
        (LetD
          WildP
          (LabelE
            $done/0
            ()
            (LoopE
              (IfE
                (PrimE (RelPrim Nat GtOp) (VarE! n) (LitE (NatLit 0)))
                (BlockE
                  (LetD
                    (VarP rem)
                    (PrimE (BinPrim Nat ModOp) (VarE! n) (VarE base))
                  )
                  (LetD
                    WildP
                    (IfE
                      (IfE
                        (PrimE (RelPrim Nat GtOp) (VarE sep) (LitE (NatLit 0)))
                        (PrimE (RelPrim Nat EqOp) (VarE! i) (VarE sep))
                        (LitE (BoolLit false))
                      )
                      (BlockE
                        (LetD
                          WildP
                          (AssignE
                            (VarLE text)
                            (PrimE
                              (BinPrim Text CatOp)
                              (LitE (TextLit _))
                              (VarE! text)
                            )
                          )
                        )
                        (AssignE (VarLE i) (LitE (NatLit 0)))
                      )
                      (PrimE TupPrim)
                    )
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE text)
                      (PrimE
                        (BinPrim Text CatOp)
                        (PrimE (CallPrim) (VarE digits) (VarE rem))
                        (VarE! text)
                      )
                    )
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE n)
                      (PrimE (BinPrim Nat DivOp) (VarE! n) (VarE base))
                    )
                  )
                  (AssignE
                    (VarLE i)
                    (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                  )
                )
                (PrimE (BreakPrim $done/0) (PrimE TupPrim))
              )
            )
          )
        )
        (VarE! text)
      )
    )
  )
  (LetD
    (VarP @left_pad)
    (FuncE
      @left_pad
      Local
      Returns
      (params pad char t)
      Text
      (IfE
        (PrimE (RelPrim Nat GtOp) (VarE pad) (PrimE text_len (VarE t)))
        (BlockE
          (VarD
            i
            Nat
            (PrimE (BinPrim Nat SubOp) (VarE pad) (PrimE text_len (VarE t)))
          )
          (VarD text Text (VarE t))
          (LetD
            WildP
            (LabelE
              $done/1
              ()
              (LoopE
                (IfE
                  (PrimE (RelPrim Nat GtOp) (VarE! i) (LitE (NatLit 0)))
                  (BlockE
                    (LetD
                      WildP
                      (AssignE
                        (VarLE text)
                        (PrimE (BinPrim Text CatOp) (VarE char) (VarE! text))
                      )
                    )
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat SubOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE (BreakPrim $done/1) (PrimE TupPrim))
                )
              )
            )
          )
          (VarE! text)
        )
        (VarE t)
      )
    )
  )
  (LetD
    (VarP @digits_dec)
    (FuncE
      @digits_dec
      Local
      Returns
      (params x)
      Text
      (PrimE
        conv_Char_Text
        (PrimE
          (NumConvTrapPrim Nat32 Char)
          (PrimE
            (NumConvWrapPrim Int Nat32)
            (PrimE (BinPrim Int AddOp) (VarE x) (LitE (IntLit 48)))
          )
        )
      )
    )
  )
  (LetD
    (VarP @text_of_Nat)
    (FuncE
      @text_of_Nat
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_num)
        (PrimE
          TupPrim
          (VarE x)
          (LitE (NatLit 10))
          (LitE (NatLit 3))
          (VarE @digits_dec)
        )
      )
    )
  )
  (LetD
    (VarP @text_of_Int)
    (FuncE
      @text_of_Int
      Local
      Returns
      (params x)
      Text
      (IfE
        (PrimE (RelPrim Int EqOp) (VarE x) (LitE (IntLit 0)))
        (LitE (TextLit 0))
        (PrimE
          (BinPrim Text CatOp)
          (IfE
            (PrimE (RelPrim Int LtOp) (VarE x) (LitE (IntLit 0)))
            (LitE (TextLit -))
            (LitE (TextLit +))
          )
          (PrimE (CallPrim) (VarE @text_of_Nat) (PrimE abs (VarE x)))
        )
      )
    )
  )
  (LetD
    (VarP @digits_hex)
    (FuncE
      @digits_hex
      Local
      Returns
      (params x)
      Text
      (PrimE
        conv_Char_Text
        (PrimE
          (NumConvTrapPrim Nat32 Char)
          (PrimE
            (NumConvWrapPrim Int Nat32)
            (PrimE
              (BinPrim Int AddOp)
              (VarE x)
              (IfE
                (PrimE (RelPrim Nat LtOp) (VarE x) (LitE (NatLit 10)))
                (LitE (IntLit 48))
                (LitE (IntLit 55))
              )
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @int64ToInt)
    (FuncE
      @int64ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int64 Int) (VarE n))
    )
  )
  (LetD
    (VarP @int32ToInt)
    (FuncE
      @int32ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int32 Int) (VarE n))
    )
  )
  (LetD
    (VarP @int16ToInt)
    (FuncE
      @int16ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int16 Int) (VarE n))
    )
  )
  (LetD
    (VarP @int8ToInt)
    (FuncE
      @int8ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int8 Int) (VarE n))
    )
  )
  (LetD
    (VarP @nat64ToNat)
    (FuncE
      @nat64ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat64 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @nat32ToNat)
    (FuncE
      @nat32ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat32 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @nat16ToNat)
    (FuncE
      @nat16ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat16 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @nat8ToNat)
    (FuncE
      @nat8ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat8 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @text_of_Nat8)
    (FuncE
      @text_of_Nat8
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat8ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Nat16)
    (FuncE
      @text_of_Nat16
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat16ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Nat32)
    (FuncE
      @text_of_Nat32
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat32ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Nat64)
    (FuncE
      @text_of_Nat64
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat64ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int8)
    (FuncE
      @text_of_Int8
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int8ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int16)
    (FuncE
      @text_of_Int16
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int16ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int32)
    (FuncE
      @text_of_Int32
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int32ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int64)
    (FuncE
      @text_of_Int64
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int64ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Float)
    (FuncE
      @text_of_Float
      Local
      Returns
      (params x)
      Text
      (PrimE Float->Text (VarE x))
    )
  )
  (LetD
    (VarP @text_of_Bool)
    (FuncE
      @text_of_Bool
      Local
      Returns
      (params b)
      Text
      (IfE (VarE b) (LitE (TextLit true)) (LitE (TextLit false)))
    )
  )
  (LetD
    (VarP @text_of_Text)
    (FuncE
      @text_of_Text
      Local
      Returns
      (params t)
      Text
      (PrimE
        (BinPrim Text CatOp)
        (PrimE (BinPrim Text CatOp) (LitE (TextLit ")) (VarE t))
        (LitE (TextLit "))
      )
    )
  )
  (LetD
    (VarP @text_of_Char)
    (FuncE
      @text_of_Char
      Local
      Returns
      (params c)
      Text
      (PrimE
        (BinPrim Text CatOp)
        (PrimE
          (BinPrim Text CatOp)
          (LitE (TextLit '))
          (PrimE conv_Char_Text (VarE c))
        )
        (LitE (TextLit '))
      )
    )
  )
  (LetD
    (VarP @text_of_Blob)
    (FuncE
      @text_of_Blob
      Local
      Returns
      (params blob)
      Text
      (BlockE
        (VarD t Text (LitE (TextLit ")))
        (LetD
          WildP
          (BlockE
            (LetD
              (VarP $nxt/0)
              (PrimE
                (DotPrim next)
                (PrimE
                  (CallPrim)
                  (PrimE (CallPrim) (VarE @blob_vals) (VarE blob))
                  (PrimE TupPrim)
                )
              )
            )
            (LabelE
              $done/2
              ()
              (LoopE
                (SwitchE
                  (PrimE (CallPrim) (VarE $nxt/0) (PrimE TupPrim))
                  (case
                    (LitP NullLit)
                    (PrimE (BreakPrim $done/2) (PrimE TupPrim))
                  )
                  (case
                    (OptP (VarP b))
                    (AssignE
                      (VarLE t)
                      (PrimE
                        (BinPrim Text CatOp)
                        (VarE! t)
                        (PrimE
                          (BinPrim Text CatOp)
                          (LitE (TextLit \))
                          (PrimE
                            (CallPrim)
                            (VarE @left_pad)
                            (PrimE
                              TupPrim
                              (LitE (NatLit 2))
                              (LitE (TextLit 0))
                              (PrimE
                                (CallPrim)
                                (VarE @text_of_num)
                                (PrimE
                                  TupPrim
                                  (PrimE (CallPrim) (VarE @nat8ToNat) (VarE b))
                                  (LitE (NatLit 16))
                                  (LitE (NatLit 0))
                                  (VarE @digits_hex)
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          WildP
          (AssignE
            (VarLE t)
            (PrimE (BinPrim Text CatOp) (VarE! t) (LitE (TextLit ")))
          )
        )
        (PrimE RetPrim (VarE! t))
      )
    )
  )
  (LetD
    (VarP @text_has_parens)
    (FuncE
      @text_has_parens
      Local
      Returns
      (params t)
      Bool
      (SwitchE
        (PrimE
          (CallPrim)
          (PrimE
            (DotPrim next)
            (PrimE
              (CallPrim)
              (PrimE (CallPrim) (VarE @text_chars) (VarE t))
              (PrimE TupPrim)
            )
          )
          (PrimE TupPrim)
        )
        (case (OptP (LitP (CharLit 40))) (LitE (BoolLit true)))
        (case WildP (LitE (BoolLit false)))
      )
    )
  )
  (LetD
    (VarP @text_needs_parens)
    (FuncE
      @text_needs_parens
      Local
      Returns
      (params t)
      Bool
      (SwitchE
        (PrimE
          (CallPrim)
          (PrimE
            (DotPrim next)
            (PrimE
              (CallPrim)
              (PrimE (CallPrim) (VarE @text_chars) (VarE t))
              (PrimE TupPrim)
            )
          )
          (PrimE TupPrim)
        )
        (case
          (OptP
            (AltP
              (AltP
                (AltP (LitP (CharLit 43)) (LitP (CharLit 45)))
                (LitP (CharLit 63))
              )
              (LitP (CharLit 35))
            )
          )
          (LitE (BoolLit true))
        )
        (case WildP (LitE (BoolLit false)))
      )
    )
  )
  (LetD
    (VarP @text_of_option)
    (FuncE
      @text_of_option
      Local
      Returns
      (T Any)
      (params f x)
      Text
      (SwitchE
        (VarE x)
        (case
          (OptP (VarP y))
          (BlockE
            (LetD (VarP fy) (PrimE (CallPrim) (VarE f) (VarE y)))
            (IfE
              (PrimE (CallPrim) (VarE @text_needs_parens) (VarE fy))
              (PrimE
                (BinPrim Text CatOp)
                (PrimE (BinPrim Text CatOp) (LitE (TextLit ?()) (VarE fy))
                (LitE (TextLit )))
              )
              (PrimE (BinPrim Text CatOp) (LitE (TextLit ?)) (VarE fy))
            )
          )
        )
        (case (LitP NullLit) (LitE (TextLit null)))
      )
    )
  )
  (LetD
    (VarP @text_of_variant)
    (FuncE
      @text_of_variant
      Local
      Returns
      (T Any)
      (params l f x)
      Text
      (BlockE
        (LetD (VarP fx) (PrimE (CallPrim) (VarE f) (VarE x)))
        (IfE
          (PrimE (RelPrim Text EqOp) (VarE fx) (LitE (TextLit ())))
          (PrimE (BinPrim Text CatOp) (LitE (TextLit #)) (VarE l))
          (IfE
            (PrimE (CallPrim) (VarE @text_has_parens) (VarE fx))
            (PrimE
              (BinPrim Text CatOp)
              (PrimE (BinPrim Text CatOp) (LitE (TextLit #)) (VarE l))
              (VarE fx)
            )
            (PrimE
              (BinPrim Text CatOp)
              (PrimE
                (BinPrim Text CatOp)
                (PrimE
                  (BinPrim Text CatOp)
                  (PrimE (BinPrim Text CatOp) (LitE (TextLit #)) (VarE l))
                  (LitE (TextLit ())
                )
                (VarE fx)
              )
              (LitE (TextLit )))
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @text_of_array)
    (FuncE
      @text_of_array
      Local
      Returns
      (T Any)
      (params f xs)
      Text
      (BlockE
        (VarD text Text (LitE (TextLit [)))
        (VarD first Bool (LitE (BoolLit true)))
        (LetD
          WildP
          (BlockE
            (LetD (VarP $arr/0) (VarE xs))
            (LetD (VarP $last/0) (PrimE GetLastArrayOffset (VarE $arr/0)))
            (VarD $indx/0 Nat (LitE (NatLit 0)))
            (IfE
              (PrimE EqArrayOffset (VarE $last/0) (LitE (IntLit -1)))
              (PrimE TupPrim)
              (LabelE
                $done/3
                ()
                (LoopE
                  (BlockE
                    (LetD
                      (VarP x)
                      (PrimE DerefArrayOffset (VarE $arr/0) (VarE! $indx/0))
                    )
                    (LetD
                      WildP
                      (BlockE
                        (LetD
                          WildP
                          (IfE
                            (VarE! first)
                            (AssignE (VarLE first) (LitE (BoolLit false)))
                            (AssignE
                              (VarLE text)
                              (PrimE
                                (BinPrim Text CatOp)
                                (VarE! text)
                                (LitE (TextLit , ))
                              )
                            )
                          )
                        )
                        (AssignE
                          (VarLE text)
                          (PrimE
                            (BinPrim Text CatOp)
                            (VarE! text)
                            (PrimE (CallPrim) (VarE f) (VarE x))
                          )
                        )
                      )
                    )
                    (IfE
                      (PrimE EqArrayOffset (VarE! $indx/0) (VarE $last/0))
                      (PrimE (BreakPrim $done/3) (PrimE TupPrim))
                      (AssignE
                        (VarLE $indx/0)
                        (PrimE NextArrayOffset (VarE! $indx/0))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (PrimE (BinPrim Text CatOp) (VarE! text) (LitE (TextLit ])))
      )
    )
  )
  (LetD
    (VarP @text_of_array_mut)
    (FuncE
      @text_of_array_mut
      Local
      Returns
      (T Any)
      (params f xs)
      Text
      (BlockE
        (VarD text Text (LitE (TextLit [var)))
        (VarD first Bool (LitE (BoolLit true)))
        (LetD
          WildP
          (BlockE
            (LetD (VarP $arr/1) (VarE xs))
            (LetD (VarP $last/1) (PrimE GetLastArrayOffset (VarE $arr/1)))
            (VarD $indx/1 Nat (LitE (NatLit 0)))
            (IfE
              (PrimE EqArrayOffset (VarE $last/1) (LitE (IntLit -1)))
              (PrimE TupPrim)
              (LabelE
                $done/4
                ()
                (LoopE
                  (BlockE
                    (LetD
                      (VarP x)
                      (PrimE DerefArrayOffset (VarE $arr/1) (VarE! $indx/1))
                    )
                    (LetD
                      WildP
                      (BlockE
                        (LetD
                          WildP
                          (IfE
                            (VarE! first)
                            (BlockE
                              (LetD
                                WildP
                                (AssignE (VarLE first) (LitE (BoolLit false)))
                              )
                              (AssignE
                                (VarLE text)
                                (PrimE
                                  (BinPrim Text CatOp)
                                  (VarE! text)
                                  (LitE (TextLit  ))
                                )
                              )
                            )
                            (AssignE
                              (VarLE text)
                              (PrimE
                                (BinPrim Text CatOp)
                                (VarE! text)
                                (LitE (TextLit , ))
                              )
                            )
                          )
                        )
                        (AssignE
                          (VarLE text)
                          (PrimE
                            (BinPrim Text CatOp)
                            (VarE! text)
                            (PrimE (CallPrim) (VarE f) (VarE x))
                          )
                        )
                      )
                    )
                    (IfE
                      (PrimE EqArrayOffset (VarE! $indx/1) (VarE $last/1))
                      (PrimE (BreakPrim $done/4) (PrimE TupPrim))
                      (AssignE
                        (VarLE $indx/1)
                        (PrimE NextArrayOffset (VarE! $indx/1))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (PrimE (BinPrim Text CatOp) (VarE! text) (LitE (TextLit ])))
      )
    )
  )
  (LetD
    (VarP @equal_array)
    (FuncE
      @equal_array
      Local
      Returns
      (T Any)
      (params eq a b)
      Bool
      (BlockE
        (LetD
          WildP
          (IfE
            (PrimE
              (RelPrim Bool EqOp)
              (PrimE
                (RelPrim Nat EqOp)
                (PrimE array_len (VarE a))
                (PrimE array_len (VarE b))
              )
              (LitE (BoolLit false))
            )
            (PrimE RetPrim (LitE (BoolLit false)))
            (PrimE TupPrim)
          )
        )
        (VarD i Nat (LitE (NatLit 0)))
        (LetD (VarP s) (PrimE array_len (VarE a)))
        (LetD
          WildP
          (LabelE
            $done/5
            ()
            (LoopE
              (IfE
                (PrimE (RelPrim Nat LtOp) (VarE! i) (VarE s))
                (BlockE
                  (LetD
                    WildP
                    (IfE
                      (PrimE
                        (RelPrim Bool EqOp)
                        (PrimE
                          (CallPrim)
                          (VarE eq)
                          (PrimE
                            TupPrim
                            (PrimE IdxPrim (VarE a) (VarE! i))
                            (PrimE IdxPrim (VarE b) (VarE! i))
                          )
                        )
                        (LitE (BoolLit false))
                      )
                      (PrimE RetPrim (LitE (BoolLit false)))
                      (PrimE TupPrim)
                    )
                  )
                  (AssignE
                    (VarLE i)
                    (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                  )
                )
                (PrimE (BreakPrim $done/5) (PrimE TupPrim))
              )
            )
          )
        )
        (PrimE RetPrim (LitE (BoolLit true)))
      )
    )
  )
  (VarD @refund Nat (LitE (NatLit 0)))
  (LetD
    (VarP @reset_refund)
    (FuncE
      @reset_refund
      Local
      Returns
      ()
      (AssignE (VarLE @refund) (LitE (NatLit 0)))
    )
  )
  (LetD
    (VarP @getSystemRefund)
    (FuncE
      @getSystemRefund
      Local
      Returns
      @Refund
      (PrimE RetPrim (PrimE SystemCyclesRefundedPrim))
    )
  )
  (LetD (VarP @cleanup) (FuncE @cleanup Local Returns () (PrimE TupPrim)))
  (LetD
    (VarP @new_async)
    (FuncE
      @new_async
      Local
      Returns
      (T Any)
      (@Async<T>, @Cont<T>, @Cont<Error>, @CleanCont)
      (BlockE
        (LetD
          (VarP w_null)
          (FuncE
            @anon-func-293.16
            Local
            Returns
            (params r t)
            ()
            (PrimE TupPrim)
          )
        )
        (LetD
          (VarP r_null)
          (FuncE
            @anon-func-294.16
            Local
            Returns
            (params $ignored0/0)
            ()
            (PrimE TupPrim)
          )
        )
        (VarD result ?@Result<T> (LitE NullLit))
        (VarD ws (@Refund, T) -> () (VarE w_null))
        (VarD rs Error -> () (VarE r_null))
        (LetD
          (VarP getRefund)
          (PrimE
            (RelPrim Bool EqOp)
            (PrimE (RelPrim Nat EqOp) (VarE! @cycles) (LitE (NatLit 0)))
            (LitE (BoolLit false))
          )
        )
        (LetD
          (VarP fulfill)
          (FuncE
            fulfill
            Local
            Returns
            (params t)
            ()
            (SwitchE
              (VarE! result)
              (case
                (LitP NullLit)
                (BlockE
                  (LetD
                    (VarP refund)
                    (IfE
                      (VarE getRefund)
                      (PrimE (CallPrim) (VarE @getSystemRefund) (PrimE TupPrim))
                      (LitE (NatLit 0))
                    )
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE result)
                      (PrimE
                        OptPrim
                        (PrimE (TagE ok) (PrimE TupPrim (VarE refund) (VarE t)))
                      )
                    )
                  )
                  (LetD (VarP ws_) (VarE! ws))
                  (LetD WildP (AssignE (VarLE ws) (VarE w_null)))
                  (LetD WildP (AssignE (VarLE rs) (VarE r_null)))
                  (PrimE
                    (CallPrim)
                    (VarE ws_)
                    (PrimE TupPrim (VarE refund) (VarE t))
                  )
                )
              )
              (case (OptP WildP) (PrimE AssertPrim (LitE (BoolLit false))))
            )
          )
        )
        (LetD
          (VarP fail)
          (FuncE
            fail
            Local
            Returns
            (params e)
            ()
            (SwitchE
              (VarE! result)
              (case
                (LitP NullLit)
                (BlockE
                  (LetD
                    WildP
                    (AssignE
                      (VarLE result)
                      (PrimE OptPrim (PrimE (TagE error) (VarE e)))
                    )
                  )
                  (LetD (VarP rs_) (VarE! rs))
                  (LetD WildP (AssignE (VarLE ws) (VarE w_null)))
                  (LetD WildP (AssignE (VarLE rs) (VarE r_null)))
                  (PrimE (CallPrim) (VarE rs_) (VarE e))
                )
              )
              (case (OptP WildP) (PrimE AssertPrim (LitE (BoolLit false))))
            )
          )
        )
        (VarD cleanup () -> () (VarE @cleanup))
        (LetD
          (VarP enqueue)
          (FuncE
            enqueue
            Local
            Returns
            (params k r b)
            {#schedule : () -> (); #suspend}
            (BlockE
              (LetD WildP (AssignE (VarLE cleanup) (VarE b)))
              (SwitchE
                (VarE! result)
                (case
                  (LitP NullLit)
                  (BlockE
                    (LetD (VarP ws_) (VarE! ws))
                    (LetD
                      WildP
                      (AssignE
                        (VarLE ws)
                        (FuncE
                          @anon-func-337.15
                          Local
                          Returns
                          (params r t)
                          ()
                          (BlockE
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE ws_)
                                (PrimE TupPrim (VarE r) (VarE t))
                              )
                            )
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE @reset_cycles)
                                (PrimE TupPrim)
                              )
                            )
                            (LetD WildP (AssignE (VarLE @refund) (VarE r)))
                            (PrimE (CallPrim) (VarE k) (VarE t))
                          )
                        )
                      )
                    )
                    (LetD (VarP rs_) (VarE! rs))
                    (LetD
                      WildP
                      (AssignE
                        (VarLE rs)
                        (FuncE
                          @anon-func-344.15
                          Local
                          Returns
                          (params e)
                          ()
                          (BlockE
                            (LetD WildP (PrimE (CallPrim) (VarE rs_) (VarE e)))
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE @reset_cycles)
                                (PrimE TupPrim)
                              )
                            )
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE @reset_refund)
                                (PrimE TupPrim)
                              )
                            )
                            (PrimE (CallPrim) (VarE r) (VarE e))
                          )
                        )
                      )
                    )
                    (PrimE (TagE suspend) (PrimE TupPrim))
                  )
                )
                (case
                  (OptP (TagP ok (TupP (VarP r) (VarP t))))
                  (PrimE
                    (TagE schedule)
                    (FuncE
                      @anon-func-353.19
                      Local
                      Returns
                      ()
                      (BlockE
                        (LetD WildP (AssignE (VarLE @refund) (VarE r)))
                        (PrimE (CallPrim) (VarE k) (VarE t))
                      )
                    )
                  )
                )
                (case
                  (OptP (TagP error (VarP e)))
                  (PrimE
                    (TagE schedule)
                    (FuncE
                      @anon-func-356.19
                      Local
                      Returns
                      ()
                      (PrimE (CallPrim) (VarE r) (VarE e))
                    )
                  )
                )
              )
            )
          )
        )
        (PrimE
          TupPrim
          (VarE enqueue)
          (VarE fulfill)
          (VarE fail)
          (FuncE
            @anon-func-361.28
            Local
            Returns
            ()
            (PrimE (CallPrim) (VarE! cleanup) (PrimE TupPrim))
          )
        )
      )
    )
  )
  (LetD (VarP @ManagementCanister) (NewObjE Module module {}))
  (LetD
    (VarP @ic00)
    (PrimE
      (ActorOfIdBlob
        actor {create_canister : shared {sender_canister_version : ?Nat64; settings : ?canister_settings} -> async {canister_id : Principal}; install_code : shared {arg : Blob; canister_id : Principal; mode : {#install; #reinstall; #upgrade : ?@UpgradeOptions}; sender_canister_version : ?Nat64; wasm_module : wasm_module} -> async ()}
      )
      (PrimE BlobOfIcUrl (LitE (TextLit aaaaa-aa)))
    )
  )
  (LetD
    (VarP @install_actor_helper)
    (FuncE
      @install_actor_helper
      Local
      Returns
      ($ Any)
      (params install_arg enhanced_orthogonal_persistence wasm_module arg)
      async*<$> Principal
      (AsyncE*
        ($@anon-async*-416.24 Any)
        (BlockE
          (LetD
            (TupP (VarP mode) (VarP canister_id))
            (SwitchE
              (VarE install_arg)
              (case
                (TagP new (VarP settings))
                (BlockE
                  (LetD (VarP available) (PrimE SystemCyclesAvailablePrim))
                  (LetD
                    (VarP accepted)
                    (PrimE SystemCyclesAcceptPrim (VarE available))
                  )
                  (LetD
                    (VarP sender_canister_version)
                    (PrimE OptPrim (PrimE canister_version))
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE @cycles)
                      (PrimE
                        (BinPrim Nat AddOp)
                        (VarE! @cycles)
                        (VarE accepted)
                      )
                    )
                  )
                  (LetD
                    (ObjP (canister_id (VarP canister_id)))
                    (PrimE
                      AwaitPrim
                      (PrimE
                        (CallPrim $@anon-async*-416.24)
                        (PrimE (ActorDotPrim create_canister) (VarE @ic00))
                        (BlockE
                          (LetD (VarP $base/0) (VarE settings))
                          (LetD
                            (VarP $settings/0)
                            (PrimE (DotPrim settings) (VarE $base/0))
                          )
                          (NewObjE
                            Object
                            (settings $settings/0)
                            (sender_canister_version sender_canister_version)
                            {sender_canister_version : ?Nat64; settings : ?canister_settings}
                          )
                        )
                      )
                    )
                  )
                  (PrimE
                    TupPrim
                    (PrimE (TagE install) (PrimE TupPrim))
                    (VarE canister_id)
                  )
                )
              )
              (case
                (TagP install (VarP principal1))
                (PrimE
                  TupPrim
                  (PrimE (TagE install) (PrimE TupPrim))
                  (VarE principal1)
                )
              )
              (case
                (TagP reinstall (VarP actor1))
                (PrimE
                  TupPrim
                  (PrimE (TagE reinstall) (PrimE TupPrim))
                  (PrimE principalOfActor (VarE actor1))
                )
              )
              (case
                (TagP upgrade (VarP actor2))
                (BlockE
                  (LetD
                    (VarP wasm_memory_persistence)
                    (IfE
                      (VarE enhanced_orthogonal_persistence)
                      (PrimE OptPrim (PrimE (TagE keep) (PrimE TupPrim)))
                      (LitE NullLit)
                    )
                  )
                  (LetD
                    (VarP upgradeOptions)
                    (NewObjE
                      Object
                      (wasm_memory_persistence wasm_memory_persistence)
                      {wasm_memory_persistence : ?{#keep}}
                    )
                  )
                  (PrimE
                    TupPrim
                    (PrimE (TagE upgrade) (PrimE OptPrim (VarE upgradeOptions)))
                    (PrimE principalOfActor (VarE actor2))
                  )
                )
              )
              (case
                (TagP
                  upgrade_with_persistence
                  (ObjP
                    (wasm_memory_persistence (VarP wasm_memory_persistence))
                    (canister (VarP canister))
                  )
                )
                (BlockE
                  (LetD
                    (VarP upgradeOptions)
                    (BlockE
                      (LetD
                        (VarP $wasm_memory_persistence/0)
                        (PrimE OptPrim (VarE wasm_memory_persistence))
                      )
                      (NewObjE
                        Object
                        (wasm_memory_persistence $wasm_memory_persistence/0)
                        {wasm_memory_persistence : ?{#keep; #replace}}
                      )
                    )
                  )
                  (PrimE
                    TupPrim
                    (PrimE (TagE upgrade) (PrimE OptPrim (VarE upgradeOptions)))
                    (PrimE principalOfActor (VarE canister))
                  )
                )
              )
            )
          )
          (LetD
            WildP
            (PrimE
              AwaitPrim
              (PrimE
                (CallPrim $@anon-async*-416.24)
                (PrimE (ActorDotPrim install_code) (VarE @ic00))
                (BlockE
                  (LetD
                    (VarP $sender_canister_version/0)
                    (PrimE OptPrim (PrimE canister_version))
                  )
                  (NewObjE
                    Object
                    (sender_canister_version $sender_canister_version/0)
                    (arg arg)
                    (wasm_module wasm_module)
                    (canister_id canister_id)
                    (mode mode)
                    {arg : Blob; canister_id : Principal; mode : {#install; #reinstall; #upgrade : ?@UpgradeOptions}; sender_canister_version : ?Nat64; wasm_module : wasm_module}
                  )
                )
              )
            )
          )
          (PrimE RetPrim (VarE canister_id))
        )
        $
      )
    )
  )
  (LetD
    (VarP @create_actor_helper)
    (FuncE
      @create_actor_helper
      Local
      Returns
      ($ Any)
      (params wasm_module arg)
      async<$> Principal
      (AsyncE
        ($@anon-async-464.79 Any)
        (BlockE
          (LetD (VarP available) (PrimE SystemCyclesAvailablePrim))
          (LetD (VarP accepted) (PrimE SystemCyclesAcceptPrim (VarE available)))
          (LetD
            (VarP sender_canister_version)
            (PrimE OptPrim (PrimE canister_version))
          )
          (LetD
            WildP
            (AssignE
              (VarLE @cycles)
              (PrimE (BinPrim Nat AddOp) (VarE! @cycles) (VarE accepted))
            )
          )
          (LetD
            (ObjP (canister_id (VarP canister_id)))
            (PrimE
              AwaitPrim
              (PrimE
                (CallPrim $@anon-async-464.79)
                (PrimE (ActorDotPrim create_canister) (VarE @ic00))
                (BlockE
                  (LetD (VarP $settings/1) (LitE NullLit))
                  (NewObjE
                    Object
                    (sender_canister_version sender_canister_version)
                    (settings $settings/1)
                    {sender_canister_version : ?Nat64; settings : ?canister_settings}
                  )
                )
              )
            )
          )
          (LetD
            WildP
            (PrimE
              AwaitPrim
              (PrimE
                (CallPrim $@anon-async-464.79)
                (PrimE (ActorDotPrim install_code) (VarE @ic00))
                (BlockE
                  (LetD (VarP $mode/0) (PrimE (TagE install) (PrimE TupPrim)))
                  (LetD
                    (VarP $sender_canister_version/1)
                    (PrimE OptPrim (PrimE canister_version))
                  )
                  (NewObjE
                    Object
                    (sender_canister_version $sender_canister_version/1)
                    (arg arg)
                    (wasm_module wasm_module)
                    (canister_id canister_id)
                    (mode $mode/0)
                    {arg : Blob; canister_id : Principal; mode : {#install; #reinstall; #upgrade : ?@UpgradeOptions}; sender_canister_version : ?Nat64; wasm_module : wasm_module}
                  )
                )
              )
            )
          )
          (PrimE RetPrim (VarE canister_id))
        )
        $
      )
    )
  )
  (LetD
    (VarP @call_raw)
    (FuncE
      @call_raw
      Local
      Returns
      ($ Any)
      (params p m a)
      async<$> Blob
      (AsyncE
        ($@call_raw Any)
        (BlockE
          (LetD (VarP available) (PrimE SystemCyclesAvailablePrim))
          (LetD
            WildP
            (IfE
              (PrimE
                (RelPrim Bool EqOp)
                (PrimE (RelPrim Nat EqOp) (VarE available) (LitE (NatLit 0)))
                (LitE (BoolLit false))
              )
              (AssignE
                (VarLE @cycles)
                (PrimE SystemCyclesAcceptPrim (VarE available))
              )
              (PrimE TupPrim)
            )
          )
          (PrimE AwaitPrim (PrimE call_raw (VarE p) (VarE m) (VarE a)))
        )
        $
      )
    )
  )
  (LetD
    (VarP @call_succeeded)
    (FuncE
      @call_succeeded
      Local
      Returns
      Bool
      (PrimE
        (RelPrim Nat32 EqOp)
        (PrimE call_perform_status)
        (LitE (Nat32Lit 0))
      )
    )
  )
  (LetD
    (VarP @call_error)
    (FuncE
      @call_error
      Local
      Returns
      Error
      (BlockE
        (LetD (VarP status) (PrimE call_perform_status))
        (LetD (VarP message) (PrimE call_perform_message))
        (LetD
          (VarP code)
          (PrimE
            (TagE call_error)
            (NewObjE Object (err_code status) {err_code : Nat32})
          )
        )
        (PrimE
          (CastPrim ({#call_error : {err_code : Nat32}}, Text) Error)
          (PrimE TupPrim (VarE code) (VarE message))
        )
      )
    )
  )
  (VarD @timers ?@Node (LitE NullLit))
  (LetD
    (VarP @prune)
    (FuncE
      @prune
      Local
      Returns
      (params n)
      ?@Node
      (SwitchE
        (VarE n)
        (case (LitP NullLit) (LitE NullLit))
        (case
          (OptP (VarP n))
          (IfE
            (PrimE
              (RelPrim Nat64 EqOp)
              (PrimE
                IdxPrim
                (PrimE (DotPrim expire) (VarE n))
                (LitE (NatLit 0))
              )
              (LitE (Nat64Lit 0))
            )
            (PrimE (CallPrim) (VarE @prune) (PrimE (DotPrim post) (VarE n)))
            (PrimE
              OptPrim
              (BlockE
                (LetD (VarP $base/1) (VarE n))
                (LetD
                  (VarP $pre/0)
                  (PrimE
                    (CallPrim)
                    (VarE @prune)
                    (PrimE (DotPrim pre) (VarE n))
                  )
                )
                (LetD (VarP $delay/0) (PrimE (DotPrim delay) (VarE $base/1)))
                (LetD (VarP $expire/0) (PrimE (DotPrim expire) (VarE $base/1)))
                (LetD (VarP $id/0) (PrimE (DotPrim id) (VarE $base/1)))
                (LetD (VarP $job/0) (PrimE (DotPrim job) (VarE $base/1)))
                (LetD (VarP $post/0) (PrimE (DotPrim post) (VarE $base/1)))
                (NewObjE
                  Object
                  (post $post/0)
                  (job $job/0)
                  (id $id/0)
                  (expire $expire/0)
                  (delay $delay/0)
                  (pre $pre/0)
                  {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                )
              )
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @nextExpiration)
    (FuncE
      @nextExpiration
      Local
      Returns
      (params n)
      Nat64
      (SwitchE
        (VarE n)
        (case (LitP NullLit) (LitE (Nat64Lit 0)))
        (case
          (OptP (VarP n))
          (BlockE
            (LetD
              (VarP pivot)
              (PrimE
                IdxPrim
                (PrimE (DotPrim expire) (VarE n))
                (LitE (NatLit 0))
              )
            )
            (LetD
              WildP
              (IfE
                (PrimE (RelPrim Nat64 EqOp) (VarE pivot) (LitE (Nat64Lit 0)))
                (PrimE
                  RetPrim
                  (PrimE
                    (CallPrim)
                    (VarE @nextExpiration)
                    (PrimE (DotPrim post) (VarE n))
                  )
                )
                (PrimE TupPrim)
              )
            )
            (LetD
              (VarP exp)
              (PrimE
                (CallPrim)
                (VarE @nextExpiration)
                (PrimE (DotPrim pre) (VarE n))
              )
            )
            (IfE
              (PrimE (RelPrim Nat64 EqOp) (VarE exp) (LitE (Nat64Lit 0)))
              (VarE pivot)
              (VarE exp)
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @timer_helper)
    (FuncE
      @timer_helper
      Local
      Returns
      ($ Any)
      async<$> ()
      (AsyncE
        ($@timer_helper Any)
        (BlockE
          (LetD
            (VarP Array_init)
            (FuncE
              Array_init
              Local
              Returns
              (T Any)
              (params len x)
              [var T]
              (PrimE Array.init (VarE len) (VarE x))
            )
          )
          (LetD (VarP now) (PrimE SystemTimePrim))
          (VarD gathered Nat (LitE (NatLit 0)))
          (LetD
            (VarP thunks)
            (PrimE
              (CallPrim ?(() -> async ()))
              (VarE Array_init)
              (PrimE TupPrim (LitE (NatLit 10)) (LitE NullLit))
            )
          )
          (LetD
            (VarP gatherExpired)
            (FuncE
              gatherExpired
              Local
              Returns
              (params n)
              ()
              (SwitchE
                (VarE n)
                (case (LitP NullLit) (PrimE TupPrim))
                (case
                  (OptP (VarP n))
                  (BlockE
                    (LetD
                      (VarP pivot)
                      (PrimE
                        IdxPrim
                        (PrimE (DotPrim expire) (VarE n))
                        (LitE (NatLit 0))
                      )
                    )
                    (LetD
                      WildP
                      (IfE
                        (PrimE
                          (RelPrim Nat64 GtOp)
                          (VarE pivot)
                          (LitE (Nat64Lit 0))
                        )
                        (PrimE
                          (CallPrim)
                          (VarE gatherExpired)
                          (PrimE (DotPrim pre) (VarE n))
                        )
                        (PrimE TupPrim)
                      )
                    )
                    (IfE
                      (IfE
                        (PrimE (RelPrim Nat64 LeOp) (VarE pivot) (VarE now))
                        (PrimE
                          (RelPrim Nat LtOp)
                          (VarE! gathered)
                          (PrimE array_len (VarE thunks))
                        )
                        (LitE (BoolLit false))
                      )
                      (BlockE
                        (LetD
                          WildP
                          (IfE
                            (PrimE
                              (RelPrim Nat64 GtOp)
                              (VarE pivot)
                              (LitE (Nat64Lit 0))
                            )
                            (BlockE
                              (LetD
                                WildP
                                (AssignE
                                  (IdxLE (VarE thunks) (VarE! gathered))
                                  (PrimE OptPrim (PrimE (DotPrim job) (VarE n)))
                                )
                              )
                              (LetD
                                WildP
                                (SwitchE
                                  (PrimE (DotPrim delay) (VarE n))
                                  (case
                                    (AltP
                                      (LitP NullLit)
                                      (OptP (LitP (Nat64Lit 0)))
                                    )
                                    (AssignE
                                      (IdxLE
                                        (PrimE (DotPrim expire) (VarE n))
                                        (LitE (NatLit 0))
                                      )
                                      (LitE (Nat64Lit 0))
                                    )
                                  )
                                  (case
                                    (OptP (VarP delay))
                                    (BlockE
                                      (LetD
                                        (VarP expire)
                                        (PrimE
                                          (BinPrim Nat64 AddOp)
                                          (VarE pivot)
                                          (PrimE
                                            (BinPrim Nat64 MulOp)
                                            (VarE delay)
                                            (PrimE
                                              (BinPrim Nat64 AddOp)
                                              (LitE (Nat64Lit 1))
                                              (PrimE
                                                (BinPrim Nat64 DivOp)
                                                (PrimE
                                                  (BinPrim Nat64 SubOp)
                                                  (VarE now)
                                                  (VarE pivot)
                                                )
                                                (VarE delay)
                                              )
                                            )
                                          )
                                        )
                                      )
                                      (LetD
                                        WildP
                                        (AssignE
                                          (IdxLE
                                            (PrimE (DotPrim expire) (VarE n))
                                            (LitE (NatLit 0))
                                          )
                                          (LitE (Nat64Lit 0))
                                        )
                                      )
                                      (LetD
                                        (VarP reinsert)
                                        (FuncE
                                          reinsert
                                          Local
                                          Returns
                                          (params m)
                                          @Node
                                          (SwitchE
                                            (VarE m)
                                            (case
                                              (LitP NullLit)
                                              (BlockE
                                                (LetD (VarP $base/2) (VarE n))
                                                (LetD
                                                  (VarP $expire/1)
                                                  (PrimE
                                                    (ArrayPrim Var Nat64)
                                                    (VarE expire)
                                                  )
                                                )
                                                (LetD
                                                  (VarP $pre/1)
                                                  (LitE NullLit)
                                                )
                                                (LetD
                                                  (VarP $post/1)
                                                  (LitE NullLit)
                                                )
                                                (LetD
                                                  (VarP $delay/1)
                                                  (PrimE
                                                    (DotPrim delay)
                                                    (VarE $base/2)
                                                  )
                                                )
                                                (LetD
                                                  (VarP $id/1)
                                                  (PrimE
                                                    (DotPrim id)
                                                    (VarE $base/2)
                                                  )
                                                )
                                                (LetD
                                                  (VarP $job/1)
                                                  (PrimE
                                                    (DotPrim job)
                                                    (VarE $base/2)
                                                  )
                                                )
                                                (NewObjE
                                                  Object
                                                  (job $job/1)
                                                  (id $id/1)
                                                  (delay $delay/1)
                                                  (post $post/1)
                                                  (pre $pre/1)
                                                  (expire $expire/1)
                                                  {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                                                )
                                              )
                                            )
                                            (case
                                              (OptP (VarP m))
                                              (BlockE
                                                (LetD
                                                  WildP
                                                  (PrimE
                                                    AssertPrim
                                                    (PrimE
                                                      (RelPrim Bool EqOp)
                                                      (PrimE
                                                        (RelPrim Nat64 EqOp)
                                                        (PrimE
                                                          IdxPrim
                                                          (PrimE
                                                            (DotPrim expire)
                                                            (VarE m)
                                                          )
                                                          (LitE (NatLit 0))
                                                        )
                                                        (LitE (Nat64Lit 0))
                                                      )
                                                      (LitE (BoolLit false))
                                                    )
                                                  )
                                                )
                                                (IfE
                                                  (PrimE
                                                    (RelPrim Nat64 LtOp)
                                                    (VarE expire)
                                                    (PrimE
                                                      IdxPrim
                                                      (PrimE
                                                        (DotPrim expire)
                                                        (VarE m)
                                                      )
                                                      (LitE (NatLit 0))
                                                    )
                                                  )
                                                  (BlockE
                                                    (LetD
                                                      (VarP $base/4)
                                                      (VarE m)
                                                    )
                                                    (LetD
                                                      (VarP $pre/3)
                                                      (PrimE
                                                        OptPrim
                                                        (PrimE
                                                          (CallPrim)
                                                          (VarE reinsert)
                                                          (PrimE
                                                            (DotPrim pre)
                                                            (VarE m)
                                                          )
                                                        )
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $delay/3)
                                                      (PrimE
                                                        (DotPrim delay)
                                                        (VarE $base/4)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $expire/3)
                                                      (PrimE
                                                        (DotPrim expire)
                                                        (VarE $base/4)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $id/3)
                                                      (PrimE
                                                        (DotPrim id)
                                                        (VarE $base/4)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $job/3)
                                                      (PrimE
                                                        (DotPrim job)
                                                        (VarE $base/4)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $post/3)
                                                      (PrimE
                                                        (DotPrim post)
                                                        (VarE $base/4)
                                                      )
                                                    )
                                                    (NewObjE
                                                      Object
                                                      (post $post/3)
                                                      (job $job/3)
                                                      (id $id/3)
                                                      (expire $expire/3)
                                                      (delay $delay/3)
                                                      (pre $pre/3)
                                                      {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                                                    )
                                                  )
                                                  (BlockE
                                                    (LetD
                                                      (VarP $base/3)
                                                      (VarE m)
                                                    )
                                                    (LetD
                                                      (VarP $post/2)
                                                      (PrimE
                                                        OptPrim
                                                        (PrimE
                                                          (CallPrim)
                                                          (VarE reinsert)
                                                          (PrimE
                                                            (DotPrim post)
                                                            (VarE m)
                                                          )
                                                        )
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $delay/2)
                                                      (PrimE
                                                        (DotPrim delay)
                                                        (VarE $base/3)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $expire/2)
                                                      (PrimE
                                                        (DotPrim expire)
                                                        (VarE $base/3)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $id/2)
                                                      (PrimE
                                                        (DotPrim id)
                                                        (VarE $base/3)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $job/2)
                                                      (PrimE
                                                        (DotPrim job)
                                                        (VarE $base/3)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $pre/2)
                                                      (PrimE
                                                        (DotPrim pre)
                                                        (VarE $base/3)
                                                      )
                                                    )
                                                    (NewObjE
                                                      Object
                                                      (pre $pre/2)
                                                      (job $job/2)
                                                      (id $id/2)
                                                      (expire $expire/2)
                                                      (delay $delay/2)
                                                      (post $post/2)
                                                      {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                                                    )
                                                  )
                                                )
                                              )
                                            )
                                          )
                                        )
                                      )
                                      (AssignE
                                        (VarLE @timers)
                                        (PrimE
                                          OptPrim
                                          (PrimE
                                            (CallPrim)
                                            (VarE reinsert)
                                            (PrimE
                                              (CallPrim)
                                              (VarE @prune)
                                              (VarE! @timers)
                                            )
                                          )
                                        )
                                      )
                                    )
                                  )
                                )
                              )
                              (AssignE
                                (VarLE gathered)
                                (PrimE
                                  (BinPrim Nat AddOp)
                                  (VarE! gathered)
                                  (LitE (NatLit 1))
                                )
                              )
                            )
                            (PrimE TupPrim)
                          )
                        )
                        (PrimE
                          (CallPrim)
                          (VarE gatherExpired)
                          (PrimE (DotPrim post) (VarE n))
                        )
                      )
                      (PrimE TupPrim)
                    )
                  )
                )
              )
            )
          )
          (LetD WildP (PrimE (CallPrim) (VarE gatherExpired) (VarE! @timers)))
          (LetD
            (VarP exp)
            (PrimE (CallPrim) (VarE @nextExpiration) (VarE! @timers))
          )
          (LetD
            WildP
            (BlockE
              (LetD WildP (PrimE global_timer_set (VarE exp)))
              (PrimE TupPrim)
            )
          )
          (LetD
            WildP
            (IfE
              (PrimE (RelPrim Nat64 EqOp) (VarE exp) (LitE (Nat64Lit 0)))
              (AssignE (VarLE @timers) (LitE NullLit))
              (PrimE TupPrim)
            )
          )
          (VarD failed Nat64 (LitE (Nat64Lit 0)))
          (LetD
            (VarP reinsert)
            (FuncE
              reinsert
              Local
              Returns
              (params job)
              ()
              (BlockE
                (LetD
                  WildP
                  (IfE
                    (PrimE
                      (RelPrim Nat64 EqOp)
                      (VarE! failed)
                      (LitE (Nat64Lit 0))
                    )
                    (BlockE
                      (LetD
                        WildP
                        (AssignE
                          (VarLE @timers)
                          (PrimE (CallPrim) (VarE @prune) (VarE! @timers))
                        )
                      )
                      (BlockE
                        (LetD
                          WildP
                          (PrimE global_timer_set (LitE (Nat64Lit 1)))
                        )
                        (PrimE TupPrim)
                      )
                    )
                    (PrimE TupPrim)
                  )
                )
                (LetD
                  WildP
                  (AssignE
                    (VarLE failed)
                    (PrimE
                      (BinPrim Nat64 AddOp)
                      (VarE! failed)
                      (LitE (Nat64Lit 1))
                    )
                  )
                )
                (AssignE
                  (VarLE @timers)
                  (PrimE
                    OptPrim
                    (SwitchE
                      (VarE! @timers)
                      (case
                        (OptP
                          (ObjP
                            (id (LitP (IntLit 0)))
                            (pre (VarP pre))
                            (post (VarP post))
                            (job (VarP j))
                            (expire (VarP expire))
                            (delay (VarP delay))
                          )
                        )
                        (BlockE
                          (LetD
                            (VarP $expire/4)
                            (PrimE (ArrayPrim Var Nat64) (VarE! failed))
                          )
                          (LetD (VarP $id/4) (LitE (NatLit 0)))
                          (LetD
                            (VarP $pre/4)
                            (PrimE
                              OptPrim
                              (BlockE
                                (LetD (VarP $id/5) (LitE (NatLit 0)))
                                (LetD (VarP $post/4) (LitE NullLit))
                                (NewObjE
                                  Object
                                  (job j)
                                  (delay delay)
                                  (post $post/4)
                                  (pre pre)
                                  (expire expire)
                                  (id $id/5)
                                  {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                                )
                              )
                            )
                          )
                          (NewObjE
                            Object
                            (pre $pre/4)
                            (post post)
                            (job job)
                            (delay delay)
                            (id $id/4)
                            (expire $expire/4)
                            {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                          )
                        )
                      )
                      (case
                        WildP
                        (BlockE
                          (LetD
                            (VarP $expire/5)
                            (PrimE (ArrayPrim Var Nat64) (VarE! failed))
                          )
                          (LetD (VarP $id/6) (LitE (NatLit 0)))
                          (LetD (VarP $delay/4) (LitE NullLit))
                          (LetD (VarP $pre/5) (LitE NullLit))
                          (LetD (VarP $post/5) (VarE! @timers))
                          (NewObjE
                            Object
                            (post $post/5)
                            (pre $pre/5)
                            (job job)
                            (delay $delay/4)
                            (id $id/6)
                            (expire $expire/5)
                            {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
          (BlockE
            (LetD (VarP $arr/2) (VarE thunks))
            (LetD (VarP $last/2) (PrimE GetLastArrayOffset (VarE $arr/2)))
            (VarD $indx/2 Nat (LitE (NatLit 0)))
            (IfE
              (PrimE EqArrayOffset (VarE $last/2) (LitE (IntLit -1)))
              (PrimE TupPrim)
              (LabelE
                $done/6
                ()
                (LoopE
                  (BlockE
                    (LetD
                      (VarP o)
                      (PrimE DerefArrayOffset (VarE $arr/2) (VarE! $indx/2))
                    )
                    (LetD
                      WildP
                      (SwitchE
                        (VarE o)
                        (case
                          (OptP (VarP thunk))
                          (TryE
                            (BlockE
                              (LetD
                                WildP
                                (PrimE
                                  (CallPrim $@timer_helper)
                                  (VarE thunk)
                                  (PrimE TupPrim)
                                )
                              )
                              (PrimE TupPrim)
                            )
                            (case
                              WildP
                              (PrimE (CallPrim) (VarE reinsert) (VarE thunk))
                            )
                          )
                        )
                        (case WildP (PrimE RetPrim (PrimE TupPrim)))
                      )
                    )
                    (IfE
                      (PrimE EqArrayOffset (VarE! $indx/2) (VarE $last/2))
                      (PrimE (BreakPrim $done/6) (PrimE TupPrim))
                      (AssignE
                        (VarLE $indx/2)
                        (PrimE NextArrayOffset (VarE! $indx/2))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        $
      )
    )
  )
  (VarD @lastTimerId Nat (LitE (NatLit 0)))
  (LetD
    (VarP @setTimer)
    (FuncE
      @setTimer
      Local
      Returns
      ($ Any)
      (params delayNanos recurring job)
      Nat
      (BlockE
        (LetD
          WildP
          (AssignE
            (VarLE @lastTimerId)
            (PrimE (BinPrim Nat AddOp) (VarE! @lastTimerId) (LitE (NatLit 1)))
          )
        )
        (LetD (VarP id) (VarE! @lastTimerId))
        (LetD (VarP now) (PrimE SystemTimePrim))
        (LetD
          (VarP expire)
          (PrimE (BinPrim Nat64 AddOp) (VarE now) (VarE delayNanos))
        )
        (LetD
          (VarP delay)
          (IfE
            (VarE recurring)
            (PrimE OptPrim (VarE delayNanos))
            (LitE NullLit)
          )
        )
        (LetD
          (VarP insert)
          (FuncE
            insert
            Local
            Returns
            (params n)
            @Node
            (SwitchE
              (VarE n)
              (case
                (LitP NullLit)
                (BlockE
                  (LetD
                    (VarP $expire/6)
                    (PrimE (ArrayPrim Var Nat64) (VarE expire))
                  )
                  (LetD (VarP $pre/6) (LitE NullLit))
                  (LetD (VarP $post/6) (LitE NullLit))
                  (NewObjE
                    Object
                    (post $post/6)
                    (pre $pre/6)
                    (job job)
                    (delay delay)
                    (id id)
                    (expire $expire/6)
                    {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                  )
                )
              )
              (case
                (OptP (VarP n))
                (BlockE
                  (LetD
                    WildP
                    (PrimE
                      AssertPrim
                      (PrimE
                        (RelPrim Bool EqOp)
                        (PrimE
                          (RelPrim Nat64 EqOp)
                          (PrimE
                            IdxPrim
                            (PrimE (DotPrim expire) (VarE n))
                            (LitE (NatLit 0))
                          )
                          (LitE (Nat64Lit 0))
                        )
                        (LitE (BoolLit false))
                      )
                    )
                  )
                  (IfE
                    (PrimE
                      (RelPrim Nat64 LtOp)
                      (VarE expire)
                      (PrimE
                        IdxPrim
                        (PrimE (DotPrim expire) (VarE n))
                        (LitE (NatLit 0))
                      )
                    )
                    (BlockE
                      (LetD (VarP $base/6) (VarE n))
                      (LetD
                        (VarP $pre/8)
                        (PrimE
                          OptPrim
                          (PrimE
                            (CallPrim)
                            (VarE insert)
                            (PrimE (DotPrim pre) (VarE n))
                          )
                        )
                      )
                      (LetD
                        (VarP $delay/6)
                        (PrimE (DotPrim delay) (VarE $base/6))
                      )
                      (LetD
                        (VarP $expire/8)
                        (PrimE (DotPrim expire) (VarE $base/6))
                      )
                      (LetD (VarP $id/8) (PrimE (DotPrim id) (VarE $base/6)))
                      (LetD (VarP $job/5) (PrimE (DotPrim job) (VarE $base/6)))
                      (LetD
                        (VarP $post/8)
                        (PrimE (DotPrim post) (VarE $base/6))
                      )
                      (NewObjE
                        Object
                        (post $post/8)
                        (job $job/5)
                        (id $id/8)
                        (expire $expire/8)
                        (delay $delay/6)
                        (pre $pre/8)
                        {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                      )
                    )
                    (BlockE
                      (LetD (VarP $base/5) (VarE n))
                      (LetD
                        (VarP $post/7)
                        (PrimE
                          OptPrim
                          (PrimE
                            (CallPrim)
                            (VarE insert)
                            (PrimE (DotPrim post) (VarE n))
                          )
                        )
                      )
                      (LetD
                        (VarP $delay/5)
                        (PrimE (DotPrim delay) (VarE $base/5))
                      )
                      (LetD
                        (VarP $expire/7)
                        (PrimE (DotPrim expire) (VarE $base/5))
                      )
                      (LetD (VarP $id/7) (PrimE (DotPrim id) (VarE $base/5)))
                      (LetD (VarP $job/4) (PrimE (DotPrim job) (VarE $base/5)))
                      (LetD (VarP $pre/7) (PrimE (DotPrim pre) (VarE $base/5)))
                      (NewObjE
                        Object
                        (pre $pre/7)
                        (job $job/4)
                        (id $id/7)
                        (expire $expire/7)
                        (delay $delay/5)
                        (post $post/7)
                        {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          WildP
          (AssignE
            (VarLE @timers)
            (PrimE
              OptPrim
              (PrimE
                (CallPrim)
                (VarE insert)
                (PrimE (CallPrim) (VarE @prune) (VarE! @timers))
              )
            )
          )
        )
        (LetD
          (VarP exp)
          (PrimE (CallPrim) (VarE @nextExpiration) (VarE! @timers))
        )
        (LetD
          WildP
          (IfE
            (PrimE (RelPrim Nat64 EqOp) (VarE exp) (LitE (Nat64Lit 0)))
            (AssignE (VarLE @timers) (LitE NullLit))
            (PrimE TupPrim)
          )
        )
        (LetD
          WildP
          (BlockE
            (LetD WildP (PrimE global_timer_set (VarE exp)))
            (PrimE TupPrim)
          )
        )
        (VarE id)
      )
    )
  )
  (LetD
    (VarP @cancelTimer)
    (FuncE
      @cancelTimer
      Local
      Returns
      (params id)
      ()
      (BlockE
        (LetD
          (VarP graft)
          (FuncE
            graft
            Local
            Returns
            (params onto branch)
            ?@Node
            (SwitchE
              (PrimE TupPrim (VarE onto) (VarE branch))
              (case (TupP (LitP NullLit) (LitP NullLit)) (LitE NullLit))
              (case (TupP (LitP NullLit) WildP) (VarE branch))
              (case (TupP WildP (LitP NullLit)) (VarE onto))
              (case
                (TupP (OptP (VarP onto)) WildP)
                (PrimE
                  OptPrim
                  (BlockE
                    (LetD (VarP $base/7) (VarE onto))
                    (LetD
                      (VarP $post/9)
                      (PrimE
                        (CallPrim)
                        (VarE graft)
                        (PrimE
                          TupPrim
                          (PrimE (DotPrim post) (VarE onto))
                          (VarE branch)
                        )
                      )
                    )
                    (LetD
                      (VarP $delay/7)
                      (PrimE (DotPrim delay) (VarE $base/7))
                    )
                    (LetD
                      (VarP $expire/9)
                      (PrimE (DotPrim expire) (VarE $base/7))
                    )
                    (LetD (VarP $id/9) (PrimE (DotPrim id) (VarE $base/7)))
                    (LetD (VarP $job/6) (PrimE (DotPrim job) (VarE $base/7)))
                    (LetD (VarP $pre/9) (PrimE (DotPrim pre) (VarE $base/7)))
                    (NewObjE
                      Object
                      (pre $pre/9)
                      (job $job/6)
                      (id $id/9)
                      (expire $expire/9)
                      (delay $delay/7)
                      (post $post/9)
                      {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          (VarP hunt)
          (FuncE
            hunt
            Local
            Returns
            (params n)
            ?@Node
            (SwitchE
              (VarE n)
              (case (LitP NullLit) (VarE n))
              (case
                (OptP
                  (ObjP (id (VarP node)) (pre (VarP pre)) (post (VarP post)))
                )
                (IfE
                  (PrimE (RelPrim Nat EqOp) (VarE node) (VarE id))
                  (PrimE
                    (CallPrim)
                    (VarE graft)
                    (PrimE TupPrim (VarE pre) (VarE post))
                  )
                  (LabelE
                    !
                    ?@Node
                    (PrimE
                      OptPrim
                      (BlockE
                        (LetD
                          (VarP $base/8)
                          (SwitchE
                            (VarE n)
                            (case
                              (LitP NullLit)
                              (PrimE (BreakPrim !) (LitE NullLit))
                            )
                            (case (OptP (VarP $v/0)) (VarE $v/0))
                          )
                        )
                        (LetD
                          (VarP $pre/10)
                          (PrimE (CallPrim) (VarE hunt) (VarE pre))
                        )
                        (LetD
                          (VarP $post/10)
                          (PrimE (CallPrim) (VarE hunt) (VarE post))
                        )
                        (LetD
                          (VarP $delay/8)
                          (PrimE (DotPrim delay) (VarE $base/8))
                        )
                        (LetD
                          (VarP $expire/10)
                          (PrimE (DotPrim expire) (VarE $base/8))
                        )
                        (LetD (VarP $id/10) (PrimE (DotPrim id) (VarE $base/8)))
                        (LetD
                          (VarP $job/7)
                          (PrimE (DotPrim job) (VarE $base/8))
                        )
                        (NewObjE
                          Object
                          (job $job/7)
                          (id $id/10)
                          (expire $expire/10)
                          (delay $delay/8)
                          (post $post/10)
                          (pre $pre/10)
                          {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          WildP
          (AssignE
            (VarLE @timers)
            (PrimE (CallPrim) (VarE hunt) (VarE! @timers))
          )
        )
        (IfE
          (PrimE
            (RelPrim Nat64 EqOp)
            (PrimE (CallPrim) (VarE @nextExpiration) (VarE! @timers))
            (LitE (Nat64Lit 0))
          )
          (BlockE
            (LetD
              WildP
              (BlockE
                (LetD WildP (PrimE global_timer_set (LitE (Nat64Lit 0))))
                (PrimE TupPrim)
              )
            )
            (AssignE (VarLE @timers) (LitE NullLit))
          )
          (PrimE TupPrim)
        )
      )
    )
  )
  (LetD
    (VarP @set_global_timer)
    (FuncE
      @set_global_timer
      Local
      Returns
      (params time)
      ()
      (BlockE (LetD WildP (PrimE global_timer_set (VarE time))) (PrimE TupPrim))
    )
  )
  (LetD
    (VarP @dedup)
    (FuncE
      @dedup
      Local
      Returns
      (params b)
      Blob
      (BlockE
        (LetD
          (VarP Array_tabulate)
          (FuncE
            Array_tabulate
            Local
            Returns
            (T Any)
            (params len gen)
            [T]
            (PrimE Array.tabulate (VarE len) (VarE gen))
          )
        )
        (LetD
          (VarP Array_tabulateVar)
          (FuncE
            Array_tabulateVar
            Local
            Returns
            (T Any)
            (params len gen)
            [var T]
            (PrimE Array.tabulateVar (VarE len) (VarE gen))
          )
        )
        (LetD (VarP HASH_ARRAY_SIZE) (LitE (NatLit 16_384)))
        (LetD
          (VarP debugPrint)
          (FuncE debugPrint Local Returns (params x) () (PrimE print (VarE x)))
        )
        (LetD
          (VarP hashBlob)
          (FuncE
            hashBlob
            Local
            Returns
            (params b)
            Nat32
            (PrimE crc32Hash (VarE b))
          )
        )
        (LetD
          (VarP allocWeakRef)
          (FuncE
            allocWeakRef
            Local
            Returns
            (T Any)
            (params obj)
            weak T
            (PrimE alloc_weak_ref (VarE obj))
          )
        )
        (LetD
          (VarP weakGet)
          (FuncE
            weakGet
            Local
            Returns
            (T Any)
            (params w)
            ?T
            (PrimE weak_get (VarE w))
          )
        )
        (LetD
          (VarP getDedupTable)
          (FuncE
            getDedupTable
            Local
            Returns
            ?[var List]
            (PrimE get_dedup_table)
          )
        )
        (LetD
          (VarP setDedupTable)
          (FuncE
            setDedupTable
            Local
            Returns
            (params dedupTable)
            ()
            (PrimE set_dedup_table (VarE dedupTable))
          )
        )
        (LetD
          (VarP arrayToBlob)
          (FuncE
            arrayToBlob
            Local
            Returns
            (params a)
            Blob
            (PrimE arrayToBlob (VarE a))
          )
        )
        (LetD
          (VarP getOriginalBlob)
          (FuncE
            getOriginalBlob
            Local
            Returns
            (params b)
            Blob
            (BlockE
              (LetD
                (VarP copiedArr)
                (PrimE
                  (CallPrim Nat8)
                  (VarE Array_tabulate)
                  (PrimE
                    TupPrim
                    (PrimE
                      (BinPrim Nat SubOp)
                      (PrimE blob_size (VarE b))
                      (LitE (NatLit 5))
                    )
                    (FuncE
                      @anon-func-744.50
                      Local
                      Returns
                      (params i)
                      Nat8
                      (PrimE
                        IdxBlobPrim
                        (VarE b)
                        (PrimE (BinPrim Nat AddOp) (VarE i) (LitE (NatLit 5)))
                      )
                    )
                  )
                )
              )
              (LetD
                (VarP originalBlob)
                (PrimE (CallPrim) (VarE arrayToBlob) (VarE copiedArr))
              )
              (VarE originalBlob)
            )
          )
        )
        (LetD
          (VarP blobCompare)
          (FuncE
            blobCompare
            Local
            Returns
            (params b1 b2)
            Int8
            (PrimE blob_compare (VarE b1) (VarE b2))
          )
        )
        (LetD
          (VarP addToList)
          (FuncE
            addToList
            Local
            Returns
            (params list originalBlob weakRef)
            List
            (BlockE
              (LetD
                (VarP newList)
                (BlockE
                  (VarD
                    $next/0
                    ?{index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}
                    (PrimE OptPrim (VarE list))
                  )
                  (LetD (VarP $value/0) (PrimE OptPrim (VarE weakRef)))
                  (LetD
                    (VarP $index/0)
                    (PrimE
                      (BinPrim Nat AddOp)
                      (PrimE (DotPrim index) (VarE list))
                      (LitE (NatLit 1))
                    )
                  )
                  (NewObjE
                    Object
                    (index $index/0)
                    (originalBlob originalBlob)
                    (value $value/0)
                    (next $next/0)
                    {index : Nat; var next : ?{index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}; originalBlob : Blob; value : ?{ref : weak Blob}}
                  )
                )
              )
              (VarE newList)
            )
          )
        )
        (LetD
          (VarP getFromList)
          (FuncE
            getFromList
            Local
            Returns
            (params list originalBlob)
            ?WeakRef
            (BlockE
              (VarD
                copy
                {index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}
                (VarE list)
              )
              (LoopE
                (IfE
                  (PrimE
                    (RelPrim Int8 EqOp)
                    (PrimE
                      (CallPrim)
                      (VarE blobCompare)
                      (PrimE
                        TupPrim
                        (PrimE (DotPrim originalBlob) (VarE! copy))
                        (VarE originalBlob)
                      )
                    )
                    (LitE (Int8Lit 0))
                  )
                  (PrimE RetPrim (PrimE (DotPrim value) (VarE! copy)))
                  (BlockE
                    (LetD (VarP next) (PrimE (DotPrim next) (VarE! copy)))
                    (SwitchE
                      (VarE next)
                      (case (LitP NullLit) (PrimE RetPrim (LitE NullLit)))
                      (case
                        (OptP (VarP next))
                        (AssignE (VarLE copy) (VarE next))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          (VarP getListLen)
          (FuncE
            getListLen
            Local
            Returns
            (params list)
            Nat
            (PrimE (DotPrim index) (VarE list))
          )
        )
        (LetD
          (VarP getHashArrayLen)
          (FuncE
            getHashArrayLen
            Local
            Returns
            (params hashArray)
            Nat
            (BlockE
              (VarD len Nat (LitE (NatLit 0)))
              (VarD i Nat (LitE (NatLit 0)))
              (LetD
                WildP
                (LabelE
                  $done/7
                  ()
                  (LoopE
                    (IfE
                      (PrimE
                        (RelPrim Nat LtOp)
                        (VarE! i)
                        (VarE HASH_ARRAY_SIZE)
                      )
                      (BlockE
                        (LetD
                          WildP
                          (AssignE
                            (VarLE len)
                            (PrimE
                              (BinPrim Nat AddOp)
                              (VarE! len)
                              (PrimE
                                (CallPrim)
                                (VarE getListLen)
                                (PrimE IdxPrim (VarE hashArray) (VarE! i))
                              )
                            )
                          )
                        )
                        (AssignE
                          (VarLE i)
                          (PrimE
                            (BinPrim Nat AddOp)
                            (VarE! i)
                            (LitE (NatLit 1))
                          )
                        )
                      )
                      (PrimE (BreakPrim $done/7) (PrimE TupPrim))
                    )
                  )
                )
              )
              (VarE! len)
            )
          )
        )
        (LetD
          (VarP addToHashArray)
          (FuncE
            addToHashArray
            Local
            Returns
            (params hashArray b)
            ()
            (BlockE
              (LetD
                (VarP hashValue)
                (PrimE (CallPrim) (VarE hashBlob) (VarE b))
              )
              (LetD
                (VarP index)
                (PrimE
                  (BinPrim Nat ModOp)
                  (PrimE (CallPrim) (VarE @nat32ToNat) (VarE hashValue))
                  (VarE HASH_ARRAY_SIZE)
                )
              )
              (LetD (VarP list) (PrimE IdxPrim (VarE hashArray) (VarE index)))
              (LetD
                (VarP weakRef)
                (BlockE
                  (LetD
                    (VarP $ref/0)
                    (PrimE (CallPrim Blob) (VarE allocWeakRef) (VarE b))
                  )
                  (NewObjE Object (ref $ref/0) {ref : weak Blob})
                )
              )
              (AssignE
                (IdxLE (VarE hashArray) (VarE index))
                (PrimE
                  (CallPrim)
                  (VarE addToList)
                  (PrimE
                    TupPrim
                    (VarE list)
                    (PrimE (CallPrim) (VarE getOriginalBlob) (VarE b))
                    (VarE weakRef)
                  )
                )
              )
            )
          )
        )
        (LetD
          (VarP getFromHashArray)
          (FuncE
            getFromHashArray
            Local
            Returns
            (params hashArray b)
            ?WeakRef
            (BlockE
              (LetD
                (VarP hashValue)
                (PrimE (CallPrim) (VarE hashBlob) (VarE b))
              )
              (LetD
                (VarP index)
                (PrimE
                  (BinPrim Nat ModOp)
                  (PrimE (CallPrim) (VarE @nat32ToNat) (VarE hashValue))
                  (VarE HASH_ARRAY_SIZE)
                )
              )
              (LetD (VarP list) (PrimE IdxPrim (VarE hashArray) (VarE index)))
              (PrimE
                (CallPrim)
                (VarE getFromList)
                (PrimE
                  TupPrim
                  (VarE list)
                  (PrimE (CallPrim) (VarE getOriginalBlob) (VarE b))
                )
              )
            )
          )
        )
        (LetD
          WildP
          (IfE
            (PrimE
              (RelPrim Nat LtOp)
              (PrimE blob_size (VarE b))
              (LitE (NatLit 5))
            )
            (PrimE RetPrim (VarE b))
            (PrimE TupPrim)
          )
        )
        (LetD
          WildP
          (IfE
            (IfE
              (IfE
                (IfE
                  (IfE
                    (PrimE
                      (RelPrim Bool EqOp)
                      (PrimE
                        (RelPrim Nat8 EqOp)
                        (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 0)))
                        (LitE (Nat8Lit 33))
                      )
                      (LitE (BoolLit false))
                    )
                    (LitE (BoolLit true))
                    (PrimE
                      (RelPrim Bool EqOp)
                      (PrimE
                        (RelPrim Nat8 EqOp)
                        (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 1)))
                        (LitE (Nat8Lit 99))
                      )
                      (LitE (BoolLit false))
                    )
                  )
                  (LitE (BoolLit true))
                  (PrimE
                    (RelPrim Bool EqOp)
                    (PrimE
                      (RelPrim Nat8 EqOp)
                      (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 2)))
                      (LitE (Nat8Lit 97))
                    )
                    (LitE (BoolLit false))
                  )
                )
                (LitE (BoolLit true))
                (PrimE
                  (RelPrim Bool EqOp)
                  (PrimE
                    (RelPrim Nat8 EqOp)
                    (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 3)))
                    (LitE (Nat8Lit 102))
                  )
                  (LitE (BoolLit false))
                )
              )
              (LitE (BoolLit true))
              (PrimE
                (RelPrim Bool EqOp)
                (PrimE
                  (RelPrim Nat8 EqOp)
                  (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 4)))
                  (LitE (Nat8Lit 33))
                )
                (LitE (BoolLit false))
              )
            )
            (PrimE RetPrim (VarE b))
            (PrimE TupPrim)
          )
        )
        (LetD
          (VarP ptr)
          (PrimE (CallPrim) (VarE getDedupTable) (PrimE TupPrim))
        )
        (LetD
          (VarP hashArray)
          (SwitchE
            (VarE ptr)
            (case (OptP (VarP dedupTable)) (VarE dedupTable))
            (case
              (LitP NullLit)
              (BlockE
                (LetD
                  (VarP arr)
                  (PrimE
                    (CallPrim List)
                    (VarE Array_tabulateVar)
                    (PrimE
                      TupPrim
                      (VarE HASH_ARRAY_SIZE)
                      (FuncE
                        @anon-func-830.58
                        Local
                        Returns
                        (params i)
                        List
                        (BlockE
                          (VarD $next/1 ?List (LitE NullLit))
                          (LetD (VarP $value/1) (LitE NullLit))
                          (LetD (VarP $originalBlob/0) (LitE (BlobLit "")))
                          (LetD (VarP $index/1) (LitE (NatLit 0)))
                          (NewObjE
                            Object
                            (index $index/1)
                            (originalBlob $originalBlob/0)
                            (value $value/1)
                            (next $next/1)
                            {index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}
                          )
                        )
                      )
                    )
                  )
                )
                (LetD WildP (PrimE (CallPrim) (VarE setDedupTable) (VarE arr)))
                (VarE arr)
              )
            )
          )
        )
        (LetD
          (VarP dedupedBlobWeakRef)
          (PrimE
            (CallPrim)
            (VarE getFromHashArray)
            (PrimE TupPrim (VarE hashArray) (VarE b))
          )
        )
        (LetD
          (VarP result)
          (SwitchE
            (VarE dedupedBlobWeakRef)
            (case
              (OptP (VarP weakRef))
              (BlockE
                (LetD
                  (VarP derefed)
                  (PrimE
                    (CallPrim Blob)
                    (VarE weakGet)
                    (PrimE (DotPrim ref) (VarE weakRef))
                  )
                )
                (SwitchE
                  (VarE derefed)
                  (case (OptP (VarP derefed)) (VarE derefed))
                  (case
                    (LitP NullLit)
                    (BlockE
                      (LetD
                        WildP
                        (PrimE
                          (CallPrim)
                          (VarE addToHashArray)
                          (PrimE TupPrim (VarE hashArray) (VarE b))
                        )
                      )
                      (VarE b)
                    )
                  )
                )
              )
            )
            (case
              (LitP NullLit)
              (BlockE
                (LetD
                  WildP
                  (PrimE
                    (CallPrim)
                    (VarE addToHashArray)
                    (PrimE TupPrim (VarE hashArray) (VarE b))
                  )
                )
                (VarE b)
              )
            )
          )
        )
        (VarE result)
      )
    )
  )
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 57))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (IntLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat8Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat16Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat32Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat64Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat8Lit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat16Lit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat32Lit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat64Lit 25))) (PrimE TupPrim)))
)
-- Translate polymorphic equality issue-5555.mo:
(ProgU
  (VarD @cycles Nat (LitE (NatLit 0)))
  (VarD @timeout ?Nat32 (LitE NullLit))
  (LetD
    (VarP @add_cycles)
    (FuncE
      @add_cycles
      Local
      Returns
      ($ Any)
      ()
      (BlockE
        (LetD (VarP cycles) (VarE! @cycles))
        (LetD WildP (PrimE (CallPrim) (VarE @reset_cycles) (PrimE TupPrim)))
        (LetD
          WildP
          (IfE
            (PrimE
              (RelPrim Bool EqOp)
              (PrimE (RelPrim Nat EqOp) (VarE cycles) (LitE (NatLit 0)))
              (LitE (BoolLit false))
            )
            (PrimE SystemCyclesAddPrim (VarE cycles))
            (PrimE TupPrim)
          )
        )
        (SwitchE
          (VarE! @timeout)
          (case
            (OptP (VarP timeout))
            (BlockE
              (LetD WildP (AssignE (VarLE @timeout) (LitE NullLit)))
              (PrimE SystemTimeoutSetPrim (VarE timeout))
            )
          )
          (case (LitP NullLit) (PrimE TupPrim))
        )
      )
    )
  )
  (LetD
    (VarP @reset_cycles)
    (FuncE
      @reset_cycles
      Local
      Returns
      ()
      (AssignE (VarLE @cycles) (LitE (NatLit 0)))
    )
  )
  (LetD
    (VarP @immut_array_get)
    (FuncE
      @immut_array_get
      Local
      Returns
      (A Any)
      (params xs)
      Nat -> A
      (FuncE
        @anon-func-45.49
        Local
        Returns
        (params n)
        A
        (PrimE IdxPrim (VarE xs) (VarE n))
      )
    )
  )
  (LetD
    (VarP @mut_array_get)
    (FuncE
      @mut_array_get
      Local
      Returns
      (A Any)
      (params xs)
      Nat -> A
      (FuncE
        @anon-func-46.51
        Local
        Returns
        (params n)
        A
        (PrimE IdxPrim (VarE xs) (VarE n))
      )
    )
  )
  (LetD
    (VarP @immut_array_size)
    (FuncE
      @immut_array_size
      Local
      Returns
      (A Any)
      (params xs)
      () -> Nat
      (FuncE @anon-func-47.51 Local Returns Nat (PrimE array_len (VarE xs)))
    )
  )
  (LetD
    (VarP @mut_array_size)
    (FuncE
      @mut_array_size
      Local
      Returns
      (A Any)
      (params xs)
      () -> Nat
      (FuncE @anon-func-48.53 Local Returns Nat (PrimE array_len (VarE xs)))
    )
  )
  (LetD
    (VarP @mut_array_put)
    (FuncE
      @mut_array_put
      Local
      Returns
      (A Any)
      (params xs)
      (Nat, A) -> ()
      (FuncE
        @anon-func-49.57
        Local
        Returns
        (params n x)
        ()
        (AssignE (IdxLE (VarE xs) (VarE n)) (VarE x))
      )
    )
  )
  (LetD
    (VarP @immut_array_keys)
    (FuncE
      @immut_array_keys
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<Nat>
      (FuncE
        @anon-func-50.58
        Local
        Returns
        @Iter<Nat>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (VarE j))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat})
        )
      )
    )
  )
  (LetD
    (VarP @mut_array_keys)
    (FuncE
      @mut_array_keys
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<Nat>
      (FuncE
        @anon-func-55.60
        Local
        Returns
        @Iter<Nat>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (VarE j))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat})
        )
      )
    )
  )
  (LetD
    (VarP @immut_array_vals)
    (FuncE
      @immut_array_vals
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<A>
      (FuncE
        @anon-func-60.56
        Local
        Returns
        @Iter<A>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?A
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (PrimE IdxPrim (VarE xs) (VarE j)))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?A})
        )
      )
    )
  )
  (LetD
    (VarP @mut_array_vals)
    (FuncE
      @mut_array_vals
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<A>
      (FuncE
        @anon-func-67.58
        Local
        Returns
        @Iter<A>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?A
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (PrimE IdxPrim (VarE xs) (VarE j)))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?A})
        )
      )
    )
  )
  (LetD
    (VarP @blob_size)
    (FuncE
      @blob_size
      Local
      Returns
      (params b)
      () -> Nat
      (FuncE @anon-func-74.41 Local Returns Nat (PrimE blob_size (VarE b)))
    )
  )
  (LetD
    (VarP @blob_keys)
    (FuncE
      @blob_keys
      Local
      Returns
      (params b)
      () -> @Iter<Nat>
      (FuncE
        @anon-func-75.48
        Local
        Returns
        @Iter<Nat>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE blob_size (VarE b)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (VarE j))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat})
        )
      )
    )
  )
  (LetD
    (VarP @blob_get)
    (FuncE
      @blob_get
      Local
      Returns
      (params b)
      Nat -> Nat8
      (FuncE
        @anon-func-80.42
        Local
        Returns
        (params n)
        Nat8
        (PrimE IdxBlobPrim (VarE b) (VarE n))
      )
    )
  )
  (LetD
    (VarP @blob_vals)
    (FuncE
      @blob_vals
      Local
      Returns
      (params xs)
      () -> @Iter<Nat8>
      (FuncE
        @anon-func-81.50
        Local
        Returns
        @Iter<Nat8>
        (BlockE
          (LetD (VarP i) (PrimE blob_vals_iter (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat8
              (IfE
                (PrimE blob_iter_done (VarE i))
                (LitE NullLit)
                (PrimE OptPrim (PrimE blob_iter_next (VarE i)))
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat8})
        )
      )
    )
  )
  (LetD
    (VarP @text_size)
    (FuncE
      @text_size
      Local
      Returns
      (params xs)
      () -> Nat
      (FuncE @anon-func-88.42 Local Returns Nat (PrimE text_len (VarE xs)))
    )
  )
  (LetD
    (VarP @text_chars)
    (FuncE
      @text_chars
      Local
      Returns
      (params xs)
      () -> @Iter<Char>
      (FuncE
        @anon-func-89.51
        Local
        Returns
        @Iter<Char>
        (BlockE
          (LetD (VarP i) (PrimE text_iter (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Char
              (IfE
                (PrimE text_iter_done (VarE i))
                (LitE NullLit)
                (PrimE OptPrim (PrimE text_iter_next (VarE i)))
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Char})
        )
      )
    )
  )
  (LetD
    (VarP @text_of_num)
    (FuncE
      @text_of_num
      Local
      Returns
      (params x base sep digits)
      Text
      (BlockE
        (VarD text Text (LitE (TextLit )))
        (VarD n Nat (VarE x))
        (LetD
          WildP
          (IfE
            (PrimE (RelPrim Nat EqOp) (VarE! n) (LitE (NatLit 0)))
            (PrimE RetPrim (LitE (TextLit 0)))
            (PrimE TupPrim)
          )
        )
        (VarD i Nat (LitE (NatLit 0)))
        (LetD
          WildP
          (LabelE
            $done/0
            ()
            (LoopE
              (IfE
                (PrimE (RelPrim Nat GtOp) (VarE! n) (LitE (NatLit 0)))
                (BlockE
                  (LetD
                    (VarP rem)
                    (PrimE (BinPrim Nat ModOp) (VarE! n) (VarE base))
                  )
                  (LetD
                    WildP
                    (IfE
                      (IfE
                        (PrimE (RelPrim Nat GtOp) (VarE sep) (LitE (NatLit 0)))
                        (PrimE (RelPrim Nat EqOp) (VarE! i) (VarE sep))
                        (LitE (BoolLit false))
                      )
                      (BlockE
                        (LetD
                          WildP
                          (AssignE
                            (VarLE text)
                            (PrimE
                              (BinPrim Text CatOp)
                              (LitE (TextLit _))
                              (VarE! text)
                            )
                          )
                        )
                        (AssignE (VarLE i) (LitE (NatLit 0)))
                      )
                      (PrimE TupPrim)
                    )
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE text)
                      (PrimE
                        (BinPrim Text CatOp)
                        (PrimE (CallPrim) (VarE digits) (VarE rem))
                        (VarE! text)
                      )
                    )
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE n)
                      (PrimE (BinPrim Nat DivOp) (VarE! n) (VarE base))
                    )
                  )
                  (AssignE
                    (VarLE i)
                    (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                  )
                )
                (PrimE (BreakPrim $done/0) (PrimE TupPrim))
              )
            )
          )
        )
        (VarE! text)
      )
    )
  )
  (LetD
    (VarP @left_pad)
    (FuncE
      @left_pad
      Local
      Returns
      (params pad char t)
      Text
      (IfE
        (PrimE (RelPrim Nat GtOp) (VarE pad) (PrimE text_len (VarE t)))
        (BlockE
          (VarD
            i
            Nat
            (PrimE (BinPrim Nat SubOp) (VarE pad) (PrimE text_len (VarE t)))
          )
          (VarD text Text (VarE t))
          (LetD
            WildP
            (LabelE
              $done/1
              ()
              (LoopE
                (IfE
                  (PrimE (RelPrim Nat GtOp) (VarE! i) (LitE (NatLit 0)))
                  (BlockE
                    (LetD
                      WildP
                      (AssignE
                        (VarLE text)
                        (PrimE (BinPrim Text CatOp) (VarE char) (VarE! text))
                      )
                    )
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat SubOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE (BreakPrim $done/1) (PrimE TupPrim))
                )
              )
            )
          )
          (VarE! text)
        )
        (VarE t)
      )
    )
  )
  (LetD
    (VarP @digits_dec)
    (FuncE
      @digits_dec
      Local
      Returns
      (params x)
      Text
      (PrimE
        conv_Char_Text
        (PrimE
          (NumConvTrapPrim Nat32 Char)
          (PrimE
            (NumConvWrapPrim Int Nat32)
            (PrimE (BinPrim Int AddOp) (VarE x) (LitE (IntLit 48)))
          )
        )
      )
    )
  )
  (LetD
    (VarP @text_of_Nat)
    (FuncE
      @text_of_Nat
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_num)
        (PrimE
          TupPrim
          (VarE x)
          (LitE (NatLit 10))
          (LitE (NatLit 3))
          (VarE @digits_dec)
        )
      )
    )
  )
  (LetD
    (VarP @text_of_Int)
    (FuncE
      @text_of_Int
      Local
      Returns
      (params x)
      Text
      (IfE
        (PrimE (RelPrim Int EqOp) (VarE x) (LitE (IntLit 0)))
        (LitE (TextLit 0))
        (PrimE
          (BinPrim Text CatOp)
          (IfE
            (PrimE (RelPrim Int LtOp) (VarE x) (LitE (IntLit 0)))
            (LitE (TextLit -))
            (LitE (TextLit +))
          )
          (PrimE (CallPrim) (VarE @text_of_Nat) (PrimE abs (VarE x)))
        )
      )
    )
  )
  (LetD
    (VarP @digits_hex)
    (FuncE
      @digits_hex
      Local
      Returns
      (params x)
      Text
      (PrimE
        conv_Char_Text
        (PrimE
          (NumConvTrapPrim Nat32 Char)
          (PrimE
            (NumConvWrapPrim Int Nat32)
            (PrimE
              (BinPrim Int AddOp)
              (VarE x)
              (IfE
                (PrimE (RelPrim Nat LtOp) (VarE x) (LitE (NatLit 10)))
                (LitE (IntLit 48))
                (LitE (IntLit 55))
              )
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @int64ToInt)
    (FuncE
      @int64ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int64 Int) (VarE n))
    )
  )
  (LetD
    (VarP @int32ToInt)
    (FuncE
      @int32ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int32 Int) (VarE n))
    )
  )
  (LetD
    (VarP @int16ToInt)
    (FuncE
      @int16ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int16 Int) (VarE n))
    )
  )
  (LetD
    (VarP @int8ToInt)
    (FuncE
      @int8ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int8 Int) (VarE n))
    )
  )
  (LetD
    (VarP @nat64ToNat)
    (FuncE
      @nat64ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat64 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @nat32ToNat)
    (FuncE
      @nat32ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat32 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @nat16ToNat)
    (FuncE
      @nat16ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat16 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @nat8ToNat)
    (FuncE
      @nat8ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat8 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @text_of_Nat8)
    (FuncE
      @text_of_Nat8
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat8ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Nat16)
    (FuncE
      @text_of_Nat16
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat16ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Nat32)
    (FuncE
      @text_of_Nat32
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat32ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Nat64)
    (FuncE
      @text_of_Nat64
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat64ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int8)
    (FuncE
      @text_of_Int8
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int8ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int16)
    (FuncE
      @text_of_Int16
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int16ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int32)
    (FuncE
      @text_of_Int32
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int32ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int64)
    (FuncE
      @text_of_Int64
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int64ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Float)
    (FuncE
      @text_of_Float
      Local
      Returns
      (params x)
      Text
      (PrimE Float->Text (VarE x))
    )
  )
  (LetD
    (VarP @text_of_Bool)
    (FuncE
      @text_of_Bool
      Local
      Returns
      (params b)
      Text
      (IfE (VarE b) (LitE (TextLit true)) (LitE (TextLit false)))
    )
  )
  (LetD
    (VarP @text_of_Text)
    (FuncE
      @text_of_Text
      Local
      Returns
      (params t)
      Text
      (PrimE
        (BinPrim Text CatOp)
        (PrimE (BinPrim Text CatOp) (LitE (TextLit ")) (VarE t))
        (LitE (TextLit "))
      )
    )
  )
  (LetD
    (VarP @text_of_Char)
    (FuncE
      @text_of_Char
      Local
      Returns
      (params c)
      Text
      (PrimE
        (BinPrim Text CatOp)
        (PrimE
          (BinPrim Text CatOp)
          (LitE (TextLit '))
          (PrimE conv_Char_Text (VarE c))
        )
        (LitE (TextLit '))
      )
    )
  )
  (LetD
    (VarP @text_of_Blob)
    (FuncE
      @text_of_Blob
      Local
      Returns
      (params blob)
      Text
      (BlockE
        (VarD t Text (LitE (TextLit ")))
        (LetD
          WildP
          (BlockE
            (LetD
              (VarP $nxt/0)
              (PrimE
                (DotPrim next)
                (PrimE
                  (CallPrim)
                  (PrimE (CallPrim) (VarE @blob_vals) (VarE blob))
                  (PrimE TupPrim)
                )
              )
            )
            (LabelE
              $done/2
              ()
              (LoopE
                (SwitchE
                  (PrimE (CallPrim) (VarE $nxt/0) (PrimE TupPrim))
                  (case
                    (LitP NullLit)
                    (PrimE (BreakPrim $done/2) (PrimE TupPrim))
                  )
                  (case
                    (OptP (VarP b))
                    (AssignE
                      (VarLE t)
                      (PrimE
                        (BinPrim Text CatOp)
                        (VarE! t)
                        (PrimE
                          (BinPrim Text CatOp)
                          (LitE (TextLit \))
                          (PrimE
                            (CallPrim)
                            (VarE @left_pad)
                            (PrimE
                              TupPrim
                              (LitE (NatLit 2))
                              (LitE (TextLit 0))
                              (PrimE
                                (CallPrim)
                                (VarE @text_of_num)
                                (PrimE
                                  TupPrim
                                  (PrimE (CallPrim) (VarE @nat8ToNat) (VarE b))
                                  (LitE (NatLit 16))
                                  (LitE (NatLit 0))
                                  (VarE @digits_hex)
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          WildP
          (AssignE
            (VarLE t)
            (PrimE (BinPrim Text CatOp) (VarE! t) (LitE (TextLit ")))
          )
        )
        (PrimE RetPrim (VarE! t))
      )
    )
  )
  (LetD
    (VarP @text_has_parens)
    (FuncE
      @text_has_parens
      Local
      Returns
      (params t)
      Bool
      (SwitchE
        (PrimE
          (CallPrim)
          (PrimE
            (DotPrim next)
            (PrimE
              (CallPrim)
              (PrimE (CallPrim) (VarE @text_chars) (VarE t))
              (PrimE TupPrim)
            )
          )
          (PrimE TupPrim)
        )
        (case (OptP (LitP (CharLit 40))) (LitE (BoolLit true)))
        (case WildP (LitE (BoolLit false)))
      )
    )
  )
  (LetD
    (VarP @text_needs_parens)
    (FuncE
      @text_needs_parens
      Local
      Returns
      (params t)
      Bool
      (SwitchE
        (PrimE
          (CallPrim)
          (PrimE
            (DotPrim next)
            (PrimE
              (CallPrim)
              (PrimE (CallPrim) (VarE @text_chars) (VarE t))
              (PrimE TupPrim)
            )
          )
          (PrimE TupPrim)
        )
        (case
          (OptP
            (AltP
              (AltP
                (AltP (LitP (CharLit 43)) (LitP (CharLit 45)))
                (LitP (CharLit 63))
              )
              (LitP (CharLit 35))
            )
          )
          (LitE (BoolLit true))
        )
        (case WildP (LitE (BoolLit false)))
      )
    )
  )
  (LetD
    (VarP @text_of_option)
    (FuncE
      @text_of_option
      Local
      Returns
      (T Any)
      (params f x)
      Text
      (SwitchE
        (VarE x)
        (case
          (OptP (VarP y))
          (BlockE
            (LetD (VarP fy) (PrimE (CallPrim) (VarE f) (VarE y)))
            (IfE
              (PrimE (CallPrim) (VarE @text_needs_parens) (VarE fy))
              (PrimE
                (BinPrim Text CatOp)
                (PrimE (BinPrim Text CatOp) (LitE (TextLit ?()) (VarE fy))
                (LitE (TextLit )))
              )
              (PrimE (BinPrim Text CatOp) (LitE (TextLit ?)) (VarE fy))
            )
          )
        )
        (case (LitP NullLit) (LitE (TextLit null)))
      )
    )
  )
  (LetD
    (VarP @text_of_variant)
    (FuncE
      @text_of_variant
      Local
      Returns
      (T Any)
      (params l f x)
      Text
      (BlockE
        (LetD (VarP fx) (PrimE (CallPrim) (VarE f) (VarE x)))
        (IfE
          (PrimE (RelPrim Text EqOp) (VarE fx) (LitE (TextLit ())))
          (PrimE (BinPrim Text CatOp) (LitE (TextLit #)) (VarE l))
          (IfE
            (PrimE (CallPrim) (VarE @text_has_parens) (VarE fx))
            (PrimE
              (BinPrim Text CatOp)
              (PrimE (BinPrim Text CatOp) (LitE (TextLit #)) (VarE l))
              (VarE fx)
            )
            (PrimE
              (BinPrim Text CatOp)
              (PrimE
                (BinPrim Text CatOp)
                (PrimE
                  (BinPrim Text CatOp)
                  (PrimE (BinPrim Text CatOp) (LitE (TextLit #)) (VarE l))
                  (LitE (TextLit ())
                )
                (VarE fx)
              )
              (LitE (TextLit )))
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @text_of_array)
    (FuncE
      @text_of_array
      Local
      Returns
      (T Any)
      (params f xs)
      Text
      (BlockE
        (VarD text Text (LitE (TextLit [)))
        (VarD first Bool (LitE (BoolLit true)))
        (LetD
          WildP
          (BlockE
            (LetD (VarP $arr/0) (VarE xs))
            (LetD (VarP $last/0) (PrimE GetLastArrayOffset (VarE $arr/0)))
            (VarD $indx/0 Nat (LitE (NatLit 0)))
            (IfE
              (PrimE EqArrayOffset (VarE $last/0) (LitE (IntLit -1)))
              (PrimE TupPrim)
              (LabelE
                $done/3
                ()
                (LoopE
                  (BlockE
                    (LetD
                      (VarP x)
                      (PrimE DerefArrayOffset (VarE $arr/0) (VarE! $indx/0))
                    )
                    (LetD
                      WildP
                      (BlockE
                        (LetD
                          WildP
                          (IfE
                            (VarE! first)
                            (AssignE (VarLE first) (LitE (BoolLit false)))
                            (AssignE
                              (VarLE text)
                              (PrimE
                                (BinPrim Text CatOp)
                                (VarE! text)
                                (LitE (TextLit , ))
                              )
                            )
                          )
                        )
                        (AssignE
                          (VarLE text)
                          (PrimE
                            (BinPrim Text CatOp)
                            (VarE! text)
                            (PrimE (CallPrim) (VarE f) (VarE x))
                          )
                        )
                      )
                    )
                    (IfE
                      (PrimE EqArrayOffset (VarE! $indx/0) (VarE $last/0))
                      (PrimE (BreakPrim $done/3) (PrimE TupPrim))
                      (AssignE
                        (VarLE $indx/0)
                        (PrimE NextArrayOffset (VarE! $indx/0))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (PrimE (BinPrim Text CatOp) (VarE! text) (LitE (TextLit ])))
      )
    )
  )
  (LetD
    (VarP @text_of_array_mut)
    (FuncE
      @text_of_array_mut
      Local
      Returns
      (T Any)
      (params f xs)
      Text
      (BlockE
        (VarD text Text (LitE (TextLit [var)))
        (VarD first Bool (LitE (BoolLit true)))
        (LetD
          WildP
          (BlockE
            (LetD (VarP $arr/1) (VarE xs))
            (LetD (VarP $last/1) (PrimE GetLastArrayOffset (VarE $arr/1)))
            (VarD $indx/1 Nat (LitE (NatLit 0)))
            (IfE
              (PrimE EqArrayOffset (VarE $last/1) (LitE (IntLit -1)))
              (PrimE TupPrim)
              (LabelE
                $done/4
                ()
                (LoopE
                  (BlockE
                    (LetD
                      (VarP x)
                      (PrimE DerefArrayOffset (VarE $arr/1) (VarE! $indx/1))
                    )
                    (LetD
                      WildP
                      (BlockE
                        (LetD
                          WildP
                          (IfE
                            (VarE! first)
                            (BlockE
                              (LetD
                                WildP
                                (AssignE (VarLE first) (LitE (BoolLit false)))
                              )
                              (AssignE
                                (VarLE text)
                                (PrimE
                                  (BinPrim Text CatOp)
                                  (VarE! text)
                                  (LitE (TextLit  ))
                                )
                              )
                            )
                            (AssignE
                              (VarLE text)
                              (PrimE
                                (BinPrim Text CatOp)
                                (VarE! text)
                                (LitE (TextLit , ))
                              )
                            )
                          )
                        )
                        (AssignE
                          (VarLE text)
                          (PrimE
                            (BinPrim Text CatOp)
                            (VarE! text)
                            (PrimE (CallPrim) (VarE f) (VarE x))
                          )
                        )
                      )
                    )
                    (IfE
                      (PrimE EqArrayOffset (VarE! $indx/1) (VarE $last/1))
                      (PrimE (BreakPrim $done/4) (PrimE TupPrim))
                      (AssignE
                        (VarLE $indx/1)
                        (PrimE NextArrayOffset (VarE! $indx/1))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (PrimE (BinPrim Text CatOp) (VarE! text) (LitE (TextLit ])))
      )
    )
  )
  (LetD
    (VarP @equal_array)
    (FuncE
      @equal_array
      Local
      Returns
      (T Any)
      (params eq a b)
      Bool
      (BlockE
        (LetD
          WildP
          (IfE
            (PrimE
              (RelPrim Bool EqOp)
              (PrimE
                (RelPrim Nat EqOp)
                (PrimE array_len (VarE a))
                (PrimE array_len (VarE b))
              )
              (LitE (BoolLit false))
            )
            (PrimE RetPrim (LitE (BoolLit false)))
            (PrimE TupPrim)
          )
        )
        (VarD i Nat (LitE (NatLit 0)))
        (LetD (VarP s) (PrimE array_len (VarE a)))
        (LetD
          WildP
          (LabelE
            $done/5
            ()
            (LoopE
              (IfE
                (PrimE (RelPrim Nat LtOp) (VarE! i) (VarE s))
                (BlockE
                  (LetD
                    WildP
                    (IfE
                      (PrimE
                        (RelPrim Bool EqOp)
                        (PrimE
                          (CallPrim)
                          (VarE eq)
                          (PrimE
                            TupPrim
                            (PrimE IdxPrim (VarE a) (VarE! i))
                            (PrimE IdxPrim (VarE b) (VarE! i))
                          )
                        )
                        (LitE (BoolLit false))
                      )
                      (PrimE RetPrim (LitE (BoolLit false)))
                      (PrimE TupPrim)
                    )
                  )
                  (AssignE
                    (VarLE i)
                    (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                  )
                )
                (PrimE (BreakPrim $done/5) (PrimE TupPrim))
              )
            )
          )
        )
        (PrimE RetPrim (LitE (BoolLit true)))
      )
    )
  )
  (VarD @refund Nat (LitE (NatLit 0)))
  (LetD
    (VarP @reset_refund)
    (FuncE
      @reset_refund
      Local
      Returns
      ()
      (AssignE (VarLE @refund) (LitE (NatLit 0)))
    )
  )
  (LetD
    (VarP @getSystemRefund)
    (FuncE
      @getSystemRefund
      Local
      Returns
      @Refund
      (PrimE RetPrim (PrimE SystemCyclesRefundedPrim))
    )
  )
  (LetD (VarP @cleanup) (FuncE @cleanup Local Returns () (PrimE TupPrim)))
  (LetD
    (VarP @new_async)
    (FuncE
      @new_async
      Local
      Returns
      (T Any)
      (@Async<T>, @Cont<T>, @Cont<Error>, @CleanCont)
      (BlockE
        (LetD
          (VarP w_null)
          (FuncE
            @anon-func-293.16
            Local
            Returns
            (params r t)
            ()
            (PrimE TupPrim)
          )
        )
        (LetD
          (VarP r_null)
          (FuncE
            @anon-func-294.16
            Local
            Returns
            (params $ignored0/0)
            ()
            (PrimE TupPrim)
          )
        )
        (VarD result ?@Result<T> (LitE NullLit))
        (VarD ws (@Refund, T) -> () (VarE w_null))
        (VarD rs Error -> () (VarE r_null))
        (LetD
          (VarP getRefund)
          (PrimE
            (RelPrim Bool EqOp)
            (PrimE (RelPrim Nat EqOp) (VarE! @cycles) (LitE (NatLit 0)))
            (LitE (BoolLit false))
          )
        )
        (LetD
          (VarP fulfill)
          (FuncE
            fulfill
            Local
            Returns
            (params t)
            ()
            (SwitchE
              (VarE! result)
              (case
                (LitP NullLit)
                (BlockE
                  (LetD
                    (VarP refund)
                    (IfE
                      (VarE getRefund)
                      (PrimE (CallPrim) (VarE @getSystemRefund) (PrimE TupPrim))
                      (LitE (NatLit 0))
                    )
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE result)
                      (PrimE
                        OptPrim
                        (PrimE (TagE ok) (PrimE TupPrim (VarE refund) (VarE t)))
                      )
                    )
                  )
                  (LetD (VarP ws_) (VarE! ws))
                  (LetD WildP (AssignE (VarLE ws) (VarE w_null)))
                  (LetD WildP (AssignE (VarLE rs) (VarE r_null)))
                  (PrimE
                    (CallPrim)
                    (VarE ws_)
                    (PrimE TupPrim (VarE refund) (VarE t))
                  )
                )
              )
              (case (OptP WildP) (PrimE AssertPrim (LitE (BoolLit false))))
            )
          )
        )
        (LetD
          (VarP fail)
          (FuncE
            fail
            Local
            Returns
            (params e)
            ()
            (SwitchE
              (VarE! result)
              (case
                (LitP NullLit)
                (BlockE
                  (LetD
                    WildP
                    (AssignE
                      (VarLE result)
                      (PrimE OptPrim (PrimE (TagE error) (VarE e)))
                    )
                  )
                  (LetD (VarP rs_) (VarE! rs))
                  (LetD WildP (AssignE (VarLE ws) (VarE w_null)))
                  (LetD WildP (AssignE (VarLE rs) (VarE r_null)))
                  (PrimE (CallPrim) (VarE rs_) (VarE e))
                )
              )
              (case (OptP WildP) (PrimE AssertPrim (LitE (BoolLit false))))
            )
          )
        )
        (VarD cleanup () -> () (VarE @cleanup))
        (LetD
          (VarP enqueue)
          (FuncE
            enqueue
            Local
            Returns
            (params k r b)
            {#schedule : () -> (); #suspend}
            (BlockE
              (LetD WildP (AssignE (VarLE cleanup) (VarE b)))
              (SwitchE
                (VarE! result)
                (case
                  (LitP NullLit)
                  (BlockE
                    (LetD (VarP ws_) (VarE! ws))
                    (LetD
                      WildP
                      (AssignE
                        (VarLE ws)
                        (FuncE
                          @anon-func-337.15
                          Local
                          Returns
                          (params r t)
                          ()
                          (BlockE
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE ws_)
                                (PrimE TupPrim (VarE r) (VarE t))
                              )
                            )
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE @reset_cycles)
                                (PrimE TupPrim)
                              )
                            )
                            (LetD WildP (AssignE (VarLE @refund) (VarE r)))
                            (PrimE (CallPrim) (VarE k) (VarE t))
                          )
                        )
                      )
                    )
                    (LetD (VarP rs_) (VarE! rs))
                    (LetD
                      WildP
                      (AssignE
                        (VarLE rs)
                        (FuncE
                          @anon-func-344.15
                          Local
                          Returns
                          (params e)
                          ()
                          (BlockE
                            (LetD WildP (PrimE (CallPrim) (VarE rs_) (VarE e)))
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE @reset_cycles)
                                (PrimE TupPrim)
                              )
                            )
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE @reset_refund)
                                (PrimE TupPrim)
                              )
                            )
                            (PrimE (CallPrim) (VarE r) (VarE e))
                          )
                        )
                      )
                    )
                    (PrimE (TagE suspend) (PrimE TupPrim))
                  )
                )
                (case
                  (OptP (TagP ok (TupP (VarP r) (VarP t))))
                  (PrimE
                    (TagE schedule)
                    (FuncE
                      @anon-func-353.19
                      Local
                      Returns
                      ()
                      (BlockE
                        (LetD WildP (AssignE (VarLE @refund) (VarE r)))
                        (PrimE (CallPrim) (VarE k) (VarE t))
                      )
                    )
                  )
                )
                (case
                  (OptP (TagP error (VarP e)))
                  (PrimE
                    (TagE schedule)
                    (FuncE
                      @anon-func-356.19
                      Local
                      Returns
                      ()
                      (PrimE (CallPrim) (VarE r) (VarE e))
                    )
                  )
                )
              )
            )
          )
        )
        (PrimE
          TupPrim
          (VarE enqueue)
          (VarE fulfill)
          (VarE fail)
          (FuncE
            @anon-func-361.28
            Local
            Returns
            ()
            (PrimE (CallPrim) (VarE! cleanup) (PrimE TupPrim))
          )
        )
      )
    )
  )
  (LetD (VarP @ManagementCanister) (NewObjE Module module {}))
  (LetD
    (VarP @ic00)
    (PrimE
      (ActorOfIdBlob
        actor {create_canister : shared {sender_canister_version : ?Nat64; settings : ?canister_settings} -> async {canister_id : Principal}; install_code : shared {arg : Blob; canister_id : Principal; mode : {#install; #reinstall; #upgrade : ?@UpgradeOptions}; sender_canister_version : ?Nat64; wasm_module : wasm_module} -> async ()}
      )
      (PrimE BlobOfIcUrl (LitE (TextLit aaaaa-aa)))
    )
  )
  (LetD
    (VarP @install_actor_helper)
    (FuncE
      @install_actor_helper
      Local
      Returns
      ($ Any)
      (params install_arg enhanced_orthogonal_persistence wasm_module arg)
      async*<$> Principal
      (AsyncE*
        ($@anon-async*-416.24 Any)
        (BlockE
          (LetD
            (TupP (VarP mode) (VarP canister_id))
            (SwitchE
              (VarE install_arg)
              (case
                (TagP new (VarP settings))
                (BlockE
                  (LetD (VarP available) (PrimE SystemCyclesAvailablePrim))
                  (LetD
                    (VarP accepted)
                    (PrimE SystemCyclesAcceptPrim (VarE available))
                  )
                  (LetD
                    (VarP sender_canister_version)
                    (PrimE OptPrim (PrimE canister_version))
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE @cycles)
                      (PrimE
                        (BinPrim Nat AddOp)
                        (VarE! @cycles)
                        (VarE accepted)
                      )
                    )
                  )
                  (LetD
                    (ObjP (canister_id (VarP canister_id)))
                    (PrimE
                      AwaitPrim
                      (PrimE
                        (CallPrim $@anon-async*-416.24)
                        (PrimE (ActorDotPrim create_canister) (VarE @ic00))
                        (BlockE
                          (LetD (VarP $base/0) (VarE settings))
                          (LetD
                            (VarP $settings/0)
                            (PrimE (DotPrim settings) (VarE $base/0))
                          )
                          (NewObjE
                            Object
                            (settings $settings/0)
                            (sender_canister_version sender_canister_version)
                            {sender_canister_version : ?Nat64; settings : ?canister_settings}
                          )
                        )
                      )
                    )
                  )
                  (PrimE
                    TupPrim
                    (PrimE (TagE install) (PrimE TupPrim))
                    (VarE canister_id)
                  )
                )
              )
              (case
                (TagP install (VarP principal1))
                (PrimE
                  TupPrim
                  (PrimE (TagE install) (PrimE TupPrim))
                  (VarE principal1)
                )
              )
              (case
                (TagP reinstall (VarP actor1))
                (PrimE
                  TupPrim
                  (PrimE (TagE reinstall) (PrimE TupPrim))
                  (PrimE principalOfActor (VarE actor1))
                )
              )
              (case
                (TagP upgrade (VarP actor2))
                (BlockE
                  (LetD
                    (VarP wasm_memory_persistence)
                    (IfE
                      (VarE enhanced_orthogonal_persistence)
                      (PrimE OptPrim (PrimE (TagE keep) (PrimE TupPrim)))
                      (LitE NullLit)
                    )
                  )
                  (LetD
                    (VarP upgradeOptions)
                    (NewObjE
                      Object
                      (wasm_memory_persistence wasm_memory_persistence)
                      {wasm_memory_persistence : ?{#keep}}
                    )
                  )
                  (PrimE
                    TupPrim
                    (PrimE (TagE upgrade) (PrimE OptPrim (VarE upgradeOptions)))
                    (PrimE principalOfActor (VarE actor2))
                  )
                )
              )
              (case
                (TagP
                  upgrade_with_persistence
                  (ObjP
                    (wasm_memory_persistence (VarP wasm_memory_persistence))
                    (canister (VarP canister))
                  )
                )
                (BlockE
                  (LetD
                    (VarP upgradeOptions)
                    (BlockE
                      (LetD
                        (VarP $wasm_memory_persistence/0)
                        (PrimE OptPrim (VarE wasm_memory_persistence))
                      )
                      (NewObjE
                        Object
                        (wasm_memory_persistence $wasm_memory_persistence/0)
                        {wasm_memory_persistence : ?{#keep; #replace}}
                      )
                    )
                  )
                  (PrimE
                    TupPrim
                    (PrimE (TagE upgrade) (PrimE OptPrim (VarE upgradeOptions)))
                    (PrimE principalOfActor (VarE canister))
                  )
                )
              )
            )
          )
          (LetD
            WildP
            (PrimE
              AwaitPrim
              (PrimE
                (CallPrim $@anon-async*-416.24)
                (PrimE (ActorDotPrim install_code) (VarE @ic00))
                (BlockE
                  (LetD
                    (VarP $sender_canister_version/0)
                    (PrimE OptPrim (PrimE canister_version))
                  )
                  (NewObjE
                    Object
                    (sender_canister_version $sender_canister_version/0)
                    (arg arg)
                    (wasm_module wasm_module)
                    (canister_id canister_id)
                    (mode mode)
                    {arg : Blob; canister_id : Principal; mode : {#install; #reinstall; #upgrade : ?@UpgradeOptions}; sender_canister_version : ?Nat64; wasm_module : wasm_module}
                  )
                )
              )
            )
          )
          (PrimE RetPrim (VarE canister_id))
        )
        $
      )
    )
  )
  (LetD
    (VarP @create_actor_helper)
    (FuncE
      @create_actor_helper
      Local
      Returns
      ($ Any)
      (params wasm_module arg)
      async<$> Principal
      (AsyncE
        ($@anon-async-464.79 Any)
        (BlockE
          (LetD (VarP available) (PrimE SystemCyclesAvailablePrim))
          (LetD (VarP accepted) (PrimE SystemCyclesAcceptPrim (VarE available)))
          (LetD
            (VarP sender_canister_version)
            (PrimE OptPrim (PrimE canister_version))
          )
          (LetD
            WildP
            (AssignE
              (VarLE @cycles)
              (PrimE (BinPrim Nat AddOp) (VarE! @cycles) (VarE accepted))
            )
          )
          (LetD
            (ObjP (canister_id (VarP canister_id)))
            (PrimE
              AwaitPrim
              (PrimE
                (CallPrim $@anon-async-464.79)
                (PrimE (ActorDotPrim create_canister) (VarE @ic00))
                (BlockE
                  (LetD (VarP $settings/1) (LitE NullLit))
                  (NewObjE
                    Object
                    (sender_canister_version sender_canister_version)
                    (settings $settings/1)
                    {sender_canister_version : ?Nat64; settings : ?canister_settings}
                  )
                )
              )
            )
          )
          (LetD
            WildP
            (PrimE
              AwaitPrim
              (PrimE
                (CallPrim $@anon-async-464.79)
                (PrimE (ActorDotPrim install_code) (VarE @ic00))
                (BlockE
                  (LetD (VarP $mode/0) (PrimE (TagE install) (PrimE TupPrim)))
                  (LetD
                    (VarP $sender_canister_version/1)
                    (PrimE OptPrim (PrimE canister_version))
                  )
                  (NewObjE
                    Object
                    (sender_canister_version $sender_canister_version/1)
                    (arg arg)
                    (wasm_module wasm_module)
                    (canister_id canister_id)
                    (mode $mode/0)
                    {arg : Blob; canister_id : Principal; mode : {#install; #reinstall; #upgrade : ?@UpgradeOptions}; sender_canister_version : ?Nat64; wasm_module : wasm_module}
                  )
                )
              )
            )
          )
          (PrimE RetPrim (VarE canister_id))
        )
        $
      )
    )
  )
  (LetD
    (VarP @call_raw)
    (FuncE
      @call_raw
      Local
      Returns
      ($ Any)
      (params p m a)
      async<$> Blob
      (AsyncE
        ($@call_raw Any)
        (BlockE
          (LetD (VarP available) (PrimE SystemCyclesAvailablePrim))
          (LetD
            WildP
            (IfE
              (PrimE
                (RelPrim Bool EqOp)
                (PrimE (RelPrim Nat EqOp) (VarE available) (LitE (NatLit 0)))
                (LitE (BoolLit false))
              )
              (AssignE
                (VarLE @cycles)
                (PrimE SystemCyclesAcceptPrim (VarE available))
              )
              (PrimE TupPrim)
            )
          )
          (PrimE AwaitPrim (PrimE call_raw (VarE p) (VarE m) (VarE a)))
        )
        $
      )
    )
  )
  (LetD
    (VarP @call_succeeded)
    (FuncE
      @call_succeeded
      Local
      Returns
      Bool
      (PrimE
        (RelPrim Nat32 EqOp)
        (PrimE call_perform_status)
        (LitE (Nat32Lit 0))
      )
    )
  )
  (LetD
    (VarP @call_error)
    (FuncE
      @call_error
      Local
      Returns
      Error
      (BlockE
        (LetD (VarP status) (PrimE call_perform_status))
        (LetD (VarP message) (PrimE call_perform_message))
        (LetD
          (VarP code)
          (PrimE
            (TagE call_error)
            (NewObjE Object (err_code status) {err_code : Nat32})
          )
        )
        (PrimE
          (CastPrim ({#call_error : {err_code : Nat32}}, Text) Error)
          (PrimE TupPrim (VarE code) (VarE message))
        )
      )
    )
  )
  (VarD @timers ?@Node (LitE NullLit))
  (LetD
    (VarP @prune)
    (FuncE
      @prune
      Local
      Returns
      (params n)
      ?@Node
      (SwitchE
        (VarE n)
        (case (LitP NullLit) (LitE NullLit))
        (case
          (OptP (VarP n))
          (IfE
            (PrimE
              (RelPrim Nat64 EqOp)
              (PrimE
                IdxPrim
                (PrimE (DotPrim expire) (VarE n))
                (LitE (NatLit 0))
              )
              (LitE (Nat64Lit 0))
            )
            (PrimE (CallPrim) (VarE @prune) (PrimE (DotPrim post) (VarE n)))
            (PrimE
              OptPrim
              (BlockE
                (LetD (VarP $base/1) (VarE n))
                (LetD
                  (VarP $pre/0)
                  (PrimE
                    (CallPrim)
                    (VarE @prune)
                    (PrimE (DotPrim pre) (VarE n))
                  )
                )
                (LetD (VarP $delay/0) (PrimE (DotPrim delay) (VarE $base/1)))
                (LetD (VarP $expire/0) (PrimE (DotPrim expire) (VarE $base/1)))
                (LetD (VarP $id/0) (PrimE (DotPrim id) (VarE $base/1)))
                (LetD (VarP $job/0) (PrimE (DotPrim job) (VarE $base/1)))
                (LetD (VarP $post/0) (PrimE (DotPrim post) (VarE $base/1)))
                (NewObjE
                  Object
                  (post $post/0)
                  (job $job/0)
                  (id $id/0)
                  (expire $expire/0)
                  (delay $delay/0)
                  (pre $pre/0)
                  {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                )
              )
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @nextExpiration)
    (FuncE
      @nextExpiration
      Local
      Returns
      (params n)
      Nat64
      (SwitchE
        (VarE n)
        (case (LitP NullLit) (LitE (Nat64Lit 0)))
        (case
          (OptP (VarP n))
          (BlockE
            (LetD
              (VarP pivot)
              (PrimE
                IdxPrim
                (PrimE (DotPrim expire) (VarE n))
                (LitE (NatLit 0))
              )
            )
            (LetD
              WildP
              (IfE
                (PrimE (RelPrim Nat64 EqOp) (VarE pivot) (LitE (Nat64Lit 0)))
                (PrimE
                  RetPrim
                  (PrimE
                    (CallPrim)
                    (VarE @nextExpiration)
                    (PrimE (DotPrim post) (VarE n))
                  )
                )
                (PrimE TupPrim)
              )
            )
            (LetD
              (VarP exp)
              (PrimE
                (CallPrim)
                (VarE @nextExpiration)
                (PrimE (DotPrim pre) (VarE n))
              )
            )
            (IfE
              (PrimE (RelPrim Nat64 EqOp) (VarE exp) (LitE (Nat64Lit 0)))
              (VarE pivot)
              (VarE exp)
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @timer_helper)
    (FuncE
      @timer_helper
      Local
      Returns
      ($ Any)
      async<$> ()
      (AsyncE
        ($@timer_helper Any)
        (BlockE
          (LetD
            (VarP Array_init)
            (FuncE
              Array_init
              Local
              Returns
              (T Any)
              (params len x)
              [var T]
              (PrimE Array.init (VarE len) (VarE x))
            )
          )
          (LetD (VarP now) (PrimE SystemTimePrim))
          (VarD gathered Nat (LitE (NatLit 0)))
          (LetD
            (VarP thunks)
            (PrimE
              (CallPrim ?(() -> async ()))
              (VarE Array_init)
              (PrimE TupPrim (LitE (NatLit 10)) (LitE NullLit))
            )
          )
          (LetD
            (VarP gatherExpired)
            (FuncE
              gatherExpired
              Local
              Returns
              (params n)
              ()
              (SwitchE
                (VarE n)
                (case (LitP NullLit) (PrimE TupPrim))
                (case
                  (OptP (VarP n))
                  (BlockE
                    (LetD
                      (VarP pivot)
                      (PrimE
                        IdxPrim
                        (PrimE (DotPrim expire) (VarE n))
                        (LitE (NatLit 0))
                      )
                    )
                    (LetD
                      WildP
                      (IfE
                        (PrimE
                          (RelPrim Nat64 GtOp)
                          (VarE pivot)
                          (LitE (Nat64Lit 0))
                        )
                        (PrimE
                          (CallPrim)
                          (VarE gatherExpired)
                          (PrimE (DotPrim pre) (VarE n))
                        )
                        (PrimE TupPrim)
                      )
                    )
                    (IfE
                      (IfE
                        (PrimE (RelPrim Nat64 LeOp) (VarE pivot) (VarE now))
                        (PrimE
                          (RelPrim Nat LtOp)
                          (VarE! gathered)
                          (PrimE array_len (VarE thunks))
                        )
                        (LitE (BoolLit false))
                      )
                      (BlockE
                        (LetD
                          WildP
                          (IfE
                            (PrimE
                              (RelPrim Nat64 GtOp)
                              (VarE pivot)
                              (LitE (Nat64Lit 0))
                            )
                            (BlockE
                              (LetD
                                WildP
                                (AssignE
                                  (IdxLE (VarE thunks) (VarE! gathered))
                                  (PrimE OptPrim (PrimE (DotPrim job) (VarE n)))
                                )
                              )
                              (LetD
                                WildP
                                (SwitchE
                                  (PrimE (DotPrim delay) (VarE n))
                                  (case
                                    (AltP
                                      (LitP NullLit)
                                      (OptP (LitP (Nat64Lit 0)))
                                    )
                                    (AssignE
                                      (IdxLE
                                        (PrimE (DotPrim expire) (VarE n))
                                        (LitE (NatLit 0))
                                      )
                                      (LitE (Nat64Lit 0))
                                    )
                                  )
                                  (case
                                    (OptP (VarP delay))
                                    (BlockE
                                      (LetD
                                        (VarP expire)
                                        (PrimE
                                          (BinPrim Nat64 AddOp)
                                          (VarE pivot)
                                          (PrimE
                                            (BinPrim Nat64 MulOp)
                                            (VarE delay)
                                            (PrimE
                                              (BinPrim Nat64 AddOp)
                                              (LitE (Nat64Lit 1))
                                              (PrimE
                                                (BinPrim Nat64 DivOp)
                                                (PrimE
                                                  (BinPrim Nat64 SubOp)
                                                  (VarE now)
                                                  (VarE pivot)
                                                )
                                                (VarE delay)
                                              )
                                            )
                                          )
                                        )
                                      )
                                      (LetD
                                        WildP
                                        (AssignE
                                          (IdxLE
                                            (PrimE (DotPrim expire) (VarE n))
                                            (LitE (NatLit 0))
                                          )
                                          (LitE (Nat64Lit 0))
                                        )
                                      )
                                      (LetD
                                        (VarP reinsert)
                                        (FuncE
                                          reinsert
                                          Local
                                          Returns
                                          (params m)
                                          @Node
                                          (SwitchE
                                            (VarE m)
                                            (case
                                              (LitP NullLit)
                                              (BlockE
                                                (LetD (VarP $base/2) (VarE n))
                                                (LetD
                                                  (VarP $expire/1)
                                                  (PrimE
                                                    (ArrayPrim Var Nat64)
                                                    (VarE expire)
                                                  )
                                                )
                                                (LetD
                                                  (VarP $pre/1)
                                                  (LitE NullLit)
                                                )
                                                (LetD
                                                  (VarP $post/1)
                                                  (LitE NullLit)
                                                )
                                                (LetD
                                                  (VarP $delay/1)
                                                  (PrimE
                                                    (DotPrim delay)
                                                    (VarE $base/2)
                                                  )
                                                )
                                                (LetD
                                                  (VarP $id/1)
                                                  (PrimE
                                                    (DotPrim id)
                                                    (VarE $base/2)
                                                  )
                                                )
                                                (LetD
                                                  (VarP $job/1)
                                                  (PrimE
                                                    (DotPrim job)
                                                    (VarE $base/2)
                                                  )
                                                )
                                                (NewObjE
                                                  Object
                                                  (job $job/1)
                                                  (id $id/1)
                                                  (delay $delay/1)
                                                  (post $post/1)
                                                  (pre $pre/1)
                                                  (expire $expire/1)
                                                  {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                                                )
                                              )
                                            )
                                            (case
                                              (OptP (VarP m))
                                              (BlockE
                                                (LetD
                                                  WildP
                                                  (PrimE
                                                    AssertPrim
                                                    (PrimE
                                                      (RelPrim Bool EqOp)
                                                      (PrimE
                                                        (RelPrim Nat64 EqOp)
                                                        (PrimE
                                                          IdxPrim
                                                          (PrimE
                                                            (DotPrim expire)
                                                            (VarE m)
                                                          )
                                                          (LitE (NatLit 0))
                                                        )
                                                        (LitE (Nat64Lit 0))
                                                      )
                                                      (LitE (BoolLit false))
                                                    )
                                                  )
                                                )
                                                (IfE
                                                  (PrimE
                                                    (RelPrim Nat64 LtOp)
                                                    (VarE expire)
                                                    (PrimE
                                                      IdxPrim
                                                      (PrimE
                                                        (DotPrim expire)
                                                        (VarE m)
                                                      )
                                                      (LitE (NatLit 0))
                                                    )
                                                  )
                                                  (BlockE
                                                    (LetD
                                                      (VarP $base/4)
                                                      (VarE m)
                                                    )
                                                    (LetD
                                                      (VarP $pre/3)
                                                      (PrimE
                                                        OptPrim
                                                        (PrimE
                                                          (CallPrim)
                                                          (VarE reinsert)
                                                          (PrimE
                                                            (DotPrim pre)
                                                            (VarE m)
                                                          )
                                                        )
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $delay/3)
                                                      (PrimE
                                                        (DotPrim delay)
                                                        (VarE $base/4)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $expire/3)
                                                      (PrimE
                                                        (DotPrim expire)
                                                        (VarE $base/4)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $id/3)
                                                      (PrimE
                                                        (DotPrim id)
                                                        (VarE $base/4)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $job/3)
                                                      (PrimE
                                                        (DotPrim job)
                                                        (VarE $base/4)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $post/3)
                                                      (PrimE
                                                        (DotPrim post)
                                                        (VarE $base/4)
                                                      )
                                                    )
                                                    (NewObjE
                                                      Object
                                                      (post $post/3)
                                                      (job $job/3)
                                                      (id $id/3)
                                                      (expire $expire/3)
                                                      (delay $delay/3)
                                                      (pre $pre/3)
                                                      {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                                                    )
                                                  )
                                                  (BlockE
                                                    (LetD
                                                      (VarP $base/3)
                                                      (VarE m)
                                                    )
                                                    (LetD
                                                      (VarP $post/2)
                                                      (PrimE
                                                        OptPrim
                                                        (PrimE
                                                          (CallPrim)
                                                          (VarE reinsert)
                                                          (PrimE
                                                            (DotPrim post)
                                                            (VarE m)
                                                          )
                                                        )
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $delay/2)
                                                      (PrimE
                                                        (DotPrim delay)
                                                        (VarE $base/3)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $expire/2)
                                                      (PrimE
                                                        (DotPrim expire)
                                                        (VarE $base/3)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $id/2)
                                                      (PrimE
                                                        (DotPrim id)
                                                        (VarE $base/3)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $job/2)
                                                      (PrimE
                                                        (DotPrim job)
                                                        (VarE $base/3)
                                                      )
                                                    )
                                                    (LetD
                                                      (VarP $pre/2)
                                                      (PrimE
                                                        (DotPrim pre)
                                                        (VarE $base/3)
                                                      )
                                                    )
                                                    (NewObjE
                                                      Object
                                                      (pre $pre/2)
                                                      (job $job/2)
                                                      (id $id/2)
                                                      (expire $expire/2)
                                                      (delay $delay/2)
                                                      (post $post/2)
                                                      {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                                                    )
                                                  )
                                                )
                                              )
                                            )
                                          )
                                        )
                                      )
                                      (AssignE
                                        (VarLE @timers)
                                        (PrimE
                                          OptPrim
                                          (PrimE
                                            (CallPrim)
                                            (VarE reinsert)
                                            (PrimE
                                              (CallPrim)
                                              (VarE @prune)
                                              (VarE! @timers)
                                            )
                                          )
                                        )
                                      )
                                    )
                                  )
                                )
                              )
                              (AssignE
                                (VarLE gathered)
                                (PrimE
                                  (BinPrim Nat AddOp)
                                  (VarE! gathered)
                                  (LitE (NatLit 1))
                                )
                              )
                            )
                            (PrimE TupPrim)
                          )
                        )
                        (PrimE
                          (CallPrim)
                          (VarE gatherExpired)
                          (PrimE (DotPrim post) (VarE n))
                        )
                      )
                      (PrimE TupPrim)
                    )
                  )
                )
              )
            )
          )
          (LetD WildP (PrimE (CallPrim) (VarE gatherExpired) (VarE! @timers)))
          (LetD
            (VarP exp)
            (PrimE (CallPrim) (VarE @nextExpiration) (VarE! @timers))
          )
          (LetD
            WildP
            (BlockE
              (LetD WildP (PrimE global_timer_set (VarE exp)))
              (PrimE TupPrim)
            )
          )
          (LetD
            WildP
            (IfE
              (PrimE (RelPrim Nat64 EqOp) (VarE exp) (LitE (Nat64Lit 0)))
              (AssignE (VarLE @timers) (LitE NullLit))
              (PrimE TupPrim)
            )
          )
          (VarD failed Nat64 (LitE (Nat64Lit 0)))
          (LetD
            (VarP reinsert)
            (FuncE
              reinsert
              Local
              Returns
              (params job)
              ()
              (BlockE
                (LetD
                  WildP
                  (IfE
                    (PrimE
                      (RelPrim Nat64 EqOp)
                      (VarE! failed)
                      (LitE (Nat64Lit 0))
                    )
                    (BlockE
                      (LetD
                        WildP
                        (AssignE
                          (VarLE @timers)
                          (PrimE (CallPrim) (VarE @prune) (VarE! @timers))
                        )
                      )
                      (BlockE
                        (LetD
                          WildP
                          (PrimE global_timer_set (LitE (Nat64Lit 1)))
                        )
                        (PrimE TupPrim)
                      )
                    )
                    (PrimE TupPrim)
                  )
                )
                (LetD
                  WildP
                  (AssignE
                    (VarLE failed)
                    (PrimE
                      (BinPrim Nat64 AddOp)
                      (VarE! failed)
                      (LitE (Nat64Lit 1))
                    )
                  )
                )
                (AssignE
                  (VarLE @timers)
                  (PrimE
                    OptPrim
                    (SwitchE
                      (VarE! @timers)
                      (case
                        (OptP
                          (ObjP
                            (id (LitP (IntLit 0)))
                            (pre (VarP pre))
                            (post (VarP post))
                            (job (VarP j))
                            (expire (VarP expire))
                            (delay (VarP delay))
                          )
                        )
                        (BlockE
                          (LetD
                            (VarP $expire/4)
                            (PrimE (ArrayPrim Var Nat64) (VarE! failed))
                          )
                          (LetD (VarP $id/4) (LitE (NatLit 0)))
                          (LetD
                            (VarP $pre/4)
                            (PrimE
                              OptPrim
                              (BlockE
                                (LetD (VarP $id/5) (LitE (NatLit 0)))
                                (LetD (VarP $post/4) (LitE NullLit))
                                (NewObjE
                                  Object
                                  (job j)
                                  (delay delay)
                                  (post $post/4)
                                  (pre pre)
                                  (expire expire)
                                  (id $id/5)
                                  {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                                )
                              )
                            )
                          )
                          (NewObjE
                            Object
                            (pre $pre/4)
                            (post post)
                            (job job)
                            (delay delay)
                            (id $id/4)
                            (expire $expire/4)
                            {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                          )
                        )
                      )
                      (case
                        WildP
                        (BlockE
                          (LetD
                            (VarP $expire/5)
                            (PrimE (ArrayPrim Var Nat64) (VarE! failed))
                          )
                          (LetD (VarP $id/6) (LitE (NatLit 0)))
                          (LetD (VarP $delay/4) (LitE NullLit))
                          (LetD (VarP $pre/5) (LitE NullLit))
                          (LetD (VarP $post/5) (VarE! @timers))
                          (NewObjE
                            Object
                            (post $post/5)
                            (pre $pre/5)
                            (job job)
                            (delay $delay/4)
                            (id $id/6)
                            (expire $expire/5)
                            {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
          (BlockE
            (LetD (VarP $arr/2) (VarE thunks))
            (LetD (VarP $last/2) (PrimE GetLastArrayOffset (VarE $arr/2)))
            (VarD $indx/2 Nat (LitE (NatLit 0)))
            (IfE
              (PrimE EqArrayOffset (VarE $last/2) (LitE (IntLit -1)))
              (PrimE TupPrim)
              (LabelE
                $done/6
                ()
                (LoopE
                  (BlockE
                    (LetD
                      (VarP o)
                      (PrimE DerefArrayOffset (VarE $arr/2) (VarE! $indx/2))
                    )
                    (LetD
                      WildP
                      (SwitchE
                        (VarE o)
                        (case
                          (OptP (VarP thunk))
                          (TryE
                            (BlockE
                              (LetD
                                WildP
                                (PrimE
                                  (CallPrim $@timer_helper)
                                  (VarE thunk)
                                  (PrimE TupPrim)
                                )
                              )
                              (PrimE TupPrim)
                            )
                            (case
                              WildP
                              (PrimE (CallPrim) (VarE reinsert) (VarE thunk))
                            )
                          )
                        )
                        (case WildP (PrimE RetPrim (PrimE TupPrim)))
                      )
                    )
                    (IfE
                      (PrimE EqArrayOffset (VarE! $indx/2) (VarE $last/2))
                      (PrimE (BreakPrim $done/6) (PrimE TupPrim))
                      (AssignE
                        (VarLE $indx/2)
                        (PrimE NextArrayOffset (VarE! $indx/2))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        $
      )
    )
  )
  (VarD @lastTimerId Nat (LitE (NatLit 0)))
  (LetD
    (VarP @setTimer)
    (FuncE
      @setTimer
      Local
      Returns
      ($ Any)
      (params delayNanos recurring job)
      Nat
      (BlockE
        (LetD
          WildP
          (AssignE
            (VarLE @lastTimerId)
            (PrimE (BinPrim Nat AddOp) (VarE! @lastTimerId) (LitE (NatLit 1)))
          )
        )
        (LetD (VarP id) (VarE! @lastTimerId))
        (LetD (VarP now) (PrimE SystemTimePrim))
        (LetD
          (VarP expire)
          (PrimE (BinPrim Nat64 AddOp) (VarE now) (VarE delayNanos))
        )
        (LetD
          (VarP delay)
          (IfE
            (VarE recurring)
            (PrimE OptPrim (VarE delayNanos))
            (LitE NullLit)
          )
        )
        (LetD
          (VarP insert)
          (FuncE
            insert
            Local
            Returns
            (params n)
            @Node
            (SwitchE
              (VarE n)
              (case
                (LitP NullLit)
                (BlockE
                  (LetD
                    (VarP $expire/6)
                    (PrimE (ArrayPrim Var Nat64) (VarE expire))
                  )
                  (LetD (VarP $pre/6) (LitE NullLit))
                  (LetD (VarP $post/6) (LitE NullLit))
                  (NewObjE
                    Object
                    (post $post/6)
                    (pre $pre/6)
                    (job job)
                    (delay delay)
                    (id id)
                    (expire $expire/6)
                    {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                  )
                )
              )
              (case
                (OptP (VarP n))
                (BlockE
                  (LetD
                    WildP
                    (PrimE
                      AssertPrim
                      (PrimE
                        (RelPrim Bool EqOp)
                        (PrimE
                          (RelPrim Nat64 EqOp)
                          (PrimE
                            IdxPrim
                            (PrimE (DotPrim expire) (VarE n))
                            (LitE (NatLit 0))
                          )
                          (LitE (Nat64Lit 0))
                        )
                        (LitE (BoolLit false))
                      )
                    )
                  )
                  (IfE
                    (PrimE
                      (RelPrim Nat64 LtOp)
                      (VarE expire)
                      (PrimE
                        IdxPrim
                        (PrimE (DotPrim expire) (VarE n))
                        (LitE (NatLit 0))
                      )
                    )
                    (BlockE
                      (LetD (VarP $base/6) (VarE n))
                      (LetD
                        (VarP $pre/8)
                        (PrimE
                          OptPrim
                          (PrimE
                            (CallPrim)
                            (VarE insert)
                            (PrimE (DotPrim pre) (VarE n))
                          )
                        )
                      )
                      (LetD
                        (VarP $delay/6)
                        (PrimE (DotPrim delay) (VarE $base/6))
                      )
                      (LetD
                        (VarP $expire/8)
                        (PrimE (DotPrim expire) (VarE $base/6))
                      )
                      (LetD (VarP $id/8) (PrimE (DotPrim id) (VarE $base/6)))
                      (LetD (VarP $job/5) (PrimE (DotPrim job) (VarE $base/6)))
                      (LetD
                        (VarP $post/8)
                        (PrimE (DotPrim post) (VarE $base/6))
                      )
                      (NewObjE
                        Object
                        (post $post/8)
                        (job $job/5)
                        (id $id/8)
                        (expire $expire/8)
                        (delay $delay/6)
                        (pre $pre/8)
                        {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                      )
                    )
                    (BlockE
                      (LetD (VarP $base/5) (VarE n))
                      (LetD
                        (VarP $post/7)
                        (PrimE
                          OptPrim
                          (PrimE
                            (CallPrim)
                            (VarE insert)
                            (PrimE (DotPrim post) (VarE n))
                          )
                        )
                      )
                      (LetD
                        (VarP $delay/5)
                        (PrimE (DotPrim delay) (VarE $base/5))
                      )
                      (LetD
                        (VarP $expire/7)
                        (PrimE (DotPrim expire) (VarE $base/5))
                      )
                      (LetD (VarP $id/7) (PrimE (DotPrim id) (VarE $base/5)))
                      (LetD (VarP $job/4) (PrimE (DotPrim job) (VarE $base/5)))
                      (LetD (VarP $pre/7) (PrimE (DotPrim pre) (VarE $base/5)))
                      (NewObjE
                        Object
                        (pre $pre/7)
                        (job $job/4)
                        (id $id/7)
                        (expire $expire/7)
                        (delay $delay/5)
                        (post $post/7)
                        {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          WildP
          (AssignE
            (VarLE @timers)
            (PrimE
              OptPrim
              (PrimE
                (CallPrim)
                (VarE insert)
                (PrimE (CallPrim) (VarE @prune) (VarE! @timers))
              )
            )
          )
        )
        (LetD
          (VarP exp)
          (PrimE (CallPrim) (VarE @nextExpiration) (VarE! @timers))
        )
        (LetD
          WildP
          (IfE
            (PrimE (RelPrim Nat64 EqOp) (VarE exp) (LitE (Nat64Lit 0)))
            (AssignE (VarLE @timers) (LitE NullLit))
            (PrimE TupPrim)
          )
        )
        (LetD
          WildP
          (BlockE
            (LetD WildP (PrimE global_timer_set (VarE exp)))
            (PrimE TupPrim)
          )
        )
        (VarE id)
      )
    )
  )
  (LetD
    (VarP @cancelTimer)
    (FuncE
      @cancelTimer
      Local
      Returns
      (params id)
      ()
      (BlockE
        (LetD
          (VarP graft)
          (FuncE
            graft
            Local
            Returns
            (params onto branch)
            ?@Node
            (SwitchE
              (PrimE TupPrim (VarE onto) (VarE branch))
              (case (TupP (LitP NullLit) (LitP NullLit)) (LitE NullLit))
              (case (TupP (LitP NullLit) WildP) (VarE branch))
              (case (TupP WildP (LitP NullLit)) (VarE onto))
              (case
                (TupP (OptP (VarP onto)) WildP)
                (PrimE
                  OptPrim
                  (BlockE
                    (LetD (VarP $base/7) (VarE onto))
                    (LetD
                      (VarP $post/9)
                      (PrimE
                        (CallPrim)
                        (VarE graft)
                        (PrimE
                          TupPrim
                          (PrimE (DotPrim post) (VarE onto))
                          (VarE branch)
                        )
                      )
                    )
                    (LetD
                      (VarP $delay/7)
                      (PrimE (DotPrim delay) (VarE $base/7))
                    )
                    (LetD
                      (VarP $expire/9)
                      (PrimE (DotPrim expire) (VarE $base/7))
                    )
                    (LetD (VarP $id/9) (PrimE (DotPrim id) (VarE $base/7)))
                    (LetD (VarP $job/6) (PrimE (DotPrim job) (VarE $base/7)))
                    (LetD (VarP $pre/9) (PrimE (DotPrim pre) (VarE $base/7)))
                    (NewObjE
                      Object
                      (pre $pre/9)
                      (job $job/6)
                      (id $id/9)
                      (expire $expire/9)
                      (delay $delay/7)
                      (post $post/9)
                      {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          (VarP hunt)
          (FuncE
            hunt
            Local
            Returns
            (params n)
            ?@Node
            (SwitchE
              (VarE n)
              (case (LitP NullLit) (VarE n))
              (case
                (OptP
                  (ObjP (id (VarP node)) (pre (VarP pre)) (post (VarP post)))
                )
                (IfE
                  (PrimE (RelPrim Nat EqOp) (VarE node) (VarE id))
                  (PrimE
                    (CallPrim)
                    (VarE graft)
                    (PrimE TupPrim (VarE pre) (VarE post))
                  )
                  (LabelE
                    !
                    ?@Node
                    (PrimE
                      OptPrim
                      (BlockE
                        (LetD
                          (VarP $base/8)
                          (SwitchE
                            (VarE n)
                            (case
                              (LitP NullLit)
                              (PrimE (BreakPrim !) (LitE NullLit))
                            )
                            (case (OptP (VarP $v/0)) (VarE $v/0))
                          )
                        )
                        (LetD
                          (VarP $pre/10)
                          (PrimE (CallPrim) (VarE hunt) (VarE pre))
                        )
                        (LetD
                          (VarP $post/10)
                          (PrimE (CallPrim) (VarE hunt) (VarE post))
                        )
                        (LetD
                          (VarP $delay/8)
                          (PrimE (DotPrim delay) (VarE $base/8))
                        )
                        (LetD
                          (VarP $expire/10)
                          (PrimE (DotPrim expire) (VarE $base/8))
                        )
                        (LetD (VarP $id/10) (PrimE (DotPrim id) (VarE $base/8)))
                        (LetD
                          (VarP $job/7)
                          (PrimE (DotPrim job) (VarE $base/8))
                        )
                        (NewObjE
                          Object
                          (job $job/7)
                          (id $id/10)
                          (expire $expire/10)
                          (delay $delay/8)
                          (post $post/10)
                          (pre $pre/10)
                          {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          WildP
          (AssignE
            (VarLE @timers)
            (PrimE (CallPrim) (VarE hunt) (VarE! @timers))
          )
        )
        (IfE
          (PrimE
            (RelPrim Nat64 EqOp)
            (PrimE (CallPrim) (VarE @nextExpiration) (VarE! @timers))
            (LitE (Nat64Lit 0))
          )
          (BlockE
            (LetD
              WildP
              (BlockE
                (LetD WildP (PrimE global_timer_set (LitE (Nat64Lit 0))))
                (PrimE TupPrim)
              )
            )
            (AssignE (VarLE @timers) (LitE NullLit))
          )
          (PrimE TupPrim)
        )
      )
    )
  )
  (LetD
    (VarP @set_global_timer)
    (FuncE
      @set_global_timer
      Local
      Returns
      (params time)
      ()
      (BlockE (LetD WildP (PrimE global_timer_set (VarE time))) (PrimE TupPrim))
    )
  )
  (LetD
    (VarP @dedup)
    (FuncE
      @dedup
      Local
      Returns
      (params b)
      Blob
      (BlockE
        (LetD
          (VarP Array_tabulate)
          (FuncE
            Array_tabulate
            Local
            Returns
            (T Any)
            (params len gen)
            [T]
            (PrimE Array.tabulate (VarE len) (VarE gen))
          )
        )
        (LetD
          (VarP Array_tabulateVar)
          (FuncE
            Array_tabulateVar
            Local
            Returns
            (T Any)
            (params len gen)
            [var T]
            (PrimE Array.tabulateVar (VarE len) (VarE gen))
          )
        )
        (LetD (VarP HASH_ARRAY_SIZE) (LitE (NatLit 16_384)))
        (LetD
          (VarP debugPrint)
          (FuncE debugPrint Local Returns (params x) () (PrimE print (VarE x)))
        )
        (LetD
          (VarP hashBlob)
          (FuncE
            hashBlob
            Local
            Returns
            (params b)
            Nat32
            (PrimE crc32Hash (VarE b))
          )
        )
        (LetD
          (VarP allocWeakRef)
          (FuncE
            allocWeakRef
            Local
            Returns
            (T Any)
            (params obj)
            weak T
            (PrimE alloc_weak_ref (VarE obj))
          )
        )
        (LetD
          (VarP weakGet)
          (FuncE
            weakGet
            Local
            Returns
            (T Any)
            (params w)
            ?T
            (PrimE weak_get (VarE w))
          )
        )
        (LetD
          (VarP getDedupTable)
          (FuncE
            getDedupTable
            Local
            Returns
            ?[var List]
            (PrimE get_dedup_table)
          )
        )
        (LetD
          (VarP setDedupTable)
          (FuncE
            setDedupTable
            Local
            Returns
            (params dedupTable)
            ()
            (PrimE set_dedup_table (VarE dedupTable))
          )
        )
        (LetD
          (VarP arrayToBlob)
          (FuncE
            arrayToBlob
            Local
            Returns
            (params a)
            Blob
            (PrimE arrayToBlob (VarE a))
          )
        )
        (LetD
          (VarP getOriginalBlob)
          (FuncE
            getOriginalBlob
            Local
            Returns
            (params b)
            Blob
            (BlockE
              (LetD
                (VarP copiedArr)
                (PrimE
                  (CallPrim Nat8)
                  (VarE Array_tabulate)
                  (PrimE
                    TupPrim
                    (PrimE
                      (BinPrim Nat SubOp)
                      (PrimE blob_size (VarE b))
                      (LitE (NatLit 5))
                    )
                    (FuncE
                      @anon-func-744.50
                      Local
                      Returns
                      (params i)
                      Nat8
                      (PrimE
                        IdxBlobPrim
                        (VarE b)
                        (PrimE (BinPrim Nat AddOp) (VarE i) (LitE (NatLit 5)))
                      )
                    )
                  )
                )
              )
              (LetD
                (VarP originalBlob)
                (PrimE (CallPrim) (VarE arrayToBlob) (VarE copiedArr))
              )
              (VarE originalBlob)
            )
          )
        )
        (LetD
          (VarP blobCompare)
          (FuncE
            blobCompare
            Local
            Returns
            (params b1 b2)
            Int8
            (PrimE blob_compare (VarE b1) (VarE b2))
          )
        )
        (LetD
          (VarP addToList)
          (FuncE
            addToList
            Local
            Returns
            (params list originalBlob weakRef)
            List
            (BlockE
              (LetD
                (VarP newList)
                (BlockE
                  (VarD
                    $next/0
                    ?{index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}
                    (PrimE OptPrim (VarE list))
                  )
                  (LetD (VarP $value/0) (PrimE OptPrim (VarE weakRef)))
                  (LetD
                    (VarP $index/0)
                    (PrimE
                      (BinPrim Nat AddOp)
                      (PrimE (DotPrim index) (VarE list))
                      (LitE (NatLit 1))
                    )
                  )
                  (NewObjE
                    Object
                    (index $index/0)
                    (originalBlob originalBlob)
                    (value $value/0)
                    (next $next/0)
                    {index : Nat; var next : ?{index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}; originalBlob : Blob; value : ?{ref : weak Blob}}
                  )
                )
              )
              (VarE newList)
            )
          )
        )
        (LetD
          (VarP getFromList)
          (FuncE
            getFromList
            Local
            Returns
            (params list originalBlob)
            ?WeakRef
            (BlockE
              (VarD
                copy
                {index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}
                (VarE list)
              )
              (LoopE
                (IfE
                  (PrimE
                    (RelPrim Int8 EqOp)
                    (PrimE
                      (CallPrim)
                      (VarE blobCompare)
                      (PrimE
                        TupPrim
                        (PrimE (DotPrim originalBlob) (VarE! copy))
                        (VarE originalBlob)
                      )
                    )
                    (LitE (Int8Lit 0))
                  )
                  (PrimE RetPrim (PrimE (DotPrim value) (VarE! copy)))
                  (BlockE
                    (LetD (VarP next) (PrimE (DotPrim next) (VarE! copy)))
                    (SwitchE
                      (VarE next)
                      (case (LitP NullLit) (PrimE RetPrim (LitE NullLit)))
                      (case
                        (OptP (VarP next))
                        (AssignE (VarLE copy) (VarE next))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          (VarP getListLen)
          (FuncE
            getListLen
            Local
            Returns
            (params list)
            Nat
            (PrimE (DotPrim index) (VarE list))
          )
        )
        (LetD
          (VarP getHashArrayLen)
          (FuncE
            getHashArrayLen
            Local
            Returns
            (params hashArray)
            Nat
            (BlockE
              (VarD len Nat (LitE (NatLit 0)))
              (VarD i Nat (LitE (NatLit 0)))
              (LetD
                WildP
                (LabelE
                  $done/7
                  ()
                  (LoopE
                    (IfE
                      (PrimE
                        (RelPrim Nat LtOp)
                        (VarE! i)
                        (VarE HASH_ARRAY_SIZE)
                      )
                      (BlockE
                        (LetD
                          WildP
                          (AssignE
                            (VarLE len)
                            (PrimE
                              (BinPrim Nat AddOp)
                              (VarE! len)
                              (PrimE
                                (CallPrim)
                                (VarE getListLen)
                                (PrimE IdxPrim (VarE hashArray) (VarE! i))
                              )
                            )
                          )
                        )
                        (AssignE
                          (VarLE i)
                          (PrimE
                            (BinPrim Nat AddOp)
                            (VarE! i)
                            (LitE (NatLit 1))
                          )
                        )
                      )
                      (PrimE (BreakPrim $done/7) (PrimE TupPrim))
                    )
                  )
                )
              )
              (VarE! len)
            )
          )
        )
        (LetD
          (VarP addToHashArray)
          (FuncE
            addToHashArray
            Local
            Returns
            (params hashArray b)
            ()
            (BlockE
              (LetD
                (VarP hashValue)
                (PrimE (CallPrim) (VarE hashBlob) (VarE b))
              )
              (LetD
                (VarP index)
                (PrimE
                  (BinPrim Nat ModOp)
                  (PrimE (CallPrim) (VarE @nat32ToNat) (VarE hashValue))
                  (VarE HASH_ARRAY_SIZE)
                )
              )
              (LetD (VarP list) (PrimE IdxPrim (VarE hashArray) (VarE index)))
              (LetD
                (VarP weakRef)
                (BlockE
                  (LetD
                    (VarP $ref/0)
                    (PrimE (CallPrim Blob) (VarE allocWeakRef) (VarE b))
                  )
                  (NewObjE Object (ref $ref/0) {ref : weak Blob})
                )
              )
              (AssignE
                (IdxLE (VarE hashArray) (VarE index))
                (PrimE
                  (CallPrim)
                  (VarE addToList)
                  (PrimE
                    TupPrim
                    (VarE list)
                    (PrimE (CallPrim) (VarE getOriginalBlob) (VarE b))
                    (VarE weakRef)
                  )
                )
              )
            )
          )
        )
        (LetD
          (VarP getFromHashArray)
          (FuncE
            getFromHashArray
            Local
            Returns
            (params hashArray b)
            ?WeakRef
            (BlockE
              (LetD
                (VarP hashValue)
                (PrimE (CallPrim) (VarE hashBlob) (VarE b))
              )
              (LetD
                (VarP index)
                (PrimE
                  (BinPrim Nat ModOp)
                  (PrimE (CallPrim) (VarE @nat32ToNat) (VarE hashValue))
                  (VarE HASH_ARRAY_SIZE)
                )
              )
              (LetD (VarP list) (PrimE IdxPrim (VarE hashArray) (VarE index)))
              (PrimE
                (CallPrim)
                (VarE getFromList)
                (PrimE
                  TupPrim
                  (VarE list)
                  (PrimE (CallPrim) (VarE getOriginalBlob) (VarE b))
                )
              )
            )
          )
        )
        (LetD
          WildP
          (IfE
            (PrimE
              (RelPrim Nat LtOp)
              (PrimE blob_size (VarE b))
              (LitE (NatLit 5))
            )
            (PrimE RetPrim (VarE b))
            (PrimE TupPrim)
          )
        )
        (LetD
          WildP
          (IfE
            (IfE
              (IfE
                (IfE
                  (IfE
                    (PrimE
                      (RelPrim Bool EqOp)
                      (PrimE
                        (RelPrim Nat8 EqOp)
                        (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 0)))
                        (LitE (Nat8Lit 33))
                      )
                      (LitE (BoolLit false))
                    )
                    (LitE (BoolLit true))
                    (PrimE
                      (RelPrim Bool EqOp)
                      (PrimE
                        (RelPrim Nat8 EqOp)
                        (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 1)))
                        (LitE (Nat8Lit 99))
                      )
                      (LitE (BoolLit false))
                    )
                  )
                  (LitE (BoolLit true))
                  (PrimE
                    (RelPrim Bool EqOp)
                    (PrimE
                      (RelPrim Nat8 EqOp)
                      (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 2)))
                      (LitE (Nat8Lit 97))
                    )
                    (LitE (BoolLit false))
                  )
                )
                (LitE (BoolLit true))
                (PrimE
                  (RelPrim Bool EqOp)
                  (PrimE
                    (RelPrim Nat8 EqOp)
                    (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 3)))
                    (LitE (Nat8Lit 102))
                  )
                  (LitE (BoolLit false))
                )
              )
              (LitE (BoolLit true))
              (PrimE
                (RelPrim Bool EqOp)
                (PrimE
                  (RelPrim Nat8 EqOp)
                  (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 4)))
                  (LitE (Nat8Lit 33))
                )
                (LitE (BoolLit false))
              )
            )
            (PrimE RetPrim (VarE b))
            (PrimE TupPrim)
          )
        )
        (LetD
          (VarP ptr)
          (PrimE (CallPrim) (VarE getDedupTable) (PrimE TupPrim))
        )
        (LetD
          (VarP hashArray)
          (SwitchE
            (VarE ptr)
            (case (OptP (VarP dedupTable)) (VarE dedupTable))
            (case
              (LitP NullLit)
              (BlockE
                (LetD
                  (VarP arr)
                  (PrimE
                    (CallPrim List)
                    (VarE Array_tabulateVar)
                    (PrimE
                      TupPrim
                      (VarE HASH_ARRAY_SIZE)
                      (FuncE
                        @anon-func-830.58
                        Local
                        Returns
                        (params i)
                        List
                        (BlockE
                          (VarD $next/1 ?List (LitE NullLit))
                          (LetD (VarP $value/1) (LitE NullLit))
                          (LetD (VarP $originalBlob/0) (LitE (BlobLit "")))
                          (LetD (VarP $index/1) (LitE (NatLit 0)))
                          (NewObjE
                            Object
                            (index $index/1)
                            (originalBlob $originalBlob/0)
                            (value $value/1)
                            (next $next/1)
                            {index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}
                          )
                        )
                      )
                    )
                  )
                )
                (LetD WildP (PrimE (CallPrim) (VarE setDedupTable) (VarE arr)))
                (VarE arr)
              )
            )
          )
        )
        (LetD
          (VarP dedupedBlobWeakRef)
          (PrimE
            (CallPrim)
            (VarE getFromHashArray)
            (PrimE TupPrim (VarE hashArray) (VarE b))
          )
        )
        (LetD
          (VarP result)
          (SwitchE
            (VarE dedupedBlobWeakRef)
            (case
              (OptP (VarP weakRef))
              (BlockE
                (LetD
                  (VarP derefed)
                  (PrimE
                    (CallPrim Blob)
                    (VarE weakGet)
                    (PrimE (DotPrim ref) (VarE weakRef))
                  )
                )
                (SwitchE
                  (VarE derefed)
                  (case (OptP (VarP derefed)) (VarE derefed))
                  (case
                    (LitP NullLit)
                    (BlockE
                      (LetD
                        WildP
                        (PrimE
                          (CallPrim)
                          (VarE addToHashArray)
                          (PrimE TupPrim (VarE hashArray) (VarE b))
                        )
                      )
                      (VarE b)
                    )
                  )
                )
              )
            )
            (case
              (LitP NullLit)
              (BlockE
                (LetD
                  WildP
                  (PrimE
                    (CallPrim)
                    (VarE addToHashArray)
                    (PrimE TupPrim (VarE hashArray) (VarE b))
                  )
                )
                (VarE b)
              )
            )
          )
        )
        (VarE result)
      )
    )
  )
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 57))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (IntLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat8Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat16Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat32Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat64Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat8Lit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat16Lit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat32Lit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat64Lit 25))) (PrimE TupPrim)))
)
-- Await Lowering issue-5555.mo:
(ProgU
  (VarD @cycles Nat (LitE (NatLit 0)))
  (VarD @timeout ?Nat32 (LitE NullLit))
  (LetD
    (VarP @add_cycles)
    (FuncE
      @add_cycles
      Local
      Returns
      ($ Any)
      ()
      (BlockE
        (LetD (VarP cycles) (VarE! @cycles))
        (LetD WildP (PrimE (CallPrim) (VarE @reset_cycles) (PrimE TupPrim)))
        (LetD
          WildP
          (IfE
            (PrimE
              (RelPrim Bool EqOp)
              (PrimE (RelPrim Nat EqOp) (VarE cycles) (LitE (NatLit 0)))
              (LitE (BoolLit false))
            )
            (PrimE SystemCyclesAddPrim (VarE cycles))
            (PrimE TupPrim)
          )
        )
        (SwitchE
          (VarE! @timeout)
          (case
            (OptP (VarP timeout))
            (BlockE
              (LetD WildP (AssignE (VarLE @timeout) (LitE NullLit)))
              (PrimE SystemTimeoutSetPrim (VarE timeout))
            )
          )
          (case (LitP NullLit) (PrimE TupPrim))
        )
      )
    )
  )
  (LetD
    (VarP @reset_cycles)
    (FuncE
      @reset_cycles
      Local
      Returns
      ()
      (AssignE (VarLE @cycles) (LitE (NatLit 0)))
    )
  )
  (LetD
    (VarP @immut_array_get)
    (FuncE
      @immut_array_get
      Local
      Returns
      (A Any)
      (params xs)
      Nat -> A
      (FuncE
        @anon-func-45.49
        Local
        Returns
        (params n)
        A
        (PrimE IdxPrim (VarE xs) (VarE n))
      )
    )
  )
  (LetD
    (VarP @mut_array_get)
    (FuncE
      @mut_array_get
      Local
      Returns
      (A Any)
      (params xs)
      Nat -> A
      (FuncE
        @anon-func-46.51
        Local
        Returns
        (params n)
        A
        (PrimE IdxPrim (VarE xs) (VarE n))
      )
    )
  )
  (LetD
    (VarP @immut_array_size)
    (FuncE
      @immut_array_size
      Local
      Returns
      (A Any)
      (params xs)
      () -> Nat
      (FuncE @anon-func-47.51 Local Returns Nat (PrimE array_len (VarE xs)))
    )
  )
  (LetD
    (VarP @mut_array_size)
    (FuncE
      @mut_array_size
      Local
      Returns
      (A Any)
      (params xs)
      () -> Nat
      (FuncE @anon-func-48.53 Local Returns Nat (PrimE array_len (VarE xs)))
    )
  )
  (LetD
    (VarP @mut_array_put)
    (FuncE
      @mut_array_put
      Local
      Returns
      (A Any)
      (params xs)
      (Nat, A) -> ()
      (FuncE
        @anon-func-49.57
        Local
        Returns
        (params n x)
        ()
        (AssignE (IdxLE (VarE xs) (VarE n)) (VarE x))
      )
    )
  )
  (LetD
    (VarP @immut_array_keys)
    (FuncE
      @immut_array_keys
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<Nat>
      (FuncE
        @anon-func-50.58
        Local
        Returns
        @Iter<Nat>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (VarE j))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat})
        )
      )
    )
  )
  (LetD
    (VarP @mut_array_keys)
    (FuncE
      @mut_array_keys
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<Nat>
      (FuncE
        @anon-func-55.60
        Local
        Returns
        @Iter<Nat>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (VarE j))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat})
        )
      )
    )
  )
  (LetD
    (VarP @immut_array_vals)
    (FuncE
      @immut_array_vals
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<A>
      (FuncE
        @anon-func-60.56
        Local
        Returns
        @Iter<A>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?A
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (PrimE IdxPrim (VarE xs) (VarE j)))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?A})
        )
      )
    )
  )
  (LetD
    (VarP @mut_array_vals)
    (FuncE
      @mut_array_vals
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<A>
      (FuncE
        @anon-func-67.58
        Local
        Returns
        @Iter<A>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?A
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (PrimE IdxPrim (VarE xs) (VarE j)))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?A})
        )
      )
    )
  )
  (LetD
    (VarP @blob_size)
    (FuncE
      @blob_size
      Local
      Returns
      (params b)
      () -> Nat
      (FuncE @anon-func-74.41 Local Returns Nat (PrimE blob_size (VarE b)))
    )
  )
  (LetD
    (VarP @blob_keys)
    (FuncE
      @blob_keys
      Local
      Returns
      (params b)
      () -> @Iter<Nat>
      (FuncE
        @anon-func-75.48
        Local
        Returns
        @Iter<Nat>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE blob_size (VarE b)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (VarE j))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat})
        )
      )
    )
  )
  (LetD
    (VarP @blob_get)
    (FuncE
      @blob_get
      Local
      Returns
      (params b)
      Nat -> Nat8
      (FuncE
        @anon-func-80.42
        Local
        Returns
        (params n)
        Nat8
        (PrimE IdxBlobPrim (VarE b) (VarE n))
      )
    )
  )
  (LetD
    (VarP @blob_vals)
    (FuncE
      @blob_vals
      Local
      Returns
      (params xs)
      () -> @Iter<Nat8>
      (FuncE
        @anon-func-81.50
        Local
        Returns
        @Iter<Nat8>
        (BlockE
          (LetD (VarP i) (PrimE blob_vals_iter (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat8
              (IfE
                (PrimE blob_iter_done (VarE i))
                (LitE NullLit)
                (PrimE OptPrim (PrimE blob_iter_next (VarE i)))
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat8})
        )
      )
    )
  )
  (LetD
    (VarP @text_size)
    (FuncE
      @text_size
      Local
      Returns
      (params xs)
      () -> Nat
      (FuncE @anon-func-88.42 Local Returns Nat (PrimE text_len (VarE xs)))
    )
  )
  (LetD
    (VarP @text_chars)
    (FuncE
      @text_chars
      Local
      Returns
      (params xs)
      () -> @Iter<Char>
      (FuncE
        @anon-func-89.51
        Local
        Returns
        @Iter<Char>
        (BlockE
          (LetD (VarP i) (PrimE text_iter (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Char
              (IfE
                (PrimE text_iter_done (VarE i))
                (LitE NullLit)
                (PrimE OptPrim (PrimE text_iter_next (VarE i)))
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Char})
        )
      )
    )
  )
  (LetD
    (VarP @text_of_num)
    (FuncE
      @text_of_num
      Local
      Returns
      (params x base sep digits)
      Text
      (BlockE
        (VarD text Text (LitE (TextLit )))
        (VarD n Nat (VarE x))
        (LetD
          WildP
          (IfE
            (PrimE (RelPrim Nat EqOp) (VarE! n) (LitE (NatLit 0)))
            (PrimE RetPrim (LitE (TextLit 0)))
            (PrimE TupPrim)
          )
        )
        (VarD i Nat (LitE (NatLit 0)))
        (LetD
          WildP
          (LabelE
            $done/0
            ()
            (LoopE
              (IfE
                (PrimE (RelPrim Nat GtOp) (VarE! n) (LitE (NatLit 0)))
                (BlockE
                  (LetD
                    (VarP rem)
                    (PrimE (BinPrim Nat ModOp) (VarE! n) (VarE base))
                  )
                  (LetD
                    WildP
                    (IfE
                      (IfE
                        (PrimE (RelPrim Nat GtOp) (VarE sep) (LitE (NatLit 0)))
                        (PrimE (RelPrim Nat EqOp) (VarE! i) (VarE sep))
                        (LitE (BoolLit false))
                      )
                      (BlockE
                        (LetD
                          WildP
                          (AssignE
                            (VarLE text)
                            (PrimE
                              (BinPrim Text CatOp)
                              (LitE (TextLit _))
                              (VarE! text)
                            )
                          )
                        )
                        (AssignE (VarLE i) (LitE (NatLit 0)))
                      )
                      (PrimE TupPrim)
                    )
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE text)
                      (PrimE
                        (BinPrim Text CatOp)
                        (PrimE (CallPrim) (VarE digits) (VarE rem))
                        (VarE! text)
                      )
                    )
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE n)
                      (PrimE (BinPrim Nat DivOp) (VarE! n) (VarE base))
                    )
                  )
                  (AssignE
                    (VarLE i)
                    (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                  )
                )
                (PrimE (BreakPrim $done/0) (PrimE TupPrim))
              )
            )
          )
        )
        (VarE! text)
      )
    )
  )
  (LetD
    (VarP @left_pad)
    (FuncE
      @left_pad
      Local
      Returns
      (params pad char t)
      Text
      (IfE
        (PrimE (RelPrim Nat GtOp) (VarE pad) (PrimE text_len (VarE t)))
        (BlockE
          (VarD
            i
            Nat
            (PrimE (BinPrim Nat SubOp) (VarE pad) (PrimE text_len (VarE t)))
          )
          (VarD text Text (VarE t))
          (LetD
            WildP
            (LabelE
              $done/1
              ()
              (LoopE
                (IfE
                  (PrimE (RelPrim Nat GtOp) (VarE! i) (LitE (NatLit 0)))
                  (BlockE
                    (LetD
                      WildP
                      (AssignE
                        (VarLE text)
                        (PrimE (BinPrim Text CatOp) (VarE char) (VarE! text))
                      )
                    )
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat SubOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE (BreakPrim $done/1) (PrimE TupPrim))
                )
              )
            )
          )
          (VarE! text)
        )
        (VarE t)
      )
    )
  )
  (LetD
    (VarP @digits_dec)
    (FuncE
      @digits_dec
      Local
      Returns
      (params x)
      Text
      (PrimE
        conv_Char_Text
        (PrimE
          (NumConvTrapPrim Nat32 Char)
          (PrimE
            (NumConvWrapPrim Int Nat32)
            (PrimE (BinPrim Int AddOp) (VarE x) (LitE (IntLit 48)))
          )
        )
      )
    )
  )
  (LetD
    (VarP @text_of_Nat)
    (FuncE
      @text_of_Nat
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_num)
        (PrimE
          TupPrim
          (VarE x)
          (LitE (NatLit 10))
          (LitE (NatLit 3))
          (VarE @digits_dec)
        )
      )
    )
  )
  (LetD
    (VarP @text_of_Int)
    (FuncE
      @text_of_Int
      Local
      Returns
      (params x)
      Text
      (IfE
        (PrimE (RelPrim Int EqOp) (VarE x) (LitE (IntLit 0)))
        (LitE (TextLit 0))
        (PrimE
          (BinPrim Text CatOp)
          (IfE
            (PrimE (RelPrim Int LtOp) (VarE x) (LitE (IntLit 0)))
            (LitE (TextLit -))
            (LitE (TextLit +))
          )
          (PrimE (CallPrim) (VarE @text_of_Nat) (PrimE abs (VarE x)))
        )
      )
    )
  )
  (LetD
    (VarP @digits_hex)
    (FuncE
      @digits_hex
      Local
      Returns
      (params x)
      Text
      (PrimE
        conv_Char_Text
        (PrimE
          (NumConvTrapPrim Nat32 Char)
          (PrimE
            (NumConvWrapPrim Int Nat32)
            (PrimE
              (BinPrim Int AddOp)
              (VarE x)
              (IfE
                (PrimE (RelPrim Nat LtOp) (VarE x) (LitE (NatLit 10)))
                (LitE (IntLit 48))
                (LitE (IntLit 55))
              )
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @int64ToInt)
    (FuncE
      @int64ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int64 Int) (VarE n))
    )
  )
  (LetD
    (VarP @int32ToInt)
    (FuncE
      @int32ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int32 Int) (VarE n))
    )
  )
  (LetD
    (VarP @int16ToInt)
    (FuncE
      @int16ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int16 Int) (VarE n))
    )
  )
  (LetD
    (VarP @int8ToInt)
    (FuncE
      @int8ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int8 Int) (VarE n))
    )
  )
  (LetD
    (VarP @nat64ToNat)
    (FuncE
      @nat64ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat64 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @nat32ToNat)
    (FuncE
      @nat32ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat32 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @nat16ToNat)
    (FuncE
      @nat16ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat16 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @nat8ToNat)
    (FuncE
      @nat8ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat8 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @text_of_Nat8)
    (FuncE
      @text_of_Nat8
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat8ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Nat16)
    (FuncE
      @text_of_Nat16
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat16ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Nat32)
    (FuncE
      @text_of_Nat32
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat32ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Nat64)
    (FuncE
      @text_of_Nat64
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat64ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int8)
    (FuncE
      @text_of_Int8
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int8ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int16)
    (FuncE
      @text_of_Int16
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int16ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int32)
    (FuncE
      @text_of_Int32
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int32ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int64)
    (FuncE
      @text_of_Int64
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int64ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Float)
    (FuncE
      @text_of_Float
      Local
      Returns
      (params x)
      Text
      (PrimE Float->Text (VarE x))
    )
  )
  (LetD
    (VarP @text_of_Bool)
    (FuncE
      @text_of_Bool
      Local
      Returns
      (params b)
      Text
      (IfE (VarE b) (LitE (TextLit true)) (LitE (TextLit false)))
    )
  )
  (LetD
    (VarP @text_of_Text)
    (FuncE
      @text_of_Text
      Local
      Returns
      (params t)
      Text
      (PrimE
        (BinPrim Text CatOp)
        (PrimE (BinPrim Text CatOp) (LitE (TextLit ")) (VarE t))
        (LitE (TextLit "))
      )
    )
  )
  (LetD
    (VarP @text_of_Char)
    (FuncE
      @text_of_Char
      Local
      Returns
      (params c)
      Text
      (PrimE
        (BinPrim Text CatOp)
        (PrimE
          (BinPrim Text CatOp)
          (LitE (TextLit '))
          (PrimE conv_Char_Text (VarE c))
        )
        (LitE (TextLit '))
      )
    )
  )
  (LetD
    (VarP @text_of_Blob)
    (FuncE
      @text_of_Blob
      Local
      Returns
      (params blob)
      Text
      (BlockE
        (VarD t Text (LitE (TextLit ")))
        (LetD
          WildP
          (BlockE
            (LetD
              (VarP $nxt/0)
              (PrimE
                (DotPrim next)
                (PrimE
                  (CallPrim)
                  (PrimE (CallPrim) (VarE @blob_vals) (VarE blob))
                  (PrimE TupPrim)
                )
              )
            )
            (LabelE
              $done/2
              ()
              (LoopE
                (SwitchE
                  (PrimE (CallPrim) (VarE $nxt/0) (PrimE TupPrim))
                  (case
                    (LitP NullLit)
                    (PrimE (BreakPrim $done/2) (PrimE TupPrim))
                  )
                  (case
                    (OptP (VarP b))
                    (AssignE
                      (VarLE t)
                      (PrimE
                        (BinPrim Text CatOp)
                        (VarE! t)
                        (PrimE
                          (BinPrim Text CatOp)
                          (LitE (TextLit \))
                          (PrimE
                            (CallPrim)
                            (VarE @left_pad)
                            (PrimE
                              TupPrim
                              (LitE (NatLit 2))
                              (LitE (TextLit 0))
                              (PrimE
                                (CallPrim)
                                (VarE @text_of_num)
                                (PrimE
                                  TupPrim
                                  (PrimE (CallPrim) (VarE @nat8ToNat) (VarE b))
                                  (LitE (NatLit 16))
                                  (LitE (NatLit 0))
                                  (VarE @digits_hex)
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          WildP
          (AssignE
            (VarLE t)
            (PrimE (BinPrim Text CatOp) (VarE! t) (LitE (TextLit ")))
          )
        )
        (PrimE RetPrim (VarE! t))
      )
    )
  )
  (LetD
    (VarP @text_has_parens)
    (FuncE
      @text_has_parens
      Local
      Returns
      (params t)
      Bool
      (SwitchE
        (PrimE
          (CallPrim)
          (PrimE
            (DotPrim next)
            (PrimE
              (CallPrim)
              (PrimE (CallPrim) (VarE @text_chars) (VarE t))
              (PrimE TupPrim)
            )
          )
          (PrimE TupPrim)
        )
        (case (OptP (LitP (CharLit 40))) (LitE (BoolLit true)))
        (case WildP (LitE (BoolLit false)))
      )
    )
  )
  (LetD
    (VarP @text_needs_parens)
    (FuncE
      @text_needs_parens
      Local
      Returns
      (params t)
      Bool
      (SwitchE
        (PrimE
          (CallPrim)
          (PrimE
            (DotPrim next)
            (PrimE
              (CallPrim)
              (PrimE (CallPrim) (VarE @text_chars) (VarE t))
              (PrimE TupPrim)
            )
          )
          (PrimE TupPrim)
        )
        (case
          (OptP
            (AltP
              (AltP
                (AltP (LitP (CharLit 43)) (LitP (CharLit 45)))
                (LitP (CharLit 63))
              )
              (LitP (CharLit 35))
            )
          )
          (LitE (BoolLit true))
        )
        (case WildP (LitE (BoolLit false)))
      )
    )
  )
  (LetD
    (VarP @text_of_option)
    (FuncE
      @text_of_option
      Local
      Returns
      (T Any)
      (params f x)
      Text
      (SwitchE
        (VarE x)
        (case
          (OptP (VarP y))
          (BlockE
            (LetD (VarP fy) (PrimE (CallPrim) (VarE f) (VarE y)))
            (IfE
              (PrimE (CallPrim) (VarE @text_needs_parens) (VarE fy))
              (PrimE
                (BinPrim Text CatOp)
                (PrimE (BinPrim Text CatOp) (LitE (TextLit ?()) (VarE fy))
                (LitE (TextLit )))
              )
              (PrimE (BinPrim Text CatOp) (LitE (TextLit ?)) (VarE fy))
            )
          )
        )
        (case (LitP NullLit) (LitE (TextLit null)))
      )
    )
  )
  (LetD
    (VarP @text_of_variant)
    (FuncE
      @text_of_variant
      Local
      Returns
      (T Any)
      (params l f x)
      Text
      (BlockE
        (LetD (VarP fx) (PrimE (CallPrim) (VarE f) (VarE x)))
        (IfE
          (PrimE (RelPrim Text EqOp) (VarE fx) (LitE (TextLit ())))
          (PrimE (BinPrim Text CatOp) (LitE (TextLit #)) (VarE l))
          (IfE
            (PrimE (CallPrim) (VarE @text_has_parens) (VarE fx))
            (PrimE
              (BinPrim Text CatOp)
              (PrimE (BinPrim Text CatOp) (LitE (TextLit #)) (VarE l))
              (VarE fx)
            )
            (PrimE
              (BinPrim Text CatOp)
              (PrimE
                (BinPrim Text CatOp)
                (PrimE
                  (BinPrim Text CatOp)
                  (PrimE (BinPrim Text CatOp) (LitE (TextLit #)) (VarE l))
                  (LitE (TextLit ())
                )
                (VarE fx)
              )
              (LitE (TextLit )))
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @text_of_array)
    (FuncE
      @text_of_array
      Local
      Returns
      (T Any)
      (params f xs)
      Text
      (BlockE
        (VarD text Text (LitE (TextLit [)))
        (VarD first Bool (LitE (BoolLit true)))
        (LetD
          WildP
          (BlockE
            (LetD (VarP $arr/0) (VarE xs))
            (LetD (VarP $last/0) (PrimE GetLastArrayOffset (VarE $arr/0)))
            (VarD $indx/0 Nat (LitE (NatLit 0)))
            (IfE
              (PrimE EqArrayOffset (VarE $last/0) (LitE (IntLit -1)))
              (PrimE TupPrim)
              (LabelE
                $done/3
                ()
                (LoopE
                  (BlockE
                    (LetD
                      (VarP x)
                      (PrimE DerefArrayOffset (VarE $arr/0) (VarE! $indx/0))
                    )
                    (LetD
                      WildP
                      (BlockE
                        (LetD
                          WildP
                          (IfE
                            (VarE! first)
                            (AssignE (VarLE first) (LitE (BoolLit false)))
                            (AssignE
                              (VarLE text)
                              (PrimE
                                (BinPrim Text CatOp)
                                (VarE! text)
                                (LitE (TextLit , ))
                              )
                            )
                          )
                        )
                        (AssignE
                          (VarLE text)
                          (PrimE
                            (BinPrim Text CatOp)
                            (VarE! text)
                            (PrimE (CallPrim) (VarE f) (VarE x))
                          )
                        )
                      )
                    )
                    (IfE
                      (PrimE EqArrayOffset (VarE! $indx/0) (VarE $last/0))
                      (PrimE (BreakPrim $done/3) (PrimE TupPrim))
                      (AssignE
                        (VarLE $indx/0)
                        (PrimE NextArrayOffset (VarE! $indx/0))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (PrimE (BinPrim Text CatOp) (VarE! text) (LitE (TextLit ])))
      )
    )
  )
  (LetD
    (VarP @text_of_array_mut)
    (FuncE
      @text_of_array_mut
      Local
      Returns
      (T Any)
      (params f xs)
      Text
      (BlockE
        (VarD text Text (LitE (TextLit [var)))
        (VarD first Bool (LitE (BoolLit true)))
        (LetD
          WildP
          (BlockE
            (LetD (VarP $arr/1) (VarE xs))
            (LetD (VarP $last/1) (PrimE GetLastArrayOffset (VarE $arr/1)))
            (VarD $indx/1 Nat (LitE (NatLit 0)))
            (IfE
              (PrimE EqArrayOffset (VarE $last/1) (LitE (IntLit -1)))
              (PrimE TupPrim)
              (LabelE
                $done/4
                ()
                (LoopE
                  (BlockE
                    (LetD
                      (VarP x)
                      (PrimE DerefArrayOffset (VarE $arr/1) (VarE! $indx/1))
                    )
                    (LetD
                      WildP
                      (BlockE
                        (LetD
                          WildP
                          (IfE
                            (VarE! first)
                            (BlockE
                              (LetD
                                WildP
                                (AssignE (VarLE first) (LitE (BoolLit false)))
                              )
                              (AssignE
                                (VarLE text)
                                (PrimE
                                  (BinPrim Text CatOp)
                                  (VarE! text)
                                  (LitE (TextLit  ))
                                )
                              )
                            )
                            (AssignE
                              (VarLE text)
                              (PrimE
                                (BinPrim Text CatOp)
                                (VarE! text)
                                (LitE (TextLit , ))
                              )
                            )
                          )
                        )
                        (AssignE
                          (VarLE text)
                          (PrimE
                            (BinPrim Text CatOp)
                            (VarE! text)
                            (PrimE (CallPrim) (VarE f) (VarE x))
                          )
                        )
                      )
                    )
                    (IfE
                      (PrimE EqArrayOffset (VarE! $indx/1) (VarE $last/1))
                      (PrimE (BreakPrim $done/4) (PrimE TupPrim))
                      (AssignE
                        (VarLE $indx/1)
                        (PrimE NextArrayOffset (VarE! $indx/1))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (PrimE (BinPrim Text CatOp) (VarE! text) (LitE (TextLit ])))
      )
    )
  )
  (LetD
    (VarP @equal_array)
    (FuncE
      @equal_array
      Local
      Returns
      (T Any)
      (params eq a b)
      Bool
      (BlockE
        (LetD
          WildP
          (IfE
            (PrimE
              (RelPrim Bool EqOp)
              (PrimE
                (RelPrim Nat EqOp)
                (PrimE array_len (VarE a))
                (PrimE array_len (VarE b))
              )
              (LitE (BoolLit false))
            )
            (PrimE RetPrim (LitE (BoolLit false)))
            (PrimE TupPrim)
          )
        )
        (VarD i Nat (LitE (NatLit 0)))
        (LetD (VarP s) (PrimE array_len (VarE a)))
        (LetD
          WildP
          (LabelE
            $done/5
            ()
            (LoopE
              (IfE
                (PrimE (RelPrim Nat LtOp) (VarE! i) (VarE s))
                (BlockE
                  (LetD
                    WildP
                    (IfE
                      (PrimE
                        (RelPrim Bool EqOp)
                        (PrimE
                          (CallPrim)
                          (VarE eq)
                          (PrimE
                            TupPrim
                            (PrimE IdxPrim (VarE a) (VarE! i))
                            (PrimE IdxPrim (VarE b) (VarE! i))
                          )
                        )
                        (LitE (BoolLit false))
                      )
                      (PrimE RetPrim (LitE (BoolLit false)))
                      (PrimE TupPrim)
                    )
                  )
                  (AssignE
                    (VarLE i)
                    (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                  )
                )
                (PrimE (BreakPrim $done/5) (PrimE TupPrim))
              )
            )
          )
        )
        (PrimE RetPrim (LitE (BoolLit true)))
      )
    )
  )
  (VarD @refund Nat (LitE (NatLit 0)))
  (LetD
    (VarP @reset_refund)
    (FuncE
      @reset_refund
      Local
      Returns
      ()
      (AssignE (VarLE @refund) (LitE (NatLit 0)))
    )
  )
  (LetD
    (VarP @getSystemRefund)
    (FuncE
      @getSystemRefund
      Local
      Returns
      @Refund
      (PrimE RetPrim (PrimE SystemCyclesRefundedPrim))
    )
  )
  (LetD (VarP @cleanup) (FuncE @cleanup Local Returns () (PrimE TupPrim)))
  (LetD
    (VarP @new_async)
    (FuncE
      @new_async
      Local
      Returns
      (T Any)
      (@Async<T>, @Cont<T>, @Cont<Error>, @CleanCont)
      (BlockE
        (LetD
          (VarP w_null)
          (FuncE
            @anon-func-293.16
            Local
            Returns
            (params r t)
            ()
            (PrimE TupPrim)
          )
        )
        (LetD
          (VarP r_null)
          (FuncE
            @anon-func-294.16
            Local
            Returns
            (params $ignored0/0)
            ()
            (PrimE TupPrim)
          )
        )
        (VarD result ?@Result<T> (LitE NullLit))
        (VarD ws (@Refund, T) -> () (VarE w_null))
        (VarD rs Error -> () (VarE r_null))
        (LetD
          (VarP getRefund)
          (PrimE
            (RelPrim Bool EqOp)
            (PrimE (RelPrim Nat EqOp) (VarE! @cycles) (LitE (NatLit 0)))
            (LitE (BoolLit false))
          )
        )
        (LetD
          (VarP fulfill)
          (FuncE
            fulfill
            Local
            Returns
            (params t)
            ()
            (SwitchE
              (VarE! result)
              (case
                (LitP NullLit)
                (BlockE
                  (LetD
                    (VarP refund)
                    (IfE
                      (VarE getRefund)
                      (PrimE (CallPrim) (VarE @getSystemRefund) (PrimE TupPrim))
                      (LitE (NatLit 0))
                    )
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE result)
                      (PrimE
                        OptPrim
                        (PrimE (TagE ok) (PrimE TupPrim (VarE refund) (VarE t)))
                      )
                    )
                  )
                  (LetD (VarP ws_) (VarE! ws))
                  (LetD WildP (AssignE (VarLE ws) (VarE w_null)))
                  (LetD WildP (AssignE (VarLE rs) (VarE r_null)))
                  (PrimE
                    (CallPrim)
                    (VarE ws_)
                    (PrimE TupPrim (VarE refund) (VarE t))
                  )
                )
              )
              (case (OptP WildP) (PrimE AssertPrim (LitE (BoolLit false))))
            )
          )
        )
        (LetD
          (VarP fail)
          (FuncE
            fail
            Local
            Returns
            (params e)
            ()
            (SwitchE
              (VarE! result)
              (case
                (LitP NullLit)
                (BlockE
                  (LetD
                    WildP
                    (AssignE
                      (VarLE result)
                      (PrimE OptPrim (PrimE (TagE error) (VarE e)))
                    )
                  )
                  (LetD (VarP rs_) (VarE! rs))
                  (LetD WildP (AssignE (VarLE ws) (VarE w_null)))
                  (LetD WildP (AssignE (VarLE rs) (VarE r_null)))
                  (PrimE (CallPrim) (VarE rs_) (VarE e))
                )
              )
              (case (OptP WildP) (PrimE AssertPrim (LitE (BoolLit false))))
            )
          )
        )
        (VarD cleanup () -> () (VarE @cleanup))
        (LetD
          (VarP enqueue)
          (FuncE
            enqueue
            Local
            Returns
            (params k r b)
            {#schedule : () -> (); #suspend}
            (BlockE
              (LetD WildP (AssignE (VarLE cleanup) (VarE b)))
              (SwitchE
                (VarE! result)
                (case
                  (LitP NullLit)
                  (BlockE
                    (LetD (VarP ws_) (VarE! ws))
                    (LetD
                      WildP
                      (AssignE
                        (VarLE ws)
                        (FuncE
                          @anon-func-337.15
                          Local
                          Returns
                          (params r t)
                          ()
                          (BlockE
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE ws_)
                                (PrimE TupPrim (VarE r) (VarE t))
                              )
                            )
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE @reset_cycles)
                                (PrimE TupPrim)
                              )
                            )
                            (LetD WildP (AssignE (VarLE @refund) (VarE r)))
                            (PrimE (CallPrim) (VarE k) (VarE t))
                          )
                        )
                      )
                    )
                    (LetD (VarP rs_) (VarE! rs))
                    (LetD
                      WildP
                      (AssignE
                        (VarLE rs)
                        (FuncE
                          @anon-func-344.15
                          Local
                          Returns
                          (params e)
                          ()
                          (BlockE
                            (LetD WildP (PrimE (CallPrim) (VarE rs_) (VarE e)))
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE @reset_cycles)
                                (PrimE TupPrim)
                              )
                            )
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE @reset_refund)
                                (PrimE TupPrim)
                              )
                            )
                            (PrimE (CallPrim) (VarE r) (VarE e))
                          )
                        )
                      )
                    )
                    (PrimE (TagE suspend) (PrimE TupPrim))
                  )
                )
                (case
                  (OptP (TagP ok (TupP (VarP r) (VarP t))))
                  (PrimE
                    (TagE schedule)
                    (FuncE
                      @anon-func-353.19
                      Local
                      Returns
                      ()
                      (BlockE
                        (LetD WildP (AssignE (VarLE @refund) (VarE r)))
                        (PrimE (CallPrim) (VarE k) (VarE t))
                      )
                    )
                  )
                )
                (case
                  (OptP (TagP error (VarP e)))
                  (PrimE
                    (TagE schedule)
                    (FuncE
                      @anon-func-356.19
                      Local
                      Returns
                      ()
                      (PrimE (CallPrim) (VarE r) (VarE e))
                    )
                  )
                )
              )
            )
          )
        )
        (PrimE
          TupPrim
          (VarE enqueue)
          (VarE fulfill)
          (VarE fail)
          (FuncE
            @anon-func-361.28
            Local
            Returns
            ()
            (PrimE (CallPrim) (VarE! cleanup) (PrimE TupPrim))
          )
        )
      )
    )
  )
  (LetD (VarP @ManagementCanister) (NewObjE Module module {}))
  (LetD
    (VarP @ic00)
    (PrimE
      (ActorOfIdBlob
        actor {create_canister : shared {sender_canister_version : ?Nat64; settings : ?canister_settings} -> async {canister_id : Principal}; install_code : shared {arg : Blob; canister_id : Principal; mode : {#install; #reinstall; #upgrade : ?@UpgradeOptions}; sender_canister_version : ?Nat64; wasm_module : wasm_module} -> async ()}
      )
      (PrimE BlobOfIcUrl (LitE (TextLit aaaaa-aa)))
    )
  )
  (LetD
    (VarP @install_actor_helper)
    (FuncE
      @install_actor_helper
      Local
      Returns
      ($ Any)
      (params install_arg enhanced_orthogonal_persistence wasm_module arg)
      async*<$> Principal
      (PrimE
        (CPSAsync* $)
        (FuncE
          $lambda
          Local
          Returns
          ($@anon-async*-416.24 Any)
          (params $k/0 $r/0 $b/0)
          ()
          (DeclareE
            $mode/1
            (DeclareE
              $canister_id/0
              (BlockE
                (LetD
                  (VarP $k/2)
                  (FuncE
                    $k/2
                    Local
                    Returns
                    (params $param0/0 $param1/0)
                    ()
                    (BlockE
                      (LetD
                        (VarP $v/3)
                        (PrimE TupPrim (VarE $param0/0) (VarE $param1/0))
                      )
                      (BlockE
                        (LetD (TupP (VarP $v/1) (VarP $v/2)) (VarE $v/3))
                        (LetD WildP (DefineE $mode/1 Const (VarE $v/1)))
                        (LetD WildP (DefineE $canister_id/0 Const (VarE $v/2)))
                        (BlockE
                          (LetD (VarP $u/0) (PrimE TupPrim))
                          (BlockE
                            (LetD
                              (VarP $k/1)
                              (FuncE
                                $k/1
                                Local
                                Returns
                                ()
                                (BlockE
                                  (LetD (VarP $v/4) (PrimE TupPrim))
                                  (BlockE
                                    (LetD WildP (VarE $v/4))
                                    (BlockE
                                      (LetD (VarP $u/1) (PrimE TupPrim))
                                      (BlockE
                                        (LetD (VarP $u/2) (PrimE TupPrim))
                                        (PrimE
                                          (CallPrim)
                                          (VarE $k/0)
                                          (PrimE
                                            RetPrim
                                            (PrimE
                                              (CallPrim)
                                              (VarE $k/0)
                                              (VarE $canister_id/0)
                                            )
                                          )
                                        )
                                      )
                                    )
                                  )
                                )
                              )
                            )
                            (BlockE
                              (LetD
                                (VarP $v/5)
                                (PrimE (ActorDotPrim install_code) (VarE @ic00))
                              )
                              (BlockE
                                (LetD
                                  (VarP $u/3)
                                  (PrimE
                                    (CallPrim $@anon-async*-416.24)
                                    (VarE $v/5)
                                    (BlockE
                                      (LetD
                                        (VarP $$sender_canister_version/0/0)
                                        (PrimE OptPrim (PrimE canister_version))
                                      )
                                      (NewObjE
                                        Object
                                        (sender_canister_version
                                          $$sender_canister_version/0/0
                                        )
                                        (arg arg)
                                        (wasm_module wasm_module)
                                        (canister_id $canister_id/0)
                                        (mode $mode/1)
                                        {arg : Blob; canister_id : Principal; mode : {#install; #reinstall; #upgrade : ?@UpgradeOptions}; sender_canister_version : ?Nat64; wasm_module : wasm_module}
                                      )
                                    )
                                  )
                                )
                                (IfE
                                  (PrimE
                                    (CallPrim)
                                    (VarE @call_succeeded)
                                    (PrimE TupPrim)
                                  )
                                  (PrimE
                                    (CPSAwait () -> ())
                                    (VarE $u/3)
                                    (PrimE
                                      TupPrim
                                      (VarE $k/1)
                                      (VarE $r/0)
                                      (VarE $b/0)
                                    )
                                  )
                                  (PrimE
                                    (CallPrim)
                                    (VarE $r/0)
                                    (PrimE
                                      (CallPrim)
                                      (VarE @call_error)
                                      (PrimE TupPrim)
                                    )
                                  )
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
                (SwitchE
                  (VarE install_arg)
                  (case
                    (TagP new (VarP $settings/2))
                    (DeclareE
                      $available/0
                      (DeclareE
                        $accepted/0
                        (DeclareE
                          $sender_canister_version/2
                          (DeclareE
                            $canister_id/1
                            (BlockE
                              (LetD
                                (VarP $v/6)
                                (PrimE SystemCyclesAvailablePrim)
                              )
                              (LetD
                                WildP
                                (DefineE $available/0 Const (VarE $v/6))
                              )
                              (BlockE
                                (LetD (VarP $u/4) (PrimE TupPrim))
                                (BlockE
                                  (LetD
                                    (VarP $v/7)
                                    (PrimE
                                      SystemCyclesAcceptPrim
                                      (VarE $available/0)
                                    )
                                  )
                                  (LetD
                                    WildP
                                    (DefineE $accepted/0 Const (VarE $v/7))
                                  )
                                  (BlockE
                                    (LetD (VarP $u/5) (PrimE TupPrim))
                                    (BlockE
                                      (LetD
                                        (VarP $v/8)
                                        (PrimE OptPrim (PrimE canister_version))
                                      )
                                      (LetD
                                        WildP
                                        (DefineE
                                          $sender_canister_version/2
                                          Const
                                          (VarE $v/8)
                                        )
                                      )
                                      (BlockE
                                        (LetD (VarP $u/6) (PrimE TupPrim))
                                        (BlockE
                                          (LetD
                                            WildP
                                            (AssignE
                                              (VarLE @cycles)
                                              (PrimE
                                                (BinPrim Nat AddOp)
                                                (VarE! @cycles)
                                                (VarE $accepted/0)
                                              )
                                            )
                                          )
                                          (BlockE
                                            (LetD (VarP $u/7) (PrimE TupPrim))
                                            (BlockE
                                              (LetD
                                                (VarP $k/3)
                                                (FuncE
                                                  $k/3
                                                  Local
                                                  Returns
                                                  (params $v/10)
                                                  ()
                                                  (BlockE
                                                    (LetD
                                                      (ObjP
                                                        (canister_id
                                                          (VarP $v/9)
                                                        )
                                                      )
                                                      (VarE $v/10)
                                                    )
                                                    (LetD
                                                      WildP
                                                      (DefineE
                                                        $canister_id/1
                                                        Const
                                                        (VarE $v/9)
                                                      )
                                                    )
                                                    (BlockE
                                                      (LetD
                                                        (VarP $u/8)
                                                        (PrimE TupPrim)
                                                      )
                                                      (BlockE
                                                        (LetD
                                                          (VarP $u/9)
                                                          (PrimE TupPrim)
                                                        )
                                                        (PrimE
                                                          (CallPrim)
                                                          (VarE $k/2)
                                                          (PrimE
                                                            TupPrim
                                                            (PrimE
                                                              (TagE install)
                                                              (PrimE TupPrim)
                                                            )
                                                            (VarE
                                                              $canister_id/1
                                                            )
                                                          )
                                                        )
                                                      )
                                                    )
                                                  )
                                                )
                                              )
                                              (BlockE
                                                (LetD
                                                  (VarP $v/11)
                                                  (PrimE
                                                    (ActorDotPrim
                                                      create_canister
                                                    )
                                                    (VarE @ic00)
                                                  )
                                                )
                                                (BlockE
                                                  (LetD
                                                    (VarP $u/10)
                                                    (PrimE
                                                      (CallPrim
                                                        $@anon-async*-416.24
                                                      )
                                                      (VarE $v/11)
                                                      (BlockE
                                                        (LetD
                                                          (VarP $$base/0/0)
                                                          (VarE $settings/2)
                                                        )
                                                        (LetD
                                                          (VarP $$settings/0/0)
                                                          (PrimE
                                                            (DotPrim settings)
                                                            (VarE $$base/0/0)
                                                          )
                                                        )
                                                        (NewObjE
                                                          Object
                                                          (settings
                                                            $$settings/0/0
                                                          )
                                                          (sender_canister_version
                                                            $sender_canister_version/2
                                                          )
                                                          {sender_canister_version : ?Nat64; settings : ?canister_settings}
                                                        )
                                                      )
                                                    )
                                                  )
                                                  (IfE
                                                    (PrimE
                                                      (CallPrim)
                                                      (VarE @call_succeeded)
                                                      (PrimE TupPrim)
                                                    )
                                                    (PrimE
                                                      (CPSAwait
                                                        {canister_id : Principal} -> ()
                                                      )
                                                      (VarE $u/10)
                                                      (PrimE
                                                        TupPrim
                                                        (VarE $k/3)
                                                        (VarE $r/0)
                                                        (VarE $b/0)
                                                      )
                                                    )
                                                    (PrimE
                                                      (CallPrim)
                                                      (VarE $r/0)
                                                      (PrimE
                                                        (CallPrim)
                                                        (VarE @call_error)
                                                        (PrimE TupPrim)
                                                      )
                                                    )
                                                  )
                                                )
                                              )
                                            )
                                          )
                                        )
                                      )
                                    )
                                  )
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                  (case
                    (TagP install (VarP $principal1/0))
                    (PrimE
                      (CallPrim)
                      (VarE $k/2)
                      (PrimE
                        TupPrim
                        (PrimE (TagE install) (PrimE TupPrim))
                        (VarE $principal1/0)
                      )
                    )
                  )
                  (case
                    (TagP reinstall (VarP $actor1/0))
                    (PrimE
                      (CallPrim)
                      (VarE $k/2)
                      (PrimE
                        TupPrim
                        (PrimE (TagE reinstall) (PrimE TupPrim))
                        (PrimE principalOfActor (VarE $actor1/0))
                      )
                    )
                  )
                  (case
                    (TagP upgrade (VarP $actor2/0))
                    (PrimE
                      (CallPrim)
                      (VarE $k/2)
                      (BlockE
                        (LetD
                          (VarP $wasm_memory_persistence/1)
                          (IfE
                            (VarE enhanced_orthogonal_persistence)
                            (PrimE OptPrim (PrimE (TagE keep) (PrimE TupPrim)))
                            (LitE NullLit)
                          )
                        )
                        (LetD
                          (VarP $upgradeOptions/0)
                          (NewObjE
                            Object
                            (wasm_memory_persistence $wasm_memory_persistence/1)
                            {wasm_memory_persistence : ?{#keep}}
                          )
                        )
                        (PrimE
                          TupPrim
                          (PrimE
                            (TagE upgrade)
                            (PrimE OptPrim (VarE $upgradeOptions/0))
                          )
                          (PrimE principalOfActor (VarE $actor2/0))
                        )
                      )
                    )
                  )
                  (case
                    (TagP
                      upgrade_with_persistence
                      (ObjP
                        (wasm_memory_persistence
                          (VarP $wasm_memory_persistence/2)
                        )
                        (canister (VarP $canister/0))
                      )
                    )
                    (PrimE
                      (CallPrim)
                      (VarE $k/2)
                      (BlockE
                        (LetD
                          (VarP $upgradeOptions/1)
                          (BlockE
                            (LetD
                              (VarP $$wasm_memory_persistence/0/0)
                              (PrimE OptPrim (VarE $wasm_memory_persistence/2))
                            )
                            (NewObjE
                              Object
                              (wasm_memory_persistence
                                $$wasm_memory_persistence/0/0
                              )
                              {wasm_memory_persistence : ?{#keep; #replace}}
                            )
                          )
                        )
                        (PrimE
                          TupPrim
                          (PrimE
                            (TagE upgrade)
                            (PrimE OptPrim (VarE $upgradeOptions/1))
                          )
                          (PrimE principalOfActor (VarE $canister/0))
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @create_actor_helper)
    (FuncE
      @create_actor_helper
      Local
      Returns
      ($ Any)
      (params wasm_module arg)
      async<$> Principal
      (PrimE
        (CPSAsync $)
        (FuncE
          $lambda
          Local
          Returns
          ($@anon-async-464.79 Any)
          (params $k/4 $r/1 $b/1)
          ()
          (DeclareE
            $available/1
            (DeclareE
              $accepted/1
              (DeclareE
                $sender_canister_version/3
                (DeclareE
                  $canister_id/2
                  (BlockE
                    (LetD (VarP $v/12) (PrimE SystemCyclesAvailablePrim))
                    (LetD WildP (DefineE $available/1 Const (VarE $v/12)))
                    (BlockE
                      (LetD (VarP $u/11) (PrimE TupPrim))
                      (BlockE
                        (LetD
                          (VarP $v/13)
                          (PrimE SystemCyclesAcceptPrim (VarE $available/1))
                        )
                        (LetD WildP (DefineE $accepted/1 Const (VarE $v/13)))
                        (BlockE
                          (LetD (VarP $u/12) (PrimE TupPrim))
                          (BlockE
                            (LetD
                              (VarP $v/14)
                              (PrimE OptPrim (PrimE canister_version))
                            )
                            (LetD
                              WildP
                              (DefineE
                                $sender_canister_version/3
                                Const
                                (VarE $v/14)
                              )
                            )
                            (BlockE
                              (LetD (VarP $u/13) (PrimE TupPrim))
                              (BlockE
                                (LetD
                                  WildP
                                  (AssignE
                                    (VarLE @cycles)
                                    (PrimE
                                      (BinPrim Nat AddOp)
                                      (VarE! @cycles)
                                      (VarE $accepted/1)
                                    )
                                  )
                                )
                                (BlockE
                                  (LetD (VarP $u/14) (PrimE TupPrim))
                                  (BlockE
                                    (LetD
                                      (VarP $k/6)
                                      (FuncE
                                        $k/6
                                        Local
                                        Returns
                                        (params $v/16)
                                        ()
                                        (BlockE
                                          (LetD
                                            (ObjP (canister_id (VarP $v/15)))
                                            (VarE $v/16)
                                          )
                                          (LetD
                                            WildP
                                            (DefineE
                                              $canister_id/2
                                              Const
                                              (VarE $v/15)
                                            )
                                          )
                                          (BlockE
                                            (LetD (VarP $u/15) (PrimE TupPrim))
                                            (BlockE
                                              (LetD
                                                (VarP $k/5)
                                                (FuncE
                                                  $k/5
                                                  Local
                                                  Returns
                                                  ()
                                                  (BlockE
                                                    (LetD
                                                      (VarP $v/17)
                                                      (PrimE TupPrim)
                                                    )
                                                    (BlockE
                                                      (LetD WildP (VarE $v/17))
                                                      (BlockE
                                                        (LetD
                                                          (VarP $u/16)
                                                          (PrimE TupPrim)
                                                        )
                                                        (BlockE
                                                          (LetD
                                                            (VarP $u/17)
                                                            (PrimE TupPrim)
                                                          )
                                                          (PrimE
                                                            (CallPrim)
                                                            (VarE $k/4)
                                                            (PrimE
                                                              RetPrim
                                                              (PrimE
                                                                (CallPrim)
                                                                (VarE $k/4)
                                                                (VarE
                                                                  $canister_id/2
                                                                )
                                                              )
                                                            )
                                                          )
                                                        )
                                                      )
                                                    )
                                                  )
                                                )
                                              )
                                              (BlockE
                                                (LetD
                                                  (VarP $v/18)
                                                  (PrimE
                                                    (ActorDotPrim install_code)
                                                    (VarE @ic00)
                                                  )
                                                )
                                                (BlockE
                                                  (LetD
                                                    (VarP $u/18)
                                                    (PrimE
                                                      (CallPrim
                                                        $@anon-async-464.79
                                                      )
                                                      (VarE $v/18)
                                                      (BlockE
                                                        (LetD
                                                          (VarP $$mode/0/0)
                                                          (PrimE
                                                            (TagE install)
                                                            (PrimE TupPrim)
                                                          )
                                                        )
                                                        (LetD
                                                          (VarP
                                                            $$sender_canister_version/1/0
                                                          )
                                                          (PrimE
                                                            OptPrim
                                                            (PrimE
                                                              canister_version
                                                            )
                                                          )
                                                        )
                                                        (NewObjE
                                                          Object
                                                          (sender_canister_version
                                                            $$sender_canister_version/1/0
                                                          )
                                                          (arg arg)
                                                          (wasm_module
                                                            wasm_module
                                                          )
                                                          (canister_id
                                                            $canister_id/2
                                                          )
                                                          (mode $$mode/0/0)
                                                          {arg : Blob; canister_id : Principal; mode : {#install; #reinstall; #upgrade : ?@UpgradeOptions}; sender_canister_version : ?Nat64; wasm_module : wasm_module}
                                                        )
                                                      )
                                                    )
                                                  )
                                                  (IfE
                                                    (PrimE
                                                      (CallPrim)
                                                      (VarE @call_succeeded)
                                                      (PrimE TupPrim)
                                                    )
                                                    (PrimE
                                                      (CPSAwait () -> ())
                                                      (VarE $u/18)
                                                      (PrimE
                                                        TupPrim
                                                        (VarE $k/5)
                                                        (VarE $r/1)
                                                        (VarE $b/1)
                                                      )
                                                    )
                                                    (PrimE
                                                      (CallPrim)
                                                      (VarE $r/1)
                                                      (PrimE
                                                        (CallPrim)
                                                        (VarE @call_error)
                                                        (PrimE TupPrim)
                                                      )
                                                    )
                                                  )
                                                )
                                              )
                                            )
                                          )
                                        )
                                      )
                                    )
                                    (BlockE
                                      (LetD
                                        (VarP $v/19)
                                        (PrimE
                                          (ActorDotPrim create_canister)
                                          (VarE @ic00)
                                        )
                                      )
                                      (BlockE
                                        (LetD
                                          (VarP $u/19)
                                          (PrimE
                                            (CallPrim $@anon-async-464.79)
                                            (VarE $v/19)
                                            (BlockE
                                              (LetD
                                                (VarP $$settings/1/0)
                                                (LitE NullLit)
                                              )
                                              (NewObjE
                                                Object
                                                (sender_canister_version
                                                  $sender_canister_version/3
                                                )
                                                (settings $$settings/1/0)
                                                {sender_canister_version : ?Nat64; settings : ?canister_settings}
                                              )
                                            )
                                          )
                                        )
                                        (IfE
                                          (PrimE
                                            (CallPrim)
                                            (VarE @call_succeeded)
                                            (PrimE TupPrim)
                                          )
                                          (PrimE
                                            (CPSAwait
                                              {canister_id : Principal} -> ()
                                            )
                                            (VarE $u/19)
                                            (PrimE
                                              TupPrim
                                              (VarE $k/6)
                                              (VarE $r/1)
                                              (VarE $b/1)
                                            )
                                          )
                                          (PrimE
                                            (CallPrim)
                                            (VarE $r/1)
                                            (PrimE
                                              (CallPrim)
                                              (VarE @call_error)
                                              (PrimE TupPrim)
                                            )
                                          )
                                        )
                                      )
                                    )
                                  )
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @call_raw)
    (FuncE
      @call_raw
      Local
      Returns
      ($ Any)
      (params p m a)
      async<$> Blob
      (PrimE
        (CPSAsync $)
        (FuncE
          $lambda
          Local
          Returns
          ($@call_raw Any)
          (params $k/7 $r/2 $b/2)
          ()
          (DeclareE
            $available/2
            (BlockE
              (LetD (VarP $v/20) (PrimE SystemCyclesAvailablePrim))
              (LetD WildP (DefineE $available/2 Const (VarE $v/20)))
              (BlockE
                (LetD (VarP $u/20) (PrimE TupPrim))
                (BlockE
                  (LetD
                    WildP
                    (IfE
                      (PrimE
                        (RelPrim Bool EqOp)
                        (PrimE
                          (RelPrim Nat EqOp)
                          (VarE $available/2)
                          (LitE (NatLit 0))
                        )
                        (LitE (BoolLit false))
                      )
                      (AssignE
                        (VarLE @cycles)
                        (PrimE SystemCyclesAcceptPrim (VarE $available/2))
                      )
                      (PrimE TupPrim)
                    )
                  )
                  (BlockE
                    (LetD (VarP $u/21) (PrimE TupPrim))
                    (BlockE
                      (LetD (VarP $u/22) (PrimE TupPrim))
                      (BlockE
                        (LetD
                          (VarP $u/23)
                          (PrimE call_raw (VarE p) (VarE m) (VarE a))
                        )
                        (IfE
                          (PrimE
                            (CallPrim)
                            (VarE @call_succeeded)
                            (PrimE TupPrim)
                          )
                          (PrimE
                            (CPSAwait Blob -> ())
                            (VarE $u/23)
                            (PrimE TupPrim (VarE $k/7) (VarE $r/2) (VarE $b/2))
                          )
                          (PrimE
                            (CallPrim)
                            (VarE $r/2)
                            (PrimE
                              (CallPrim)
                              (VarE @call_error)
                              (PrimE TupPrim)
                            )
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @call_succeeded)
    (FuncE
      @call_succeeded
      Local
      Returns
      Bool
      (PrimE
        (RelPrim Nat32 EqOp)
        (PrimE call_perform_status)
        (LitE (Nat32Lit 0))
      )
    )
  )
  (LetD
    (VarP @call_error)
    (FuncE
      @call_error
      Local
      Returns
      Error
      (BlockE
        (LetD (VarP status) (PrimE call_perform_status))
        (LetD (VarP message) (PrimE call_perform_message))
        (LetD
          (VarP code)
          (PrimE
            (TagE call_error)
            (NewObjE Object (err_code status) {err_code : Nat32})
          )
        )
        (PrimE
          (CastPrim ({#call_error : {err_code : Nat32}}, Text) Error)
          (PrimE TupPrim (VarE code) (VarE message))
        )
      )
    )
  )
  (VarD @timers ?@Node (LitE NullLit))
  (LetD
    (VarP @prune)
    (FuncE
      @prune
      Local
      Returns
      (params n)
      ?@Node
      (SwitchE
        (VarE n)
        (case (LitP NullLit) (LitE NullLit))
        (case
          (OptP (VarP n))
          (IfE
            (PrimE
              (RelPrim Nat64 EqOp)
              (PrimE
                IdxPrim
                (PrimE (DotPrim expire) (VarE n))
                (LitE (NatLit 0))
              )
              (LitE (Nat64Lit 0))
            )
            (PrimE (CallPrim) (VarE @prune) (PrimE (DotPrim post) (VarE n)))
            (PrimE
              OptPrim
              (BlockE
                (LetD (VarP $base/1) (VarE n))
                (LetD
                  (VarP $pre/0)
                  (PrimE
                    (CallPrim)
                    (VarE @prune)
                    (PrimE (DotPrim pre) (VarE n))
                  )
                )
                (LetD (VarP $delay/0) (PrimE (DotPrim delay) (VarE $base/1)))
                (LetD (VarP $expire/0) (PrimE (DotPrim expire) (VarE $base/1)))
                (LetD (VarP $id/0) (PrimE (DotPrim id) (VarE $base/1)))
                (LetD (VarP $job/0) (PrimE (DotPrim job) (VarE $base/1)))
                (LetD (VarP $post/0) (PrimE (DotPrim post) (VarE $base/1)))
                (NewObjE
                  Object
                  (post $post/0)
                  (job $job/0)
                  (id $id/0)
                  (expire $expire/0)
                  (delay $delay/0)
                  (pre $pre/0)
                  {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                )
              )
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @nextExpiration)
    (FuncE
      @nextExpiration
      Local
      Returns
      (params n)
      Nat64
      (SwitchE
        (VarE n)
        (case (LitP NullLit) (LitE (Nat64Lit 0)))
        (case
          (OptP (VarP n))
          (BlockE
            (LetD
              (VarP pivot)
              (PrimE
                IdxPrim
                (PrimE (DotPrim expire) (VarE n))
                (LitE (NatLit 0))
              )
            )
            (LetD
              WildP
              (IfE
                (PrimE (RelPrim Nat64 EqOp) (VarE pivot) (LitE (Nat64Lit 0)))
                (PrimE
                  RetPrim
                  (PrimE
                    (CallPrim)
                    (VarE @nextExpiration)
                    (PrimE (DotPrim post) (VarE n))
                  )
                )
                (PrimE TupPrim)
              )
            )
            (LetD
              (VarP exp)
              (PrimE
                (CallPrim)
                (VarE @nextExpiration)
                (PrimE (DotPrim pre) (VarE n))
              )
            )
            (IfE
              (PrimE (RelPrim Nat64 EqOp) (VarE exp) (LitE (Nat64Lit 0)))
              (VarE pivot)
              (VarE exp)
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @timer_helper)
    (FuncE
      @timer_helper
      Local
      Returns
      ($ Any)
      async<$> ()
      (PrimE
        (CPSAsync $)
        (FuncE
          $lambda
          Local
          Returns
          ($@timer_helper Any)
          (params $k/8 $r/3 $b/3)
          ()
          (DeclareE
            $Array_init/0
            (DeclareE
              $now/0
              (DeclareE
                $gathered/0
                (DeclareE
                  $thunks/0
                  (DeclareE
                    $gatherExpired/0
                    (DeclareE
                      $exp/0
                      (DeclareE
                        $failed/0
                        (DeclareE
                          $reinsert/0
                          (BlockE
                            (LetD
                              (VarP $v/21)
                              (FuncE
                                Array_init
                                Local
                                Returns
                                (T Any)
                                (params $len/0 $x/0)
                                [var T]
                                (PrimE Array.init (VarE $len/0) (VarE $x/0))
                              )
                            )
                            (LetD
                              WildP
                              (DefineE $Array_init/0 Const (VarE $v/21))
                            )
                            (BlockE
                              (LetD (VarP $u/24) (PrimE TupPrim))
                              (BlockE
                                (LetD (VarP $v/22) (PrimE SystemTimePrim))
                                (LetD WildP (DefineE $now/0 Const (VarE $v/22)))
                                (BlockE
                                  (LetD (VarP $u/25) (PrimE TupPrim))
                                  (BlockE
                                    (LetD
                                      (VarP $u/26)
                                      (DefineE
                                        $gathered/0
                                        Var
                                        (LitE (NatLit 0))
                                      )
                                    )
                                    (BlockE
                                      (LetD
                                        (VarP $v/23)
                                        (PrimE
                                          (CallPrim ?(() -> async ()))
                                          (VarE $Array_init/0)
                                          (PrimE
                                            TupPrim
                                            (LitE (NatLit 10))
                                            (LitE NullLit)
                                          )
                                        )
                                      )
                                      (LetD
                                        WildP
                                        (DefineE $thunks/0 Const (VarE $v/23))
                                      )
                                      (BlockE
                                        (LetD (VarP $u/27) (PrimE TupPrim))
                                        (BlockE
                                          (LetD
                                            (VarP $v/24)
                                            (FuncE
                                              gatherExpired
                                              Local
                                              Returns
                                              (params $n/0)
                                              ()
                                              (SwitchE
                                                (VarE $n/0)
                                                (case
                                                  (LitP NullLit)
                                                  (PrimE TupPrim)
                                                )
                                                (case
                                                  (OptP (VarP $n/1))
                                                  (BlockE
                                                    (LetD
                                                      (VarP $pivot/0)
                                                      (PrimE
                                                        IdxPrim
                                                        (PrimE
                                                          (DotPrim expire)
                                                          (VarE $n/1)
                                                        )
                                                        (LitE (NatLit 0))
                                                      )
                                                    )
                                                    (LetD
                                                      WildP
                                                      (IfE
                                                        (PrimE
                                                          (RelPrim Nat64 GtOp)
                                                          (VarE $pivot/0)
                                                          (LitE (Nat64Lit 0))
                                                        )
                                                        (PrimE
                                                          (CallPrim)
                                                          (VarE
                                                            $gatherExpired/0
                                                          )
                                                          (PrimE
                                                            (DotPrim pre)
                                                            (VarE $n/1)
                                                          )
                                                        )
                                                        (PrimE TupPrim)
                                                      )
                                                    )
                                                    (IfE
                                                      (IfE
                                                        (PrimE
                                                          (RelPrim Nat64 LeOp)
                                                          (VarE $pivot/0)
                                                          (VarE $now/0)
                                                        )
                                                        (PrimE
                                                          (RelPrim Nat LtOp)
                                                          (VarE! $gathered/0)
                                                          (PrimE
                                                            array_len
                                                            (VarE $thunks/0)
                                                          )
                                                        )
                                                        (LitE (BoolLit false))
                                                      )
                                                      (BlockE
                                                        (LetD
                                                          WildP
                                                          (IfE
                                                            (PrimE
                                                              (RelPrim
                                                                Nat64
                                                                GtOp
                                                              )
                                                              (VarE $pivot/0)
                                                              (LitE
                                                                (Nat64Lit 0)
                                                              )
                                                            )
                                                            (BlockE
                                                              (LetD
                                                                WildP
                                                                (AssignE
                                                                  (IdxLE
                                                                    (VarE
                                                                      $thunks/0
                                                                    )
                                                                    (VarE!
                                                                      $gathered/0
                                                                    )
                                                                  )
                                                                  (PrimE
                                                                    OptPrim
                                                                    (PrimE
                                                                      (DotPrim
                                                                        job
                                                                      )
                                                                      (VarE
                                                                        $n/1
                                                                      )
                                                                    )
                                                                  )
                                                                )
                                                              )
                                                              (LetD
                                                                WildP
                                                                (SwitchE
                                                                  (PrimE
                                                                    (DotPrim
                                                                      delay
                                                                    )
                                                                    (VarE $n/1)
                                                                  )
                                                                  (case
                                                                    (AltP
                                                                      (LitP
                                                                        NullLit
                                                                      )
                                                                      (OptP
                                                                        (LitP
                                                                          (Nat64Lit
                                                                            0
                                                                          )
                                                                        )
                                                                      )
                                                                    )
                                                                    (AssignE
                                                                      (IdxLE
                                                                        (PrimE
                                                                          (DotPrim
                                                                            expire
                                                                          )
                                                                          (VarE
                                                                            $n/1
                                                                          )
                                                                        )
                                                                        (LitE
                                                                          (NatLit
                                                                            0
                                                                          )
                                                                        )
                                                                      )
                                                                      (LitE
                                                                        (Nat64Lit
                                                                          0
                                                                        )
                                                                      )
                                                                    )
                                                                  )
                                                                  (case
                                                                    (OptP
                                                                      (VarP
                                                                        $delay/9
                                                                      )
                                                                    )
                                                                    (BlockE
                                                                      (LetD
                                                                        (VarP
                                                                          $expire/11
                                                                        )
                                                                        (PrimE
                                                                          (BinPrim
                                                                            Nat64
                                                                            AddOp
                                                                          )
                                                                          (VarE
                                                                            $pivot/0
                                                                          )
                                                                          (PrimE
                                                                            (BinPrim
                                                                              Nat64
                                                                              MulOp
                                                                            )
                                                                            (VarE
                                                                              $delay/9
                                                                            )
                                                                            (PrimE
                                                                              (BinPrim
                                                                                Nat64
                                                                                AddOp
                                                                              )
                                                                              (LitE
                                                                                (Nat64Lit
                                                                                  1
                                                                                )
                                                                              )
                                                                              (PrimE
                                                                                (BinPrim
                                                                                  Nat64
                                                                                  DivOp
                                                                                )
                                                                                (PrimE
                                                                                  (BinPrim
                                                                                    Nat64
                                                                                    SubOp
                                                                                  )
                                                                                  (VarE
                                                                                    $now/0
                                                                                  )
                                                                                  (VarE
                                                                                    $pivot/0
                                                                                  )
                                                                                )
                                                                                (VarE
                                                                                  $delay/9
                                                                                )
                                                                              )
                                                                            )
                                                                          )
                                                                        )
                                                                      )
                                                                      (LetD
                                                                        WildP
                                                                        (AssignE
                                                                          (IdxLE
                                                                            (PrimE
                                                                              (DotPrim
                                                                                expire
                                                                              )
                                                                              (VarE
                                                                                $n/1
                                                                              )
                                                                            )
                                                                            (LitE
                                                                              (NatLit
                                                                                0
                                                                              )
                                                                            )
                                                                          )
                                                                          (LitE
                                                                            (Nat64Lit
                                                                              0
                                                                            )
                                                                          )
                                                                        )
                                                                      )
                                                                      (LetD
                                                                        (VarP
                                                                          $reinsert/1
                                                                        )
                                                                        (FuncE
                                                                          reinsert
                                                                          Local
                                                                          Returns
                                                                          (params
                                                                            $m/0
                                                                          )
                                                                          @Node
                                                                          (SwitchE
                                                                            (VarE
                                                                              $m/0
                                                                            )
                                                                            (case
                                                                              (LitP
                                                                                NullLit
                                                                              )
                                                                              (BlockE
                                                                                (LetD
                                                                                  (VarP
                                                                                    $$base/2/0
                                                                                  )
                                                                                  (VarE
                                                                                    $n/1
                                                                                  )
                                                                                )
                                                                                (LetD
                                                                                  (VarP
                                                                                    $$expire/1/0
                                                                                  )
                                                                                  (PrimE
                                                                                    (ArrayPrim
                                                                                      Var
                                                                                      Nat64
                                                                                    )
                                                                                    (VarE
                                                                                      $expire/11
                                                                                    )
                                                                                  )
                                                                                )
                                                                                (LetD
                                                                                  (VarP
                                                                                    $$pre/1/0
                                                                                  )
                                                                                  (LitE
                                                                                    NullLit
                                                                                  )
                                                                                )
                                                                                (LetD
                                                                                  (VarP
                                                                                    $$post/1/0
                                                                                  )
                                                                                  (LitE
                                                                                    NullLit
                                                                                  )
                                                                                )
                                                                                (LetD
                                                                                  (VarP
                                                                                    $$delay/1/0
                                                                                  )
                                                                                  (PrimE
                                                                                    (DotPrim
                                                                                      delay
                                                                                    )
                                                                                    (VarE
                                                                                      $$base/2/0
                                                                                    )
                                                                                  )
                                                                                )
                                                                                (LetD
                                                                                  (VarP
                                                                                    $$id/1/0
                                                                                  )
                                                                                  (PrimE
                                                                                    (DotPrim
                                                                                      id
                                                                                    )
                                                                                    (VarE
                                                                                      $$base/2/0
                                                                                    )
                                                                                  )
                                                                                )
                                                                                (LetD
                                                                                  (VarP
                                                                                    $$job/1/0
                                                                                  )
                                                                                  (PrimE
                                                                                    (DotPrim
                                                                                      job
                                                                                    )
                                                                                    (VarE
                                                                                      $$base/2/0
                                                                                    )
                                                                                  )
                                                                                )
                                                                                (NewObjE
                                                                                  Object
                                                                                  (job
                                                                                    $$job/1/0
                                                                                  )
                                                                                  (id
                                                                                    $$id/1/0
                                                                                  )
                                                                                  (delay
                                                                                    $$delay/1/0
                                                                                  )
                                                                                  (post
                                                                                    $$post/1/0
                                                                                  )
                                                                                  (pre
                                                                                    $$pre/1/0
                                                                                  )
                                                                                  (expire
                                                                                    $$expire/1/0
                                                                                  )
                                                                                  {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                                                                                )
                                                                              )
                                                                            )
                                                                            (case
                                                                              (OptP
                                                                                (VarP
                                                                                  $m/1
                                                                                )
                                                                              )
                                                                              (BlockE
                                                                                (LetD
                                                                                  WildP
                                                                                  (PrimE
                                                                                    AssertPrim
                                                                                    (PrimE
                                                                                      (RelPrim
                                                                                        Bool
                                                                                        EqOp
                                                                                      )
                                                                                      (PrimE
                                                                                        (RelPrim
                                                                                          Nat64
                                                                                          EqOp
                                                                                        )
                                                                                        (PrimE
                                                                                          IdxPrim
                                                                                          (PrimE
                                                                                            (DotPrim
                                                                                              expire
                                                                                            )
                                                                                            (VarE
                                                                                              $m/1
                                                                                            )
                                                                                          )
                                                                                          (LitE
                                                                                            (NatLit
                                                                                              0
                                                                                            )
                                                                                          )
                                                                                        )
                                                                                        (LitE
                                                                                          (Nat64Lit
                                                                                            0
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (LitE
                                                                                        (BoolLit
                                                                                          false
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                  )
                                                                                )
                                                                                (IfE
                                                                                  (PrimE
                                                                                    (RelPrim
                                                                                      Nat64
                                                                                      LtOp
                                                                                    )
                                                                                    (VarE
                                                                                      $expire/11
                                                                                    )
                                                                                    (PrimE
                                                                                      IdxPrim
                                                                                      (PrimE
                                                                                        (DotPrim
                                                                                          expire
                                                                                        )
                                                                                        (VarE
                                                                                          $m/1
                                                                                        )
                                                                                      )
                                                                                      (LitE
                                                                                        (NatLit
                                                                                          0
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                  )
                                                                                  (BlockE
                                                                                    (LetD
                                                                                      (VarP
                                                                                        $$base/4/0
                                                                                      )
                                                                                      (VarE
                                                                                        $m/1
                                                                                      )
                                                                                    )
                                                                                    (LetD
                                                                                      (VarP
                                                                                        $$pre/3/0
                                                                                      )
                                                                                      (PrimE
                                                                                        OptPrim
                                                                                        (PrimE
                                                                                          (CallPrim
                                                                                          )
                                                                                          (VarE
                                                                                            $reinsert/1
                                                                                          )
                                                                                          (PrimE
                                                                                            (DotPrim
                                                                                              pre
                                                                                            )
                                                                                            (VarE
                                                                                              $m/1
                                                                                            )
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                    (LetD
                                                                                      (VarP
                                                                                        $$delay/3/0
                                                                                      )
                                                                                      (PrimE
                                                                                        (DotPrim
                                                                                          delay
                                                                                        )
                                                                                        (VarE
                                                                                          $$base/4/0
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                    (LetD
                                                                                      (VarP
                                                                                        $$expire/3/0
                                                                                      )
                                                                                      (PrimE
                                                                                        (DotPrim
                                                                                          expire
                                                                                        )
                                                                                        (VarE
                                                                                          $$base/4/0
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                    (LetD
                                                                                      (VarP
                                                                                        $$id/3/0
                                                                                      )
                                                                                      (PrimE
                                                                                        (DotPrim
                                                                                          id
                                                                                        )
                                                                                        (VarE
                                                                                          $$base/4/0
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                    (LetD
                                                                                      (VarP
                                                                                        $$job/3/0
                                                                                      )
                                                                                      (PrimE
                                                                                        (DotPrim
                                                                                          job
                                                                                        )
                                                                                        (VarE
                                                                                          $$base/4/0
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                    (LetD
                                                                                      (VarP
                                                                                        $$post/3/0
                                                                                      )
                                                                                      (PrimE
                                                                                        (DotPrim
                                                                                          post
                                                                                        )
                                                                                        (VarE
                                                                                          $$base/4/0
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                    (NewObjE
                                                                                      Object
                                                                                      (post
                                                                                        $$post/3/0
                                                                                      )
                                                                                      (job
                                                                                        $$job/3/0
                                                                                      )
                                                                                      (id
                                                                                        $$id/3/0
                                                                                      )
                                                                                      (expire
                                                                                        $$expire/3/0
                                                                                      )
                                                                                      (delay
                                                                                        $$delay/3/0
                                                                                      )
                                                                                      (pre
                                                                                        $$pre/3/0
                                                                                      )
                                                                                      {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                                                                                    )
                                                                                  )
                                                                                  (BlockE
                                                                                    (LetD
                                                                                      (VarP
                                                                                        $$base/3/0
                                                                                      )
                                                                                      (VarE
                                                                                        $m/1
                                                                                      )
                                                                                    )
                                                                                    (LetD
                                                                                      (VarP
                                                                                        $$post/2/0
                                                                                      )
                                                                                      (PrimE
                                                                                        OptPrim
                                                                                        (PrimE
                                                                                          (CallPrim
                                                                                          )
                                                                                          (VarE
                                                                                            $reinsert/1
                                                                                          )
                                                                                          (PrimE
                                                                                            (DotPrim
                                                                                              post
                                                                                            )
                                                                                            (VarE
                                                                                              $m/1
                                                                                            )
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                    (LetD
                                                                                      (VarP
                                                                                        $$delay/2/0
                                                                                      )
                                                                                      (PrimE
                                                                                        (DotPrim
                                                                                          delay
                                                                                        )
                                                                                        (VarE
                                                                                          $$base/3/0
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                    (LetD
                                                                                      (VarP
                                                                                        $$expire/2/0
                                                                                      )
                                                                                      (PrimE
                                                                                        (DotPrim
                                                                                          expire
                                                                                        )
                                                                                        (VarE
                                                                                          $$base/3/0
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                    (LetD
                                                                                      (VarP
                                                                                        $$id/2/0
                                                                                      )
                                                                                      (PrimE
                                                                                        (DotPrim
                                                                                          id
                                                                                        )
                                                                                        (VarE
                                                                                          $$base/3/0
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                    (LetD
                                                                                      (VarP
                                                                                        $$job/2/0
                                                                                      )
                                                                                      (PrimE
                                                                                        (DotPrim
                                                                                          job
                                                                                        )
                                                                                        (VarE
                                                                                          $$base/3/0
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                    (LetD
                                                                                      (VarP
                                                                                        $$pre/2/0
                                                                                      )
                                                                                      (PrimE
                                                                                        (DotPrim
                                                                                          pre
                                                                                        )
                                                                                        (VarE
                                                                                          $$base/3/0
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                    (NewObjE
                                                                                      Object
                                                                                      (pre
                                                                                        $$pre/2/0
                                                                                      )
                                                                                      (job
                                                                                        $$job/2/0
                                                                                      )
                                                                                      (id
                                                                                        $$id/2/0
                                                                                      )
                                                                                      (expire
                                                                                        $$expire/2/0
                                                                                      )
                                                                                      (delay
                                                                                        $$delay/2/0
                                                                                      )
                                                                                      (post
                                                                                        $$post/2/0
                                                                                      )
                                                                                      {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                                                                                    )
                                                                                  )
                                                                                )
                                                                              )
                                                                            )
                                                                          )
                                                                        )
                                                                      )
                                                                      (AssignE
                                                                        (VarLE
                                                                          @timers
                                                                        )
                                                                        (PrimE
                                                                          OptPrim
                                                                          (PrimE
                                                                            (CallPrim
                                                                            )
                                                                            (VarE
                                                                              $reinsert/1
                                                                            )
                                                                            (PrimE
                                                                              (CallPrim
                                                                              )
                                                                              (VarE
                                                                                @prune
                                                                              )
                                                                              (VarE!
                                                                                @timers
                                                                              )
                                                                            )
                                                                          )
                                                                        )
                                                                      )
                                                                    )
                                                                  )
                                                                )
                                                              )
                                                              (AssignE
                                                                (VarLE
                                                                  $gathered/0
                                                                )
                                                                (PrimE
                                                                  (BinPrim
                                                                    Nat
                                                                    AddOp
                                                                  )
                                                                  (VarE!
                                                                    $gathered/0
                                                                  )
                                                                  (LitE
                                                                    (NatLit 1)
                                                                  )
                                                                )
                                                              )
                                                            )
                                                            (PrimE TupPrim)
                                                          )
                                                        )
                                                        (PrimE
                                                          (CallPrim)
                                                          (VarE
                                                            $gatherExpired/0
                                                          )
                                                          (PrimE
                                                            (DotPrim post)
                                                            (VarE $n/1)
                                                          )
                                                        )
                                                      )
                                                      (PrimE TupPrim)
                                                    )
                                                  )
                                                )
                                              )
                                            )
                                          )
                                          (LetD
                                            WildP
                                            (DefineE
                                              $gatherExpired/0
                                              Const
                                              (VarE $v/24)
                                            )
                                          )
                                          (BlockE
                                            (LetD (VarP $u/28) (PrimE TupPrim))
                                            (BlockE
                                              (LetD
                                                WildP
                                                (PrimE
                                                  (CallPrim)
                                                  (VarE $gatherExpired/0)
                                                  (VarE! @timers)
                                                )
                                              )
                                              (BlockE
                                                (LetD
                                                  (VarP $u/29)
                                                  (PrimE TupPrim)
                                                )
                                                (BlockE
                                                  (LetD
                                                    (VarP $v/25)
                                                    (PrimE
                                                      (CallPrim)
                                                      (VarE @nextExpiration)
                                                      (VarE! @timers)
                                                    )
                                                  )
                                                  (LetD
                                                    WildP
                                                    (DefineE
                                                      $exp/0
                                                      Const
                                                      (VarE $v/25)
                                                    )
                                                  )
                                                  (BlockE
                                                    (LetD
                                                      (VarP $u/30)
                                                      (PrimE TupPrim)
                                                    )
                                                    (BlockE
                                                      (LetD
                                                        WildP
                                                        (BlockE
                                                          (LetD
                                                            WildP
                                                            (PrimE
                                                              global_timer_set
                                                              (VarE $exp/0)
                                                            )
                                                          )
                                                          (PrimE TupPrim)
                                                        )
                                                      )
                                                      (BlockE
                                                        (LetD
                                                          (VarP $u/31)
                                                          (PrimE TupPrim)
                                                        )
                                                        (BlockE
                                                          (LetD
                                                            WildP
                                                            (IfE
                                                              (PrimE
                                                                (RelPrim
                                                                  Nat64
                                                                  EqOp
                                                                )
                                                                (VarE $exp/0)
                                                                (LitE
                                                                  (Nat64Lit 0)
                                                                )
                                                              )
                                                              (AssignE
                                                                (VarLE @timers)
                                                                (LitE NullLit)
                                                              )
                                                              (PrimE TupPrim)
                                                            )
                                                          )
                                                          (BlockE
                                                            (LetD
                                                              (VarP $u/32)
                                                              (PrimE TupPrim)
                                                            )
                                                            (BlockE
                                                              (LetD
                                                                (VarP $u/33)
                                                                (DefineE
                                                                  $failed/0
                                                                  Var
                                                                  (LitE
                                                                    (Nat64Lit 0)
                                                                  )
                                                                )
                                                              )
                                                              (BlockE
                                                                (LetD
                                                                  (VarP $v/26)
                                                                  (FuncE
                                                                    reinsert
                                                                    Local
                                                                    Returns
                                                                    (params
                                                                      $job/8
                                                                    )
                                                                    ()
                                                                    (BlockE
                                                                      (LetD
                                                                        WildP
                                                                        (IfE
                                                                          (PrimE
                                                                            (RelPrim
                                                                              Nat64
                                                                              EqOp
                                                                            )
                                                                            (VarE!
                                                                              $failed/0
                                                                            )
                                                                            (LitE
                                                                              (Nat64Lit
                                                                                0
                                                                              )
                                                                            )
                                                                          )
                                                                          (BlockE
                                                                            (LetD
                                                                              WildP
                                                                              (AssignE
                                                                                (VarLE
                                                                                  @timers
                                                                                )
                                                                                (PrimE
                                                                                  (CallPrim
                                                                                  )
                                                                                  (VarE
                                                                                    @prune
                                                                                  )
                                                                                  (VarE!
                                                                                    @timers
                                                                                  )
                                                                                )
                                                                              )
                                                                            )
                                                                            (BlockE
                                                                              (LetD
                                                                                WildP
                                                                                (PrimE
                                                                                  global_timer_set
                                                                                  (LitE
                                                                                    (Nat64Lit
                                                                                      1
                                                                                    )
                                                                                  )
                                                                                )
                                                                              )
                                                                              (PrimE
                                                                                TupPrim
                                                                              )
                                                                            )
                                                                          )
                                                                          (PrimE
                                                                            TupPrim
                                                                          )
                                                                        )
                                                                      )
                                                                      (LetD
                                                                        WildP
                                                                        (AssignE
                                                                          (VarLE
                                                                            $failed/0
                                                                          )
                                                                          (PrimE
                                                                            (BinPrim
                                                                              Nat64
                                                                              AddOp
                                                                            )
                                                                            (VarE!
                                                                              $failed/0
                                                                            )
                                                                            (LitE
                                                                              (Nat64Lit
                                                                                1
                                                                              )
                                                                            )
                                                                          )
                                                                        )
                                                                      )
                                                                      (AssignE
                                                                        (VarLE
                                                                          @timers
                                                                        )
                                                                        (PrimE
                                                                          OptPrim
                                                                          (SwitchE
                                                                            (VarE!
                                                                              @timers
                                                                            )
                                                                            (case
                                                                              (OptP
                                                                                (ObjP
                                                                                  (id
                                                                                    (LitP
                                                                                      (IntLit
                                                                                        0
                                                                                      )
                                                                                    )
                                                                                  )
                                                                                  (pre
                                                                                    (VarP
                                                                                      $pre/11
                                                                                    )
                                                                                  )
                                                                                  (post
                                                                                    (VarP
                                                                                      $post/11
                                                                                    )
                                                                                  )
                                                                                  (job
                                                                                    (VarP
                                                                                      $j/0
                                                                                    )
                                                                                  )
                                                                                  (expire
                                                                                    (VarP
                                                                                      $expire/12
                                                                                    )
                                                                                  )
                                                                                  (delay
                                                                                    (VarP
                                                                                      $delay/10
                                                                                    )
                                                                                  )
                                                                                )
                                                                              )
                                                                              (BlockE
                                                                                (LetD
                                                                                  (VarP
                                                                                    $$expire/4/0
                                                                                  )
                                                                                  (PrimE
                                                                                    (ArrayPrim
                                                                                      Var
                                                                                      Nat64
                                                                                    )
                                                                                    (VarE!
                                                                                      $failed/0
                                                                                    )
                                                                                  )
                                                                                )
                                                                                (LetD
                                                                                  (VarP
                                                                                    $$id/4/0
                                                                                  )
                                                                                  (LitE
                                                                                    (NatLit
                                                                                      0
                                                                                    )
                                                                                  )
                                                                                )
                                                                                (LetD
                                                                                  (VarP
                                                                                    $$pre/4/0
                                                                                  )
                                                                                  (PrimE
                                                                                    OptPrim
                                                                                    (BlockE
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$id/5/0
                                                                                        )
                                                                                        (LitE
                                                                                          (NatLit
                                                                                            0
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$post/4/0
                                                                                        )
                                                                                        (LitE
                                                                                          NullLit
                                                                                        )
                                                                                      )
                                                                                      (NewObjE
                                                                                        Object
                                                                                        (job
                                                                                          $j/0
                                                                                        )
                                                                                        (delay
                                                                                          $delay/10
                                                                                        )
                                                                                        (post
                                                                                          $$post/4/0
                                                                                        )
                                                                                        (pre
                                                                                          $pre/11
                                                                                        )
                                                                                        (expire
                                                                                          $expire/12
                                                                                        )
                                                                                        (id
                                                                                          $$id/5/0
                                                                                        )
                                                                                        {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                                                                                      )
                                                                                    )
                                                                                  )
                                                                                )
                                                                                (NewObjE
                                                                                  Object
                                                                                  (pre
                                                                                    $$pre/4/0
                                                                                  )
                                                                                  (post
                                                                                    $post/11
                                                                                  )
                                                                                  (job
                                                                                    $job/8
                                                                                  )
                                                                                  (delay
                                                                                    $delay/10
                                                                                  )
                                                                                  (id
                                                                                    $$id/4/0
                                                                                  )
                                                                                  (expire
                                                                                    $$expire/4/0
                                                                                  )
                                                                                  {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                                                                                )
                                                                              )
                                                                            )
                                                                            (case
                                                                              WildP
                                                                              (BlockE
                                                                                (LetD
                                                                                  (VarP
                                                                                    $$expire/5/0
                                                                                  )
                                                                                  (PrimE
                                                                                    (ArrayPrim
                                                                                      Var
                                                                                      Nat64
                                                                                    )
                                                                                    (VarE!
                                                                                      $failed/0
                                                                                    )
                                                                                  )
                                                                                )
                                                                                (LetD
                                                                                  (VarP
                                                                                    $$id/6/0
                                                                                  )
                                                                                  (LitE
                                                                                    (NatLit
                                                                                      0
                                                                                    )
                                                                                  )
                                                                                )
                                                                                (LetD
                                                                                  (VarP
                                                                                    $$delay/4/0
                                                                                  )
                                                                                  (LitE
                                                                                    NullLit
                                                                                  )
                                                                                )
                                                                                (LetD
                                                                                  (VarP
                                                                                    $$pre/5/0
                                                                                  )
                                                                                  (LitE
                                                                                    NullLit
                                                                                  )
                                                                                )
                                                                                (LetD
                                                                                  (VarP
                                                                                    $$post/5/0
                                                                                  )
                                                                                  (VarE!
                                                                                    @timers
                                                                                  )
                                                                                )
                                                                                (NewObjE
                                                                                  Object
                                                                                  (post
                                                                                    $$post/5/0
                                                                                  )
                                                                                  (pre
                                                                                    $$pre/5/0
                                                                                  )
                                                                                  (job
                                                                                    $job/8
                                                                                  )
                                                                                  (delay
                                                                                    $$delay/4/0
                                                                                  )
                                                                                  (id
                                                                                    $$id/6/0
                                                                                  )
                                                                                  (expire
                                                                                    $$expire/5/0
                                                                                  )
                                                                                  {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                                                                                )
                                                                              )
                                                                            )
                                                                          )
                                                                        )
                                                                      )
                                                                    )
                                                                  )
                                                                )
                                                                (LetD
                                                                  WildP
                                                                  (DefineE
                                                                    $reinsert/0
                                                                    Const
                                                                    (VarE $v/26)
                                                                  )
                                                                )
                                                                (BlockE
                                                                  (LetD
                                                                    (VarP $u/34)
                                                                    (PrimE
                                                                      TupPrim
                                                                    )
                                                                  )
                                                                  (BlockE
                                                                    (LetD
                                                                      (VarP
                                                                        $u/35
                                                                      )
                                                                      (PrimE
                                                                        TupPrim
                                                                      )
                                                                    )
                                                                    (DeclareE
                                                                      $$arr/2/0
                                                                      (DeclareE
                                                                        $$last/2/0
                                                                        (DeclareE
                                                                          $$indx/2/0
                                                                          (BlockE
                                                                            (LetD
                                                                              (VarP
                                                                                $v/27
                                                                              )
                                                                              (VarE
                                                                                $thunks/0
                                                                              )
                                                                            )
                                                                            (LetD
                                                                              WildP
                                                                              (DefineE
                                                                                $$arr/2/0
                                                                                Const
                                                                                (VarE
                                                                                  $v/27
                                                                                )
                                                                              )
                                                                            )
                                                                            (BlockE
                                                                              (LetD
                                                                                (VarP
                                                                                  $u/36
                                                                                )
                                                                                (PrimE
                                                                                  TupPrim
                                                                                )
                                                                              )
                                                                              (BlockE
                                                                                (LetD
                                                                                  (VarP
                                                                                    $v/28
                                                                                  )
                                                                                  (PrimE
                                                                                    GetLastArrayOffset
                                                                                    (VarE
                                                                                      $$arr/2/0
                                                                                    )
                                                                                  )
                                                                                )
                                                                                (LetD
                                                                                  WildP
                                                                                  (DefineE
                                                                                    $$last/2/0
                                                                                    Const
                                                                                    (VarE
                                                                                      $v/28
                                                                                    )
                                                                                  )
                                                                                )
                                                                                (BlockE
                                                                                  (LetD
                                                                                    (VarP
                                                                                      $u/37
                                                                                    )
                                                                                    (PrimE
                                                                                      TupPrim
                                                                                    )
                                                                                  )
                                                                                  (BlockE
                                                                                    (LetD
                                                                                      (VarP
                                                                                        $u/38
                                                                                      )
                                                                                      (DefineE
                                                                                        $$indx/2/0
                                                                                        Var
                                                                                        (LitE
                                                                                          (NatLit
                                                                                            0
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                    (BlockE
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $u/39
                                                                                        )
                                                                                        (PrimE
                                                                                          TupPrim
                                                                                        )
                                                                                      )
                                                                                      (IfE
                                                                                        (PrimE
                                                                                          EqArrayOffset
                                                                                          (VarE
                                                                                            $$last/2/0
                                                                                          )
                                                                                          (LitE
                                                                                            (IntLit
                                                                                              -1
                                                                                            )
                                                                                          )
                                                                                        )
                                                                                        (PrimE
                                                                                          (CallPrim
                                                                                          )
                                                                                          (VarE
                                                                                            $k/8
                                                                                          )
                                                                                          (PrimE
                                                                                            TupPrim
                                                                                          )
                                                                                        )
                                                                                        (BlockE
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $loop/0
                                                                                            )
                                                                                            (FuncE
                                                                                              $loop/0
                                                                                              Local
                                                                                              Returns
                                                                                              ()
                                                                                              (BlockE
                                                                                                (LetD
                                                                                                  (VarP
                                                                                                    $v/29
                                                                                                  )
                                                                                                  (PrimE
                                                                                                    TupPrim
                                                                                                  )
                                                                                                )
                                                                                                (DeclareE
                                                                                                  $o/0
                                                                                                  (BlockE
                                                                                                    (LetD
                                                                                                      (VarP
                                                                                                        $v/30
                                                                                                      )
                                                                                                      (PrimE
                                                                                                        DerefArrayOffset
                                                                                                        (VarE
                                                                                                          $$arr/2/0
                                                                                                        )
                                                                                                        (VarE!
                                                                                                          $$indx/2/0
                                                                                                        )
                                                                                                      )
                                                                                                    )
                                                                                                    (LetD
                                                                                                      WildP
                                                                                                      (DefineE
                                                                                                        $o/0
                                                                                                        Const
                                                                                                        (VarE
                                                                                                          $v/30
                                                                                                        )
                                                                                                      )
                                                                                                    )
                                                                                                    (BlockE
                                                                                                      (LetD
                                                                                                        (VarP
                                                                                                          $u/40
                                                                                                        )
                                                                                                        (PrimE
                                                                                                          TupPrim
                                                                                                        )
                                                                                                      )
                                                                                                      (BlockE
                                                                                                        (LetD
                                                                                                          (VarP
                                                                                                            $k/9
                                                                                                          )
                                                                                                          (FuncE
                                                                                                            $k/9
                                                                                                            Local
                                                                                                            Returns
                                                                                                            ()
                                                                                                            (BlockE
                                                                                                              (LetD
                                                                                                                (VarP
                                                                                                                  $v/31
                                                                                                                )
                                                                                                                (PrimE
                                                                                                                  TupPrim
                                                                                                                )
                                                                                                              )
                                                                                                              (BlockE
                                                                                                                (LetD
                                                                                                                  WildP
                                                                                                                  (VarE
                                                                                                                    $v/31
                                                                                                                  )
                                                                                                                )
                                                                                                                (BlockE
                                                                                                                  (LetD
                                                                                                                    (VarP
                                                                                                                      $u/41
                                                                                                                    )
                                                                                                                    (PrimE
                                                                                                                      TupPrim
                                                                                                                    )
                                                                                                                  )
                                                                                                                  (BlockE
                                                                                                                    (LetD
                                                                                                                      (VarP
                                                                                                                        $u/42
                                                                                                                      )
                                                                                                                      (PrimE
                                                                                                                        TupPrim
                                                                                                                      )
                                                                                                                    )
                                                                                                                    (PrimE
                                                                                                                      (CallPrim
                                                                                                                      )
                                                                                                                      (VarE
                                                                                                                        $loop/0
                                                                                                                      )
                                                                                                                      (IfE
                                                                                                                        (PrimE
                                                                                                                          EqArrayOffset
                                                                                                                          (VarE!
                                                                                                                            $$indx/2/0
                                                                                                                          )
                                                                                                                          (VarE
                                                                                                                            $$last/2/0
                                                                                                                          )
                                                                                                                        )
                                                                                                                        (PrimE
                                                                                                                          RetPrim
                                                                                                                          (PrimE
                                                                                                                            (CallPrim
                                                                                                                            )
                                                                                                                            (VarE
                                                                                                                              $k/8
                                                                                                                            )
                                                                                                                            (PrimE
                                                                                                                              TupPrim
                                                                                                                            )
                                                                                                                          )
                                                                                                                        )
                                                                                                                        (AssignE
                                                                                                                          (VarLE
                                                                                                                            $$indx/2/0
                                                                                                                          )
                                                                                                                          (PrimE
                                                                                                                            NextArrayOffset
                                                                                                                            (VarE!
                                                                                                                              $$indx/2/0
                                                                                                                            )
                                                                                                                          )
                                                                                                                        )
                                                                                                                      )
                                                                                                                    )
                                                                                                                  )
                                                                                                                )
                                                                                                              )
                                                                                                            )
                                                                                                          )
                                                                                                        )
                                                                                                        (SwitchE
                                                                                                          (VarE
                                                                                                            $o/0
                                                                                                          )
                                                                                                          (case
                                                                                                            (OptP
                                                                                                              (VarP
                                                                                                                $thunk/0
                                                                                                              )
                                                                                                            )
                                                                                                            (BlockE
                                                                                                              (LetD
                                                                                                                (VarP
                                                                                                                  $r/4
                                                                                                                )
                                                                                                                (FuncE
                                                                                                                  $r/4
                                                                                                                  Local
                                                                                                                  Returns
                                                                                                                  (params
                                                                                                                    $e/0
                                                                                                                  )
                                                                                                                  ()
                                                                                                                  (SwitchE
                                                                                                                    (VarE
                                                                                                                      $e/0
                                                                                                                    )
                                                                                                                    (case
                                                                                                                      WildP
                                                                                                                      (PrimE
                                                                                                                        (CallPrim
                                                                                                                        )
                                                                                                                        (VarE
                                                                                                                          $k/9
                                                                                                                        )
                                                                                                                        (PrimE
                                                                                                                          (CallPrim
                                                                                                                          )
                                                                                                                          (VarE
                                                                                                                            $reinsert/0
                                                                                                                          )
                                                                                                                          (VarE
                                                                                                                            $thunk/0
                                                                                                                          )
                                                                                                                        )
                                                                                                                      )
                                                                                                                    )
                                                                                                                  )
                                                                                                                )
                                                                                                              )
                                                                                                              (BlockE
                                                                                                                (LetD
                                                                                                                  (VarP
                                                                                                                    $u/43
                                                                                                                  )
                                                                                                                  (PrimE
                                                                                                                    (CallPrim
                                                                                                                      $@timer_helper
                                                                                                                    )
                                                                                                                    (VarE
                                                                                                                      $thunk/0
                                                                                                                    )
                                                                                                                    (PrimE
                                                                                                                      TupPrim
                                                                                                                    )
                                                                                                                  )
                                                                                                                )
                                                                                                                (IfE
                                                                                                                  (PrimE
                                                                                                                    (CallPrim
                                                                                                                    )
                                                                                                                    (VarE
                                                                                                                      @call_succeeded
                                                                                                                    )
                                                                                                                    (PrimE
                                                                                                                      TupPrim
                                                                                                                    )
                                                                                                                  )
                                                                                                                  (BlockE
                                                                                                                    (LetD
                                                                                                                      WildP
                                                                                                                      (VarE
                                                                                                                        $u/43
                                                                                                                      )
                                                                                                                    )
                                                                                                                    (BlockE
                                                                                                                      (LetD
                                                                                                                        (VarP
                                                                                                                          $u/44
                                                                                                                        )
                                                                                                                        (PrimE
                                                                                                                          TupPrim
                                                                                                                        )
                                                                                                                      )
                                                                                                                      (BlockE
                                                                                                                        (LetD
                                                                                                                          (VarP
                                                                                                                            $u/45
                                                                                                                          )
                                                                                                                          (PrimE
                                                                                                                            TupPrim
                                                                                                                          )
                                                                                                                        )
                                                                                                                        (PrimE
                                                                                                                          (CallPrim
                                                                                                                          )
                                                                                                                          (VarE
                                                                                                                            $k/9
                                                                                                                          )
                                                                                                                          (PrimE
                                                                                                                            TupPrim
                                                                                                                          )
                                                                                                                        )
                                                                                                                      )
                                                                                                                    )
                                                                                                                  )
                                                                                                                  (PrimE
                                                                                                                    (CallPrim
                                                                                                                    )
                                                                                                                    (VarE
                                                                                                                      $r/4
                                                                                                                    )
                                                                                                                    (PrimE
                                                                                                                      (CallPrim
                                                                                                                      )
                                                                                                                      (VarE
                                                                                                                        @call_error
                                                                                                                      )
                                                                                                                      (PrimE
                                                                                                                        TupPrim
                                                                                                                      )
                                                                                                                    )
                                                                                                                  )
                                                                                                                )
                                                                                                              )
                                                                                                            )
                                                                                                          )
                                                                                                          (case
                                                                                                            WildP
                                                                                                            (PrimE
                                                                                                              (CallPrim
                                                                                                              )
                                                                                                              (VarE
                                                                                                                $k/9
                                                                                                              )
                                                                                                              (PrimE
                                                                                                                RetPrim
                                                                                                                (PrimE
                                                                                                                  (CallPrim
                                                                                                                  )
                                                                                                                  (VarE
                                                                                                                    $k/8
                                                                                                                  )
                                                                                                                  (PrimE
                                                                                                                    TupPrim
                                                                                                                  )
                                                                                                                )
                                                                                                              )
                                                                                                            )
                                                                                                          )
                                                                                                        )
                                                                                                      )
                                                                                                    )
                                                                                                  )
                                                                                                )
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (PrimE
                                                                                            (CallPrim
                                                                                            )
                                                                                            (VarE
                                                                                              $loop/0
                                                                                            )
                                                                                            (PrimE
                                                                                              TupPrim
                                                                                            )
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                  )
                                                                                )
                                                                              )
                                                                            )
                                                                          )
                                                                        )
                                                                      )
                                                                    )
                                                                  )
                                                                )
                                                              )
                                                            )
                                                          )
                                                        )
                                                      )
                                                    )
                                                  )
                                                )
                                              )
                                            )
                                          )
                                        )
                                      )
                                    )
                                  )
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
      )
    )
  )
  (VarD @lastTimerId Nat (LitE (NatLit 0)))
  (LetD
    (VarP @setTimer)
    (FuncE
      @setTimer
      Local
      Returns
      ($ Any)
      (params delayNanos recurring job)
      Nat
      (BlockE
        (LetD
          WildP
          (AssignE
            (VarLE @lastTimerId)
            (PrimE (BinPrim Nat AddOp) (VarE! @lastTimerId) (LitE (NatLit 1)))
          )
        )
        (LetD (VarP id) (VarE! @lastTimerId))
        (LetD (VarP now) (PrimE SystemTimePrim))
        (LetD
          (VarP expire)
          (PrimE (BinPrim Nat64 AddOp) (VarE now) (VarE delayNanos))
        )
        (LetD
          (VarP delay)
          (IfE
            (VarE recurring)
            (PrimE OptPrim (VarE delayNanos))
            (LitE NullLit)
          )
        )
        (LetD
          (VarP insert)
          (FuncE
            insert
            Local
            Returns
            (params n)
            @Node
            (SwitchE
              (VarE n)
              (case
                (LitP NullLit)
                (BlockE
                  (LetD
                    (VarP $expire/6)
                    (PrimE (ArrayPrim Var Nat64) (VarE expire))
                  )
                  (LetD (VarP $pre/6) (LitE NullLit))
                  (LetD (VarP $post/6) (LitE NullLit))
                  (NewObjE
                    Object
                    (post $post/6)
                    (pre $pre/6)
                    (job job)
                    (delay delay)
                    (id id)
                    (expire $expire/6)
                    {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                  )
                )
              )
              (case
                (OptP (VarP n))
                (BlockE
                  (LetD
                    WildP
                    (PrimE
                      AssertPrim
                      (PrimE
                        (RelPrim Bool EqOp)
                        (PrimE
                          (RelPrim Nat64 EqOp)
                          (PrimE
                            IdxPrim
                            (PrimE (DotPrim expire) (VarE n))
                            (LitE (NatLit 0))
                          )
                          (LitE (Nat64Lit 0))
                        )
                        (LitE (BoolLit false))
                      )
                    )
                  )
                  (IfE
                    (PrimE
                      (RelPrim Nat64 LtOp)
                      (VarE expire)
                      (PrimE
                        IdxPrim
                        (PrimE (DotPrim expire) (VarE n))
                        (LitE (NatLit 0))
                      )
                    )
                    (BlockE
                      (LetD (VarP $base/6) (VarE n))
                      (LetD
                        (VarP $pre/8)
                        (PrimE
                          OptPrim
                          (PrimE
                            (CallPrim)
                            (VarE insert)
                            (PrimE (DotPrim pre) (VarE n))
                          )
                        )
                      )
                      (LetD
                        (VarP $delay/6)
                        (PrimE (DotPrim delay) (VarE $base/6))
                      )
                      (LetD
                        (VarP $expire/8)
                        (PrimE (DotPrim expire) (VarE $base/6))
                      )
                      (LetD (VarP $id/8) (PrimE (DotPrim id) (VarE $base/6)))
                      (LetD (VarP $job/5) (PrimE (DotPrim job) (VarE $base/6)))
                      (LetD
                        (VarP $post/8)
                        (PrimE (DotPrim post) (VarE $base/6))
                      )
                      (NewObjE
                        Object
                        (post $post/8)
                        (job $job/5)
                        (id $id/8)
                        (expire $expire/8)
                        (delay $delay/6)
                        (pre $pre/8)
                        {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                      )
                    )
                    (BlockE
                      (LetD (VarP $base/5) (VarE n))
                      (LetD
                        (VarP $post/7)
                        (PrimE
                          OptPrim
                          (PrimE
                            (CallPrim)
                            (VarE insert)
                            (PrimE (DotPrim post) (VarE n))
                          )
                        )
                      )
                      (LetD
                        (VarP $delay/5)
                        (PrimE (DotPrim delay) (VarE $base/5))
                      )
                      (LetD
                        (VarP $expire/7)
                        (PrimE (DotPrim expire) (VarE $base/5))
                      )
                      (LetD (VarP $id/7) (PrimE (DotPrim id) (VarE $base/5)))
                      (LetD (VarP $job/4) (PrimE (DotPrim job) (VarE $base/5)))
                      (LetD (VarP $pre/7) (PrimE (DotPrim pre) (VarE $base/5)))
                      (NewObjE
                        Object
                        (pre $pre/7)
                        (job $job/4)
                        (id $id/7)
                        (expire $expire/7)
                        (delay $delay/5)
                        (post $post/7)
                        {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          WildP
          (AssignE
            (VarLE @timers)
            (PrimE
              OptPrim
              (PrimE
                (CallPrim)
                (VarE insert)
                (PrimE (CallPrim) (VarE @prune) (VarE! @timers))
              )
            )
          )
        )
        (LetD
          (VarP exp)
          (PrimE (CallPrim) (VarE @nextExpiration) (VarE! @timers))
        )
        (LetD
          WildP
          (IfE
            (PrimE (RelPrim Nat64 EqOp) (VarE exp) (LitE (Nat64Lit 0)))
            (AssignE (VarLE @timers) (LitE NullLit))
            (PrimE TupPrim)
          )
        )
        (LetD
          WildP
          (BlockE
            (LetD WildP (PrimE global_timer_set (VarE exp)))
            (PrimE TupPrim)
          )
        )
        (VarE id)
      )
    )
  )
  (LetD
    (VarP @cancelTimer)
    (FuncE
      @cancelTimer
      Local
      Returns
      (params id)
      ()
      (BlockE
        (LetD
          (VarP graft)
          (FuncE
            graft
            Local
            Returns
            (params onto branch)
            ?@Node
            (SwitchE
              (PrimE TupPrim (VarE onto) (VarE branch))
              (case (TupP (LitP NullLit) (LitP NullLit)) (LitE NullLit))
              (case (TupP (LitP NullLit) WildP) (VarE branch))
              (case (TupP WildP (LitP NullLit)) (VarE onto))
              (case
                (TupP (OptP (VarP onto)) WildP)
                (PrimE
                  OptPrim
                  (BlockE
                    (LetD (VarP $base/7) (VarE onto))
                    (LetD
                      (VarP $post/9)
                      (PrimE
                        (CallPrim)
                        (VarE graft)
                        (PrimE
                          TupPrim
                          (PrimE (DotPrim post) (VarE onto))
                          (VarE branch)
                        )
                      )
                    )
                    (LetD
                      (VarP $delay/7)
                      (PrimE (DotPrim delay) (VarE $base/7))
                    )
                    (LetD
                      (VarP $expire/9)
                      (PrimE (DotPrim expire) (VarE $base/7))
                    )
                    (LetD (VarP $id/9) (PrimE (DotPrim id) (VarE $base/7)))
                    (LetD (VarP $job/6) (PrimE (DotPrim job) (VarE $base/7)))
                    (LetD (VarP $pre/9) (PrimE (DotPrim pre) (VarE $base/7)))
                    (NewObjE
                      Object
                      (pre $pre/9)
                      (job $job/6)
                      (id $id/9)
                      (expire $expire/9)
                      (delay $delay/7)
                      (post $post/9)
                      {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          (VarP hunt)
          (FuncE
            hunt
            Local
            Returns
            (params n)
            ?@Node
            (SwitchE
              (VarE n)
              (case (LitP NullLit) (VarE n))
              (case
                (OptP
                  (ObjP (id (VarP node)) (pre (VarP pre)) (post (VarP post)))
                )
                (IfE
                  (PrimE (RelPrim Nat EqOp) (VarE node) (VarE id))
                  (PrimE
                    (CallPrim)
                    (VarE graft)
                    (PrimE TupPrim (VarE pre) (VarE post))
                  )
                  (LabelE
                    !
                    ?@Node
                    (PrimE
                      OptPrim
                      (BlockE
                        (LetD
                          (VarP $base/8)
                          (SwitchE
                            (VarE n)
                            (case
                              (LitP NullLit)
                              (PrimE (BreakPrim !) (LitE NullLit))
                            )
                            (case (OptP (VarP $v/0)) (VarE $v/0))
                          )
                        )
                        (LetD
                          (VarP $pre/10)
                          (PrimE (CallPrim) (VarE hunt) (VarE pre))
                        )
                        (LetD
                          (VarP $post/10)
                          (PrimE (CallPrim) (VarE hunt) (VarE post))
                        )
                        (LetD
                          (VarP $delay/8)
                          (PrimE (DotPrim delay) (VarE $base/8))
                        )
                        (LetD
                          (VarP $expire/10)
                          (PrimE (DotPrim expire) (VarE $base/8))
                        )
                        (LetD (VarP $id/10) (PrimE (DotPrim id) (VarE $base/8)))
                        (LetD
                          (VarP $job/7)
                          (PrimE (DotPrim job) (VarE $base/8))
                        )
                        (NewObjE
                          Object
                          (job $job/7)
                          (id $id/10)
                          (expire $expire/10)
                          (delay $delay/8)
                          (post $post/10)
                          (pre $pre/10)
                          {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : () -> async (); post : ?@Node; pre : ?@Node}
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          WildP
          (AssignE
            (VarLE @timers)
            (PrimE (CallPrim) (VarE hunt) (VarE! @timers))
          )
        )
        (IfE
          (PrimE
            (RelPrim Nat64 EqOp)
            (PrimE (CallPrim) (VarE @nextExpiration) (VarE! @timers))
            (LitE (Nat64Lit 0))
          )
          (BlockE
            (LetD
              WildP
              (BlockE
                (LetD WildP (PrimE global_timer_set (LitE (Nat64Lit 0))))
                (PrimE TupPrim)
              )
            )
            (AssignE (VarLE @timers) (LitE NullLit))
          )
          (PrimE TupPrim)
        )
      )
    )
  )
  (LetD
    (VarP @set_global_timer)
    (FuncE
      @set_global_timer
      Local
      Returns
      (params time)
      ()
      (BlockE (LetD WildP (PrimE global_timer_set (VarE time))) (PrimE TupPrim))
    )
  )
  (LetD
    (VarP @dedup)
    (FuncE
      @dedup
      Local
      Returns
      (params b)
      Blob
      (BlockE
        (LetD
          (VarP Array_tabulate)
          (FuncE
            Array_tabulate
            Local
            Returns
            (T Any)
            (params len gen)
            [T]
            (PrimE Array.tabulate (VarE len) (VarE gen))
          )
        )
        (LetD
          (VarP Array_tabulateVar)
          (FuncE
            Array_tabulateVar
            Local
            Returns
            (T Any)
            (params len gen)
            [var T]
            (PrimE Array.tabulateVar (VarE len) (VarE gen))
          )
        )
        (LetD (VarP HASH_ARRAY_SIZE) (LitE (NatLit 16_384)))
        (LetD
          (VarP debugPrint)
          (FuncE debugPrint Local Returns (params x) () (PrimE print (VarE x)))
        )
        (LetD
          (VarP hashBlob)
          (FuncE
            hashBlob
            Local
            Returns
            (params b)
            Nat32
            (PrimE crc32Hash (VarE b))
          )
        )
        (LetD
          (VarP allocWeakRef)
          (FuncE
            allocWeakRef
            Local
            Returns
            (T Any)
            (params obj)
            weak T
            (PrimE alloc_weak_ref (VarE obj))
          )
        )
        (LetD
          (VarP weakGet)
          (FuncE
            weakGet
            Local
            Returns
            (T Any)
            (params w)
            ?T
            (PrimE weak_get (VarE w))
          )
        )
        (LetD
          (VarP getDedupTable)
          (FuncE
            getDedupTable
            Local
            Returns
            ?[var List]
            (PrimE get_dedup_table)
          )
        )
        (LetD
          (VarP setDedupTable)
          (FuncE
            setDedupTable
            Local
            Returns
            (params dedupTable)
            ()
            (PrimE set_dedup_table (VarE dedupTable))
          )
        )
        (LetD
          (VarP arrayToBlob)
          (FuncE
            arrayToBlob
            Local
            Returns
            (params a)
            Blob
            (PrimE arrayToBlob (VarE a))
          )
        )
        (LetD
          (VarP getOriginalBlob)
          (FuncE
            getOriginalBlob
            Local
            Returns
            (params b)
            Blob
            (BlockE
              (LetD
                (VarP copiedArr)
                (PrimE
                  (CallPrim Nat8)
                  (VarE Array_tabulate)
                  (PrimE
                    TupPrim
                    (PrimE
                      (BinPrim Nat SubOp)
                      (PrimE blob_size (VarE b))
                      (LitE (NatLit 5))
                    )
                    (FuncE
                      @anon-func-744.50
                      Local
                      Returns
                      (params i)
                      Nat8
                      (PrimE
                        IdxBlobPrim
                        (VarE b)
                        (PrimE (BinPrim Nat AddOp) (VarE i) (LitE (NatLit 5)))
                      )
                    )
                  )
                )
              )
              (LetD
                (VarP originalBlob)
                (PrimE (CallPrim) (VarE arrayToBlob) (VarE copiedArr))
              )
              (VarE originalBlob)
            )
          )
        )
        (LetD
          (VarP blobCompare)
          (FuncE
            blobCompare
            Local
            Returns
            (params b1 b2)
            Int8
            (PrimE blob_compare (VarE b1) (VarE b2))
          )
        )
        (LetD
          (VarP addToList)
          (FuncE
            addToList
            Local
            Returns
            (params list originalBlob weakRef)
            List
            (BlockE
              (LetD
                (VarP newList)
                (BlockE
                  (VarD
                    $next/0
                    ?{index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}
                    (PrimE OptPrim (VarE list))
                  )
                  (LetD (VarP $value/0) (PrimE OptPrim (VarE weakRef)))
                  (LetD
                    (VarP $index/0)
                    (PrimE
                      (BinPrim Nat AddOp)
                      (PrimE (DotPrim index) (VarE list))
                      (LitE (NatLit 1))
                    )
                  )
                  (NewObjE
                    Object
                    (index $index/0)
                    (originalBlob originalBlob)
                    (value $value/0)
                    (next $next/0)
                    {index : Nat; var next : ?{index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}; originalBlob : Blob; value : ?{ref : weak Blob}}
                  )
                )
              )
              (VarE newList)
            )
          )
        )
        (LetD
          (VarP getFromList)
          (FuncE
            getFromList
            Local
            Returns
            (params list originalBlob)
            ?WeakRef
            (BlockE
              (VarD
                copy
                {index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}
                (VarE list)
              )
              (LoopE
                (IfE
                  (PrimE
                    (RelPrim Int8 EqOp)
                    (PrimE
                      (CallPrim)
                      (VarE blobCompare)
                      (PrimE
                        TupPrim
                        (PrimE (DotPrim originalBlob) (VarE! copy))
                        (VarE originalBlob)
                      )
                    )
                    (LitE (Int8Lit 0))
                  )
                  (PrimE RetPrim (PrimE (DotPrim value) (VarE! copy)))
                  (BlockE
                    (LetD (VarP next) (PrimE (DotPrim next) (VarE! copy)))
                    (SwitchE
                      (VarE next)
                      (case (LitP NullLit) (PrimE RetPrim (LitE NullLit)))
                      (case
                        (OptP (VarP next))
                        (AssignE (VarLE copy) (VarE next))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          (VarP getListLen)
          (FuncE
            getListLen
            Local
            Returns
            (params list)
            Nat
            (PrimE (DotPrim index) (VarE list))
          )
        )
        (LetD
          (VarP getHashArrayLen)
          (FuncE
            getHashArrayLen
            Local
            Returns
            (params hashArray)
            Nat
            (BlockE
              (VarD len Nat (LitE (NatLit 0)))
              (VarD i Nat (LitE (NatLit 0)))
              (LetD
                WildP
                (LabelE
                  $done/7
                  ()
                  (LoopE
                    (IfE
                      (PrimE
                        (RelPrim Nat LtOp)
                        (VarE! i)
                        (VarE HASH_ARRAY_SIZE)
                      )
                      (BlockE
                        (LetD
                          WildP
                          (AssignE
                            (VarLE len)
                            (PrimE
                              (BinPrim Nat AddOp)
                              (VarE! len)
                              (PrimE
                                (CallPrim)
                                (VarE getListLen)
                                (PrimE IdxPrim (VarE hashArray) (VarE! i))
                              )
                            )
                          )
                        )
                        (AssignE
                          (VarLE i)
                          (PrimE
                            (BinPrim Nat AddOp)
                            (VarE! i)
                            (LitE (NatLit 1))
                          )
                        )
                      )
                      (PrimE (BreakPrim $done/7) (PrimE TupPrim))
                    )
                  )
                )
              )
              (VarE! len)
            )
          )
        )
        (LetD
          (VarP addToHashArray)
          (FuncE
            addToHashArray
            Local
            Returns
            (params hashArray b)
            ()
            (BlockE
              (LetD
                (VarP hashValue)
                (PrimE (CallPrim) (VarE hashBlob) (VarE b))
              )
              (LetD
                (VarP index)
                (PrimE
                  (BinPrim Nat ModOp)
                  (PrimE (CallPrim) (VarE @nat32ToNat) (VarE hashValue))
                  (VarE HASH_ARRAY_SIZE)
                )
              )
              (LetD (VarP list) (PrimE IdxPrim (VarE hashArray) (VarE index)))
              (LetD
                (VarP weakRef)
                (BlockE
                  (LetD
                    (VarP $ref/0)
                    (PrimE (CallPrim Blob) (VarE allocWeakRef) (VarE b))
                  )
                  (NewObjE Object (ref $ref/0) {ref : weak Blob})
                )
              )
              (AssignE
                (IdxLE (VarE hashArray) (VarE index))
                (PrimE
                  (CallPrim)
                  (VarE addToList)
                  (PrimE
                    TupPrim
                    (VarE list)
                    (PrimE (CallPrim) (VarE getOriginalBlob) (VarE b))
                    (VarE weakRef)
                  )
                )
              )
            )
          )
        )
        (LetD
          (VarP getFromHashArray)
          (FuncE
            getFromHashArray
            Local
            Returns
            (params hashArray b)
            ?WeakRef
            (BlockE
              (LetD
                (VarP hashValue)
                (PrimE (CallPrim) (VarE hashBlob) (VarE b))
              )
              (LetD
                (VarP index)
                (PrimE
                  (BinPrim Nat ModOp)
                  (PrimE (CallPrim) (VarE @nat32ToNat) (VarE hashValue))
                  (VarE HASH_ARRAY_SIZE)
                )
              )
              (LetD (VarP list) (PrimE IdxPrim (VarE hashArray) (VarE index)))
              (PrimE
                (CallPrim)
                (VarE getFromList)
                (PrimE
                  TupPrim
                  (VarE list)
                  (PrimE (CallPrim) (VarE getOriginalBlob) (VarE b))
                )
              )
            )
          )
        )
        (LetD
          WildP
          (IfE
            (PrimE
              (RelPrim Nat LtOp)
              (PrimE blob_size (VarE b))
              (LitE (NatLit 5))
            )
            (PrimE RetPrim (VarE b))
            (PrimE TupPrim)
          )
        )
        (LetD
          WildP
          (IfE
            (IfE
              (IfE
                (IfE
                  (IfE
                    (PrimE
                      (RelPrim Bool EqOp)
                      (PrimE
                        (RelPrim Nat8 EqOp)
                        (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 0)))
                        (LitE (Nat8Lit 33))
                      )
                      (LitE (BoolLit false))
                    )
                    (LitE (BoolLit true))
                    (PrimE
                      (RelPrim Bool EqOp)
                      (PrimE
                        (RelPrim Nat8 EqOp)
                        (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 1)))
                        (LitE (Nat8Lit 99))
                      )
                      (LitE (BoolLit false))
                    )
                  )
                  (LitE (BoolLit true))
                  (PrimE
                    (RelPrim Bool EqOp)
                    (PrimE
                      (RelPrim Nat8 EqOp)
                      (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 2)))
                      (LitE (Nat8Lit 97))
                    )
                    (LitE (BoolLit false))
                  )
                )
                (LitE (BoolLit true))
                (PrimE
                  (RelPrim Bool EqOp)
                  (PrimE
                    (RelPrim Nat8 EqOp)
                    (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 3)))
                    (LitE (Nat8Lit 102))
                  )
                  (LitE (BoolLit false))
                )
              )
              (LitE (BoolLit true))
              (PrimE
                (RelPrim Bool EqOp)
                (PrimE
                  (RelPrim Nat8 EqOp)
                  (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 4)))
                  (LitE (Nat8Lit 33))
                )
                (LitE (BoolLit false))
              )
            )
            (PrimE RetPrim (VarE b))
            (PrimE TupPrim)
          )
        )
        (LetD
          (VarP ptr)
          (PrimE (CallPrim) (VarE getDedupTable) (PrimE TupPrim))
        )
        (LetD
          (VarP hashArray)
          (SwitchE
            (VarE ptr)
            (case (OptP (VarP dedupTable)) (VarE dedupTable))
            (case
              (LitP NullLit)
              (BlockE
                (LetD
                  (VarP arr)
                  (PrimE
                    (CallPrim List)
                    (VarE Array_tabulateVar)
                    (PrimE
                      TupPrim
                      (VarE HASH_ARRAY_SIZE)
                      (FuncE
                        @anon-func-830.58
                        Local
                        Returns
                        (params i)
                        List
                        (BlockE
                          (VarD $next/1 ?List (LitE NullLit))
                          (LetD (VarP $value/1) (LitE NullLit))
                          (LetD (VarP $originalBlob/0) (LitE (BlobLit "")))
                          (LetD (VarP $index/1) (LitE (NatLit 0)))
                          (NewObjE
                            Object
                            (index $index/1)
                            (originalBlob $originalBlob/0)
                            (value $value/1)
                            (next $next/1)
                            {index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}
                          )
                        )
                      )
                    )
                  )
                )
                (LetD WildP (PrimE (CallPrim) (VarE setDedupTable) (VarE arr)))
                (VarE arr)
              )
            )
          )
        )
        (LetD
          (VarP dedupedBlobWeakRef)
          (PrimE
            (CallPrim)
            (VarE getFromHashArray)
            (PrimE TupPrim (VarE hashArray) (VarE b))
          )
        )
        (LetD
          (VarP result)
          (SwitchE
            (VarE dedupedBlobWeakRef)
            (case
              (OptP (VarP weakRef))
              (BlockE
                (LetD
                  (VarP derefed)
                  (PrimE
                    (CallPrim Blob)
                    (VarE weakGet)
                    (PrimE (DotPrim ref) (VarE weakRef))
                  )
                )
                (SwitchE
                  (VarE derefed)
                  (case (OptP (VarP derefed)) (VarE derefed))
                  (case
                    (LitP NullLit)
                    (BlockE
                      (LetD
                        WildP
                        (PrimE
                          (CallPrim)
                          (VarE addToHashArray)
                          (PrimE TupPrim (VarE hashArray) (VarE b))
                        )
                      )
                      (VarE b)
                    )
                  )
                )
              )
            )
            (case
              (LitP NullLit)
              (BlockE
                (LetD
                  WildP
                  (PrimE
                    (CallPrim)
                    (VarE addToHashArray)
                    (PrimE TupPrim (VarE hashArray) (VarE b))
                  )
                )
                (VarE b)
              )
            )
          )
        )
        (VarE result)
      )
    )
  )
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 57))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (IntLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat8Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat16Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat32Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat64Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat8Lit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat16Lit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat32Lit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat64Lit 25))) (PrimE TupPrim)))
)
-- Async Lowering issue-5555.mo:
(ProgU
  (VarD @cycles Nat (LitE (NatLit 0)))
  (VarD @timeout ?Nat32 (LitE NullLit))
  (LetD
    (VarP @add_cycles)
    (FuncE
      @add_cycles
      Local
      Returns
      ($ Any)
      ()
      (BlockE
        (LetD (VarP cycles) (VarE! @cycles))
        (LetD WildP (PrimE (CallPrim) (VarE @reset_cycles) (PrimE TupPrim)))
        (LetD
          WildP
          (IfE
            (PrimE
              (RelPrim Bool EqOp)
              (PrimE (RelPrim Nat EqOp) (VarE cycles) (LitE (NatLit 0)))
              (LitE (BoolLit false))
            )
            (PrimE SystemCyclesAddPrim (VarE cycles))
            (PrimE TupPrim)
          )
        )
        (SwitchE
          (VarE! @timeout)
          (case
            (OptP (VarP timeout))
            (BlockE
              (LetD WildP (AssignE (VarLE @timeout) (LitE NullLit)))
              (PrimE SystemTimeoutSetPrim (VarE timeout))
            )
          )
          (case (LitP NullLit) (PrimE TupPrim))
        )
      )
    )
  )
  (LetD
    (VarP @reset_cycles)
    (FuncE
      @reset_cycles
      Local
      Returns
      ()
      (AssignE (VarLE @cycles) (LitE (NatLit 0)))
    )
  )
  (LetD
    (VarP @immut_array_get)
    (FuncE
      @immut_array_get
      Local
      Returns
      (A Any)
      (params xs)
      Nat -> A
      (FuncE
        @anon-func-45.49
        Local
        Returns
        (params n)
        A
        (PrimE IdxPrim (VarE xs) (VarE n))
      )
    )
  )
  (LetD
    (VarP @mut_array_get)
    (FuncE
      @mut_array_get
      Local
      Returns
      (A Any)
      (params xs)
      Nat -> A
      (FuncE
        @anon-func-46.51
        Local
        Returns
        (params n)
        A
        (PrimE IdxPrim (VarE xs) (VarE n))
      )
    )
  )
  (LetD
    (VarP @immut_array_size)
    (FuncE
      @immut_array_size
      Local
      Returns
      (A Any)
      (params xs)
      () -> Nat
      (FuncE @anon-func-47.51 Local Returns Nat (PrimE array_len (VarE xs)))
    )
  )
  (LetD
    (VarP @mut_array_size)
    (FuncE
      @mut_array_size
      Local
      Returns
      (A Any)
      (params xs)
      () -> Nat
      (FuncE @anon-func-48.53 Local Returns Nat (PrimE array_len (VarE xs)))
    )
  )
  (LetD
    (VarP @mut_array_put)
    (FuncE
      @mut_array_put
      Local
      Returns
      (A Any)
      (params xs)
      (Nat, A) -> ()
      (FuncE
        @anon-func-49.57
        Local
        Returns
        (params n x)
        ()
        (AssignE (IdxLE (VarE xs) (VarE n)) (VarE x))
      )
    )
  )
  (LetD
    (VarP @immut_array_keys)
    (FuncE
      @immut_array_keys
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<Nat>
      (FuncE
        @anon-func-50.58
        Local
        Returns
        @Iter<Nat>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (VarE j))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat})
        )
      )
    )
  )
  (LetD
    (VarP @mut_array_keys)
    (FuncE
      @mut_array_keys
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<Nat>
      (FuncE
        @anon-func-55.60
        Local
        Returns
        @Iter<Nat>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (VarE j))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat})
        )
      )
    )
  )
  (LetD
    (VarP @immut_array_vals)
    (FuncE
      @immut_array_vals
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<A>
      (FuncE
        @anon-func-60.56
        Local
        Returns
        @Iter<A>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?A
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (PrimE IdxPrim (VarE xs) (VarE j)))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?A})
        )
      )
    )
  )
  (LetD
    (VarP @mut_array_vals)
    (FuncE
      @mut_array_vals
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<A>
      (FuncE
        @anon-func-67.58
        Local
        Returns
        @Iter<A>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?A
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (PrimE IdxPrim (VarE xs) (VarE j)))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?A})
        )
      )
    )
  )
  (LetD
    (VarP @blob_size)
    (FuncE
      @blob_size
      Local
      Returns
      (params b)
      () -> Nat
      (FuncE @anon-func-74.41 Local Returns Nat (PrimE blob_size (VarE b)))
    )
  )
  (LetD
    (VarP @blob_keys)
    (FuncE
      @blob_keys
      Local
      Returns
      (params b)
      () -> @Iter<Nat>
      (FuncE
        @anon-func-75.48
        Local
        Returns
        @Iter<Nat>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE blob_size (VarE b)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (VarE j))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat})
        )
      )
    )
  )
  (LetD
    (VarP @blob_get)
    (FuncE
      @blob_get
      Local
      Returns
      (params b)
      Nat -> Nat8
      (FuncE
        @anon-func-80.42
        Local
        Returns
        (params n)
        Nat8
        (PrimE IdxBlobPrim (VarE b) (VarE n))
      )
    )
  )
  (LetD
    (VarP @blob_vals)
    (FuncE
      @blob_vals
      Local
      Returns
      (params xs)
      () -> @Iter<Nat8>
      (FuncE
        @anon-func-81.50
        Local
        Returns
        @Iter<Nat8>
        (BlockE
          (LetD (VarP i) (PrimE blob_vals_iter (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat8
              (IfE
                (PrimE blob_iter_done (VarE i))
                (LitE NullLit)
                (PrimE OptPrim (PrimE blob_iter_next (VarE i)))
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat8})
        )
      )
    )
  )
  (LetD
    (VarP @text_size)
    (FuncE
      @text_size
      Local
      Returns
      (params xs)
      () -> Nat
      (FuncE @anon-func-88.42 Local Returns Nat (PrimE text_len (VarE xs)))
    )
  )
  (LetD
    (VarP @text_chars)
    (FuncE
      @text_chars
      Local
      Returns
      (params xs)
      () -> @Iter<Char>
      (FuncE
        @anon-func-89.51
        Local
        Returns
        @Iter<Char>
        (BlockE
          (LetD (VarP i) (PrimE text_iter (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Char
              (IfE
                (PrimE text_iter_done (VarE i))
                (LitE NullLit)
                (PrimE OptPrim (PrimE text_iter_next (VarE i)))
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Char})
        )
      )
    )
  )
  (LetD
    (VarP @text_of_num)
    (FuncE
      @text_of_num
      Local
      Returns
      (params x base sep digits)
      Text
      (BlockE
        (VarD text Text (LitE (TextLit )))
        (VarD n Nat (VarE x))
        (LetD
          WildP
          (IfE
            (PrimE (RelPrim Nat EqOp) (VarE! n) (LitE (NatLit 0)))
            (PrimE RetPrim (LitE (TextLit 0)))
            (PrimE TupPrim)
          )
        )
        (VarD i Nat (LitE (NatLit 0)))
        (LetD
          WildP
          (LabelE
            $done/0
            ()
            (LoopE
              (IfE
                (PrimE (RelPrim Nat GtOp) (VarE! n) (LitE (NatLit 0)))
                (BlockE
                  (LetD
                    (VarP rem)
                    (PrimE (BinPrim Nat ModOp) (VarE! n) (VarE base))
                  )
                  (LetD
                    WildP
                    (IfE
                      (IfE
                        (PrimE (RelPrim Nat GtOp) (VarE sep) (LitE (NatLit 0)))
                        (PrimE (RelPrim Nat EqOp) (VarE! i) (VarE sep))
                        (LitE (BoolLit false))
                      )
                      (BlockE
                        (LetD
                          WildP
                          (AssignE
                            (VarLE text)
                            (PrimE
                              (BinPrim Text CatOp)
                              (LitE (TextLit _))
                              (VarE! text)
                            )
                          )
                        )
                        (AssignE (VarLE i) (LitE (NatLit 0)))
                      )
                      (PrimE TupPrim)
                    )
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE text)
                      (PrimE
                        (BinPrim Text CatOp)
                        (PrimE (CallPrim) (VarE digits) (VarE rem))
                        (VarE! text)
                      )
                    )
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE n)
                      (PrimE (BinPrim Nat DivOp) (VarE! n) (VarE base))
                    )
                  )
                  (AssignE
                    (VarLE i)
                    (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                  )
                )
                (PrimE (BreakPrim $done/0) (PrimE TupPrim))
              )
            )
          )
        )
        (VarE! text)
      )
    )
  )
  (LetD
    (VarP @left_pad)
    (FuncE
      @left_pad
      Local
      Returns
      (params pad char t)
      Text
      (IfE
        (PrimE (RelPrim Nat GtOp) (VarE pad) (PrimE text_len (VarE t)))
        (BlockE
          (VarD
            i
            Nat
            (PrimE (BinPrim Nat SubOp) (VarE pad) (PrimE text_len (VarE t)))
          )
          (VarD text Text (VarE t))
          (LetD
            WildP
            (LabelE
              $done/1
              ()
              (LoopE
                (IfE
                  (PrimE (RelPrim Nat GtOp) (VarE! i) (LitE (NatLit 0)))
                  (BlockE
                    (LetD
                      WildP
                      (AssignE
                        (VarLE text)
                        (PrimE (BinPrim Text CatOp) (VarE char) (VarE! text))
                      )
                    )
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat SubOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE (BreakPrim $done/1) (PrimE TupPrim))
                )
              )
            )
          )
          (VarE! text)
        )
        (VarE t)
      )
    )
  )
  (LetD
    (VarP @digits_dec)
    (FuncE
      @digits_dec
      Local
      Returns
      (params x)
      Text
      (PrimE
        conv_Char_Text
        (PrimE
          (NumConvTrapPrim Nat32 Char)
          (PrimE
            (NumConvWrapPrim Int Nat32)
            (PrimE (BinPrim Int AddOp) (VarE x) (LitE (IntLit 48)))
          )
        )
      )
    )
  )
  (LetD
    (VarP @text_of_Nat)
    (FuncE
      @text_of_Nat
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_num)
        (PrimE
          TupPrim
          (VarE x)
          (LitE (NatLit 10))
          (LitE (NatLit 3))
          (VarE @digits_dec)
        )
      )
    )
  )
  (LetD
    (VarP @text_of_Int)
    (FuncE
      @text_of_Int
      Local
      Returns
      (params x)
      Text
      (IfE
        (PrimE (RelPrim Int EqOp) (VarE x) (LitE (IntLit 0)))
        (LitE (TextLit 0))
        (PrimE
          (BinPrim Text CatOp)
          (IfE
            (PrimE (RelPrim Int LtOp) (VarE x) (LitE (IntLit 0)))
            (LitE (TextLit -))
            (LitE (TextLit +))
          )
          (PrimE (CallPrim) (VarE @text_of_Nat) (PrimE abs (VarE x)))
        )
      )
    )
  )
  (LetD
    (VarP @digits_hex)
    (FuncE
      @digits_hex
      Local
      Returns
      (params x)
      Text
      (PrimE
        conv_Char_Text
        (PrimE
          (NumConvTrapPrim Nat32 Char)
          (PrimE
            (NumConvWrapPrim Int Nat32)
            (PrimE
              (BinPrim Int AddOp)
              (VarE x)
              (IfE
                (PrimE (RelPrim Nat LtOp) (VarE x) (LitE (NatLit 10)))
                (LitE (IntLit 48))
                (LitE (IntLit 55))
              )
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @int64ToInt)
    (FuncE
      @int64ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int64 Int) (VarE n))
    )
  )
  (LetD
    (VarP @int32ToInt)
    (FuncE
      @int32ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int32 Int) (VarE n))
    )
  )
  (LetD
    (VarP @int16ToInt)
    (FuncE
      @int16ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int16 Int) (VarE n))
    )
  )
  (LetD
    (VarP @int8ToInt)
    (FuncE
      @int8ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int8 Int) (VarE n))
    )
  )
  (LetD
    (VarP @nat64ToNat)
    (FuncE
      @nat64ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat64 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @nat32ToNat)
    (FuncE
      @nat32ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat32 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @nat16ToNat)
    (FuncE
      @nat16ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat16 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @nat8ToNat)
    (FuncE
      @nat8ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat8 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @text_of_Nat8)
    (FuncE
      @text_of_Nat8
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat8ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Nat16)
    (FuncE
      @text_of_Nat16
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat16ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Nat32)
    (FuncE
      @text_of_Nat32
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat32ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Nat64)
    (FuncE
      @text_of_Nat64
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat64ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int8)
    (FuncE
      @text_of_Int8
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int8ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int16)
    (FuncE
      @text_of_Int16
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int16ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int32)
    (FuncE
      @text_of_Int32
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int32ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int64)
    (FuncE
      @text_of_Int64
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int64ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Float)
    (FuncE
      @text_of_Float
      Local
      Returns
      (params x)
      Text
      (PrimE Float->Text (VarE x))
    )
  )
  (LetD
    (VarP @text_of_Bool)
    (FuncE
      @text_of_Bool
      Local
      Returns
      (params b)
      Text
      (IfE (VarE b) (LitE (TextLit true)) (LitE (TextLit false)))
    )
  )
  (LetD
    (VarP @text_of_Text)
    (FuncE
      @text_of_Text
      Local
      Returns
      (params t)
      Text
      (PrimE
        (BinPrim Text CatOp)
        (PrimE (BinPrim Text CatOp) (LitE (TextLit ")) (VarE t))
        (LitE (TextLit "))
      )
    )
  )
  (LetD
    (VarP @text_of_Char)
    (FuncE
      @text_of_Char
      Local
      Returns
      (params c)
      Text
      (PrimE
        (BinPrim Text CatOp)
        (PrimE
          (BinPrim Text CatOp)
          (LitE (TextLit '))
          (PrimE conv_Char_Text (VarE c))
        )
        (LitE (TextLit '))
      )
    )
  )
  (LetD
    (VarP @text_of_Blob)
    (FuncE
      @text_of_Blob
      Local
      Returns
      (params blob)
      Text
      (BlockE
        (VarD t Text (LitE (TextLit ")))
        (LetD
          WildP
          (BlockE
            (LetD
              (VarP $nxt/0)
              (PrimE
                (DotPrim next)
                (PrimE
                  (CallPrim)
                  (PrimE (CallPrim) (VarE @blob_vals) (VarE blob))
                  (PrimE TupPrim)
                )
              )
            )
            (LabelE
              $done/2
              ()
              (LoopE
                (SwitchE
                  (PrimE (CallPrim) (VarE $nxt/0) (PrimE TupPrim))
                  (case
                    (LitP NullLit)
                    (PrimE (BreakPrim $done/2) (PrimE TupPrim))
                  )
                  (case
                    (OptP (VarP b))
                    (AssignE
                      (VarLE t)
                      (PrimE
                        (BinPrim Text CatOp)
                        (VarE! t)
                        (PrimE
                          (BinPrim Text CatOp)
                          (LitE (TextLit \))
                          (PrimE
                            (CallPrim)
                            (VarE @left_pad)
                            (PrimE
                              TupPrim
                              (LitE (NatLit 2))
                              (LitE (TextLit 0))
                              (PrimE
                                (CallPrim)
                                (VarE @text_of_num)
                                (PrimE
                                  TupPrim
                                  (PrimE (CallPrim) (VarE @nat8ToNat) (VarE b))
                                  (LitE (NatLit 16))
                                  (LitE (NatLit 0))
                                  (VarE @digits_hex)
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          WildP
          (AssignE
            (VarLE t)
            (PrimE (BinPrim Text CatOp) (VarE! t) (LitE (TextLit ")))
          )
        )
        (PrimE RetPrim (VarE! t))
      )
    )
  )
  (LetD
    (VarP @text_has_parens)
    (FuncE
      @text_has_parens
      Local
      Returns
      (params t)
      Bool
      (SwitchE
        (PrimE
          (CallPrim)
          (PrimE
            (DotPrim next)
            (PrimE
              (CallPrim)
              (PrimE (CallPrim) (VarE @text_chars) (VarE t))
              (PrimE TupPrim)
            )
          )
          (PrimE TupPrim)
        )
        (case (OptP (LitP (CharLit 40))) (LitE (BoolLit true)))
        (case WildP (LitE (BoolLit false)))
      )
    )
  )
  (LetD
    (VarP @text_needs_parens)
    (FuncE
      @text_needs_parens
      Local
      Returns
      (params t)
      Bool
      (SwitchE
        (PrimE
          (CallPrim)
          (PrimE
            (DotPrim next)
            (PrimE
              (CallPrim)
              (PrimE (CallPrim) (VarE @text_chars) (VarE t))
              (PrimE TupPrim)
            )
          )
          (PrimE TupPrim)
        )
        (case
          (OptP
            (AltP
              (AltP
                (AltP (LitP (CharLit 43)) (LitP (CharLit 45)))
                (LitP (CharLit 63))
              )
              (LitP (CharLit 35))
            )
          )
          (LitE (BoolLit true))
        )
        (case WildP (LitE (BoolLit false)))
      )
    )
  )
  (LetD
    (VarP @text_of_option)
    (FuncE
      @text_of_option
      Local
      Returns
      (T Any)
      (params f x)
      Text
      (SwitchE
        (VarE x)
        (case
          (OptP (VarP y))
          (BlockE
            (LetD (VarP fy) (PrimE (CallPrim) (VarE f) (VarE y)))
            (IfE
              (PrimE (CallPrim) (VarE @text_needs_parens) (VarE fy))
              (PrimE
                (BinPrim Text CatOp)
                (PrimE (BinPrim Text CatOp) (LitE (TextLit ?()) (VarE fy))
                (LitE (TextLit )))
              )
              (PrimE (BinPrim Text CatOp) (LitE (TextLit ?)) (VarE fy))
            )
          )
        )
        (case (LitP NullLit) (LitE (TextLit null)))
      )
    )
  )
  (LetD
    (VarP @text_of_variant)
    (FuncE
      @text_of_variant
      Local
      Returns
      (T Any)
      (params l f x)
      Text
      (BlockE
        (LetD (VarP fx) (PrimE (CallPrim) (VarE f) (VarE x)))
        (IfE
          (PrimE (RelPrim Text EqOp) (VarE fx) (LitE (TextLit ())))
          (PrimE (BinPrim Text CatOp) (LitE (TextLit #)) (VarE l))
          (IfE
            (PrimE (CallPrim) (VarE @text_has_parens) (VarE fx))
            (PrimE
              (BinPrim Text CatOp)
              (PrimE (BinPrim Text CatOp) (LitE (TextLit #)) (VarE l))
              (VarE fx)
            )
            (PrimE
              (BinPrim Text CatOp)
              (PrimE
                (BinPrim Text CatOp)
                (PrimE
                  (BinPrim Text CatOp)
                  (PrimE (BinPrim Text CatOp) (LitE (TextLit #)) (VarE l))
                  (LitE (TextLit ())
                )
                (VarE fx)
              )
              (LitE (TextLit )))
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @text_of_array)
    (FuncE
      @text_of_array
      Local
      Returns
      (T Any)
      (params f xs)
      Text
      (BlockE
        (VarD text Text (LitE (TextLit [)))
        (VarD first Bool (LitE (BoolLit true)))
        (LetD
          WildP
          (BlockE
            (LetD (VarP $arr/0) (VarE xs))
            (LetD (VarP $last/0) (PrimE GetLastArrayOffset (VarE $arr/0)))
            (VarD $indx/0 Nat (LitE (NatLit 0)))
            (IfE
              (PrimE EqArrayOffset (VarE $last/0) (LitE (IntLit -1)))
              (PrimE TupPrim)
              (LabelE
                $done/3
                ()
                (LoopE
                  (BlockE
                    (LetD
                      (VarP x)
                      (PrimE DerefArrayOffset (VarE $arr/0) (VarE! $indx/0))
                    )
                    (LetD
                      WildP
                      (BlockE
                        (LetD
                          WildP
                          (IfE
                            (VarE! first)
                            (AssignE (VarLE first) (LitE (BoolLit false)))
                            (AssignE
                              (VarLE text)
                              (PrimE
                                (BinPrim Text CatOp)
                                (VarE! text)
                                (LitE (TextLit , ))
                              )
                            )
                          )
                        )
                        (AssignE
                          (VarLE text)
                          (PrimE
                            (BinPrim Text CatOp)
                            (VarE! text)
                            (PrimE (CallPrim) (VarE f) (VarE x))
                          )
                        )
                      )
                    )
                    (IfE
                      (PrimE EqArrayOffset (VarE! $indx/0) (VarE $last/0))
                      (PrimE (BreakPrim $done/3) (PrimE TupPrim))
                      (AssignE
                        (VarLE $indx/0)
                        (PrimE NextArrayOffset (VarE! $indx/0))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (PrimE (BinPrim Text CatOp) (VarE! text) (LitE (TextLit ])))
      )
    )
  )
  (LetD
    (VarP @text_of_array_mut)
    (FuncE
      @text_of_array_mut
      Local
      Returns
      (T Any)
      (params f xs)
      Text
      (BlockE
        (VarD text Text (LitE (TextLit [var)))
        (VarD first Bool (LitE (BoolLit true)))
        (LetD
          WildP
          (BlockE
            (LetD (VarP $arr/1) (VarE xs))
            (LetD (VarP $last/1) (PrimE GetLastArrayOffset (VarE $arr/1)))
            (VarD $indx/1 Nat (LitE (NatLit 0)))
            (IfE
              (PrimE EqArrayOffset (VarE $last/1) (LitE (IntLit -1)))
              (PrimE TupPrim)
              (LabelE
                $done/4
                ()
                (LoopE
                  (BlockE
                    (LetD
                      (VarP x)
                      (PrimE DerefArrayOffset (VarE $arr/1) (VarE! $indx/1))
                    )
                    (LetD
                      WildP
                      (BlockE
                        (LetD
                          WildP
                          (IfE
                            (VarE! first)
                            (BlockE
                              (LetD
                                WildP
                                (AssignE (VarLE first) (LitE (BoolLit false)))
                              )
                              (AssignE
                                (VarLE text)
                                (PrimE
                                  (BinPrim Text CatOp)
                                  (VarE! text)
                                  (LitE (TextLit  ))
                                )
                              )
                            )
                            (AssignE
                              (VarLE text)
                              (PrimE
                                (BinPrim Text CatOp)
                                (VarE! text)
                                (LitE (TextLit , ))
                              )
                            )
                          )
                        )
                        (AssignE
                          (VarLE text)
                          (PrimE
                            (BinPrim Text CatOp)
                            (VarE! text)
                            (PrimE (CallPrim) (VarE f) (VarE x))
                          )
                        )
                      )
                    )
                    (IfE
                      (PrimE EqArrayOffset (VarE! $indx/1) (VarE $last/1))
                      (PrimE (BreakPrim $done/4) (PrimE TupPrim))
                      (AssignE
                        (VarLE $indx/1)
                        (PrimE NextArrayOffset (VarE! $indx/1))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (PrimE (BinPrim Text CatOp) (VarE! text) (LitE (TextLit ])))
      )
    )
  )
  (LetD
    (VarP @equal_array)
    (FuncE
      @equal_array
      Local
      Returns
      (T Any)
      (params eq a b)
      Bool
      (BlockE
        (LetD
          WildP
          (IfE
            (PrimE
              (RelPrim Bool EqOp)
              (PrimE
                (RelPrim Nat EqOp)
                (PrimE array_len (VarE a))
                (PrimE array_len (VarE b))
              )
              (LitE (BoolLit false))
            )
            (PrimE RetPrim (LitE (BoolLit false)))
            (PrimE TupPrim)
          )
        )
        (VarD i Nat (LitE (NatLit 0)))
        (LetD (VarP s) (PrimE array_len (VarE a)))
        (LetD
          WildP
          (LabelE
            $done/5
            ()
            (LoopE
              (IfE
                (PrimE (RelPrim Nat LtOp) (VarE! i) (VarE s))
                (BlockE
                  (LetD
                    WildP
                    (IfE
                      (PrimE
                        (RelPrim Bool EqOp)
                        (PrimE
                          (CallPrim)
                          (VarE eq)
                          (PrimE
                            TupPrim
                            (PrimE IdxPrim (VarE a) (VarE! i))
                            (PrimE IdxPrim (VarE b) (VarE! i))
                          )
                        )
                        (LitE (BoolLit false))
                      )
                      (PrimE RetPrim (LitE (BoolLit false)))
                      (PrimE TupPrim)
                    )
                  )
                  (AssignE
                    (VarLE i)
                    (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                  )
                )
                (PrimE (BreakPrim $done/5) (PrimE TupPrim))
              )
            )
          )
        )
        (PrimE RetPrim (LitE (BoolLit true)))
      )
    )
  )
  (VarD @refund Nat (LitE (NatLit 0)))
  (LetD
    (VarP @reset_refund)
    (FuncE
      @reset_refund
      Local
      Returns
      ()
      (AssignE (VarLE @refund) (LitE (NatLit 0)))
    )
  )
  (LetD
    (VarP @getSystemRefund)
    (FuncE
      @getSystemRefund
      Local
      Returns
      @Refund
      (PrimE RetPrim (PrimE SystemCyclesRefundedPrim))
    )
  )
  (LetD (VarP @cleanup) (FuncE @cleanup Local Returns () (PrimE TupPrim)))
  (LetD
    (VarP @new_async)
    (FuncE
      @new_async
      Local
      Returns
      (T Any)
      (@Async<T>, @Cont<T>, @Cont<Error>, @CleanCont)
      (BlockE
        (LetD
          (VarP w_null)
          (FuncE
            @anon-func-293.16
            Local
            Returns
            (params r t)
            ()
            (PrimE TupPrim)
          )
        )
        (LetD
          (VarP r_null)
          (FuncE
            @anon-func-294.16
            Local
            Returns
            (params $ignored0/0)
            ()
            (PrimE TupPrim)
          )
        )
        (VarD result ?@Result<T> (LitE NullLit))
        (VarD ws (@Refund, T) -> () (VarE w_null))
        (VarD rs Error -> () (VarE r_null))
        (LetD
          (VarP getRefund)
          (PrimE
            (RelPrim Bool EqOp)
            (PrimE (RelPrim Nat EqOp) (VarE! @cycles) (LitE (NatLit 0)))
            (LitE (BoolLit false))
          )
        )
        (LetD
          (VarP fulfill)
          (FuncE
            fulfill
            Local
            Returns
            (params t)
            ()
            (SwitchE
              (VarE! result)
              (case
                (LitP NullLit)
                (BlockE
                  (LetD
                    (VarP refund)
                    (IfE
                      (VarE getRefund)
                      (PrimE (CallPrim) (VarE @getSystemRefund) (PrimE TupPrim))
                      (LitE (NatLit 0))
                    )
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE result)
                      (PrimE
                        OptPrim
                        (PrimE (TagE ok) (PrimE TupPrim (VarE refund) (VarE t)))
                      )
                    )
                  )
                  (LetD (VarP ws_) (VarE! ws))
                  (LetD WildP (AssignE (VarLE ws) (VarE w_null)))
                  (LetD WildP (AssignE (VarLE rs) (VarE r_null)))
                  (PrimE
                    (CallPrim)
                    (VarE ws_)
                    (PrimE TupPrim (VarE refund) (VarE t))
                  )
                )
              )
              (case (OptP WildP) (PrimE AssertPrim (LitE (BoolLit false))))
            )
          )
        )
        (LetD
          (VarP fail)
          (FuncE
            fail
            Local
            Returns
            (params e)
            ()
            (SwitchE
              (VarE! result)
              (case
                (LitP NullLit)
                (BlockE
                  (LetD
                    WildP
                    (AssignE
                      (VarLE result)
                      (PrimE OptPrim (PrimE (TagE error) (VarE e)))
                    )
                  )
                  (LetD (VarP rs_) (VarE! rs))
                  (LetD WildP (AssignE (VarLE ws) (VarE w_null)))
                  (LetD WildP (AssignE (VarLE rs) (VarE r_null)))
                  (PrimE (CallPrim) (VarE rs_) (VarE e))
                )
              )
              (case (OptP WildP) (PrimE AssertPrim (LitE (BoolLit false))))
            )
          )
        )
        (VarD cleanup () -> () (VarE @cleanup))
        (LetD
          (VarP enqueue)
          (FuncE
            enqueue
            Local
            Returns
            (params k r b)
            {#schedule : () -> (); #suspend}
            (BlockE
              (LetD WildP (AssignE (VarLE cleanup) (VarE b)))
              (SwitchE
                (VarE! result)
                (case
                  (LitP NullLit)
                  (BlockE
                    (LetD (VarP ws_) (VarE! ws))
                    (LetD
                      WildP
                      (AssignE
                        (VarLE ws)
                        (FuncE
                          @anon-func-337.15
                          Local
                          Returns
                          (params r t)
                          ()
                          (BlockE
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE ws_)
                                (PrimE TupPrim (VarE r) (VarE t))
                              )
                            )
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE @reset_cycles)
                                (PrimE TupPrim)
                              )
                            )
                            (LetD WildP (AssignE (VarLE @refund) (VarE r)))
                            (PrimE (CallPrim) (VarE k) (VarE t))
                          )
                        )
                      )
                    )
                    (LetD (VarP rs_) (VarE! rs))
                    (LetD
                      WildP
                      (AssignE
                        (VarLE rs)
                        (FuncE
                          @anon-func-344.15
                          Local
                          Returns
                          (params e)
                          ()
                          (BlockE
                            (LetD WildP (PrimE (CallPrim) (VarE rs_) (VarE e)))
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE @reset_cycles)
                                (PrimE TupPrim)
                              )
                            )
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE @reset_refund)
                                (PrimE TupPrim)
                              )
                            )
                            (PrimE (CallPrim) (VarE r) (VarE e))
                          )
                        )
                      )
                    )
                    (PrimE (TagE suspend) (PrimE TupPrim))
                  )
                )
                (case
                  (OptP (TagP ok (TupP (VarP r) (VarP t))))
                  (PrimE
                    (TagE schedule)
                    (FuncE
                      @anon-func-353.19
                      Local
                      Returns
                      ()
                      (BlockE
                        (LetD WildP (AssignE (VarLE @refund) (VarE r)))
                        (PrimE (CallPrim) (VarE k) (VarE t))
                      )
                    )
                  )
                )
                (case
                  (OptP (TagP error (VarP e)))
                  (PrimE
                    (TagE schedule)
                    (FuncE
                      @anon-func-356.19
                      Local
                      Returns
                      ()
                      (PrimE (CallPrim) (VarE r) (VarE e))
                    )
                  )
                )
              )
            )
          )
        )
        (PrimE
          TupPrim
          (VarE enqueue)
          (VarE fulfill)
          (VarE fail)
          (FuncE
            @anon-func-361.28
            Local
            Returns
            ()
            (PrimE (CallPrim) (VarE! cleanup) (PrimE TupPrim))
          )
        )
      )
    )
  )
  (LetD (VarP @ManagementCanister) (NewObjE Module module {}))
  (LetD
    (VarP @ic00)
    (PrimE
      (ActorOfIdBlob
        actor {create_canister : shared <system>{sender_canister_version : ?Nat64; settings : ?canister_settings} -> replies {canister_id : Principal}; install_code : shared <system>{arg : Blob; canister_id : Principal; mode : {#install; #reinstall; #upgrade : ?@UpgradeOptions}; sender_canister_version : ?Nat64; wasm_module : wasm_module} -> replies ()}
      )
      (PrimE BlobOfIcUrl (LitE (TextLit aaaaa-aa)))
    )
  )
  (LetD
    (VarP @install_actor_helper)
    (FuncE
      @install_actor_helper
      Local
      Returns
      ($ Any)
      (params install_arg enhanced_orthogonal_persistence wasm_module arg)
      (Principal -> (), Error -> (), () -> ()) -> ()
      (FuncE
        $lambda
        Local
        Returns
        (params $v/33 $e/1 $c/0)
        ()
        (PrimE
          (CallPrim $)
          (FuncE
            $lambda
            Local
            Returns
            ($@anon-async*-416.24 Any)
            (params $k/0 $r/0 $b/0)
            ()
            (DeclareE
              $mode/1
              (DeclareE
                $canister_id/0
                (BlockE
                  (LetD
                    (VarP $k/2)
                    (FuncE
                      $k/2
                      Local
                      Returns
                      (params $param0/0 $param1/0)
                      ()
                      (BlockE
                        (LetD
                          (VarP $v/3)
                          (PrimE TupPrim (VarE $param0/0) (VarE $param1/0))
                        )
                        (BlockE
                          (LetD (TupP (VarP $v/1) (VarP $v/2)) (VarE $v/3))
                          (LetD WildP (DefineE $mode/1 Const (VarE $v/1)))
                          (LetD
                            WildP
                            (DefineE $canister_id/0 Const (VarE $v/2))
                          )
                          (BlockE
                            (LetD (VarP $u/0) (PrimE TupPrim))
                            (BlockE
                              (LetD
                                (VarP $k/1)
                                (FuncE
                                  $k/1
                                  Local
                                  Returns
                                  ()
                                  (BlockE
                                    (LetD (VarP $v/4) (PrimE TupPrim))
                                    (BlockE
                                      (LetD WildP (VarE $v/4))
                                      (BlockE
                                        (LetD (VarP $u/1) (PrimE TupPrim))
                                        (BlockE
                                          (LetD (VarP $u/2) (PrimE TupPrim))
                                          (PrimE
                                            (CallPrim)
                                            (VarE $k/0)
                                            (PrimE
                                              RetPrim
                                              (PrimE
                                                (CallPrim)
                                                (VarE $k/0)
                                                (VarE $canister_id/0)
                                              )
                                            )
                                          )
                                        )
                                      )
                                    )
                                  )
                                )
                              )
                              (BlockE
                                (LetD
                                  (VarP $v/5)
                                  (PrimE
                                    (ActorDotPrim install_code)
                                    (VarE @ic00)
                                  )
                                )
                                (BlockE
                                  (LetD
                                    (VarP $u/3)
                                    (BlockE
                                      (LetD
                                        (TupP
                                          (VarP $async/3)
                                          (VarP $reply/1)
                                          (VarP $reject/1)
                                          (VarP $cleanup/1)
                                        )
                                        (BlockE
                                          (LetD
                                            (TupP
                                              (VarP $async/2)
                                              (VarP $fulfill/1)
                                              (VarP $fail/1)
                                              (VarP $clean/1)
                                            )
                                            (PrimE
                                              (CallPrim ())
                                              (VarE @new_async)
                                              (PrimE TupPrim)
                                            )
                                          )
                                          (PrimE
                                            TupPrim
                                            (FuncE
                                              $lambda
                                              Local
                                              Returns
                                              (params $k/10 $r/5 $b/4)
                                              {#schedule : () -> (); #suspend}
                                              (PrimE
                                                (CallPrim)
                                                (VarE $async/2)
                                                (PrimE
                                                  TupPrim
                                                  (FuncE
                                                    $lambda
                                                    Local
                                                    Returns
                                                    (params $v/36)
                                                    ()
                                                    (PrimE
                                                      (CallPrim)
                                                      (VarE $k/10)
                                                      (VarE $v/36)
                                                    )
                                                  )
                                                  (VarE $r/5)
                                                  (VarE $b/4)
                                                )
                                              )
                                            )
                                            (FuncE
                                              $lambda
                                              Local
                                              Returns
                                              ()
                                              (PrimE
                                                (CallPrim)
                                                (VarE $fulfill/1)
                                                (PrimE TupPrim)
                                              )
                                            )
                                            (VarE $fail/1)
                                            (VarE $clean/1)
                                          )
                                        )
                                      )
                                      (LetD
                                        (VarP $x/2)
                                        (BlockE
                                          (LetD
                                            (VarP $$sender_canister_version/0/0)
                                            (PrimE
                                              OptPrim
                                              (PrimE canister_version)
                                            )
                                          )
                                          (NewObjE
                                            Object
                                            (sender_canister_version
                                              $$sender_canister_version/0/0
                                            )
                                            (arg arg)
                                            (wasm_module wasm_module)
                                            (canister_id $canister_id/0)
                                            (mode $mode/1)
                                            {arg : Blob; canister_id : Principal; mode : {#install; #reinstall; #upgrade : ?@UpgradeOptions}; sender_canister_version : ?Nat64; wasm_module : wasm_module}
                                          )
                                        )
                                      )
                                      (LetD
                                        WildP
                                        (PrimE
                                          ICCallPrim
                                          (VarE $v/5)
                                          (VarE $x/2)
                                          (VarE $reply/1)
                                          (VarE $reject/1)
                                          (VarE $cleanup/1)
                                        )
                                      )
                                      (VarE $async/3)
                                    )
                                  )
                                  (IfE
                                    (PrimE
                                      (CallPrim)
                                      (VarE @call_succeeded)
                                      (PrimE TupPrim)
                                    )
                                    (BlockE
                                      (LetD
                                        (VarP $v/35)
                                        (PrimE
                                          TupPrim
                                          (VarE $k/1)
                                          (VarE $r/0)
                                          (VarE $b/0)
                                        )
                                      )
                                      (SwitchE
                                        (PrimE
                                          (CallPrim)
                                          (VarE $u/3)
                                          (VarE $v/35)
                                        )
                                        (case
                                          (TagP suspend WildP)
                                          (PrimE TupPrim)
                                        )
                                        (case
                                          (TagP schedule (VarP $schedule/1))
                                          (BlockE
                                            (LetD
                                              (VarP $call/1)
                                              (SelfCallE
                                                ()
                                                (PrimE
                                                  (ICReplyPrim)
                                                  (PrimE TupPrim)
                                                )
                                                (VarE $schedule/1)
                                                (PrimE
                                                  (ProjPrim 1)
                                                  (VarE $v/35)
                                                )
                                                (FuncE
                                                  $lambda
                                                  Local
                                                  Returns
                                                  ()
                                                  (PrimE
                                                    (CallPrim)
                                                    (PrimE
                                                      (ProjPrim 2)
                                                      (VarE $v/35)
                                                    )
                                                    (PrimE TupPrim)
                                                  )
                                                )
                                              )
                                            )
                                            (IfE
                                              (PrimE
                                                (CallPrim)
                                                (VarE @call_succeeded)
                                                (PrimE TupPrim)
                                              )
                                              (VarE $call/1)
                                              (PrimE
                                                (CallPrim)
                                                (PrimE
                                                  (ProjPrim 1)
                                                  (VarE $v/35)
                                                )
                                                (PrimE
                                                  (CallPrim)
                                                  (VarE @call_error)
                                                  (PrimE TupPrim)
                                                )
                                              )
                                            )
                                          )
                                        )
                                      )
                                    )
                                    (PrimE
                                      (CallPrim)
                                      (VarE $r/0)
                                      (PrimE
                                        (CallPrim)
                                        (VarE @call_error)
                                        (PrimE TupPrim)
                                      )
                                    )
                                  )
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                  (SwitchE
                    (VarE install_arg)
                    (case
                      (TagP new (VarP $settings/2))
                      (DeclareE
                        $available/0
                        (DeclareE
                          $accepted/0
                          (DeclareE
                            $sender_canister_version/2
                            (DeclareE
                              $canister_id/1
                              (BlockE
                                (LetD
                                  (VarP $v/6)
                                  (PrimE SystemCyclesAvailablePrim)
                                )
                                (LetD
                                  WildP
                                  (DefineE $available/0 Const (VarE $v/6))
                                )
                                (BlockE
                                  (LetD (VarP $u/4) (PrimE TupPrim))
                                  (BlockE
                                    (LetD
                                      (VarP $v/7)
                                      (PrimE
                                        SystemCyclesAcceptPrim
                                        (VarE $available/0)
                                      )
                                    )
                                    (LetD
                                      WildP
                                      (DefineE $accepted/0 Const (VarE $v/7))
                                    )
                                    (BlockE
                                      (LetD (VarP $u/5) (PrimE TupPrim))
                                      (BlockE
                                        (LetD
                                          (VarP $v/8)
                                          (PrimE
                                            OptPrim
                                            (PrimE canister_version)
                                          )
                                        )
                                        (LetD
                                          WildP
                                          (DefineE
                                            $sender_canister_version/2
                                            Const
                                            (VarE $v/8)
                                          )
                                        )
                                        (BlockE
                                          (LetD (VarP $u/6) (PrimE TupPrim))
                                          (BlockE
                                            (LetD
                                              WildP
                                              (AssignE
                                                (VarLE @cycles)
                                                (PrimE
                                                  (BinPrim Nat AddOp)
                                                  (VarE! @cycles)
                                                  (VarE $accepted/0)
                                                )
                                              )
                                            )
                                            (BlockE
                                              (LetD (VarP $u/7) (PrimE TupPrim))
                                              (BlockE
                                                (LetD
                                                  (VarP $k/3)
                                                  (FuncE
                                                    $k/3
                                                    Local
                                                    Returns
                                                    (params $v/10)
                                                    ()
                                                    (BlockE
                                                      (LetD
                                                        (ObjP
                                                          (canister_id
                                                            (VarP $v/9)
                                                          )
                                                        )
                                                        (VarE $v/10)
                                                      )
                                                      (LetD
                                                        WildP
                                                        (DefineE
                                                          $canister_id/1
                                                          Const
                                                          (VarE $v/9)
                                                        )
                                                      )
                                                      (BlockE
                                                        (LetD
                                                          (VarP $u/8)
                                                          (PrimE TupPrim)
                                                        )
                                                        (BlockE
                                                          (LetD
                                                            (VarP $u/9)
                                                            (PrimE TupPrim)
                                                          )
                                                          (PrimE
                                                            (CallPrim)
                                                            (VarE $k/2)
                                                            (PrimE
                                                              TupPrim
                                                              (PrimE
                                                                (TagE install)
                                                                (PrimE TupPrim)
                                                              )
                                                              (VarE
                                                                $canister_id/1
                                                              )
                                                            )
                                                          )
                                                        )
                                                      )
                                                    )
                                                  )
                                                )
                                                (BlockE
                                                  (LetD
                                                    (VarP $v/11)
                                                    (PrimE
                                                      (ActorDotPrim
                                                        create_canister
                                                      )
                                                      (VarE @ic00)
                                                    )
                                                  )
                                                  (BlockE
                                                    (LetD
                                                      (VarP $u/10)
                                                      (BlockE
                                                        (LetD
                                                          (TupP
                                                            (VarP $async/1)
                                                            (VarP $reply/0)
                                                            (VarP $reject/0)
                                                            (VarP $cleanup/0)
                                                          )
                                                          (BlockE
                                                            (LetD
                                                              (TupP
                                                                (VarP $async/0)
                                                                (VarP
                                                                  $fulfill/0
                                                                )
                                                                (VarP $fail/0)
                                                                (VarP $clean/0)
                                                              )
                                                              (PrimE
                                                                (CallPrim
                                                                  {canister_id : Principal}
                                                                )
                                                                (VarE
                                                                  @new_async
                                                                )
                                                                (PrimE TupPrim)
                                                              )
                                                            )
                                                            (PrimE
                                                              TupPrim
                                                              (VarE $async/0)
                                                              (FuncE
                                                                $lambda
                                                                Local
                                                                Returns
                                                                (params $rep0/0)
                                                                ()
                                                                (PrimE
                                                                  (CallPrim)
                                                                  (VarE
                                                                    $fulfill/0
                                                                  )
                                                                  (VarE $rep0/0)
                                                                )
                                                              )
                                                              (VarE $fail/0)
                                                              (VarE $clean/0)
                                                            )
                                                          )
                                                        )
                                                        (LetD
                                                          (VarP $x/1)
                                                          (BlockE
                                                            (LetD
                                                              (VarP $$base/0/0)
                                                              (VarE $settings/2)
                                                            )
                                                            (LetD
                                                              (VarP
                                                                $$settings/0/0
                                                              )
                                                              (PrimE
                                                                (DotPrim
                                                                  settings
                                                                )
                                                                (VarE
                                                                  $$base/0/0
                                                                )
                                                              )
                                                            )
                                                            (NewObjE
                                                              Object
                                                              (settings
                                                                $$settings/0/0
                                                              )
                                                              (sender_canister_version
                                                                $sender_canister_version/2
                                                              )
                                                              {sender_canister_version : ?Nat64; settings : ?canister_settings}
                                                            )
                                                          )
                                                        )
                                                        (LetD
                                                          WildP
                                                          (PrimE
                                                            ICCallPrim
                                                            (VarE $v/11)
                                                            (VarE $x/1)
                                                            (VarE $reply/0)
                                                            (VarE $reject/0)
                                                            (VarE $cleanup/0)
                                                          )
                                                        )
                                                        (VarE $async/1)
                                                      )
                                                    )
                                                    (IfE
                                                      (PrimE
                                                        (CallPrim)
                                                        (VarE @call_succeeded)
                                                        (PrimE TupPrim)
                                                      )
                                                      (BlockE
                                                        (LetD
                                                          (VarP $v/34)
                                                          (PrimE
                                                            TupPrim
                                                            (VarE $k/3)
                                                            (VarE $r/0)
                                                            (VarE $b/0)
                                                          )
                                                        )
                                                        (SwitchE
                                                          (PrimE
                                                            (CallPrim)
                                                            (VarE $u/10)
                                                            (VarE $v/34)
                                                          )
                                                          (case
                                                            (TagP suspend WildP)
                                                            (PrimE TupPrim)
                                                          )
                                                          (case
                                                            (TagP
                                                              schedule
                                                              (VarP $schedule/0)
                                                            )
                                                            (BlockE
                                                              (LetD
                                                                (VarP $call/0)
                                                                (SelfCallE
                                                                  ()
                                                                  (PrimE
                                                                    (ICReplyPrim
                                                                    )
                                                                    (PrimE
                                                                      TupPrim
                                                                    )
                                                                  )
                                                                  (VarE
                                                                    $schedule/0
                                                                  )
                                                                  (PrimE
                                                                    (ProjPrim 1)
                                                                    (VarE $v/34)
                                                                  )
                                                                  (FuncE
                                                                    $lambda
                                                                    Local
                                                                    Returns
                                                                    ()
                                                                    (PrimE
                                                                      (CallPrim)
                                                                      (PrimE
                                                                        (ProjPrim
                                                                          2
                                                                        )
                                                                        (VarE
                                                                          $v/34
                                                                        )
                                                                      )
                                                                      (PrimE
                                                                        TupPrim
                                                                      )
                                                                    )
                                                                  )
                                                                )
                                                              )
                                                              (IfE
                                                                (PrimE
                                                                  (CallPrim)
                                                                  (VarE
                                                                    @call_succeeded
                                                                  )
                                                                  (PrimE
                                                                    TupPrim
                                                                  )
                                                                )
                                                                (VarE $call/0)
                                                                (PrimE
                                                                  (CallPrim)
                                                                  (PrimE
                                                                    (ProjPrim 1)
                                                                    (VarE $v/34)
                                                                  )
                                                                  (PrimE
                                                                    (CallPrim)
                                                                    (VarE
                                                                      @call_error
                                                                    )
                                                                    (PrimE
                                                                      TupPrim
                                                                    )
                                                                  )
                                                                )
                                                              )
                                                            )
                                                          )
                                                        )
                                                      )
                                                      (PrimE
                                                        (CallPrim)
                                                        (VarE $r/0)
                                                        (PrimE
                                                          (CallPrim)
                                                          (VarE @call_error)
                                                          (PrimE TupPrim)
                                                        )
                                                      )
                                                    )
                                                  )
                                                )
                                              )
                                            )
                                          )
                                        )
                                      )
                                    )
                                  )
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                    (case
                      (TagP install (VarP $principal1/0))
                      (PrimE
                        (CallPrim)
                        (VarE $k/2)
                        (PrimE
                          TupPrim
                          (PrimE (TagE install) (PrimE TupPrim))
                          (VarE $principal1/0)
                        )
                      )
                    )
                    (case
                      (TagP reinstall (VarP $actor1/0))
                      (PrimE
                        (CallPrim)
                        (VarE $k/2)
                        (PrimE
                          TupPrim
                          (PrimE (TagE reinstall) (PrimE TupPrim))
                          (PrimE principalOfActor (VarE $actor1/0))
                        )
                      )
                    )
                    (case
                      (TagP upgrade (VarP $actor2/0))
                      (PrimE
                        (CallPrim)
                        (VarE $k/2)
                        (BlockE
                          (LetD
                            (VarP $wasm_memory_persistence/1)
                            (IfE
                              (VarE enhanced_orthogonal_persistence)
                              (PrimE
                                OptPrim
                                (PrimE (TagE keep) (PrimE TupPrim))
                              )
                              (LitE NullLit)
                            )
                          )
                          (LetD
                            (VarP $upgradeOptions/0)
                            (NewObjE
                              Object
                              (wasm_memory_persistence
                                $wasm_memory_persistence/1
                              )
                              {wasm_memory_persistence : ?{#keep}}
                            )
                          )
                          (PrimE
                            TupPrim
                            (PrimE
                              (TagE upgrade)
                              (PrimE OptPrim (VarE $upgradeOptions/0))
                            )
                            (PrimE principalOfActor (VarE $actor2/0))
                          )
                        )
                      )
                    )
                    (case
                      (TagP
                        upgrade_with_persistence
                        (ObjP
                          (wasm_memory_persistence
                            (VarP $wasm_memory_persistence/2)
                          )
                          (canister (VarP $canister/0))
                        )
                      )
                      (PrimE
                        (CallPrim)
                        (VarE $k/2)
                        (BlockE
                          (LetD
                            (VarP $upgradeOptions/1)
                            (BlockE
                              (LetD
                                (VarP $$wasm_memory_persistence/0/0)
                                (PrimE
                                  OptPrim
                                  (VarE $wasm_memory_persistence/2)
                                )
                              )
                              (NewObjE
                                Object
                                (wasm_memory_persistence
                                  $$wasm_memory_persistence/0/0
                                )
                                {wasm_memory_persistence : ?{#keep; #replace}}
                              )
                            )
                          )
                          (PrimE
                            TupPrim
                            (PrimE
                              (TagE upgrade)
                              (PrimE OptPrim (VarE $upgradeOptions/1))
                            )
                            (PrimE principalOfActor (VarE $canister/0))
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
          (PrimE TupPrim (VarE $v/33) (VarE $e/1) (VarE $c/0))
        )
      )
    )
  )
  (LetD
    (VarP @create_actor_helper)
    (FuncE
      @create_actor_helper
      Local
      Returns
      ($ Any)
      (params wasm_module arg)
      (Principal -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}
      (BlockE
        (LetD
          (TupP
            (VarP $async/5)
            (VarP $reply/2)
            (VarP $reject/2)
            (VarP $cleanup/2)
          )
          (BlockE
            (LetD
              (TupP
                (VarP $async/4)
                (VarP $fulfill/2)
                (VarP $fail/2)
                (VarP $clean/2)
              )
              (PrimE (CallPrim Principal) (VarE @new_async) (PrimE TupPrim))
            )
            (PrimE
              TupPrim
              (VarE $async/4)
              (FuncE
                $lambda
                Local
                Returns
                (params $rep0/1)
                ()
                (PrimE (CallPrim) (VarE $fulfill/2) (VarE $rep0/1))
              )
              (VarE $fail/2)
              (VarE $clean/2)
            )
          )
        )
        (LetD
          WildP
          (SelfCallE
            Principal
            (PrimE
              (CallPrim $)
              (FuncE
                $lambda
                Local
                Returns
                ($@anon-async-464.79 Any)
                (params $k/4 $r/1 $b/1)
                ()
                (DeclareE
                  $available/1
                  (DeclareE
                    $accepted/1
                    (DeclareE
                      $sender_canister_version/3
                      (DeclareE
                        $canister_id/2
                        (BlockE
                          (LetD (VarP $v/12) (PrimE SystemCyclesAvailablePrim))
                          (LetD WildP (DefineE $available/1 Const (VarE $v/12)))
                          (BlockE
                            (LetD (VarP $u/11) (PrimE TupPrim))
                            (BlockE
                              (LetD
                                (VarP $v/13)
                                (PrimE
                                  SystemCyclesAcceptPrim
                                  (VarE $available/1)
                                )
                              )
                              (LetD
                                WildP
                                (DefineE $accepted/1 Const (VarE $v/13))
                              )
                              (BlockE
                                (LetD (VarP $u/12) (PrimE TupPrim))
                                (BlockE
                                  (LetD
                                    (VarP $v/14)
                                    (PrimE OptPrim (PrimE canister_version))
                                  )
                                  (LetD
                                    WildP
                                    (DefineE
                                      $sender_canister_version/3
                                      Const
                                      (VarE $v/14)
                                    )
                                  )
                                  (BlockE
                                    (LetD (VarP $u/13) (PrimE TupPrim))
                                    (BlockE
                                      (LetD
                                        WildP
                                        (AssignE
                                          (VarLE @cycles)
                                          (PrimE
                                            (BinPrim Nat AddOp)
                                            (VarE! @cycles)
                                            (VarE $accepted/1)
                                          )
                                        )
                                      )
                                      (BlockE
                                        (LetD (VarP $u/14) (PrimE TupPrim))
                                        (BlockE
                                          (LetD
                                            (VarP $k/6)
                                            (FuncE
                                              $k/6
                                              Local
                                              Returns
                                              (params $v/16)
                                              ()
                                              (BlockE
                                                (LetD
                                                  (ObjP
                                                    (canister_id (VarP $v/15))
                                                  )
                                                  (VarE $v/16)
                                                )
                                                (LetD
                                                  WildP
                                                  (DefineE
                                                    $canister_id/2
                                                    Const
                                                    (VarE $v/15)
                                                  )
                                                )
                                                (BlockE
                                                  (LetD
                                                    (VarP $u/15)
                                                    (PrimE TupPrim)
                                                  )
                                                  (BlockE
                                                    (LetD
                                                      (VarP $k/5)
                                                      (FuncE
                                                        $k/5
                                                        Local
                                                        Returns
                                                        ()
                                                        (BlockE
                                                          (LetD
                                                            (VarP $v/17)
                                                            (PrimE TupPrim)
                                                          )
                                                          (BlockE
                                                            (LetD
                                                              WildP
                                                              (VarE $v/17)
                                                            )
                                                            (BlockE
                                                              (LetD
                                                                (VarP $u/16)
                                                                (PrimE TupPrim)
                                                              )
                                                              (BlockE
                                                                (LetD
                                                                  (VarP $u/17)
                                                                  (PrimE
                                                                    TupPrim
                                                                  )
                                                                )
                                                                (PrimE
                                                                  (CallPrim)
                                                                  (VarE $k/4)
                                                                  (PrimE
                                                                    RetPrim
                                                                    (PrimE
                                                                      (CallPrim)
                                                                      (VarE
                                                                        $k/4
                                                                      )
                                                                      (VarE
                                                                        $canister_id/2
                                                                      )
                                                                    )
                                                                  )
                                                                )
                                                              )
                                                            )
                                                          )
                                                        )
                                                      )
                                                    )
                                                    (BlockE
                                                      (LetD
                                                        (VarP $v/18)
                                                        (PrimE
                                                          (ActorDotPrim
                                                            install_code
                                                          )
                                                          (VarE @ic00)
                                                        )
                                                      )
                                                      (BlockE
                                                        (LetD
                                                          (VarP $u/18)
                                                          (BlockE
                                                            (LetD
                                                              (TupP
                                                                (VarP $async/9)
                                                                (VarP $reply/4)
                                                                (VarP $reject/4)
                                                                (VarP
                                                                  $cleanup/4
                                                                )
                                                              )
                                                              (BlockE
                                                                (LetD
                                                                  (TupP
                                                                    (VarP
                                                                      $async/8
                                                                    )
                                                                    (VarP
                                                                      $fulfill/4
                                                                    )
                                                                    (VarP
                                                                      $fail/4
                                                                    )
                                                                    (VarP
                                                                      $clean/4
                                                                    )
                                                                  )
                                                                  (PrimE
                                                                    (CallPrim
                                                                      ()
                                                                    )
                                                                    (VarE
                                                                      @new_async
                                                                    )
                                                                    (PrimE
                                                                      TupPrim
                                                                    )
                                                                  )
                                                                )
                                                                (PrimE
                                                                  TupPrim
                                                                  (FuncE
                                                                    $lambda
                                                                    Local
                                                                    Returns
                                                                    (params
                                                                      $k/11
                                                                      $r/6
                                                                      $b/5
                                                                    )
                                                                    {#schedule : () -> (); #suspend}
                                                                    (PrimE
                                                                      (CallPrim)
                                                                      (VarE
                                                                        $async/8
                                                                      )
                                                                      (PrimE
                                                                        TupPrim
                                                                        (FuncE
                                                                          $lambda
                                                                          Local
                                                                          Returns
                                                                          (params
                                                                            $v/40
                                                                          )
                                                                          ()
                                                                          (PrimE
                                                                            (CallPrim
                                                                            )
                                                                            (VarE
                                                                              $k/11
                                                                            )
                                                                            (VarE
                                                                              $v/40
                                                                            )
                                                                          )
                                                                        )
                                                                        (VarE
                                                                          $r/6
                                                                        )
                                                                        (VarE
                                                                          $b/5
                                                                        )
                                                                      )
                                                                    )
                                                                  )
                                                                  (FuncE
                                                                    $lambda
                                                                    Local
                                                                    Returns
                                                                    ()
                                                                    (PrimE
                                                                      (CallPrim)
                                                                      (VarE
                                                                        $fulfill/4
                                                                      )
                                                                      (PrimE
                                                                        TupPrim
                                                                      )
                                                                    )
                                                                  )
                                                                  (VarE $fail/4)
                                                                  (VarE
                                                                    $clean/4
                                                                  )
                                                                )
                                                              )
                                                            )
                                                            (LetD
                                                              (VarP $x/4)
                                                              (BlockE
                                                                (LetD
                                                                  (VarP
                                                                    $$mode/0/0
                                                                  )
                                                                  (PrimE
                                                                    (TagE
                                                                      install
                                                                    )
                                                                    (PrimE
                                                                      TupPrim
                                                                    )
                                                                  )
                                                                )
                                                                (LetD
                                                                  (VarP
                                                                    $$sender_canister_version/1/0
                                                                  )
                                                                  (PrimE
                                                                    OptPrim
                                                                    (PrimE
                                                                      canister_version
                                                                    )
                                                                  )
                                                                )
                                                                (NewObjE
                                                                  Object
                                                                  (sender_canister_version
                                                                    $$sender_canister_version/1/0
                                                                  )
                                                                  (arg arg)
                                                                  (wasm_module
                                                                    wasm_module
                                                                  )
                                                                  (canister_id
                                                                    $canister_id/2
                                                                  )
                                                                  (mode
                                                                    $$mode/0/0
                                                                  )
                                                                  {arg : Blob; canister_id : Principal; mode : {#install; #reinstall; #upgrade : ?@UpgradeOptions}; sender_canister_version : ?Nat64; wasm_module : wasm_module}
                                                                )
                                                              )
                                                            )
                                                            (LetD
                                                              WildP
                                                              (PrimE
                                                                ICCallPrim
                                                                (VarE $v/18)
                                                                (VarE $x/4)
                                                                (VarE $reply/4)
                                                                (VarE $reject/4)
                                                                (VarE
                                                                  $cleanup/4
                                                                )
                                                              )
                                                            )
                                                            (VarE $async/9)
                                                          )
                                                        )
                                                        (IfE
                                                          (PrimE
                                                            (CallPrim)
                                                            (VarE
                                                              @call_succeeded
                                                            )
                                                            (PrimE TupPrim)
                                                          )
                                                          (BlockE
                                                            (LetD
                                                              (VarP $v/39)
                                                              (PrimE
                                                                TupPrim
                                                                (VarE $k/5)
                                                                (VarE $r/1)
                                                                (VarE $b/1)
                                                              )
                                                            )
                                                            (SwitchE
                                                              (PrimE
                                                                (CallPrim)
                                                                (VarE $u/18)
                                                                (VarE $v/39)
                                                              )
                                                              (case
                                                                (TagP
                                                                  suspend
                                                                  WildP
                                                                )
                                                                (PrimE TupPrim)
                                                              )
                                                              (case
                                                                (TagP
                                                                  schedule
                                                                  (VarP
                                                                    $schedule/3
                                                                  )
                                                                )
                                                                (BlockE
                                                                  (LetD
                                                                    (VarP
                                                                      $call/3
                                                                    )
                                                                    (SelfCallE
                                                                      ()
                                                                      (PrimE
                                                                        (ICReplyPrim
                                                                        )
                                                                        (PrimE
                                                                          TupPrim
                                                                        )
                                                                      )
                                                                      (VarE
                                                                        $schedule/3
                                                                      )
                                                                      (PrimE
                                                                        (ProjPrim
                                                                          1
                                                                        )
                                                                        (VarE
                                                                          $v/39
                                                                        )
                                                                      )
                                                                      (FuncE
                                                                        $lambda
                                                                        Local
                                                                        Returns
                                                                        ()
                                                                        (PrimE
                                                                          (CallPrim
                                                                          )
                                                                          (PrimE
                                                                            (ProjPrim
                                                                              2
                                                                            )
                                                                            (VarE
                                                                              $v/39
                                                                            )
                                                                          )
                                                                          (PrimE
                                                                            TupPrim
                                                                          )
                                                                        )
                                                                      )
                                                                    )
                                                                  )
                                                                  (IfE
                                                                    (PrimE
                                                                      (CallPrim)
                                                                      (VarE
                                                                        @call_succeeded
                                                                      )
                                                                      (PrimE
                                                                        TupPrim
                                                                      )
                                                                    )
                                                                    (VarE
                                                                      $call/3
                                                                    )
                                                                    (PrimE
                                                                      (CallPrim)
                                                                      (PrimE
                                                                        (ProjPrim
                                                                          1
                                                                        )
                                                                        (VarE
                                                                          $v/39
                                                                        )
                                                                      )
                                                                      (PrimE
                                                                        (CallPrim
                                                                        )
                                                                        (VarE
                                                                          @call_error
                                                                        )
                                                                        (PrimE
                                                                          TupPrim
                                                                        )
                                                                      )
                                                                    )
                                                                  )
                                                                )
                                                              )
                                                            )
                                                          )
                                                          (PrimE
                                                            (CallPrim)
                                                            (VarE $r/1)
                                                            (PrimE
                                                              (CallPrim)
                                                              (VarE @call_error)
                                                              (PrimE TupPrim)
                                                            )
                                                          )
                                                        )
                                                      )
                                                    )
                                                  )
                                                )
                                              )
                                            )
                                          )
                                          (BlockE
                                            (LetD
                                              (VarP $v/19)
                                              (PrimE
                                                (ActorDotPrim create_canister)
                                                (VarE @ic00)
                                              )
                                            )
                                            (BlockE
                                              (LetD
                                                (VarP $u/19)
                                                (BlockE
                                                  (LetD
                                                    (TupP
                                                      (VarP $async/7)
                                                      (VarP $reply/3)
                                                      (VarP $reject/3)
                                                      (VarP $cleanup/3)
                                                    )
                                                    (BlockE
                                                      (LetD
                                                        (TupP
                                                          (VarP $async/6)
                                                          (VarP $fulfill/3)
                                                          (VarP $fail/3)
                                                          (VarP $clean/3)
                                                        )
                                                        (PrimE
                                                          (CallPrim
                                                            {canister_id : Principal}
                                                          )
                                                          (VarE @new_async)
                                                          (PrimE TupPrim)
                                                        )
                                                      )
                                                      (PrimE
                                                        TupPrim
                                                        (VarE $async/6)
                                                        (FuncE
                                                          $lambda
                                                          Local
                                                          Returns
                                                          (params $rep0/2)
                                                          ()
                                                          (PrimE
                                                            (CallPrim)
                                                            (VarE $fulfill/3)
                                                            (VarE $rep0/2)
                                                          )
                                                        )
                                                        (VarE $fail/3)
                                                        (VarE $clean/3)
                                                      )
                                                    )
                                                  )
                                                  (LetD
                                                    (VarP $x/3)
                                                    (BlockE
                                                      (LetD
                                                        (VarP $$settings/1/0)
                                                        (LitE NullLit)
                                                      )
                                                      (NewObjE
                                                        Object
                                                        (sender_canister_version
                                                          $sender_canister_version/3
                                                        )
                                                        (settings
                                                          $$settings/1/0
                                                        )
                                                        {sender_canister_version : ?Nat64; settings : ?canister_settings}
                                                      )
                                                    )
                                                  )
                                                  (LetD
                                                    WildP
                                                    (PrimE
                                                      ICCallPrim
                                                      (VarE $v/19)
                                                      (VarE $x/3)
                                                      (VarE $reply/3)
                                                      (VarE $reject/3)
                                                      (VarE $cleanup/3)
                                                    )
                                                  )
                                                  (VarE $async/7)
                                                )
                                              )
                                              (IfE
                                                (PrimE
                                                  (CallPrim)
                                                  (VarE @call_succeeded)
                                                  (PrimE TupPrim)
                                                )
                                                (BlockE
                                                  (LetD
                                                    (VarP $v/38)
                                                    (PrimE
                                                      TupPrim
                                                      (VarE $k/6)
                                                      (VarE $r/1)
                                                      (VarE $b/1)
                                                    )
                                                  )
                                                  (SwitchE
                                                    (PrimE
                                                      (CallPrim)
                                                      (VarE $u/19)
                                                      (VarE $v/38)
                                                    )
                                                    (case
                                                      (TagP suspend WildP)
                                                      (PrimE TupPrim)
                                                    )
                                                    (case
                                                      (TagP
                                                        schedule
                                                        (VarP $schedule/2)
                                                      )
                                                      (BlockE
                                                        (LetD
                                                          (VarP $call/2)
                                                          (SelfCallE
                                                            ()
                                                            (PrimE
                                                              (ICReplyPrim)
                                                              (PrimE TupPrim)
                                                            )
                                                            (VarE $schedule/2)
                                                            (PrimE
                                                              (ProjPrim 1)
                                                              (VarE $v/38)
                                                            )
                                                            (FuncE
                                                              $lambda
                                                              Local
                                                              Returns
                                                              ()
                                                              (PrimE
                                                                (CallPrim)
                                                                (PrimE
                                                                  (ProjPrim 2)
                                                                  (VarE $v/38)
                                                                )
                                                                (PrimE TupPrim)
                                                              )
                                                            )
                                                          )
                                                        )
                                                        (IfE
                                                          (PrimE
                                                            (CallPrim)
                                                            (VarE
                                                              @call_succeeded
                                                            )
                                                            (PrimE TupPrim)
                                                          )
                                                          (VarE $call/2)
                                                          (PrimE
                                                            (CallPrim)
                                                            (PrimE
                                                              (ProjPrim 1)
                                                              (VarE $v/38)
                                                            )
                                                            (PrimE
                                                              (CallPrim)
                                                              (VarE @call_error)
                                                              (PrimE TupPrim)
                                                            )
                                                          )
                                                        )
                                                      )
                                                    )
                                                  )
                                                )
                                                (PrimE
                                                  (CallPrim)
                                                  (VarE $r/1)
                                                  (PrimE
                                                    (CallPrim)
                                                    (VarE @call_error)
                                                    (PrimE TupPrim)
                                                  )
                                                )
                                              )
                                            )
                                          )
                                        )
                                      )
                                    )
                                  )
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              )
              (PrimE
                TupPrim
                (FuncE
                  $lambda
                  Local
                  Returns
                  (params $v/37)
                  ()
                  (PrimE (ICReplyPrim Principal) (VarE $v/37))
                )
                (FuncE
                  $lambda
                  Local
                  Returns
                  (params $e/2)
                  ()
                  (PrimE
                    ICRejectPrim
                    (PrimE
                      (ProjPrim 1)
                      (PrimE
                        (CastPrim
                          Error
                          ({#call_error : {err_code : Nat32}; #canister_error; #canister_reject; #destination_invalid; #future : Nat32; #system_fatal; #system_transient; #system_unknown}, Text)
                        )
                        (VarE $e/2)
                      )
                    )
                  )
                )
                (VarE @cleanup)
              )
            )
            (VarE $reply/2)
            (VarE $reject/2)
            (VarE $cleanup/2)
          )
        )
        (VarE $async/5)
      )
    )
  )
  (LetD
    (VarP @call_raw)
    (FuncE
      @call_raw
      Local
      Returns
      ($ Any)
      (params p m a)
      (Blob -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}
      (BlockE
        (LetD
          (TupP
            (VarP $async/11)
            (VarP $reply/5)
            (VarP $reject/5)
            (VarP $cleanup/5)
          )
          (BlockE
            (LetD
              (TupP
                (VarP $async/10)
                (VarP $fulfill/5)
                (VarP $fail/5)
                (VarP $clean/5)
              )
              (PrimE (CallPrim Blob) (VarE @new_async) (PrimE TupPrim))
            )
            (PrimE
              TupPrim
              (VarE $async/10)
              (FuncE
                $lambda
                Local
                Returns
                (params $rep0/3)
                ()
                (PrimE (CallPrim) (VarE $fulfill/5) (VarE $rep0/3))
              )
              (VarE $fail/5)
              (VarE $clean/5)
            )
          )
        )
        (LetD
          WildP
          (SelfCallE
            Blob
            (PrimE
              (CallPrim $)
              (FuncE
                $lambda
                Local
                Returns
                ($@call_raw Any)
                (params $k/7 $r/2 $b/2)
                ()
                (DeclareE
                  $available/2
                  (BlockE
                    (LetD (VarP $v/20) (PrimE SystemCyclesAvailablePrim))
                    (LetD WildP (DefineE $available/2 Const (VarE $v/20)))
                    (BlockE
                      (LetD (VarP $u/20) (PrimE TupPrim))
                      (BlockE
                        (LetD
                          WildP
                          (IfE
                            (PrimE
                              (RelPrim Bool EqOp)
                              (PrimE
                                (RelPrim Nat EqOp)
                                (VarE $available/2)
                                (LitE (NatLit 0))
                              )
                              (LitE (BoolLit false))
                            )
                            (AssignE
                              (VarLE @cycles)
                              (PrimE SystemCyclesAcceptPrim (VarE $available/2))
                            )
                            (PrimE TupPrim)
                          )
                        )
                        (BlockE
                          (LetD (VarP $u/21) (PrimE TupPrim))
                          (BlockE
                            (LetD (VarP $u/22) (PrimE TupPrim))
                            (BlockE
                              (LetD
                                (VarP $u/23)
                                (BlockE
                                  (LetD
                                    (TupP
                                      (VarP $async/13)
                                      (VarP $reply/6)
                                      (VarP $reject/6)
                                      (VarP $cleanup/6)
                                    )
                                    (BlockE
                                      (LetD
                                        (TupP
                                          (VarP $async/12)
                                          (VarP $fulfill/6)
                                          (VarP $fail/6)
                                          (VarP $clean/6)
                                        )
                                        (PrimE
                                          (CallPrim Blob)
                                          (VarE @new_async)
                                          (PrimE TupPrim)
                                        )
                                      )
                                      (PrimE
                                        TupPrim
                                        (VarE $async/12)
                                        (FuncE
                                          $lambda
                                          Local
                                          Returns
                                          (params $rep0/4)
                                          ()
                                          (PrimE
                                            (CallPrim)
                                            (VarE $fulfill/6)
                                            (VarE $rep0/4)
                                          )
                                        )
                                        (VarE $fail/6)
                                        (VarE $clean/6)
                                      )
                                    )
                                  )
                                  (LetD
                                    WildP
                                    (PrimE
                                      ICCallRawPrim
                                      (VarE p)
                                      (VarE m)
                                      (VarE a)
                                      (VarE $reply/6)
                                      (VarE $reject/6)
                                      (VarE $cleanup/6)
                                    )
                                  )
                                  (VarE $async/13)
                                )
                              )
                              (IfE
                                (PrimE
                                  (CallPrim)
                                  (VarE @call_succeeded)
                                  (PrimE TupPrim)
                                )
                                (BlockE
                                  (LetD
                                    (VarP $v/42)
                                    (PrimE
                                      TupPrim
                                      (VarE $k/7)
                                      (VarE $r/2)
                                      (VarE $b/2)
                                    )
                                  )
                                  (SwitchE
                                    (PrimE (CallPrim) (VarE $u/23) (VarE $v/42))
                                    (case (TagP suspend WildP) (PrimE TupPrim))
                                    (case
                                      (TagP schedule (VarP $schedule/4))
                                      (BlockE
                                        (LetD
                                          (VarP $call/4)
                                          (SelfCallE
                                            ()
                                            (PrimE
                                              (ICReplyPrim)
                                              (PrimE TupPrim)
                                            )
                                            (VarE $schedule/4)
                                            (PrimE (ProjPrim 1) (VarE $v/42))
                                            (FuncE
                                              $lambda
                                              Local
                                              Returns
                                              ()
                                              (PrimE
                                                (CallPrim)
                                                (PrimE
                                                  (ProjPrim 2)
                                                  (VarE $v/42)
                                                )
                                                (PrimE TupPrim)
                                              )
                                            )
                                          )
                                        )
                                        (IfE
                                          (PrimE
                                            (CallPrim)
                                            (VarE @call_succeeded)
                                            (PrimE TupPrim)
                                          )
                                          (VarE $call/4)
                                          (PrimE
                                            (CallPrim)
                                            (PrimE (ProjPrim 1) (VarE $v/42))
                                            (PrimE
                                              (CallPrim)
                                              (VarE @call_error)
                                              (PrimE TupPrim)
                                            )
                                          )
                                        )
                                      )
                                    )
                                  )
                                )
                                (PrimE
                                  (CallPrim)
                                  (VarE $r/2)
                                  (PrimE
                                    (CallPrim)
                                    (VarE @call_error)
                                    (PrimE TupPrim)
                                  )
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              )
              (PrimE
                TupPrim
                (FuncE
                  $lambda
                  Local
                  Returns
                  (params $v/41)
                  ()
                  (PrimE (ICReplyPrim Blob) (VarE $v/41))
                )
                (FuncE
                  $lambda
                  Local
                  Returns
                  (params $e/3)
                  ()
                  (PrimE
                    ICRejectPrim
                    (PrimE
                      (ProjPrim 1)
                      (PrimE
                        (CastPrim
                          Error
                          ({#call_error : {err_code : Nat32}; #canister_error; #canister_reject; #destination_invalid; #future : Nat32; #system_fatal; #system_transient; #system_unknown}, Text)
                        )
                        (VarE $e/3)
                      )
                    )
                  )
                )
                (VarE @cleanup)
              )
            )
            (VarE $reply/5)
            (VarE $reject/5)
            (VarE $cleanup/5)
          )
        )
        (VarE $async/11)
      )
    )
  )
  (LetD
    (VarP @call_succeeded)
    (FuncE
      @call_succeeded
      Local
      Returns
      Bool
      (PrimE
        (RelPrim Nat32 EqOp)
        (PrimE call_perform_status)
        (LitE (Nat32Lit 0))
      )
    )
  )
  (LetD
    (VarP @call_error)
    (FuncE
      @call_error
      Local
      Returns
      Error
      (BlockE
        (LetD (VarP status) (PrimE call_perform_status))
        (LetD (VarP message) (PrimE call_perform_message))
        (LetD
          (VarP code)
          (PrimE
            (TagE call_error)
            (NewObjE Object (err_code status) {err_code : Nat32})
          )
        )
        (PrimE
          (CastPrim ({#call_error : {err_code : Nat32}}, Text) Error)
          (PrimE TupPrim (VarE code) (VarE message))
        )
      )
    )
  )
  (VarD @timers ?@Node (LitE NullLit))
  (LetD
    (VarP @prune)
    (FuncE
      @prune
      Local
      Returns
      (params n)
      ?@Node
      (SwitchE
        (VarE n)
        (case (LitP NullLit) (LitE NullLit))
        (case
          (OptP (VarP n))
          (IfE
            (PrimE
              (RelPrim Nat64 EqOp)
              (PrimE
                IdxPrim
                (PrimE (DotPrim expire) (VarE n))
                (LitE (NatLit 0))
              )
              (LitE (Nat64Lit 0))
            )
            (PrimE (CallPrim) (VarE @prune) (PrimE (DotPrim post) (VarE n)))
            (PrimE
              OptPrim
              (BlockE
                (LetD (VarP $base/1) (VarE n))
                (LetD
                  (VarP $pre/0)
                  (PrimE
                    (CallPrim)
                    (VarE @prune)
                    (PrimE (DotPrim pre) (VarE n))
                  )
                )
                (LetD (VarP $delay/0) (PrimE (DotPrim delay) (VarE $base/1)))
                (LetD (VarP $expire/0) (PrimE (DotPrim expire) (VarE $base/1)))
                (LetD (VarP $id/0) (PrimE (DotPrim id) (VarE $base/1)))
                (LetD (VarP $job/0) (PrimE (DotPrim job) (VarE $base/1)))
                (LetD (VarP $post/0) (PrimE (DotPrim post) (VarE $base/1)))
                (NewObjE
                  Object
                  (post $post/0)
                  (job $job/0)
                  (id $id/0)
                  (expire $expire/0)
                  (delay $delay/0)
                  (pre $pre/0)
                  {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                )
              )
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @nextExpiration)
    (FuncE
      @nextExpiration
      Local
      Returns
      (params n)
      Nat64
      (SwitchE
        (VarE n)
        (case (LitP NullLit) (LitE (Nat64Lit 0)))
        (case
          (OptP (VarP n))
          (BlockE
            (LetD
              (VarP pivot)
              (PrimE
                IdxPrim
                (PrimE (DotPrim expire) (VarE n))
                (LitE (NatLit 0))
              )
            )
            (LetD
              WildP
              (IfE
                (PrimE (RelPrim Nat64 EqOp) (VarE pivot) (LitE (Nat64Lit 0)))
                (PrimE
                  RetPrim
                  (PrimE
                    (CallPrim)
                    (VarE @nextExpiration)
                    (PrimE (DotPrim post) (VarE n))
                  )
                )
                (PrimE TupPrim)
              )
            )
            (LetD
              (VarP exp)
              (PrimE
                (CallPrim)
                (VarE @nextExpiration)
                (PrimE (DotPrim pre) (VarE n))
              )
            )
            (IfE
              (PrimE (RelPrim Nat64 EqOp) (VarE exp) (LitE (Nat64Lit 0)))
              (VarE pivot)
              (VarE exp)
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @timer_helper)
    (FuncE
      @timer_helper
      Local
      Returns
      ($ Any)
      (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}
      (BlockE
        (LetD
          (TupP
            (VarP $async/15)
            (VarP $reply/7)
            (VarP $reject/7)
            (VarP $cleanup/7)
          )
          (BlockE
            (LetD
              (TupP
                (VarP $async/14)
                (VarP $fulfill/7)
                (VarP $fail/7)
                (VarP $clean/7)
              )
              (PrimE (CallPrim ()) (VarE @new_async) (PrimE TupPrim))
            )
            (PrimE
              TupPrim
              (FuncE
                $lambda
                Local
                Returns
                (params $k/12 $r/7 $b/6)
                {#schedule : () -> (); #suspend}
                (PrimE
                  (CallPrim)
                  (VarE $async/14)
                  (PrimE
                    TupPrim
                    (FuncE
                      $lambda
                      Local
                      Returns
                      (params $v/43)
                      ()
                      (PrimE (CallPrim) (VarE $k/12) (VarE $v/43))
                    )
                    (VarE $r/7)
                    (VarE $b/6)
                  )
                )
              )
              (FuncE
                $lambda
                Local
                Returns
                ()
                (PrimE (CallPrim) (VarE $fulfill/7) (PrimE TupPrim))
              )
              (VarE $fail/7)
              (VarE $clean/7)
            )
          )
        )
        (LetD
          WildP
          (SelfCallE
            ()
            (PrimE
              (CallPrim $)
              (FuncE
                $lambda
                Local
                Returns
                ($@timer_helper Any)
                (params $k/8 $r/3 $b/3)
                ()
                (DeclareE
                  $Array_init/0
                  (DeclareE
                    $now/0
                    (DeclareE
                      $gathered/0
                      (DeclareE
                        $thunks/0
                        (DeclareE
                          $gatherExpired/0
                          (DeclareE
                            $exp/0
                            (DeclareE
                              $failed/0
                              (DeclareE
                                $reinsert/0
                                (BlockE
                                  (LetD
                                    (VarP $v/21)
                                    (FuncE
                                      Array_init
                                      Local
                                      Returns
                                      (T Any)
                                      (params $len/0 $x/0)
                                      [var T]
                                      (PrimE
                                        Array.init
                                        (VarE $len/0)
                                        (VarE $x/0)
                                      )
                                    )
                                  )
                                  (LetD
                                    WildP
                                    (DefineE $Array_init/0 Const (VarE $v/21))
                                  )
                                  (BlockE
                                    (LetD (VarP $u/24) (PrimE TupPrim))
                                    (BlockE
                                      (LetD (VarP $v/22) (PrimE SystemTimePrim))
                                      (LetD
                                        WildP
                                        (DefineE $now/0 Const (VarE $v/22))
                                      )
                                      (BlockE
                                        (LetD (VarP $u/25) (PrimE TupPrim))
                                        (BlockE
                                          (LetD
                                            (VarP $u/26)
                                            (DefineE
                                              $gathered/0
                                              Var
                                              (LitE (NatLit 0))
                                            )
                                          )
                                          (BlockE
                                            (LetD
                                              (VarP $v/23)
                                              (PrimE
                                                (CallPrim
                                                  ?(<system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend})
                                                )
                                                (VarE $Array_init/0)
                                                (PrimE
                                                  TupPrim
                                                  (LitE (NatLit 10))
                                                  (LitE NullLit)
                                                )
                                              )
                                            )
                                            (LetD
                                              WildP
                                              (DefineE
                                                $thunks/0
                                                Const
                                                (VarE $v/23)
                                              )
                                            )
                                            (BlockE
                                              (LetD
                                                (VarP $u/27)
                                                (PrimE TupPrim)
                                              )
                                              (BlockE
                                                (LetD
                                                  (VarP $v/24)
                                                  (FuncE
                                                    gatherExpired
                                                    Local
                                                    Returns
                                                    (params $n/0)
                                                    ()
                                                    (SwitchE
                                                      (VarE $n/0)
                                                      (case
                                                        (LitP NullLit)
                                                        (PrimE TupPrim)
                                                      )
                                                      (case
                                                        (OptP (VarP $n/1))
                                                        (BlockE
                                                          (LetD
                                                            (VarP $pivot/0)
                                                            (PrimE
                                                              IdxPrim
                                                              (PrimE
                                                                (DotPrim expire)
                                                                (VarE $n/1)
                                                              )
                                                              (LitE (NatLit 0))
                                                            )
                                                          )
                                                          (LetD
                                                            WildP
                                                            (IfE
                                                              (PrimE
                                                                (RelPrim
                                                                  Nat64
                                                                  GtOp
                                                                )
                                                                (VarE $pivot/0)
                                                                (LitE
                                                                  (Nat64Lit 0)
                                                                )
                                                              )
                                                              (PrimE
                                                                (CallPrim)
                                                                (VarE
                                                                  $gatherExpired/0
                                                                )
                                                                (PrimE
                                                                  (DotPrim pre)
                                                                  (VarE $n/1)
                                                                )
                                                              )
                                                              (PrimE TupPrim)
                                                            )
                                                          )
                                                          (IfE
                                                            (IfE
                                                              (PrimE
                                                                (RelPrim
                                                                  Nat64
                                                                  LeOp
                                                                )
                                                                (VarE $pivot/0)
                                                                (VarE $now/0)
                                                              )
                                                              (PrimE
                                                                (RelPrim
                                                                  Nat
                                                                  LtOp
                                                                )
                                                                (VarE!
                                                                  $gathered/0
                                                                )
                                                                (PrimE
                                                                  array_len
                                                                  (VarE
                                                                    $thunks/0
                                                                  )
                                                                )
                                                              )
                                                              (LitE
                                                                (BoolLit false)
                                                              )
                                                            )
                                                            (BlockE
                                                              (LetD
                                                                WildP
                                                                (IfE
                                                                  (PrimE
                                                                    (RelPrim
                                                                      Nat64
                                                                      GtOp
                                                                    )
                                                                    (VarE
                                                                      $pivot/0
                                                                    )
                                                                    (LitE
                                                                      (Nat64Lit
                                                                        0
                                                                      )
                                                                    )
                                                                  )
                                                                  (BlockE
                                                                    (LetD
                                                                      WildP
                                                                      (AssignE
                                                                        (IdxLE
                                                                          (VarE
                                                                            $thunks/0
                                                                          )
                                                                          (VarE!
                                                                            $gathered/0
                                                                          )
                                                                        )
                                                                        (PrimE
                                                                          OptPrim
                                                                          (PrimE
                                                                            (DotPrim
                                                                              job
                                                                            )
                                                                            (VarE
                                                                              $n/1
                                                                            )
                                                                          )
                                                                        )
                                                                      )
                                                                    )
                                                                    (LetD
                                                                      WildP
                                                                      (SwitchE
                                                                        (PrimE
                                                                          (DotPrim
                                                                            delay
                                                                          )
                                                                          (VarE
                                                                            $n/1
                                                                          )
                                                                        )
                                                                        (case
                                                                          (AltP
                                                                            (LitP
                                                                              NullLit
                                                                            )
                                                                            (OptP
                                                                              (LitP
                                                                                (Nat64Lit
                                                                                  0
                                                                                )
                                                                              )
                                                                            )
                                                                          )
                                                                          (AssignE
                                                                            (IdxLE
                                                                              (PrimE
                                                                                (DotPrim
                                                                                  expire
                                                                                )
                                                                                (VarE
                                                                                  $n/1
                                                                                )
                                                                              )
                                                                              (LitE
                                                                                (NatLit
                                                                                  0
                                                                                )
                                                                              )
                                                                            )
                                                                            (LitE
                                                                              (Nat64Lit
                                                                                0
                                                                              )
                                                                            )
                                                                          )
                                                                        )
                                                                        (case
                                                                          (OptP
                                                                            (VarP
                                                                              $delay/9
                                                                            )
                                                                          )
                                                                          (BlockE
                                                                            (LetD
                                                                              (VarP
                                                                                $expire/11
                                                                              )
                                                                              (PrimE
                                                                                (BinPrim
                                                                                  Nat64
                                                                                  AddOp
                                                                                )
                                                                                (VarE
                                                                                  $pivot/0
                                                                                )
                                                                                (PrimE
                                                                                  (BinPrim
                                                                                    Nat64
                                                                                    MulOp
                                                                                  )
                                                                                  (VarE
                                                                                    $delay/9
                                                                                  )
                                                                                  (PrimE
                                                                                    (BinPrim
                                                                                      Nat64
                                                                                      AddOp
                                                                                    )
                                                                                    (LitE
                                                                                      (Nat64Lit
                                                                                        1
                                                                                      )
                                                                                    )
                                                                                    (PrimE
                                                                                      (BinPrim
                                                                                        Nat64
                                                                                        DivOp
                                                                                      )
                                                                                      (PrimE
                                                                                        (BinPrim
                                                                                          Nat64
                                                                                          SubOp
                                                                                        )
                                                                                        (VarE
                                                                                          $now/0
                                                                                        )
                                                                                        (VarE
                                                                                          $pivot/0
                                                                                        )
                                                                                      )
                                                                                      (VarE
                                                                                        $delay/9
                                                                                      )
                                                                                    )
                                                                                  )
                                                                                )
                                                                              )
                                                                            )
                                                                            (LetD
                                                                              WildP
                                                                              (AssignE
                                                                                (IdxLE
                                                                                  (PrimE
                                                                                    (DotPrim
                                                                                      expire
                                                                                    )
                                                                                    (VarE
                                                                                      $n/1
                                                                                    )
                                                                                  )
                                                                                  (LitE
                                                                                    (NatLit
                                                                                      0
                                                                                    )
                                                                                  )
                                                                                )
                                                                                (LitE
                                                                                  (Nat64Lit
                                                                                    0
                                                                                  )
                                                                                )
                                                                              )
                                                                            )
                                                                            (LetD
                                                                              (VarP
                                                                                $reinsert/1
                                                                              )
                                                                              (FuncE
                                                                                reinsert
                                                                                Local
                                                                                Returns
                                                                                (params
                                                                                  $m/0
                                                                                )
                                                                                @Node
                                                                                (SwitchE
                                                                                  (VarE
                                                                                    $m/0
                                                                                  )
                                                                                  (case
                                                                                    (LitP
                                                                                      NullLit
                                                                                    )
                                                                                    (BlockE
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$base/2/0
                                                                                        )
                                                                                        (VarE
                                                                                          $n/1
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$expire/1/0
                                                                                        )
                                                                                        (PrimE
                                                                                          (ArrayPrim
                                                                                            Var
                                                                                            Nat64
                                                                                          )
                                                                                          (VarE
                                                                                            $expire/11
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$pre/1/0
                                                                                        )
                                                                                        (LitE
                                                                                          NullLit
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$post/1/0
                                                                                        )
                                                                                        (LitE
                                                                                          NullLit
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$delay/1/0
                                                                                        )
                                                                                        (PrimE
                                                                                          (DotPrim
                                                                                            delay
                                                                                          )
                                                                                          (VarE
                                                                                            $$base/2/0
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$id/1/0
                                                                                        )
                                                                                        (PrimE
                                                                                          (DotPrim
                                                                                            id
                                                                                          )
                                                                                          (VarE
                                                                                            $$base/2/0
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$job/1/0
                                                                                        )
                                                                                        (PrimE
                                                                                          (DotPrim
                                                                                            job
                                                                                          )
                                                                                          (VarE
                                                                                            $$base/2/0
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (NewObjE
                                                                                        Object
                                                                                        (job
                                                                                          $$job/1/0
                                                                                        )
                                                                                        (id
                                                                                          $$id/1/0
                                                                                        )
                                                                                        (delay
                                                                                          $$delay/1/0
                                                                                        )
                                                                                        (post
                                                                                          $$post/1/0
                                                                                        )
                                                                                        (pre
                                                                                          $$pre/1/0
                                                                                        )
                                                                                        (expire
                                                                                          $$expire/1/0
                                                                                        )
                                                                                        {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                                                                                      )
                                                                                    )
                                                                                  )
                                                                                  (case
                                                                                    (OptP
                                                                                      (VarP
                                                                                        $m/1
                                                                                      )
                                                                                    )
                                                                                    (BlockE
                                                                                      (LetD
                                                                                        WildP
                                                                                        (PrimE
                                                                                          AssertPrim
                                                                                          (PrimE
                                                                                            (RelPrim
                                                                                              Bool
                                                                                              EqOp
                                                                                            )
                                                                                            (PrimE
                                                                                              (RelPrim
                                                                                                Nat64
                                                                                                EqOp
                                                                                              )
                                                                                              (PrimE
                                                                                                IdxPrim
                                                                                                (PrimE
                                                                                                  (DotPrim
                                                                                                    expire
                                                                                                  )
                                                                                                  (VarE
                                                                                                    $m/1
                                                                                                  )
                                                                                                )
                                                                                                (LitE
                                                                                                  (NatLit
                                                                                                    0
                                                                                                  )
                                                                                                )
                                                                                              )
                                                                                              (LitE
                                                                                                (Nat64Lit
                                                                                                  0
                                                                                                )
                                                                                              )
                                                                                            )
                                                                                            (LitE
                                                                                              (BoolLit
                                                                                                false
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (IfE
                                                                                        (PrimE
                                                                                          (RelPrim
                                                                                            Nat64
                                                                                            LtOp
                                                                                          )
                                                                                          (VarE
                                                                                            $expire/11
                                                                                          )
                                                                                          (PrimE
                                                                                            IdxPrim
                                                                                            (PrimE
                                                                                              (DotPrim
                                                                                                expire
                                                                                              )
                                                                                              (VarE
                                                                                                $m/1
                                                                                              )
                                                                                            )
                                                                                            (LitE
                                                                                              (NatLit
                                                                                                0
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                        )
                                                                                        (BlockE
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$base/4/0
                                                                                            )
                                                                                            (VarE
                                                                                              $m/1
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$pre/3/0
                                                                                            )
                                                                                            (PrimE
                                                                                              OptPrim
                                                                                              (PrimE
                                                                                                (CallPrim
                                                                                                )
                                                                                                (VarE
                                                                                                  $reinsert/1
                                                                                                )
                                                                                                (PrimE
                                                                                                  (DotPrim
                                                                                                    pre
                                                                                                  )
                                                                                                  (VarE
                                                                                                    $m/1
                                                                                                  )
                                                                                                )
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$delay/3/0
                                                                                            )
                                                                                            (PrimE
                                                                                              (DotPrim
                                                                                                delay
                                                                                              )
                                                                                              (VarE
                                                                                                $$base/4/0
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$expire/3/0
                                                                                            )
                                                                                            (PrimE
                                                                                              (DotPrim
                                                                                                expire
                                                                                              )
                                                                                              (VarE
                                                                                                $$base/4/0
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$id/3/0
                                                                                            )
                                                                                            (PrimE
                                                                                              (DotPrim
                                                                                                id
                                                                                              )
                                                                                              (VarE
                                                                                                $$base/4/0
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$job/3/0
                                                                                            )
                                                                                            (PrimE
                                                                                              (DotPrim
                                                                                                job
                                                                                              )
                                                                                              (VarE
                                                                                                $$base/4/0
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$post/3/0
                                                                                            )
                                                                                            (PrimE
                                                                                              (DotPrim
                                                                                                post
                                                                                              )
                                                                                              (VarE
                                                                                                $$base/4/0
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (NewObjE
                                                                                            Object
                                                                                            (post
                                                                                              $$post/3/0
                                                                                            )
                                                                                            (job
                                                                                              $$job/3/0
                                                                                            )
                                                                                            (id
                                                                                              $$id/3/0
                                                                                            )
                                                                                            (expire
                                                                                              $$expire/3/0
                                                                                            )
                                                                                            (delay
                                                                                              $$delay/3/0
                                                                                            )
                                                                                            (pre
                                                                                              $$pre/3/0
                                                                                            )
                                                                                            {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                                                                                          )
                                                                                        )
                                                                                        (BlockE
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$base/3/0
                                                                                            )
                                                                                            (VarE
                                                                                              $m/1
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$post/2/0
                                                                                            )
                                                                                            (PrimE
                                                                                              OptPrim
                                                                                              (PrimE
                                                                                                (CallPrim
                                                                                                )
                                                                                                (VarE
                                                                                                  $reinsert/1
                                                                                                )
                                                                                                (PrimE
                                                                                                  (DotPrim
                                                                                                    post
                                                                                                  )
                                                                                                  (VarE
                                                                                                    $m/1
                                                                                                  )
                                                                                                )
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$delay/2/0
                                                                                            )
                                                                                            (PrimE
                                                                                              (DotPrim
                                                                                                delay
                                                                                              )
                                                                                              (VarE
                                                                                                $$base/3/0
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$expire/2/0
                                                                                            )
                                                                                            (PrimE
                                                                                              (DotPrim
                                                                                                expire
                                                                                              )
                                                                                              (VarE
                                                                                                $$base/3/0
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$id/2/0
                                                                                            )
                                                                                            (PrimE
                                                                                              (DotPrim
                                                                                                id
                                                                                              )
                                                                                              (VarE
                                                                                                $$base/3/0
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$job/2/0
                                                                                            )
                                                                                            (PrimE
                                                                                              (DotPrim
                                                                                                job
                                                                                              )
                                                                                              (VarE
                                                                                                $$base/3/0
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$pre/2/0
                                                                                            )
                                                                                            (PrimE
                                                                                              (DotPrim
                                                                                                pre
                                                                                              )
                                                                                              (VarE
                                                                                                $$base/3/0
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (NewObjE
                                                                                            Object
                                                                                            (pre
                                                                                              $$pre/2/0
                                                                                            )
                                                                                            (job
                                                                                              $$job/2/0
                                                                                            )
                                                                                            (id
                                                                                              $$id/2/0
                                                                                            )
                                                                                            (expire
                                                                                              $$expire/2/0
                                                                                            )
                                                                                            (delay
                                                                                              $$delay/2/0
                                                                                            )
                                                                                            (post
                                                                                              $$post/2/0
                                                                                            )
                                                                                            {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                  )
                                                                                )
                                                                              )
                                                                            )
                                                                            (AssignE
                                                                              (VarLE
                                                                                @timers
                                                                              )
                                                                              (PrimE
                                                                                OptPrim
                                                                                (PrimE
                                                                                  (CallPrim
                                                                                  )
                                                                                  (VarE
                                                                                    $reinsert/1
                                                                                  )
                                                                                  (PrimE
                                                                                    (CallPrim
                                                                                    )
                                                                                    (VarE
                                                                                      @prune
                                                                                    )
                                                                                    (VarE!
                                                                                      @timers
                                                                                    )
                                                                                  )
                                                                                )
                                                                              )
                                                                            )
                                                                          )
                                                                        )
                                                                      )
                                                                    )
                                                                    (AssignE
                                                                      (VarLE
                                                                        $gathered/0
                                                                      )
                                                                      (PrimE
                                                                        (BinPrim
                                                                          Nat
                                                                          AddOp
                                                                        )
                                                                        (VarE!
                                                                          $gathered/0
                                                                        )
                                                                        (LitE
                                                                          (NatLit
                                                                            1
                                                                          )
                                                                        )
                                                                      )
                                                                    )
                                                                  )
                                                                  (PrimE
                                                                    TupPrim
                                                                  )
                                                                )
                                                              )
                                                              (PrimE
                                                                (CallPrim)
                                                                (VarE
                                                                  $gatherExpired/0
                                                                )
                                                                (PrimE
                                                                  (DotPrim post)
                                                                  (VarE $n/1)
                                                                )
                                                              )
                                                            )
                                                            (PrimE TupPrim)
                                                          )
                                                        )
                                                      )
                                                    )
                                                  )
                                                )
                                                (LetD
                                                  WildP
                                                  (DefineE
                                                    $gatherExpired/0
                                                    Const
                                                    (VarE $v/24)
                                                  )
                                                )
                                                (BlockE
                                                  (LetD
                                                    (VarP $u/28)
                                                    (PrimE TupPrim)
                                                  )
                                                  (BlockE
                                                    (LetD
                                                      WildP
                                                      (PrimE
                                                        (CallPrim)
                                                        (VarE $gatherExpired/0)
                                                        (VarE! @timers)
                                                      )
                                                    )
                                                    (BlockE
                                                      (LetD
                                                        (VarP $u/29)
                                                        (PrimE TupPrim)
                                                      )
                                                      (BlockE
                                                        (LetD
                                                          (VarP $v/25)
                                                          (PrimE
                                                            (CallPrim)
                                                            (VarE
                                                              @nextExpiration
                                                            )
                                                            (VarE! @timers)
                                                          )
                                                        )
                                                        (LetD
                                                          WildP
                                                          (DefineE
                                                            $exp/0
                                                            Const
                                                            (VarE $v/25)
                                                          )
                                                        )
                                                        (BlockE
                                                          (LetD
                                                            (VarP $u/30)
                                                            (PrimE TupPrim)
                                                          )
                                                          (BlockE
                                                            (LetD
                                                              WildP
                                                              (BlockE
                                                                (LetD
                                                                  WildP
                                                                  (PrimE
                                                                    global_timer_set
                                                                    (VarE
                                                                      $exp/0
                                                                    )
                                                                  )
                                                                )
                                                                (PrimE TupPrim)
                                                              )
                                                            )
                                                            (BlockE
                                                              (LetD
                                                                (VarP $u/31)
                                                                (PrimE TupPrim)
                                                              )
                                                              (BlockE
                                                                (LetD
                                                                  WildP
                                                                  (IfE
                                                                    (PrimE
                                                                      (RelPrim
                                                                        Nat64
                                                                        EqOp
                                                                      )
                                                                      (VarE
                                                                        $exp/0
                                                                      )
                                                                      (LitE
                                                                        (Nat64Lit
                                                                          0
                                                                        )
                                                                      )
                                                                    )
                                                                    (AssignE
                                                                      (VarLE
                                                                        @timers
                                                                      )
                                                                      (LitE
                                                                        NullLit
                                                                      )
                                                                    )
                                                                    (PrimE
                                                                      TupPrim
                                                                    )
                                                                  )
                                                                )
                                                                (BlockE
                                                                  (LetD
                                                                    (VarP $u/32)
                                                                    (PrimE
                                                                      TupPrim
                                                                    )
                                                                  )
                                                                  (BlockE
                                                                    (LetD
                                                                      (VarP
                                                                        $u/33
                                                                      )
                                                                      (DefineE
                                                                        $failed/0
                                                                        Var
                                                                        (LitE
                                                                          (Nat64Lit
                                                                            0
                                                                          )
                                                                        )
                                                                      )
                                                                    )
                                                                    (BlockE
                                                                      (LetD
                                                                        (VarP
                                                                          $v/26
                                                                        )
                                                                        (FuncE
                                                                          reinsert
                                                                          Local
                                                                          Returns
                                                                          (params
                                                                            $job/8
                                                                          )
                                                                          ()
                                                                          (BlockE
                                                                            (LetD
                                                                              WildP
                                                                              (IfE
                                                                                (PrimE
                                                                                  (RelPrim
                                                                                    Nat64
                                                                                    EqOp
                                                                                  )
                                                                                  (VarE!
                                                                                    $failed/0
                                                                                  )
                                                                                  (LitE
                                                                                    (Nat64Lit
                                                                                      0
                                                                                    )
                                                                                  )
                                                                                )
                                                                                (BlockE
                                                                                  (LetD
                                                                                    WildP
                                                                                    (AssignE
                                                                                      (VarLE
                                                                                        @timers
                                                                                      )
                                                                                      (PrimE
                                                                                        (CallPrim
                                                                                        )
                                                                                        (VarE
                                                                                          @prune
                                                                                        )
                                                                                        (VarE!
                                                                                          @timers
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                  )
                                                                                  (BlockE
                                                                                    (LetD
                                                                                      WildP
                                                                                      (PrimE
                                                                                        global_timer_set
                                                                                        (LitE
                                                                                          (Nat64Lit
                                                                                            1
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                    (PrimE
                                                                                      TupPrim
                                                                                    )
                                                                                  )
                                                                                )
                                                                                (PrimE
                                                                                  TupPrim
                                                                                )
                                                                              )
                                                                            )
                                                                            (LetD
                                                                              WildP
                                                                              (AssignE
                                                                                (VarLE
                                                                                  $failed/0
                                                                                )
                                                                                (PrimE
                                                                                  (BinPrim
                                                                                    Nat64
                                                                                    AddOp
                                                                                  )
                                                                                  (VarE!
                                                                                    $failed/0
                                                                                  )
                                                                                  (LitE
                                                                                    (Nat64Lit
                                                                                      1
                                                                                    )
                                                                                  )
                                                                                )
                                                                              )
                                                                            )
                                                                            (AssignE
                                                                              (VarLE
                                                                                @timers
                                                                              )
                                                                              (PrimE
                                                                                OptPrim
                                                                                (SwitchE
                                                                                  (VarE!
                                                                                    @timers
                                                                                  )
                                                                                  (case
                                                                                    (OptP
                                                                                      (ObjP
                                                                                        (id
                                                                                          (LitP
                                                                                            (IntLit
                                                                                              0
                                                                                            )
                                                                                          )
                                                                                        )
                                                                                        (pre
                                                                                          (VarP
                                                                                            $pre/11
                                                                                          )
                                                                                        )
                                                                                        (post
                                                                                          (VarP
                                                                                            $post/11
                                                                                          )
                                                                                        )
                                                                                        (job
                                                                                          (VarP
                                                                                            $j/0
                                                                                          )
                                                                                        )
                                                                                        (expire
                                                                                          (VarP
                                                                                            $expire/12
                                                                                          )
                                                                                        )
                                                                                        (delay
                                                                                          (VarP
                                                                                            $delay/10
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                    (BlockE
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$expire/4/0
                                                                                        )
                                                                                        (PrimE
                                                                                          (ArrayPrim
                                                                                            Var
                                                                                            Nat64
                                                                                          )
                                                                                          (VarE!
                                                                                            $failed/0
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$id/4/0
                                                                                        )
                                                                                        (LitE
                                                                                          (NatLit
                                                                                            0
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$pre/4/0
                                                                                        )
                                                                                        (PrimE
                                                                                          OptPrim
                                                                                          (BlockE
                                                                                            (LetD
                                                                                              (VarP
                                                                                                $$id/5/0
                                                                                              )
                                                                                              (LitE
                                                                                                (NatLit
                                                                                                  0
                                                                                                )
                                                                                              )
                                                                                            )
                                                                                            (LetD
                                                                                              (VarP
                                                                                                $$post/4/0
                                                                                              )
                                                                                              (LitE
                                                                                                NullLit
                                                                                              )
                                                                                            )
                                                                                            (NewObjE
                                                                                              Object
                                                                                              (job
                                                                                                $j/0
                                                                                              )
                                                                                              (delay
                                                                                                $delay/10
                                                                                              )
                                                                                              (post
                                                                                                $$post/4/0
                                                                                              )
                                                                                              (pre
                                                                                                $pre/11
                                                                                              )
                                                                                              (expire
                                                                                                $expire/12
                                                                                              )
                                                                                              (id
                                                                                                $$id/5/0
                                                                                              )
                                                                                              {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                                                                                            )
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (NewObjE
                                                                                        Object
                                                                                        (pre
                                                                                          $$pre/4/0
                                                                                        )
                                                                                        (post
                                                                                          $post/11
                                                                                        )
                                                                                        (job
                                                                                          $job/8
                                                                                        )
                                                                                        (delay
                                                                                          $delay/10
                                                                                        )
                                                                                        (id
                                                                                          $$id/4/0
                                                                                        )
                                                                                        (expire
                                                                                          $$expire/4/0
                                                                                        )
                                                                                        {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                                                                                      )
                                                                                    )
                                                                                  )
                                                                                  (case
                                                                                    WildP
                                                                                    (BlockE
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$expire/5/0
                                                                                        )
                                                                                        (PrimE
                                                                                          (ArrayPrim
                                                                                            Var
                                                                                            Nat64
                                                                                          )
                                                                                          (VarE!
                                                                                            $failed/0
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$id/6/0
                                                                                        )
                                                                                        (LitE
                                                                                          (NatLit
                                                                                            0
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$delay/4/0
                                                                                        )
                                                                                        (LitE
                                                                                          NullLit
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$pre/5/0
                                                                                        )
                                                                                        (LitE
                                                                                          NullLit
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$post/5/0
                                                                                        )
                                                                                        (VarE!
                                                                                          @timers
                                                                                        )
                                                                                      )
                                                                                      (NewObjE
                                                                                        Object
                                                                                        (post
                                                                                          $$post/5/0
                                                                                        )
                                                                                        (pre
                                                                                          $$pre/5/0
                                                                                        )
                                                                                        (job
                                                                                          $job/8
                                                                                        )
                                                                                        (delay
                                                                                          $$delay/4/0
                                                                                        )
                                                                                        (id
                                                                                          $$id/6/0
                                                                                        )
                                                                                        (expire
                                                                                          $$expire/5/0
                                                                                        )
                                                                                        {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                                                                                      )
                                                                                    )
                                                                                  )
                                                                                )
                                                                              )
                                                                            )
                                                                          )
                                                                        )
                                                                      )
                                                                      (LetD
                                                                        WildP
                                                                        (DefineE
                                                                          $reinsert/0
                                                                          Const
                                                                          (VarE
                                                                            $v/26
                                                                          )
                                                                        )
                                                                      )
                                                                      (BlockE
                                                                        (LetD
                                                                          (VarP
                                                                            $u/34
                                                                          )
                                                                          (PrimE
                                                                            TupPrim
                                                                          )
                                                                        )
                                                                        (BlockE
                                                                          (LetD
                                                                            (VarP
                                                                              $u/35
                                                                            )
                                                                            (PrimE
                                                                              TupPrim
                                                                            )
                                                                          )
                                                                          (DeclareE
                                                                            $$arr/2/0
                                                                            (DeclareE
                                                                              $$last/2/0
                                                                              (DeclareE
                                                                                $$indx/2/0
                                                                                (BlockE
                                                                                  (LetD
                                                                                    (VarP
                                                                                      $v/27
                                                                                    )
                                                                                    (VarE
                                                                                      $thunks/0
                                                                                    )
                                                                                  )
                                                                                  (LetD
                                                                                    WildP
                                                                                    (DefineE
                                                                                      $$arr/2/0
                                                                                      Const
                                                                                      (VarE
                                                                                        $v/27
                                                                                      )
                                                                                    )
                                                                                  )
                                                                                  (BlockE
                                                                                    (LetD
                                                                                      (VarP
                                                                                        $u/36
                                                                                      )
                                                                                      (PrimE
                                                                                        TupPrim
                                                                                      )
                                                                                    )
                                                                                    (BlockE
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $v/28
                                                                                        )
                                                                                        (PrimE
                                                                                          GetLastArrayOffset
                                                                                          (VarE
                                                                                            $$arr/2/0
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        WildP
                                                                                        (DefineE
                                                                                          $$last/2/0
                                                                                          Const
                                                                                          (VarE
                                                                                            $v/28
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (BlockE
                                                                                        (LetD
                                                                                          (VarP
                                                                                            $u/37
                                                                                          )
                                                                                          (PrimE
                                                                                            TupPrim
                                                                                          )
                                                                                        )
                                                                                        (BlockE
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $u/38
                                                                                            )
                                                                                            (DefineE
                                                                                              $$indx/2/0
                                                                                              Var
                                                                                              (LitE
                                                                                                (NatLit
                                                                                                  0
                                                                                                )
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (BlockE
                                                                                            (LetD
                                                                                              (VarP
                                                                                                $u/39
                                                                                              )
                                                                                              (PrimE
                                                                                                TupPrim
                                                                                              )
                                                                                            )
                                                                                            (IfE
                                                                                              (PrimE
                                                                                                EqArrayOffset
                                                                                                (VarE
                                                                                                  $$last/2/0
                                                                                                )
                                                                                                (LitE
                                                                                                  (IntLit
                                                                                                    -1
                                                                                                  )
                                                                                                )
                                                                                              )
                                                                                              (PrimE
                                                                                                (CallPrim
                                                                                                )
                                                                                                (VarE
                                                                                                  $k/8
                                                                                                )
                                                                                                (PrimE
                                                                                                  TupPrim
                                                                                                )
                                                                                              )
                                                                                              (BlockE
                                                                                                (LetD
                                                                                                  (VarP
                                                                                                    $loop/0
                                                                                                  )
                                                                                                  (FuncE
                                                                                                    $loop/0
                                                                                                    Local
                                                                                                    Returns
                                                                                                    ()
                                                                                                    (BlockE
                                                                                                      (LetD
                                                                                                        (VarP
                                                                                                          $v/29
                                                                                                        )
                                                                                                        (PrimE
                                                                                                          TupPrim
                                                                                                        )
                                                                                                      )
                                                                                                      (DeclareE
                                                                                                        $o/0
                                                                                                        (BlockE
                                                                                                          (LetD
                                                                                                            (VarP
                                                                                                              $v/30
                                                                                                            )
                                                                                                            (PrimE
                                                                                                              DerefArrayOffset
                                                                                                              (VarE
                                                                                                                $$arr/2/0
                                                                                                              )
                                                                                                              (VarE!
                                                                                                                $$indx/2/0
                                                                                                              )
                                                                                                            )
                                                                                                          )
                                                                                                          (LetD
                                                                                                            WildP
                                                                                                            (DefineE
                                                                                                              $o/0
                                                                                                              Const
                                                                                                              (VarE
                                                                                                                $v/30
                                                                                                              )
                                                                                                            )
                                                                                                          )
                                                                                                          (BlockE
                                                                                                            (LetD
                                                                                                              (VarP
                                                                                                                $u/40
                                                                                                              )
                                                                                                              (PrimE
                                                                                                                TupPrim
                                                                                                              )
                                                                                                            )
                                                                                                            (BlockE
                                                                                                              (LetD
                                                                                                                (VarP
                                                                                                                  $k/9
                                                                                                                )
                                                                                                                (FuncE
                                                                                                                  $k/9
                                                                                                                  Local
                                                                                                                  Returns
                                                                                                                  ()
                                                                                                                  (BlockE
                                                                                                                    (LetD
                                                                                                                      (VarP
                                                                                                                        $v/31
                                                                                                                      )
                                                                                                                      (PrimE
                                                                                                                        TupPrim
                                                                                                                      )
                                                                                                                    )
                                                                                                                    (BlockE
                                                                                                                      (LetD
                                                                                                                        WildP
                                                                                                                        (VarE
                                                                                                                          $v/31
                                                                                                                        )
                                                                                                                      )
                                                                                                                      (BlockE
                                                                                                                        (LetD
                                                                                                                          (VarP
                                                                                                                            $u/41
                                                                                                                          )
                                                                                                                          (PrimE
                                                                                                                            TupPrim
                                                                                                                          )
                                                                                                                        )
                                                                                                                        (BlockE
                                                                                                                          (LetD
                                                                                                                            (VarP
                                                                                                                              $u/42
                                                                                                                            )
                                                                                                                            (PrimE
                                                                                                                              TupPrim
                                                                                                                            )
                                                                                                                          )
                                                                                                                          (PrimE
                                                                                                                            (CallPrim
                                                                                                                            )
                                                                                                                            (VarE
                                                                                                                              $loop/0
                                                                                                                            )
                                                                                                                            (IfE
                                                                                                                              (PrimE
                                                                                                                                EqArrayOffset
                                                                                                                                (VarE!
                                                                                                                                  $$indx/2/0
                                                                                                                                )
                                                                                                                                (VarE
                                                                                                                                  $$last/2/0
                                                                                                                                )
                                                                                                                              )
                                                                                                                              (PrimE
                                                                                                                                RetPrim
                                                                                                                                (PrimE
                                                                                                                                  (CallPrim
                                                                                                                                  )
                                                                                                                                  (VarE
                                                                                                                                    $k/8
                                                                                                                                  )
                                                                                                                                  (PrimE
                                                                                                                                    TupPrim
                                                                                                                                  )
                                                                                                                                )
                                                                                                                              )
                                                                                                                              (AssignE
                                                                                                                                (VarLE
                                                                                                                                  $$indx/2/0
                                                                                                                                )
                                                                                                                                (PrimE
                                                                                                                                  NextArrayOffset
                                                                                                                                  (VarE!
                                                                                                                                    $$indx/2/0
                                                                                                                                  )
                                                                                                                                )
                                                                                                                              )
                                                                                                                            )
                                                                                                                          )
                                                                                                                        )
                                                                                                                      )
                                                                                                                    )
                                                                                                                  )
                                                                                                                )
                                                                                                              )
                                                                                                              (SwitchE
                                                                                                                (VarE
                                                                                                                  $o/0
                                                                                                                )
                                                                                                                (case
                                                                                                                  (OptP
                                                                                                                    (VarP
                                                                                                                      $thunk/0
                                                                                                                    )
                                                                                                                  )
                                                                                                                  (BlockE
                                                                                                                    (LetD
                                                                                                                      (VarP
                                                                                                                        $r/4
                                                                                                                      )
                                                                                                                      (FuncE
                                                                                                                        $r/4
                                                                                                                        Local
                                                                                                                        Returns
                                                                                                                        (params
                                                                                                                          $e/0
                                                                                                                        )
                                                                                                                        ()
                                                                                                                        (SwitchE
                                                                                                                          (VarE
                                                                                                                            $e/0
                                                                                                                          )
                                                                                                                          (case
                                                                                                                            WildP
                                                                                                                            (PrimE
                                                                                                                              (CallPrim
                                                                                                                              )
                                                                                                                              (VarE
                                                                                                                                $k/9
                                                                                                                              )
                                                                                                                              (PrimE
                                                                                                                                (CallPrim
                                                                                                                                )
                                                                                                                                (VarE
                                                                                                                                  $reinsert/0
                                                                                                                                )
                                                                                                                                (VarE
                                                                                                                                  $thunk/0
                                                                                                                                )
                                                                                                                              )
                                                                                                                            )
                                                                                                                          )
                                                                                                                        )
                                                                                                                      )
                                                                                                                    )
                                                                                                                    (BlockE
                                                                                                                      (LetD
                                                                                                                        (VarP
                                                                                                                          $u/43
                                                                                                                        )
                                                                                                                        (PrimE
                                                                                                                          (CallPrim
                                                                                                                            $@timer_helper
                                                                                                                          )
                                                                                                                          (VarE
                                                                                                                            $thunk/0
                                                                                                                          )
                                                                                                                          (PrimE
                                                                                                                            TupPrim
                                                                                                                          )
                                                                                                                        )
                                                                                                                      )
                                                                                                                      (IfE
                                                                                                                        (PrimE
                                                                                                                          (CallPrim
                                                                                                                          )
                                                                                                                          (VarE
                                                                                                                            @call_succeeded
                                                                                                                          )
                                                                                                                          (PrimE
                                                                                                                            TupPrim
                                                                                                                          )
                                                                                                                        )
                                                                                                                        (BlockE
                                                                                                                          (LetD
                                                                                                                            WildP
                                                                                                                            (VarE
                                                                                                                              $u/43
                                                                                                                            )
                                                                                                                          )
                                                                                                                          (BlockE
                                                                                                                            (LetD
                                                                                                                              (VarP
                                                                                                                                $u/44
                                                                                                                              )
                                                                                                                              (PrimE
                                                                                                                                TupPrim
                                                                                                                              )
                                                                                                                            )
                                                                                                                            (BlockE
                                                                                                                              (LetD
                                                                                                                                (VarP
                                                                                                                                  $u/45
                                                                                                                                )
                                                                                                                                (PrimE
                                                                                                                                  TupPrim
                                                                                                                                )
                                                                                                                              )
                                                                                                                              (PrimE
                                                                                                                                (CallPrim
                                                                                                                                )
                                                                                                                                (VarE
                                                                                                                                  $k/9
                                                                                                                                )
                                                                                                                                (PrimE
                                                                                                                                  TupPrim
                                                                                                                                )
                                                                                                                              )
                                                                                                                            )
                                                                                                                          )
                                                                                                                        )
                                                                                                                        (PrimE
                                                                                                                          (CallPrim
                                                                                                                          )
                                                                                                                          (VarE
                                                                                                                            $r/4
                                                                                                                          )
                                                                                                                          (PrimE
                                                                                                                            (CallPrim
                                                                                                                            )
                                                                                                                            (VarE
                                                                                                                              @call_error
                                                                                                                            )
                                                                                                                            (PrimE
                                                                                                                              TupPrim
                                                                                                                            )
                                                                                                                          )
                                                                                                                        )
                                                                                                                      )
                                                                                                                    )
                                                                                                                  )
                                                                                                                )
                                                                                                                (case
                                                                                                                  WildP
                                                                                                                  (PrimE
                                                                                                                    (CallPrim
                                                                                                                    )
                                                                                                                    (VarE
                                                                                                                      $k/9
                                                                                                                    )
                                                                                                                    (PrimE
                                                                                                                      RetPrim
                                                                                                                      (PrimE
                                                                                                                        (CallPrim
                                                                                                                        )
                                                                                                                        (VarE
                                                                                                                          $k/8
                                                                                                                        )
                                                                                                                        (PrimE
                                                                                                                          TupPrim
                                                                                                                        )
                                                                                                                      )
                                                                                                                    )
                                                                                                                  )
                                                                                                                )
                                                                                                              )
                                                                                                            )
                                                                                                          )
                                                                                                        )
                                                                                                      )
                                                                                                    )
                                                                                                  )
                                                                                                )
                                                                                                (PrimE
                                                                                                  (CallPrim
                                                                                                  )
                                                                                                  (VarE
                                                                                                    $loop/0
                                                                                                  )
                                                                                                  (PrimE
                                                                                                    TupPrim
                                                                                                  )
                                                                                                )
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                  )
                                                                                )
                                                                              )
                                                                            )
                                                                          )
                                                                        )
                                                                      )
                                                                    )
                                                                  )
                                                                )
                                                              )
                                                            )
                                                          )
                                                        )
                                                      )
                                                    )
                                                  )
                                                )
                                              )
                                            )
                                          )
                                        )
                                      )
                                    )
                                  )
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              )
              (PrimE
                TupPrim
                (FuncE
                  $lambda
                  Local
                  Returns
                  ()
                  (BlockE
                    (LetD (VarP $v/44) (PrimE TupPrim))
                    (PrimE (ICReplyPrim) (VarE $v/44))
                  )
                )
                (FuncE
                  $lambda
                  Local
                  Returns
                  (params $e/4)
                  ()
                  (PrimE
                    ICRejectPrim
                    (PrimE
                      (ProjPrim 1)
                      (PrimE
                        (CastPrim
                          Error
                          ({#call_error : {err_code : Nat32}; #canister_error; #canister_reject; #destination_invalid; #future : Nat32; #system_fatal; #system_transient; #system_unknown}, Text)
                        )
                        (VarE $e/4)
                      )
                    )
                  )
                )
                (VarE @cleanup)
              )
            )
            (VarE $reply/7)
            (VarE $reject/7)
            (VarE $cleanup/7)
          )
        )
        (VarE $async/15)
      )
    )
  )
  (VarD @lastTimerId Nat (LitE (NatLit 0)))
  (LetD
    (VarP @setTimer)
    (FuncE
      @setTimer
      Local
      Returns
      ($ Any)
      (params delayNanos recurring job)
      Nat
      (BlockE
        (LetD
          WildP
          (AssignE
            (VarLE @lastTimerId)
            (PrimE (BinPrim Nat AddOp) (VarE! @lastTimerId) (LitE (NatLit 1)))
          )
        )
        (LetD (VarP id) (VarE! @lastTimerId))
        (LetD (VarP now) (PrimE SystemTimePrim))
        (LetD
          (VarP expire)
          (PrimE (BinPrim Nat64 AddOp) (VarE now) (VarE delayNanos))
        )
        (LetD
          (VarP delay)
          (IfE
            (VarE recurring)
            (PrimE OptPrim (VarE delayNanos))
            (LitE NullLit)
          )
        )
        (LetD
          (VarP insert)
          (FuncE
            insert
            Local
            Returns
            (params n)
            @Node
            (SwitchE
              (VarE n)
              (case
                (LitP NullLit)
                (BlockE
                  (LetD
                    (VarP $expire/6)
                    (PrimE (ArrayPrim Var Nat64) (VarE expire))
                  )
                  (LetD (VarP $pre/6) (LitE NullLit))
                  (LetD (VarP $post/6) (LitE NullLit))
                  (NewObjE
                    Object
                    (post $post/6)
                    (pre $pre/6)
                    (job job)
                    (delay delay)
                    (id id)
                    (expire $expire/6)
                    {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                  )
                )
              )
              (case
                (OptP (VarP n))
                (BlockE
                  (LetD
                    WildP
                    (PrimE
                      AssertPrim
                      (PrimE
                        (RelPrim Bool EqOp)
                        (PrimE
                          (RelPrim Nat64 EqOp)
                          (PrimE
                            IdxPrim
                            (PrimE (DotPrim expire) (VarE n))
                            (LitE (NatLit 0))
                          )
                          (LitE (Nat64Lit 0))
                        )
                        (LitE (BoolLit false))
                      )
                    )
                  )
                  (IfE
                    (PrimE
                      (RelPrim Nat64 LtOp)
                      (VarE expire)
                      (PrimE
                        IdxPrim
                        (PrimE (DotPrim expire) (VarE n))
                        (LitE (NatLit 0))
                      )
                    )
                    (BlockE
                      (LetD (VarP $base/6) (VarE n))
                      (LetD
                        (VarP $pre/8)
                        (PrimE
                          OptPrim
                          (PrimE
                            (CallPrim)
                            (VarE insert)
                            (PrimE (DotPrim pre) (VarE n))
                          )
                        )
                      )
                      (LetD
                        (VarP $delay/6)
                        (PrimE (DotPrim delay) (VarE $base/6))
                      )
                      (LetD
                        (VarP $expire/8)
                        (PrimE (DotPrim expire) (VarE $base/6))
                      )
                      (LetD (VarP $id/8) (PrimE (DotPrim id) (VarE $base/6)))
                      (LetD (VarP $job/5) (PrimE (DotPrim job) (VarE $base/6)))
                      (LetD
                        (VarP $post/8)
                        (PrimE (DotPrim post) (VarE $base/6))
                      )
                      (NewObjE
                        Object
                        (post $post/8)
                        (job $job/5)
                        (id $id/8)
                        (expire $expire/8)
                        (delay $delay/6)
                        (pre $pre/8)
                        {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                      )
                    )
                    (BlockE
                      (LetD (VarP $base/5) (VarE n))
                      (LetD
                        (VarP $post/7)
                        (PrimE
                          OptPrim
                          (PrimE
                            (CallPrim)
                            (VarE insert)
                            (PrimE (DotPrim post) (VarE n))
                          )
                        )
                      )
                      (LetD
                        (VarP $delay/5)
                        (PrimE (DotPrim delay) (VarE $base/5))
                      )
                      (LetD
                        (VarP $expire/7)
                        (PrimE (DotPrim expire) (VarE $base/5))
                      )
                      (LetD (VarP $id/7) (PrimE (DotPrim id) (VarE $base/5)))
                      (LetD (VarP $job/4) (PrimE (DotPrim job) (VarE $base/5)))
                      (LetD (VarP $pre/7) (PrimE (DotPrim pre) (VarE $base/5)))
                      (NewObjE
                        Object
                        (pre $pre/7)
                        (job $job/4)
                        (id $id/7)
                        (expire $expire/7)
                        (delay $delay/5)
                        (post $post/7)
                        {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          WildP
          (AssignE
            (VarLE @timers)
            (PrimE
              OptPrim
              (PrimE
                (CallPrim)
                (VarE insert)
                (PrimE (CallPrim) (VarE @prune) (VarE! @timers))
              )
            )
          )
        )
        (LetD
          (VarP exp)
          (PrimE (CallPrim) (VarE @nextExpiration) (VarE! @timers))
        )
        (LetD
          WildP
          (IfE
            (PrimE (RelPrim Nat64 EqOp) (VarE exp) (LitE (Nat64Lit 0)))
            (AssignE (VarLE @timers) (LitE NullLit))
            (PrimE TupPrim)
          )
        )
        (LetD
          WildP
          (BlockE
            (LetD WildP (PrimE global_timer_set (VarE exp)))
            (PrimE TupPrim)
          )
        )
        (VarE id)
      )
    )
  )
  (LetD
    (VarP @cancelTimer)
    (FuncE
      @cancelTimer
      Local
      Returns
      (params id)
      ()
      (BlockE
        (LetD
          (VarP graft)
          (FuncE
            graft
            Local
            Returns
            (params onto branch)
            ?@Node
            (SwitchE
              (PrimE TupPrim (VarE onto) (VarE branch))
              (case (TupP (LitP NullLit) (LitP NullLit)) (LitE NullLit))
              (case (TupP (LitP NullLit) WildP) (VarE branch))
              (case (TupP WildP (LitP NullLit)) (VarE onto))
              (case
                (TupP (OptP (VarP onto)) WildP)
                (PrimE
                  OptPrim
                  (BlockE
                    (LetD (VarP $base/7) (VarE onto))
                    (LetD
                      (VarP $post/9)
                      (PrimE
                        (CallPrim)
                        (VarE graft)
                        (PrimE
                          TupPrim
                          (PrimE (DotPrim post) (VarE onto))
                          (VarE branch)
                        )
                      )
                    )
                    (LetD
                      (VarP $delay/7)
                      (PrimE (DotPrim delay) (VarE $base/7))
                    )
                    (LetD
                      (VarP $expire/9)
                      (PrimE (DotPrim expire) (VarE $base/7))
                    )
                    (LetD (VarP $id/9) (PrimE (DotPrim id) (VarE $base/7)))
                    (LetD (VarP $job/6) (PrimE (DotPrim job) (VarE $base/7)))
                    (LetD (VarP $pre/9) (PrimE (DotPrim pre) (VarE $base/7)))
                    (NewObjE
                      Object
                      (pre $pre/9)
                      (job $job/6)
                      (id $id/9)
                      (expire $expire/9)
                      (delay $delay/7)
                      (post $post/9)
                      {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          (VarP hunt)
          (FuncE
            hunt
            Local
            Returns
            (params n)
            ?@Node
            (SwitchE
              (VarE n)
              (case (LitP NullLit) (VarE n))
              (case
                (OptP
                  (ObjP (id (VarP node)) (pre (VarP pre)) (post (VarP post)))
                )
                (IfE
                  (PrimE (RelPrim Nat EqOp) (VarE node) (VarE id))
                  (PrimE
                    (CallPrim)
                    (VarE graft)
                    (PrimE TupPrim (VarE pre) (VarE post))
                  )
                  (LabelE
                    !
                    ?@Node
                    (PrimE
                      OptPrim
                      (BlockE
                        (LetD
                          (VarP $base/8)
                          (SwitchE
                            (VarE n)
                            (case
                              (LitP NullLit)
                              (PrimE (BreakPrim !) (LitE NullLit))
                            )
                            (case (OptP (VarP $v/0)) (VarE $v/0))
                          )
                        )
                        (LetD
                          (VarP $pre/10)
                          (PrimE (CallPrim) (VarE hunt) (VarE pre))
                        )
                        (LetD
                          (VarP $post/10)
                          (PrimE (CallPrim) (VarE hunt) (VarE post))
                        )
                        (LetD
                          (VarP $delay/8)
                          (PrimE (DotPrim delay) (VarE $base/8))
                        )
                        (LetD
                          (VarP $expire/10)
                          (PrimE (DotPrim expire) (VarE $base/8))
                        )
                        (LetD (VarP $id/10) (PrimE (DotPrim id) (VarE $base/8)))
                        (LetD
                          (VarP $job/7)
                          (PrimE (DotPrim job) (VarE $base/8))
                        )
                        (NewObjE
                          Object
                          (job $job/7)
                          (id $id/10)
                          (expire $expire/10)
                          (delay $delay/8)
                          (post $post/10)
                          (pre $pre/10)
                          {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          WildP
          (AssignE
            (VarLE @timers)
            (PrimE (CallPrim) (VarE hunt) (VarE! @timers))
          )
        )
        (IfE
          (PrimE
            (RelPrim Nat64 EqOp)
            (PrimE (CallPrim) (VarE @nextExpiration) (VarE! @timers))
            (LitE (Nat64Lit 0))
          )
          (BlockE
            (LetD
              WildP
              (BlockE
                (LetD WildP (PrimE global_timer_set (LitE (Nat64Lit 0))))
                (PrimE TupPrim)
              )
            )
            (AssignE (VarLE @timers) (LitE NullLit))
          )
          (PrimE TupPrim)
        )
      )
    )
  )
  (LetD
    (VarP @set_global_timer)
    (FuncE
      @set_global_timer
      Local
      Returns
      (params time)
      ()
      (BlockE (LetD WildP (PrimE global_timer_set (VarE time))) (PrimE TupPrim))
    )
  )
  (LetD
    (VarP @dedup)
    (FuncE
      @dedup
      Local
      Returns
      (params b)
      Blob
      (BlockE
        (LetD
          (VarP Array_tabulate)
          (FuncE
            Array_tabulate
            Local
            Returns
            (T Any)
            (params len gen)
            [T]
            (PrimE Array.tabulate (VarE len) (VarE gen))
          )
        )
        (LetD
          (VarP Array_tabulateVar)
          (FuncE
            Array_tabulateVar
            Local
            Returns
            (T Any)
            (params len gen)
            [var T]
            (PrimE Array.tabulateVar (VarE len) (VarE gen))
          )
        )
        (LetD (VarP HASH_ARRAY_SIZE) (LitE (NatLit 16_384)))
        (LetD
          (VarP debugPrint)
          (FuncE debugPrint Local Returns (params x) () (PrimE print (VarE x)))
        )
        (LetD
          (VarP hashBlob)
          (FuncE
            hashBlob
            Local
            Returns
            (params b)
            Nat32
            (PrimE crc32Hash (VarE b))
          )
        )
        (LetD
          (VarP allocWeakRef)
          (FuncE
            allocWeakRef
            Local
            Returns
            (T Any)
            (params obj)
            weak T
            (PrimE alloc_weak_ref (VarE obj))
          )
        )
        (LetD
          (VarP weakGet)
          (FuncE
            weakGet
            Local
            Returns
            (T Any)
            (params w)
            ?T
            (PrimE weak_get (VarE w))
          )
        )
        (LetD
          (VarP getDedupTable)
          (FuncE
            getDedupTable
            Local
            Returns
            ?[var List]
            (PrimE get_dedup_table)
          )
        )
        (LetD
          (VarP setDedupTable)
          (FuncE
            setDedupTable
            Local
            Returns
            (params dedupTable)
            ()
            (PrimE set_dedup_table (VarE dedupTable))
          )
        )
        (LetD
          (VarP arrayToBlob)
          (FuncE
            arrayToBlob
            Local
            Returns
            (params a)
            Blob
            (PrimE arrayToBlob (VarE a))
          )
        )
        (LetD
          (VarP getOriginalBlob)
          (FuncE
            getOriginalBlob
            Local
            Returns
            (params b)
            Blob
            (BlockE
              (LetD
                (VarP copiedArr)
                (PrimE
                  (CallPrim Nat8)
                  (VarE Array_tabulate)
                  (PrimE
                    TupPrim
                    (PrimE
                      (BinPrim Nat SubOp)
                      (PrimE blob_size (VarE b))
                      (LitE (NatLit 5))
                    )
                    (FuncE
                      @anon-func-744.50
                      Local
                      Returns
                      (params i)
                      Nat8
                      (PrimE
                        IdxBlobPrim
                        (VarE b)
                        (PrimE (BinPrim Nat AddOp) (VarE i) (LitE (NatLit 5)))
                      )
                    )
                  )
                )
              )
              (LetD
                (VarP originalBlob)
                (PrimE (CallPrim) (VarE arrayToBlob) (VarE copiedArr))
              )
              (VarE originalBlob)
            )
          )
        )
        (LetD
          (VarP blobCompare)
          (FuncE
            blobCompare
            Local
            Returns
            (params b1 b2)
            Int8
            (PrimE blob_compare (VarE b1) (VarE b2))
          )
        )
        (LetD
          (VarP addToList)
          (FuncE
            addToList
            Local
            Returns
            (params list originalBlob weakRef)
            List
            (BlockE
              (LetD
                (VarP newList)
                (BlockE
                  (VarD
                    $next/0
                    ?{index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}
                    (PrimE OptPrim (VarE list))
                  )
                  (LetD (VarP $value/0) (PrimE OptPrim (VarE weakRef)))
                  (LetD
                    (VarP $index/0)
                    (PrimE
                      (BinPrim Nat AddOp)
                      (PrimE (DotPrim index) (VarE list))
                      (LitE (NatLit 1))
                    )
                  )
                  (NewObjE
                    Object
                    (index $index/0)
                    (originalBlob originalBlob)
                    (value $value/0)
                    (next $next/0)
                    {index : Nat; var next : ?{index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}; originalBlob : Blob; value : ?{ref : weak Blob}}
                  )
                )
              )
              (VarE newList)
            )
          )
        )
        (LetD
          (VarP getFromList)
          (FuncE
            getFromList
            Local
            Returns
            (params list originalBlob)
            ?WeakRef
            (BlockE
              (VarD
                copy
                {index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}
                (VarE list)
              )
              (LoopE
                (IfE
                  (PrimE
                    (RelPrim Int8 EqOp)
                    (PrimE
                      (CallPrim)
                      (VarE blobCompare)
                      (PrimE
                        TupPrim
                        (PrimE (DotPrim originalBlob) (VarE! copy))
                        (VarE originalBlob)
                      )
                    )
                    (LitE (Int8Lit 0))
                  )
                  (PrimE RetPrim (PrimE (DotPrim value) (VarE! copy)))
                  (BlockE
                    (LetD (VarP next) (PrimE (DotPrim next) (VarE! copy)))
                    (SwitchE
                      (VarE next)
                      (case (LitP NullLit) (PrimE RetPrim (LitE NullLit)))
                      (case
                        (OptP (VarP next))
                        (AssignE (VarLE copy) (VarE next))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          (VarP getListLen)
          (FuncE
            getListLen
            Local
            Returns
            (params list)
            Nat
            (PrimE (DotPrim index) (VarE list))
          )
        )
        (LetD
          (VarP getHashArrayLen)
          (FuncE
            getHashArrayLen
            Local
            Returns
            (params hashArray)
            Nat
            (BlockE
              (VarD len Nat (LitE (NatLit 0)))
              (VarD i Nat (LitE (NatLit 0)))
              (LetD
                WildP
                (LabelE
                  $done/7
                  ()
                  (LoopE
                    (IfE
                      (PrimE
                        (RelPrim Nat LtOp)
                        (VarE! i)
                        (VarE HASH_ARRAY_SIZE)
                      )
                      (BlockE
                        (LetD
                          WildP
                          (AssignE
                            (VarLE len)
                            (PrimE
                              (BinPrim Nat AddOp)
                              (VarE! len)
                              (PrimE
                                (CallPrim)
                                (VarE getListLen)
                                (PrimE IdxPrim (VarE hashArray) (VarE! i))
                              )
                            )
                          )
                        )
                        (AssignE
                          (VarLE i)
                          (PrimE
                            (BinPrim Nat AddOp)
                            (VarE! i)
                            (LitE (NatLit 1))
                          )
                        )
                      )
                      (PrimE (BreakPrim $done/7) (PrimE TupPrim))
                    )
                  )
                )
              )
              (VarE! len)
            )
          )
        )
        (LetD
          (VarP addToHashArray)
          (FuncE
            addToHashArray
            Local
            Returns
            (params hashArray b)
            ()
            (BlockE
              (LetD
                (VarP hashValue)
                (PrimE (CallPrim) (VarE hashBlob) (VarE b))
              )
              (LetD
                (VarP index)
                (PrimE
                  (BinPrim Nat ModOp)
                  (PrimE (CallPrim) (VarE @nat32ToNat) (VarE hashValue))
                  (VarE HASH_ARRAY_SIZE)
                )
              )
              (LetD (VarP list) (PrimE IdxPrim (VarE hashArray) (VarE index)))
              (LetD
                (VarP weakRef)
                (BlockE
                  (LetD
                    (VarP $ref/0)
                    (PrimE (CallPrim Blob) (VarE allocWeakRef) (VarE b))
                  )
                  (NewObjE Object (ref $ref/0) {ref : weak Blob})
                )
              )
              (AssignE
                (IdxLE (VarE hashArray) (VarE index))
                (PrimE
                  (CallPrim)
                  (VarE addToList)
                  (PrimE
                    TupPrim
                    (VarE list)
                    (PrimE (CallPrim) (VarE getOriginalBlob) (VarE b))
                    (VarE weakRef)
                  )
                )
              )
            )
          )
        )
        (LetD
          (VarP getFromHashArray)
          (FuncE
            getFromHashArray
            Local
            Returns
            (params hashArray b)
            ?WeakRef
            (BlockE
              (LetD
                (VarP hashValue)
                (PrimE (CallPrim) (VarE hashBlob) (VarE b))
              )
              (LetD
                (VarP index)
                (PrimE
                  (BinPrim Nat ModOp)
                  (PrimE (CallPrim) (VarE @nat32ToNat) (VarE hashValue))
                  (VarE HASH_ARRAY_SIZE)
                )
              )
              (LetD (VarP list) (PrimE IdxPrim (VarE hashArray) (VarE index)))
              (PrimE
                (CallPrim)
                (VarE getFromList)
                (PrimE
                  TupPrim
                  (VarE list)
                  (PrimE (CallPrim) (VarE getOriginalBlob) (VarE b))
                )
              )
            )
          )
        )
        (LetD
          WildP
          (IfE
            (PrimE
              (RelPrim Nat LtOp)
              (PrimE blob_size (VarE b))
              (LitE (NatLit 5))
            )
            (PrimE RetPrim (VarE b))
            (PrimE TupPrim)
          )
        )
        (LetD
          WildP
          (IfE
            (IfE
              (IfE
                (IfE
                  (IfE
                    (PrimE
                      (RelPrim Bool EqOp)
                      (PrimE
                        (RelPrim Nat8 EqOp)
                        (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 0)))
                        (LitE (Nat8Lit 33))
                      )
                      (LitE (BoolLit false))
                    )
                    (LitE (BoolLit true))
                    (PrimE
                      (RelPrim Bool EqOp)
                      (PrimE
                        (RelPrim Nat8 EqOp)
                        (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 1)))
                        (LitE (Nat8Lit 99))
                      )
                      (LitE (BoolLit false))
                    )
                  )
                  (LitE (BoolLit true))
                  (PrimE
                    (RelPrim Bool EqOp)
                    (PrimE
                      (RelPrim Nat8 EqOp)
                      (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 2)))
                      (LitE (Nat8Lit 97))
                    )
                    (LitE (BoolLit false))
                  )
                )
                (LitE (BoolLit true))
                (PrimE
                  (RelPrim Bool EqOp)
                  (PrimE
                    (RelPrim Nat8 EqOp)
                    (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 3)))
                    (LitE (Nat8Lit 102))
                  )
                  (LitE (BoolLit false))
                )
              )
              (LitE (BoolLit true))
              (PrimE
                (RelPrim Bool EqOp)
                (PrimE
                  (RelPrim Nat8 EqOp)
                  (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 4)))
                  (LitE (Nat8Lit 33))
                )
                (LitE (BoolLit false))
              )
            )
            (PrimE RetPrim (VarE b))
            (PrimE TupPrim)
          )
        )
        (LetD
          (VarP ptr)
          (PrimE (CallPrim) (VarE getDedupTable) (PrimE TupPrim))
        )
        (LetD
          (VarP hashArray)
          (SwitchE
            (VarE ptr)
            (case (OptP (VarP dedupTable)) (VarE dedupTable))
            (case
              (LitP NullLit)
              (BlockE
                (LetD
                  (VarP arr)
                  (PrimE
                    (CallPrim List)
                    (VarE Array_tabulateVar)
                    (PrimE
                      TupPrim
                      (VarE HASH_ARRAY_SIZE)
                      (FuncE
                        @anon-func-830.58
                        Local
                        Returns
                        (params i)
                        List
                        (BlockE
                          (VarD $next/1 ?List (LitE NullLit))
                          (LetD (VarP $value/1) (LitE NullLit))
                          (LetD (VarP $originalBlob/0) (LitE (BlobLit "")))
                          (LetD (VarP $index/1) (LitE (NatLit 0)))
                          (NewObjE
                            Object
                            (index $index/1)
                            (originalBlob $originalBlob/0)
                            (value $value/1)
                            (next $next/1)
                            {index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}
                          )
                        )
                      )
                    )
                  )
                )
                (LetD WildP (PrimE (CallPrim) (VarE setDedupTable) (VarE arr)))
                (VarE arr)
              )
            )
          )
        )
        (LetD
          (VarP dedupedBlobWeakRef)
          (PrimE
            (CallPrim)
            (VarE getFromHashArray)
            (PrimE TupPrim (VarE hashArray) (VarE b))
          )
        )
        (LetD
          (VarP result)
          (SwitchE
            (VarE dedupedBlobWeakRef)
            (case
              (OptP (VarP weakRef))
              (BlockE
                (LetD
                  (VarP derefed)
                  (PrimE
                    (CallPrim Blob)
                    (VarE weakGet)
                    (PrimE (DotPrim ref) (VarE weakRef))
                  )
                )
                (SwitchE
                  (VarE derefed)
                  (case (OptP (VarP derefed)) (VarE derefed))
                  (case
                    (LitP NullLit)
                    (BlockE
                      (LetD
                        WildP
                        (PrimE
                          (CallPrim)
                          (VarE addToHashArray)
                          (PrimE TupPrim (VarE hashArray) (VarE b))
                        )
                      )
                      (VarE b)
                    )
                  )
                )
              )
            )
            (case
              (LitP NullLit)
              (BlockE
                (LetD
                  WildP
                  (PrimE
                    (CallPrim)
                    (VarE addToHashArray)
                    (PrimE TupPrim (VarE hashArray) (VarE b))
                  )
                )
                (VarE b)
              )
            )
          )
        )
        (VarE result)
      )
    )
  )
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 57))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (IntLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat8Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat16Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat32Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat64Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat8Lit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat16Lit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat32Lit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat64Lit 25))) (PrimE TupPrim)))
)
-- Tailcall optimization issue-5555.mo:
(ProgU
  (VarD @cycles Nat (LitE (NatLit 0)))
  (VarD @timeout ?Nat32 (LitE NullLit))
  (LetD
    (VarP @add_cycles)
    (FuncE
      @add_cycles
      Local
      Returns
      ($ Any)
      ()
      (BlockE
        (LetD (VarP cycles) (VarE! @cycles))
        (LetD WildP (PrimE (CallPrim) (VarE @reset_cycles) (PrimE TupPrim)))
        (LetD
          WildP
          (IfE
            (PrimE
              (RelPrim Bool EqOp)
              (PrimE (RelPrim Nat EqOp) (VarE cycles) (LitE (NatLit 0)))
              (LitE (BoolLit false))
            )
            (PrimE SystemCyclesAddPrim (VarE cycles))
            (PrimE TupPrim)
          )
        )
        (SwitchE
          (VarE! @timeout)
          (case
            (OptP (VarP timeout))
            (BlockE
              (LetD WildP (AssignE (VarLE @timeout) (LitE NullLit)))
              (PrimE SystemTimeoutSetPrim (VarE timeout))
            )
          )
          (case (LitP NullLit) (PrimE TupPrim))
        )
      )
    )
  )
  (LetD
    (VarP @reset_cycles)
    (FuncE
      @reset_cycles
      Local
      Returns
      ()
      (AssignE (VarLE @cycles) (LitE (NatLit 0)))
    )
  )
  (LetD
    (VarP @immut_array_get)
    (FuncE
      @immut_array_get
      Local
      Returns
      (A Any)
      (params xs)
      Nat -> A
      (FuncE
        @anon-func-45.49
        Local
        Returns
        (params n)
        A
        (PrimE IdxPrim (VarE xs) (VarE n))
      )
    )
  )
  (LetD
    (VarP @mut_array_get)
    (FuncE
      @mut_array_get
      Local
      Returns
      (A Any)
      (params xs)
      Nat -> A
      (FuncE
        @anon-func-46.51
        Local
        Returns
        (params n)
        A
        (PrimE IdxPrim (VarE xs) (VarE n))
      )
    )
  )
  (LetD
    (VarP @immut_array_size)
    (FuncE
      @immut_array_size
      Local
      Returns
      (A Any)
      (params xs)
      () -> Nat
      (FuncE @anon-func-47.51 Local Returns Nat (PrimE array_len (VarE xs)))
    )
  )
  (LetD
    (VarP @mut_array_size)
    (FuncE
      @mut_array_size
      Local
      Returns
      (A Any)
      (params xs)
      () -> Nat
      (FuncE @anon-func-48.53 Local Returns Nat (PrimE array_len (VarE xs)))
    )
  )
  (LetD
    (VarP @mut_array_put)
    (FuncE
      @mut_array_put
      Local
      Returns
      (A Any)
      (params xs)
      (Nat, A) -> ()
      (FuncE
        @anon-func-49.57
        Local
        Returns
        (params n x)
        ()
        (AssignE (IdxLE (VarE xs) (VarE n)) (VarE x))
      )
    )
  )
  (LetD
    (VarP @immut_array_keys)
    (FuncE
      @immut_array_keys
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<Nat>
      (FuncE
        @anon-func-50.58
        Local
        Returns
        @Iter<Nat>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (VarE j))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat})
        )
      )
    )
  )
  (LetD
    (VarP @mut_array_keys)
    (FuncE
      @mut_array_keys
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<Nat>
      (FuncE
        @anon-func-55.60
        Local
        Returns
        @Iter<Nat>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (VarE j))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat})
        )
      )
    )
  )
  (LetD
    (VarP @immut_array_vals)
    (FuncE
      @immut_array_vals
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<A>
      (FuncE
        @anon-func-60.56
        Local
        Returns
        @Iter<A>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?A
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (PrimE IdxPrim (VarE xs) (VarE j)))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?A})
        )
      )
    )
  )
  (LetD
    (VarP @mut_array_vals)
    (FuncE
      @mut_array_vals
      Local
      Returns
      (A Any)
      (params xs)
      () -> @Iter<A>
      (FuncE
        @anon-func-67.58
        Local
        Returns
        @Iter<A>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE array_len (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?A
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (PrimE IdxPrim (VarE xs) (VarE j)))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?A})
        )
      )
    )
  )
  (LetD
    (VarP @blob_size)
    (FuncE
      @blob_size
      Local
      Returns
      (params b)
      () -> Nat
      (FuncE @anon-func-74.41 Local Returns Nat (PrimE blob_size (VarE b)))
    )
  )
  (LetD
    (VarP @blob_keys)
    (FuncE
      @blob_keys
      Local
      Returns
      (params b)
      () -> @Iter<Nat>
      (FuncE
        @anon-func-75.48
        Local
        Returns
        @Iter<Nat>
        (BlockE
          (VarD i Nat (LitE (NatLit 0)))
          (LetD (VarP l) (PrimE blob_size (VarE b)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat
              (IfE
                (PrimE (RelPrim Nat GeOp) (VarE! i) (VarE l))
                (LitE NullLit)
                (BlockE
                  (LetD (VarP j) (VarE! i))
                  (LetD
                    WildP
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE OptPrim (VarE j))
                )
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat})
        )
      )
    )
  )
  (LetD
    (VarP @blob_get)
    (FuncE
      @blob_get
      Local
      Returns
      (params b)
      Nat -> Nat8
      (FuncE
        @anon-func-80.42
        Local
        Returns
        (params n)
        Nat8
        (PrimE IdxBlobPrim (VarE b) (VarE n))
      )
    )
  )
  (LetD
    (VarP @blob_vals)
    (FuncE
      @blob_vals
      Local
      Returns
      (params xs)
      () -> @Iter<Nat8>
      (FuncE
        @anon-func-81.50
        Local
        Returns
        @Iter<Nat8>
        (BlockE
          (LetD (VarP i) (PrimE blob_vals_iter (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Nat8
              (IfE
                (PrimE blob_iter_done (VarE i))
                (LitE NullLit)
                (PrimE OptPrim (PrimE blob_iter_next (VarE i)))
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Nat8})
        )
      )
    )
  )
  (LetD
    (VarP @text_size)
    (FuncE
      @text_size
      Local
      Returns
      (params xs)
      () -> Nat
      (FuncE @anon-func-88.42 Local Returns Nat (PrimE text_len (VarE xs)))
    )
  )
  (LetD
    (VarP @text_chars)
    (FuncE
      @text_chars
      Local
      Returns
      (params xs)
      () -> @Iter<Char>
      (FuncE
        @anon-func-89.51
        Local
        Returns
        @Iter<Char>
        (BlockE
          (LetD (VarP i) (PrimE text_iter (VarE xs)))
          (LetD
            (VarP next)
            (FuncE
              next
              Local
              Returns
              ?Char
              (IfE
                (PrimE text_iter_done (VarE i))
                (LitE NullLit)
                (PrimE OptPrim (PrimE text_iter_next (VarE i)))
              )
            )
          )
          (NewObjE Object (next next) {next : () -> ?Char})
        )
      )
    )
  )
  (LetD
    (VarP @text_of_num)
    (FuncE
      @text_of_num
      Local
      Returns
      (params x base sep digits)
      Text
      (BlockE
        (VarD text Text (LitE (TextLit )))
        (VarD n Nat (VarE x))
        (LetD
          WildP
          (IfE
            (PrimE (RelPrim Nat EqOp) (VarE! n) (LitE (NatLit 0)))
            (PrimE RetPrim (LitE (TextLit 0)))
            (PrimE TupPrim)
          )
        )
        (VarD i Nat (LitE (NatLit 0)))
        (LetD
          WildP
          (LabelE
            $done/0
            ()
            (LoopE
              (IfE
                (PrimE (RelPrim Nat GtOp) (VarE! n) (LitE (NatLit 0)))
                (BlockE
                  (LetD
                    (VarP rem)
                    (PrimE (BinPrim Nat ModOp) (VarE! n) (VarE base))
                  )
                  (LetD
                    WildP
                    (IfE
                      (IfE
                        (PrimE (RelPrim Nat GtOp) (VarE sep) (LitE (NatLit 0)))
                        (PrimE (RelPrim Nat EqOp) (VarE! i) (VarE sep))
                        (LitE (BoolLit false))
                      )
                      (BlockE
                        (LetD
                          WildP
                          (AssignE
                            (VarLE text)
                            (PrimE
                              (BinPrim Text CatOp)
                              (LitE (TextLit _))
                              (VarE! text)
                            )
                          )
                        )
                        (AssignE (VarLE i) (LitE (NatLit 0)))
                      )
                      (PrimE TupPrim)
                    )
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE text)
                      (PrimE
                        (BinPrim Text CatOp)
                        (PrimE (CallPrim) (VarE digits) (VarE rem))
                        (VarE! text)
                      )
                    )
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE n)
                      (PrimE (BinPrim Nat DivOp) (VarE! n) (VarE base))
                    )
                  )
                  (AssignE
                    (VarLE i)
                    (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                  )
                )
                (PrimE (BreakPrim $done/0) (PrimE TupPrim))
              )
            )
          )
        )
        (VarE! text)
      )
    )
  )
  (LetD
    (VarP @left_pad)
    (FuncE
      @left_pad
      Local
      Returns
      (params pad char t)
      Text
      (IfE
        (PrimE (RelPrim Nat GtOp) (VarE pad) (PrimE text_len (VarE t)))
        (BlockE
          (VarD
            i
            Nat
            (PrimE (BinPrim Nat SubOp) (VarE pad) (PrimE text_len (VarE t)))
          )
          (VarD text Text (VarE t))
          (LetD
            WildP
            (LabelE
              $done/1
              ()
              (LoopE
                (IfE
                  (PrimE (RelPrim Nat GtOp) (VarE! i) (LitE (NatLit 0)))
                  (BlockE
                    (LetD
                      WildP
                      (AssignE
                        (VarLE text)
                        (PrimE (BinPrim Text CatOp) (VarE char) (VarE! text))
                      )
                    )
                    (AssignE
                      (VarLE i)
                      (PrimE (BinPrim Nat SubOp) (VarE! i) (LitE (NatLit 1)))
                    )
                  )
                  (PrimE (BreakPrim $done/1) (PrimE TupPrim))
                )
              )
            )
          )
          (VarE! text)
        )
        (VarE t)
      )
    )
  )
  (LetD
    (VarP @digits_dec)
    (FuncE
      @digits_dec
      Local
      Returns
      (params x)
      Text
      (PrimE
        conv_Char_Text
        (PrimE
          (NumConvTrapPrim Nat32 Char)
          (PrimE
            (NumConvWrapPrim Int Nat32)
            (PrimE (BinPrim Int AddOp) (VarE x) (LitE (IntLit 48)))
          )
        )
      )
    )
  )
  (LetD
    (VarP @text_of_Nat)
    (FuncE
      @text_of_Nat
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_num)
        (PrimE
          TupPrim
          (VarE x)
          (LitE (NatLit 10))
          (LitE (NatLit 3))
          (VarE @digits_dec)
        )
      )
    )
  )
  (LetD
    (VarP @text_of_Int)
    (FuncE
      @text_of_Int
      Local
      Returns
      (params x)
      Text
      (IfE
        (PrimE (RelPrim Int EqOp) (VarE x) (LitE (IntLit 0)))
        (LitE (TextLit 0))
        (PrimE
          (BinPrim Text CatOp)
          (IfE
            (PrimE (RelPrim Int LtOp) (VarE x) (LitE (IntLit 0)))
            (LitE (TextLit -))
            (LitE (TextLit +))
          )
          (PrimE (CallPrim) (VarE @text_of_Nat) (PrimE abs (VarE x)))
        )
      )
    )
  )
  (LetD
    (VarP @digits_hex)
    (FuncE
      @digits_hex
      Local
      Returns
      (params x)
      Text
      (PrimE
        conv_Char_Text
        (PrimE
          (NumConvTrapPrim Nat32 Char)
          (PrimE
            (NumConvWrapPrim Int Nat32)
            (PrimE
              (BinPrim Int AddOp)
              (VarE x)
              (IfE
                (PrimE (RelPrim Nat LtOp) (VarE x) (LitE (NatLit 10)))
                (LitE (IntLit 48))
                (LitE (IntLit 55))
              )
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @int64ToInt)
    (FuncE
      @int64ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int64 Int) (VarE n))
    )
  )
  (LetD
    (VarP @int32ToInt)
    (FuncE
      @int32ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int32 Int) (VarE n))
    )
  )
  (LetD
    (VarP @int16ToInt)
    (FuncE
      @int16ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int16 Int) (VarE n))
    )
  )
  (LetD
    (VarP @int8ToInt)
    (FuncE
      @int8ToInt
      Local
      Returns
      (params n)
      Int
      (PrimE (NumConvTrapPrim Int8 Int) (VarE n))
    )
  )
  (LetD
    (VarP @nat64ToNat)
    (FuncE
      @nat64ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat64 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @nat32ToNat)
    (FuncE
      @nat32ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat32 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @nat16ToNat)
    (FuncE
      @nat16ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat16 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @nat8ToNat)
    (FuncE
      @nat8ToNat
      Local
      Returns
      (params n)
      Nat
      (PrimE (NumConvTrapPrim Nat8 Nat) (VarE n))
    )
  )
  (LetD
    (VarP @text_of_Nat8)
    (FuncE
      @text_of_Nat8
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat8ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Nat16)
    (FuncE
      @text_of_Nat16
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat16ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Nat32)
    (FuncE
      @text_of_Nat32
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat32ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Nat64)
    (FuncE
      @text_of_Nat64
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Nat)
        (PrimE (CallPrim) (VarE @nat64ToNat) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int8)
    (FuncE
      @text_of_Int8
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int8ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int16)
    (FuncE
      @text_of_Int16
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int16ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int32)
    (FuncE
      @text_of_Int32
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int32ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Int64)
    (FuncE
      @text_of_Int64
      Local
      Returns
      (params x)
      Text
      (PrimE
        (CallPrim)
        (VarE @text_of_Int)
        (PrimE (CallPrim) (VarE @int64ToInt) (VarE x))
      )
    )
  )
  (LetD
    (VarP @text_of_Float)
    (FuncE
      @text_of_Float
      Local
      Returns
      (params x)
      Text
      (PrimE Float->Text (VarE x))
    )
  )
  (LetD
    (VarP @text_of_Bool)
    (FuncE
      @text_of_Bool
      Local
      Returns
      (params b)
      Text
      (IfE (VarE b) (LitE (TextLit true)) (LitE (TextLit false)))
    )
  )
  (LetD
    (VarP @text_of_Text)
    (FuncE
      @text_of_Text
      Local
      Returns
      (params t)
      Text
      (PrimE
        (BinPrim Text CatOp)
        (PrimE (BinPrim Text CatOp) (LitE (TextLit ")) (VarE t))
        (LitE (TextLit "))
      )
    )
  )
  (LetD
    (VarP @text_of_Char)
    (FuncE
      @text_of_Char
      Local
      Returns
      (params c)
      Text
      (PrimE
        (BinPrim Text CatOp)
        (PrimE
          (BinPrim Text CatOp)
          (LitE (TextLit '))
          (PrimE conv_Char_Text (VarE c))
        )
        (LitE (TextLit '))
      )
    )
  )
  (LetD
    (VarP @text_of_Blob)
    (FuncE
      @text_of_Blob
      Local
      Returns
      (params blob)
      Text
      (BlockE
        (VarD t Text (LitE (TextLit ")))
        (LetD
          WildP
          (BlockE
            (LetD
              (VarP $nxt/0)
              (PrimE
                (DotPrim next)
                (PrimE
                  (CallPrim)
                  (PrimE (CallPrim) (VarE @blob_vals) (VarE blob))
                  (PrimE TupPrim)
                )
              )
            )
            (LabelE
              $done/2
              ()
              (LoopE
                (SwitchE
                  (PrimE (CallPrim) (VarE $nxt/0) (PrimE TupPrim))
                  (case
                    (LitP NullLit)
                    (PrimE (BreakPrim $done/2) (PrimE TupPrim))
                  )
                  (case
                    (OptP (VarP b))
                    (AssignE
                      (VarLE t)
                      (PrimE
                        (BinPrim Text CatOp)
                        (VarE! t)
                        (PrimE
                          (BinPrim Text CatOp)
                          (LitE (TextLit \))
                          (PrimE
                            (CallPrim)
                            (VarE @left_pad)
                            (PrimE
                              TupPrim
                              (LitE (NatLit 2))
                              (LitE (TextLit 0))
                              (PrimE
                                (CallPrim)
                                (VarE @text_of_num)
                                (PrimE
                                  TupPrim
                                  (PrimE (CallPrim) (VarE @nat8ToNat) (VarE b))
                                  (LitE (NatLit 16))
                                  (LitE (NatLit 0))
                                  (VarE @digits_hex)
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          WildP
          (AssignE
            (VarLE t)
            (PrimE (BinPrim Text CatOp) (VarE! t) (LitE (TextLit ")))
          )
        )
        (PrimE RetPrim (VarE! t))
      )
    )
  )
  (LetD
    (VarP @text_has_parens)
    (FuncE
      @text_has_parens
      Local
      Returns
      (params t)
      Bool
      (SwitchE
        (PrimE
          (CallPrim)
          (PrimE
            (DotPrim next)
            (PrimE
              (CallPrim)
              (PrimE (CallPrim) (VarE @text_chars) (VarE t))
              (PrimE TupPrim)
            )
          )
          (PrimE TupPrim)
        )
        (case (OptP (LitP (CharLit 40))) (LitE (BoolLit true)))
        (case WildP (LitE (BoolLit false)))
      )
    )
  )
  (LetD
    (VarP @text_needs_parens)
    (FuncE
      @text_needs_parens
      Local
      Returns
      (params t)
      Bool
      (SwitchE
        (PrimE
          (CallPrim)
          (PrimE
            (DotPrim next)
            (PrimE
              (CallPrim)
              (PrimE (CallPrim) (VarE @text_chars) (VarE t))
              (PrimE TupPrim)
            )
          )
          (PrimE TupPrim)
        )
        (case
          (OptP
            (AltP
              (AltP
                (AltP (LitP (CharLit 43)) (LitP (CharLit 45)))
                (LitP (CharLit 63))
              )
              (LitP (CharLit 35))
            )
          )
          (LitE (BoolLit true))
        )
        (case WildP (LitE (BoolLit false)))
      )
    )
  )
  (LetD
    (VarP @text_of_option)
    (FuncE
      @text_of_option
      Local
      Returns
      (T Any)
      (params f x)
      Text
      (SwitchE
        (VarE x)
        (case
          (OptP (VarP y))
          (BlockE
            (LetD (VarP fy) (PrimE (CallPrim) (VarE f) (VarE y)))
            (IfE
              (PrimE (CallPrim) (VarE @text_needs_parens) (VarE fy))
              (PrimE
                (BinPrim Text CatOp)
                (PrimE (BinPrim Text CatOp) (LitE (TextLit ?()) (VarE fy))
                (LitE (TextLit )))
              )
              (PrimE (BinPrim Text CatOp) (LitE (TextLit ?)) (VarE fy))
            )
          )
        )
        (case (LitP NullLit) (LitE (TextLit null)))
      )
    )
  )
  (LetD
    (VarP @text_of_variant)
    (FuncE
      @text_of_variant
      Local
      Returns
      (T Any)
      (params l f x)
      Text
      (BlockE
        (LetD (VarP fx) (PrimE (CallPrim) (VarE f) (VarE x)))
        (IfE
          (PrimE (RelPrim Text EqOp) (VarE fx) (LitE (TextLit ())))
          (PrimE (BinPrim Text CatOp) (LitE (TextLit #)) (VarE l))
          (IfE
            (PrimE (CallPrim) (VarE @text_has_parens) (VarE fx))
            (PrimE
              (BinPrim Text CatOp)
              (PrimE (BinPrim Text CatOp) (LitE (TextLit #)) (VarE l))
              (VarE fx)
            )
            (PrimE
              (BinPrim Text CatOp)
              (PrimE
                (BinPrim Text CatOp)
                (PrimE
                  (BinPrim Text CatOp)
                  (PrimE (BinPrim Text CatOp) (LitE (TextLit #)) (VarE l))
                  (LitE (TextLit ())
                )
                (VarE fx)
              )
              (LitE (TextLit )))
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @text_of_array)
    (FuncE
      @text_of_array
      Local
      Returns
      (T Any)
      (params f xs)
      Text
      (BlockE
        (VarD text Text (LitE (TextLit [)))
        (VarD first Bool (LitE (BoolLit true)))
        (LetD
          WildP
          (BlockE
            (LetD (VarP $arr/0) (VarE xs))
            (LetD (VarP $last/0) (PrimE GetLastArrayOffset (VarE $arr/0)))
            (VarD $indx/0 Nat (LitE (NatLit 0)))
            (IfE
              (PrimE EqArrayOffset (VarE $last/0) (LitE (IntLit -1)))
              (PrimE TupPrim)
              (LabelE
                $done/3
                ()
                (LoopE
                  (BlockE
                    (LetD
                      (VarP x)
                      (PrimE DerefArrayOffset (VarE $arr/0) (VarE! $indx/0))
                    )
                    (LetD
                      WildP
                      (BlockE
                        (LetD
                          WildP
                          (IfE
                            (VarE! first)
                            (AssignE (VarLE first) (LitE (BoolLit false)))
                            (AssignE
                              (VarLE text)
                              (PrimE
                                (BinPrim Text CatOp)
                                (VarE! text)
                                (LitE (TextLit , ))
                              )
                            )
                          )
                        )
                        (AssignE
                          (VarLE text)
                          (PrimE
                            (BinPrim Text CatOp)
                            (VarE! text)
                            (PrimE (CallPrim) (VarE f) (VarE x))
                          )
                        )
                      )
                    )
                    (IfE
                      (PrimE EqArrayOffset (VarE! $indx/0) (VarE $last/0))
                      (PrimE (BreakPrim $done/3) (PrimE TupPrim))
                      (AssignE
                        (VarLE $indx/0)
                        (PrimE NextArrayOffset (VarE! $indx/0))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (PrimE (BinPrim Text CatOp) (VarE! text) (LitE (TextLit ])))
      )
    )
  )
  (LetD
    (VarP @text_of_array_mut)
    (FuncE
      @text_of_array_mut
      Local
      Returns
      (T Any)
      (params f xs)
      Text
      (BlockE
        (VarD text Text (LitE (TextLit [var)))
        (VarD first Bool (LitE (BoolLit true)))
        (LetD
          WildP
          (BlockE
            (LetD (VarP $arr/1) (VarE xs))
            (LetD (VarP $last/1) (PrimE GetLastArrayOffset (VarE $arr/1)))
            (VarD $indx/1 Nat (LitE (NatLit 0)))
            (IfE
              (PrimE EqArrayOffset (VarE $last/1) (LitE (IntLit -1)))
              (PrimE TupPrim)
              (LabelE
                $done/4
                ()
                (LoopE
                  (BlockE
                    (LetD
                      (VarP x)
                      (PrimE DerefArrayOffset (VarE $arr/1) (VarE! $indx/1))
                    )
                    (LetD
                      WildP
                      (BlockE
                        (LetD
                          WildP
                          (IfE
                            (VarE! first)
                            (BlockE
                              (LetD
                                WildP
                                (AssignE (VarLE first) (LitE (BoolLit false)))
                              )
                              (AssignE
                                (VarLE text)
                                (PrimE
                                  (BinPrim Text CatOp)
                                  (VarE! text)
                                  (LitE (TextLit  ))
                                )
                              )
                            )
                            (AssignE
                              (VarLE text)
                              (PrimE
                                (BinPrim Text CatOp)
                                (VarE! text)
                                (LitE (TextLit , ))
                              )
                            )
                          )
                        )
                        (AssignE
                          (VarLE text)
                          (PrimE
                            (BinPrim Text CatOp)
                            (VarE! text)
                            (PrimE (CallPrim) (VarE f) (VarE x))
                          )
                        )
                      )
                    )
                    (IfE
                      (PrimE EqArrayOffset (VarE! $indx/1) (VarE $last/1))
                      (PrimE (BreakPrim $done/4) (PrimE TupPrim))
                      (AssignE
                        (VarLE $indx/1)
                        (PrimE NextArrayOffset (VarE! $indx/1))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (PrimE (BinPrim Text CatOp) (VarE! text) (LitE (TextLit ])))
      )
    )
  )
  (LetD
    (VarP @equal_array)
    (FuncE
      @equal_array
      Local
      Returns
      (T Any)
      (params eq a b)
      Bool
      (BlockE
        (LetD
          WildP
          (IfE
            (PrimE
              (RelPrim Bool EqOp)
              (PrimE
                (RelPrim Nat EqOp)
                (PrimE array_len (VarE a))
                (PrimE array_len (VarE b))
              )
              (LitE (BoolLit false))
            )
            (PrimE RetPrim (LitE (BoolLit false)))
            (PrimE TupPrim)
          )
        )
        (VarD i Nat (LitE (NatLit 0)))
        (LetD (VarP s) (PrimE array_len (VarE a)))
        (LetD
          WildP
          (LabelE
            $done/5
            ()
            (LoopE
              (IfE
                (PrimE (RelPrim Nat LtOp) (VarE! i) (VarE s))
                (BlockE
                  (LetD
                    WildP
                    (IfE
                      (PrimE
                        (RelPrim Bool EqOp)
                        (PrimE
                          (CallPrim)
                          (VarE eq)
                          (PrimE
                            TupPrim
                            (PrimE IdxPrim (VarE a) (VarE! i))
                            (PrimE IdxPrim (VarE b) (VarE! i))
                          )
                        )
                        (LitE (BoolLit false))
                      )
                      (PrimE RetPrim (LitE (BoolLit false)))
                      (PrimE TupPrim)
                    )
                  )
                  (AssignE
                    (VarLE i)
                    (PrimE (BinPrim Nat AddOp) (VarE! i) (LitE (NatLit 1)))
                  )
                )
                (PrimE (BreakPrim $done/5) (PrimE TupPrim))
              )
            )
          )
        )
        (PrimE RetPrim (LitE (BoolLit true)))
      )
    )
  )
  (VarD @refund Nat (LitE (NatLit 0)))
  (LetD
    (VarP @reset_refund)
    (FuncE
      @reset_refund
      Local
      Returns
      ()
      (AssignE (VarLE @refund) (LitE (NatLit 0)))
    )
  )
  (LetD
    (VarP @getSystemRefund)
    (FuncE
      @getSystemRefund
      Local
      Returns
      @Refund
      (PrimE RetPrim (PrimE SystemCyclesRefundedPrim))
    )
  )
  (LetD (VarP @cleanup) (FuncE @cleanup Local Returns () (PrimE TupPrim)))
  (LetD
    (VarP @new_async)
    (FuncE
      @new_async
      Local
      Returns
      (T Any)
      (@Async<T>, @Cont<T>, @Cont<Error>, @CleanCont)
      (BlockE
        (LetD
          (VarP w_null)
          (FuncE
            @anon-func-293.16
            Local
            Returns
            (params r t)
            ()
            (PrimE TupPrim)
          )
        )
        (LetD
          (VarP r_null)
          (FuncE
            @anon-func-294.16
            Local
            Returns
            (params $ignored0/0)
            ()
            (PrimE TupPrim)
          )
        )
        (VarD result ?@Result<T> (LitE NullLit))
        (VarD ws (@Refund, T) -> () (VarE w_null))
        (VarD rs Error -> () (VarE r_null))
        (LetD
          (VarP getRefund)
          (PrimE
            (RelPrim Bool EqOp)
            (PrimE (RelPrim Nat EqOp) (VarE! @cycles) (LitE (NatLit 0)))
            (LitE (BoolLit false))
          )
        )
        (LetD
          (VarP fulfill)
          (FuncE
            fulfill
            Local
            Returns
            (params t)
            ()
            (SwitchE
              (VarE! result)
              (case
                (LitP NullLit)
                (BlockE
                  (LetD
                    (VarP refund)
                    (IfE
                      (VarE getRefund)
                      (PrimE (CallPrim) (VarE @getSystemRefund) (PrimE TupPrim))
                      (LitE (NatLit 0))
                    )
                  )
                  (LetD
                    WildP
                    (AssignE
                      (VarLE result)
                      (PrimE
                        OptPrim
                        (PrimE (TagE ok) (PrimE TupPrim (VarE refund) (VarE t)))
                      )
                    )
                  )
                  (LetD (VarP ws_) (VarE! ws))
                  (LetD WildP (AssignE (VarLE ws) (VarE w_null)))
                  (LetD WildP (AssignE (VarLE rs) (VarE r_null)))
                  (PrimE
                    (CallPrim)
                    (VarE ws_)
                    (PrimE TupPrim (VarE refund) (VarE t))
                  )
                )
              )
              (case (OptP WildP) (PrimE AssertPrim (LitE (BoolLit false))))
            )
          )
        )
        (LetD
          (VarP fail)
          (FuncE
            fail
            Local
            Returns
            (params e)
            ()
            (SwitchE
              (VarE! result)
              (case
                (LitP NullLit)
                (BlockE
                  (LetD
                    WildP
                    (AssignE
                      (VarLE result)
                      (PrimE OptPrim (PrimE (TagE error) (VarE e)))
                    )
                  )
                  (LetD (VarP rs_) (VarE! rs))
                  (LetD WildP (AssignE (VarLE ws) (VarE w_null)))
                  (LetD WildP (AssignE (VarLE rs) (VarE r_null)))
                  (PrimE (CallPrim) (VarE rs_) (VarE e))
                )
              )
              (case (OptP WildP) (PrimE AssertPrim (LitE (BoolLit false))))
            )
          )
        )
        (VarD cleanup () -> () (VarE @cleanup))
        (LetD
          (VarP enqueue)
          (FuncE
            enqueue
            Local
            Returns
            (params k r b)
            {#schedule : () -> (); #suspend}
            (BlockE
              (LetD WildP (AssignE (VarLE cleanup) (VarE b)))
              (SwitchE
                (VarE! result)
                (case
                  (LitP NullLit)
                  (BlockE
                    (LetD (VarP ws_) (VarE! ws))
                    (LetD
                      WildP
                      (AssignE
                        (VarLE ws)
                        (FuncE
                          @anon-func-337.15
                          Local
                          Returns
                          (params r t)
                          ()
                          (BlockE
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE ws_)
                                (PrimE TupPrim (VarE r) (VarE t))
                              )
                            )
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE @reset_cycles)
                                (PrimE TupPrim)
                              )
                            )
                            (LetD WildP (AssignE (VarLE @refund) (VarE r)))
                            (PrimE (CallPrim) (VarE k) (VarE t))
                          )
                        )
                      )
                    )
                    (LetD (VarP rs_) (VarE! rs))
                    (LetD
                      WildP
                      (AssignE
                        (VarLE rs)
                        (FuncE
                          @anon-func-344.15
                          Local
                          Returns
                          (params e)
                          ()
                          (BlockE
                            (LetD WildP (PrimE (CallPrim) (VarE rs_) (VarE e)))
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE @reset_cycles)
                                (PrimE TupPrim)
                              )
                            )
                            (LetD
                              WildP
                              (PrimE
                                (CallPrim)
                                (VarE @reset_refund)
                                (PrimE TupPrim)
                              )
                            )
                            (PrimE (CallPrim) (VarE r) (VarE e))
                          )
                        )
                      )
                    )
                    (PrimE (TagE suspend) (PrimE TupPrim))
                  )
                )
                (case
                  (OptP (TagP ok (TupP (VarP r) (VarP t))))
                  (PrimE
                    (TagE schedule)
                    (FuncE
                      @anon-func-353.19
                      Local
                      Returns
                      ()
                      (BlockE
                        (LetD WildP (AssignE (VarLE @refund) (VarE r)))
                        (PrimE (CallPrim) (VarE k) (VarE t))
                      )
                    )
                  )
                )
                (case
                  (OptP (TagP error (VarP e)))
                  (PrimE
                    (TagE schedule)
                    (FuncE
                      @anon-func-356.19
                      Local
                      Returns
                      ()
                      (PrimE (CallPrim) (VarE r) (VarE e))
                    )
                  )
                )
              )
            )
          )
        )
        (PrimE
          TupPrim
          (VarE enqueue)
          (VarE fulfill)
          (VarE fail)
          (FuncE
            @anon-func-361.28
            Local
            Returns
            ()
            (PrimE (CallPrim) (VarE! cleanup) (PrimE TupPrim))
          )
        )
      )
    )
  )
  (LetD (VarP @ManagementCanister) (NewObjE Module module {}))
  (LetD
    (VarP @ic00)
    (PrimE
      (ActorOfIdBlob
        actor {create_canister : shared <system>{sender_canister_version : ?Nat64; settings : ?canister_settings} -> replies {canister_id : Principal}; install_code : shared <system>{arg : Blob; canister_id : Principal; mode : {#install; #reinstall; #upgrade : ?@UpgradeOptions}; sender_canister_version : ?Nat64; wasm_module : wasm_module} -> replies ()}
      )
      (PrimE BlobOfIcUrl (LitE (TextLit aaaaa-aa)))
    )
  )
  (LetD
    (VarP @install_actor_helper)
    (FuncE
      @install_actor_helper
      Local
      Returns
      ($ Any)
      (params install_arg enhanced_orthogonal_persistence wasm_module arg)
      (Principal -> (), Error -> (), () -> ()) -> ()
      (FuncE
        $lambda
        Local
        Returns
        (params $v/33 $e/1 $c/0)
        ()
        (PrimE
          (CallPrim $)
          (FuncE
            $lambda
            Local
            Returns
            ($@anon-async*-416.24 Any)
            (params $k/0 $r/0 $b/0)
            ()
            (DeclareE
              $mode/1
              (DeclareE
                $canister_id/0
                (BlockE
                  (LetD
                    (VarP $k/2)
                    (FuncE
                      $k/2
                      Local
                      Returns
                      (params $param0/0 $param1/0)
                      ()
                      (BlockE
                        (LetD
                          (VarP $v/3)
                          (PrimE TupPrim (VarE $param0/0) (VarE $param1/0))
                        )
                        (BlockE
                          (LetD (TupP (VarP $v/1) (VarP $v/2)) (VarE $v/3))
                          (LetD WildP (DefineE $mode/1 Const (VarE $v/1)))
                          (LetD
                            WildP
                            (DefineE $canister_id/0 Const (VarE $v/2))
                          )
                          (BlockE
                            (LetD (VarP $u/0) (PrimE TupPrim))
                            (BlockE
                              (LetD
                                (VarP $k/1)
                                (FuncE
                                  $k/1
                                  Local
                                  Returns
                                  ()
                                  (BlockE
                                    (LetD (VarP $v/4) (PrimE TupPrim))
                                    (BlockE
                                      (LetD WildP (VarE $v/4))
                                      (BlockE
                                        (LetD (VarP $u/1) (PrimE TupPrim))
                                        (BlockE
                                          (LetD (VarP $u/2) (PrimE TupPrim))
                                          (PrimE
                                            (CallPrim)
                                            (VarE $k/0)
                                            (PrimE
                                              RetPrim
                                              (PrimE
                                                (CallPrim)
                                                (VarE $k/0)
                                                (VarE $canister_id/0)
                                              )
                                            )
                                          )
                                        )
                                      )
                                    )
                                  )
                                )
                              )
                              (BlockE
                                (LetD
                                  (VarP $v/5)
                                  (PrimE
                                    (ActorDotPrim install_code)
                                    (VarE @ic00)
                                  )
                                )
                                (BlockE
                                  (LetD
                                    (VarP $u/3)
                                    (BlockE
                                      (LetD
                                        (TupP
                                          (VarP $async/3)
                                          (VarP $reply/1)
                                          (VarP $reject/1)
                                          (VarP $cleanup/1)
                                        )
                                        (BlockE
                                          (LetD
                                            (TupP
                                              (VarP $async/2)
                                              (VarP $fulfill/1)
                                              (VarP $fail/1)
                                              (VarP $clean/1)
                                            )
                                            (PrimE
                                              (CallPrim ())
                                              (VarE @new_async)
                                              (PrimE TupPrim)
                                            )
                                          )
                                          (PrimE
                                            TupPrim
                                            (FuncE
                                              $lambda
                                              Local
                                              Returns
                                              (params $k/10 $r/5 $b/4)
                                              {#schedule : () -> (); #suspend}
                                              (PrimE
                                                (CallPrim)
                                                (VarE $async/2)
                                                (PrimE
                                                  TupPrim
                                                  (FuncE
                                                    $lambda
                                                    Local
                                                    Returns
                                                    (params $v/36)
                                                    ()
                                                    (PrimE
                                                      (CallPrim)
                                                      (VarE $k/10)
                                                      (VarE $v/36)
                                                    )
                                                  )
                                                  (VarE $r/5)
                                                  (VarE $b/4)
                                                )
                                              )
                                            )
                                            (FuncE
                                              $lambda
                                              Local
                                              Returns
                                              ()
                                              (PrimE
                                                (CallPrim)
                                                (VarE $fulfill/1)
                                                (PrimE TupPrim)
                                              )
                                            )
                                            (VarE $fail/1)
                                            (VarE $clean/1)
                                          )
                                        )
                                      )
                                      (LetD
                                        (VarP $x/2)
                                        (BlockE
                                          (LetD
                                            (VarP $$sender_canister_version/0/0)
                                            (PrimE
                                              OptPrim
                                              (PrimE canister_version)
                                            )
                                          )
                                          (NewObjE
                                            Object
                                            (sender_canister_version
                                              $$sender_canister_version/0/0
                                            )
                                            (arg arg)
                                            (wasm_module wasm_module)
                                            (canister_id $canister_id/0)
                                            (mode $mode/1)
                                            {arg : Blob; canister_id : Principal; mode : {#install; #reinstall; #upgrade : ?@UpgradeOptions}; sender_canister_version : ?Nat64; wasm_module : wasm_module}
                                          )
                                        )
                                      )
                                      (LetD
                                        WildP
                                        (PrimE
                                          ICCallPrim
                                          (VarE $v/5)
                                          (VarE $x/2)
                                          (VarE $reply/1)
                                          (VarE $reject/1)
                                          (VarE $cleanup/1)
                                        )
                                      )
                                      (VarE $async/3)
                                    )
                                  )
                                  (IfE
                                    (PrimE
                                      (CallPrim)
                                      (VarE @call_succeeded)
                                      (PrimE TupPrim)
                                    )
                                    (BlockE
                                      (LetD
                                        (VarP $v/35)
                                        (PrimE
                                          TupPrim
                                          (VarE $k/1)
                                          (VarE $r/0)
                                          (VarE $b/0)
                                        )
                                      )
                                      (SwitchE
                                        (PrimE
                                          (CallPrim)
                                          (VarE $u/3)
                                          (VarE $v/35)
                                        )
                                        (case
                                          (TagP suspend WildP)
                                          (PrimE TupPrim)
                                        )
                                        (case
                                          (TagP schedule (VarP $schedule/1))
                                          (BlockE
                                            (LetD
                                              (VarP $call/1)
                                              (SelfCallE
                                                ()
                                                (PrimE
                                                  (ICReplyPrim)
                                                  (PrimE TupPrim)
                                                )
                                                (VarE $schedule/1)
                                                (PrimE
                                                  (ProjPrim 1)
                                                  (VarE $v/35)
                                                )
                                                (FuncE
                                                  $lambda
                                                  Local
                                                  Returns
                                                  ()
                                                  (PrimE
                                                    (CallPrim)
                                                    (PrimE
                                                      (ProjPrim 2)
                                                      (VarE $v/35)
                                                    )
                                                    (PrimE TupPrim)
                                                  )
                                                )
                                              )
                                            )
                                            (IfE
                                              (PrimE
                                                (CallPrim)
                                                (VarE @call_succeeded)
                                                (PrimE TupPrim)
                                              )
                                              (VarE $call/1)
                                              (PrimE
                                                (CallPrim)
                                                (PrimE
                                                  (ProjPrim 1)
                                                  (VarE $v/35)
                                                )
                                                (PrimE
                                                  (CallPrim)
                                                  (VarE @call_error)
                                                  (PrimE TupPrim)
                                                )
                                              )
                                            )
                                          )
                                        )
                                      )
                                    )
                                    (PrimE
                                      (CallPrim)
                                      (VarE $r/0)
                                      (PrimE
                                        (CallPrim)
                                        (VarE @call_error)
                                        (PrimE TupPrim)
                                      )
                                    )
                                  )
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                  (SwitchE
                    (VarE install_arg)
                    (case
                      (TagP new (VarP $settings/2))
                      (DeclareE
                        $available/0
                        (DeclareE
                          $accepted/0
                          (DeclareE
                            $sender_canister_version/2
                            (DeclareE
                              $canister_id/1
                              (BlockE
                                (LetD
                                  (VarP $v/6)
                                  (PrimE SystemCyclesAvailablePrim)
                                )
                                (LetD
                                  WildP
                                  (DefineE $available/0 Const (VarE $v/6))
                                )
                                (BlockE
                                  (LetD (VarP $u/4) (PrimE TupPrim))
                                  (BlockE
                                    (LetD
                                      (VarP $v/7)
                                      (PrimE
                                        SystemCyclesAcceptPrim
                                        (VarE $available/0)
                                      )
                                    )
                                    (LetD
                                      WildP
                                      (DefineE $accepted/0 Const (VarE $v/7))
                                    )
                                    (BlockE
                                      (LetD (VarP $u/5) (PrimE TupPrim))
                                      (BlockE
                                        (LetD
                                          (VarP $v/8)
                                          (PrimE
                                            OptPrim
                                            (PrimE canister_version)
                                          )
                                        )
                                        (LetD
                                          WildP
                                          (DefineE
                                            $sender_canister_version/2
                                            Const
                                            (VarE $v/8)
                                          )
                                        )
                                        (BlockE
                                          (LetD (VarP $u/6) (PrimE TupPrim))
                                          (BlockE
                                            (LetD
                                              WildP
                                              (AssignE
                                                (VarLE @cycles)
                                                (PrimE
                                                  (BinPrim Nat AddOp)
                                                  (VarE! @cycles)
                                                  (VarE $accepted/0)
                                                )
                                              )
                                            )
                                            (BlockE
                                              (LetD (VarP $u/7) (PrimE TupPrim))
                                              (BlockE
                                                (LetD
                                                  (VarP $k/3)
                                                  (FuncE
                                                    $k/3
                                                    Local
                                                    Returns
                                                    (params $v/10)
                                                    ()
                                                    (BlockE
                                                      (LetD
                                                        (ObjP
                                                          (canister_id
                                                            (VarP $v/9)
                                                          )
                                                        )
                                                        (VarE $v/10)
                                                      )
                                                      (LetD
                                                        WildP
                                                        (DefineE
                                                          $canister_id/1
                                                          Const
                                                          (VarE $v/9)
                                                        )
                                                      )
                                                      (BlockE
                                                        (LetD
                                                          (VarP $u/8)
                                                          (PrimE TupPrim)
                                                        )
                                                        (BlockE
                                                          (LetD
                                                            (VarP $u/9)
                                                            (PrimE TupPrim)
                                                          )
                                                          (PrimE
                                                            (CallPrim)
                                                            (VarE $k/2)
                                                            (PrimE
                                                              TupPrim
                                                              (PrimE
                                                                (TagE install)
                                                                (PrimE TupPrim)
                                                              )
                                                              (VarE
                                                                $canister_id/1
                                                              )
                                                            )
                                                          )
                                                        )
                                                      )
                                                    )
                                                  )
                                                )
                                                (BlockE
                                                  (LetD
                                                    (VarP $v/11)
                                                    (PrimE
                                                      (ActorDotPrim
                                                        create_canister
                                                      )
                                                      (VarE @ic00)
                                                    )
                                                  )
                                                  (BlockE
                                                    (LetD
                                                      (VarP $u/10)
                                                      (BlockE
                                                        (LetD
                                                          (TupP
                                                            (VarP $async/1)
                                                            (VarP $reply/0)
                                                            (VarP $reject/0)
                                                            (VarP $cleanup/0)
                                                          )
                                                          (BlockE
                                                            (LetD
                                                              (TupP
                                                                (VarP $async/0)
                                                                (VarP
                                                                  $fulfill/0
                                                                )
                                                                (VarP $fail/0)
                                                                (VarP $clean/0)
                                                              )
                                                              (PrimE
                                                                (CallPrim
                                                                  {canister_id : Principal}
                                                                )
                                                                (VarE
                                                                  @new_async
                                                                )
                                                                (PrimE TupPrim)
                                                              )
                                                            )
                                                            (PrimE
                                                              TupPrim
                                                              (VarE $async/0)
                                                              (FuncE
                                                                $lambda
                                                                Local
                                                                Returns
                                                                (params $rep0/0)
                                                                ()
                                                                (PrimE
                                                                  (CallPrim)
                                                                  (VarE
                                                                    $fulfill/0
                                                                  )
                                                                  (VarE $rep0/0)
                                                                )
                                                              )
                                                              (VarE $fail/0)
                                                              (VarE $clean/0)
                                                            )
                                                          )
                                                        )
                                                        (LetD
                                                          (VarP $x/1)
                                                          (BlockE
                                                            (LetD
                                                              (VarP $$base/0/0)
                                                              (VarE $settings/2)
                                                            )
                                                            (LetD
                                                              (VarP
                                                                $$settings/0/0
                                                              )
                                                              (PrimE
                                                                (DotPrim
                                                                  settings
                                                                )
                                                                (VarE
                                                                  $$base/0/0
                                                                )
                                                              )
                                                            )
                                                            (NewObjE
                                                              Object
                                                              (settings
                                                                $$settings/0/0
                                                              )
                                                              (sender_canister_version
                                                                $sender_canister_version/2
                                                              )
                                                              {sender_canister_version : ?Nat64; settings : ?canister_settings}
                                                            )
                                                          )
                                                        )
                                                        (LetD
                                                          WildP
                                                          (PrimE
                                                            ICCallPrim
                                                            (VarE $v/11)
                                                            (VarE $x/1)
                                                            (VarE $reply/0)
                                                            (VarE $reject/0)
                                                            (VarE $cleanup/0)
                                                          )
                                                        )
                                                        (VarE $async/1)
                                                      )
                                                    )
                                                    (IfE
                                                      (PrimE
                                                        (CallPrim)
                                                        (VarE @call_succeeded)
                                                        (PrimE TupPrim)
                                                      )
                                                      (BlockE
                                                        (LetD
                                                          (VarP $v/34)
                                                          (PrimE
                                                            TupPrim
                                                            (VarE $k/3)
                                                            (VarE $r/0)
                                                            (VarE $b/0)
                                                          )
                                                        )
                                                        (SwitchE
                                                          (PrimE
                                                            (CallPrim)
                                                            (VarE $u/10)
                                                            (VarE $v/34)
                                                          )
                                                          (case
                                                            (TagP suspend WildP)
                                                            (PrimE TupPrim)
                                                          )
                                                          (case
                                                            (TagP
                                                              schedule
                                                              (VarP $schedule/0)
                                                            )
                                                            (BlockE
                                                              (LetD
                                                                (VarP $call/0)
                                                                (SelfCallE
                                                                  ()
                                                                  (PrimE
                                                                    (ICReplyPrim
                                                                    )
                                                                    (PrimE
                                                                      TupPrim
                                                                    )
                                                                  )
                                                                  (VarE
                                                                    $schedule/0
                                                                  )
                                                                  (PrimE
                                                                    (ProjPrim 1)
                                                                    (VarE $v/34)
                                                                  )
                                                                  (FuncE
                                                                    $lambda
                                                                    Local
                                                                    Returns
                                                                    ()
                                                                    (PrimE
                                                                      (CallPrim)
                                                                      (PrimE
                                                                        (ProjPrim
                                                                          2
                                                                        )
                                                                        (VarE
                                                                          $v/34
                                                                        )
                                                                      )
                                                                      (PrimE
                                                                        TupPrim
                                                                      )
                                                                    )
                                                                  )
                                                                )
                                                              )
                                                              (IfE
                                                                (PrimE
                                                                  (CallPrim)
                                                                  (VarE
                                                                    @call_succeeded
                                                                  )
                                                                  (PrimE
                                                                    TupPrim
                                                                  )
                                                                )
                                                                (VarE $call/0)
                                                                (PrimE
                                                                  (CallPrim)
                                                                  (PrimE
                                                                    (ProjPrim 1)
                                                                    (VarE $v/34)
                                                                  )
                                                                  (PrimE
                                                                    (CallPrim)
                                                                    (VarE
                                                                      @call_error
                                                                    )
                                                                    (PrimE
                                                                      TupPrim
                                                                    )
                                                                  )
                                                                )
                                                              )
                                                            )
                                                          )
                                                        )
                                                      )
                                                      (PrimE
                                                        (CallPrim)
                                                        (VarE $r/0)
                                                        (PrimE
                                                          (CallPrim)
                                                          (VarE @call_error)
                                                          (PrimE TupPrim)
                                                        )
                                                      )
                                                    )
                                                  )
                                                )
                                              )
                                            )
                                          )
                                        )
                                      )
                                    )
                                  )
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                    (case
                      (TagP install (VarP $principal1/0))
                      (PrimE
                        (CallPrim)
                        (VarE $k/2)
                        (PrimE
                          TupPrim
                          (PrimE (TagE install) (PrimE TupPrim))
                          (VarE $principal1/0)
                        )
                      )
                    )
                    (case
                      (TagP reinstall (VarP $actor1/0))
                      (PrimE
                        (CallPrim)
                        (VarE $k/2)
                        (PrimE
                          TupPrim
                          (PrimE (TagE reinstall) (PrimE TupPrim))
                          (PrimE principalOfActor (VarE $actor1/0))
                        )
                      )
                    )
                    (case
                      (TagP upgrade (VarP $actor2/0))
                      (PrimE
                        (CallPrim)
                        (VarE $k/2)
                        (BlockE
                          (LetD
                            (VarP $wasm_memory_persistence/1)
                            (IfE
                              (VarE enhanced_orthogonal_persistence)
                              (PrimE
                                OptPrim
                                (PrimE (TagE keep) (PrimE TupPrim))
                              )
                              (LitE NullLit)
                            )
                          )
                          (LetD
                            (VarP $upgradeOptions/0)
                            (NewObjE
                              Object
                              (wasm_memory_persistence
                                $wasm_memory_persistence/1
                              )
                              {wasm_memory_persistence : ?{#keep}}
                            )
                          )
                          (PrimE
                            TupPrim
                            (PrimE
                              (TagE upgrade)
                              (PrimE OptPrim (VarE $upgradeOptions/0))
                            )
                            (PrimE principalOfActor (VarE $actor2/0))
                          )
                        )
                      )
                    )
                    (case
                      (TagP
                        upgrade_with_persistence
                        (ObjP
                          (wasm_memory_persistence
                            (VarP $wasm_memory_persistence/2)
                          )
                          (canister (VarP $canister/0))
                        )
                      )
                      (PrimE
                        (CallPrim)
                        (VarE $k/2)
                        (BlockE
                          (LetD
                            (VarP $upgradeOptions/1)
                            (BlockE
                              (LetD
                                (VarP $$wasm_memory_persistence/0/0)
                                (PrimE
                                  OptPrim
                                  (VarE $wasm_memory_persistence/2)
                                )
                              )
                              (NewObjE
                                Object
                                (wasm_memory_persistence
                                  $$wasm_memory_persistence/0/0
                                )
                                {wasm_memory_persistence : ?{#keep; #replace}}
                              )
                            )
                          )
                          (PrimE
                            TupPrim
                            (PrimE
                              (TagE upgrade)
                              (PrimE OptPrim (VarE $upgradeOptions/1))
                            )
                            (PrimE principalOfActor (VarE $canister/0))
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
          (PrimE TupPrim (VarE $v/33) (VarE $e/1) (VarE $c/0))
        )
      )
    )
  )
  (LetD
    (VarP @create_actor_helper)
    (FuncE
      @create_actor_helper
      Local
      Returns
      ($ Any)
      (params wasm_module arg)
      (Principal -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}
      (BlockE
        (LetD
          (TupP
            (VarP $async/5)
            (VarP $reply/2)
            (VarP $reject/2)
            (VarP $cleanup/2)
          )
          (BlockE
            (LetD
              (TupP
                (VarP $async/4)
                (VarP $fulfill/2)
                (VarP $fail/2)
                (VarP $clean/2)
              )
              (PrimE (CallPrim Principal) (VarE @new_async) (PrimE TupPrim))
            )
            (PrimE
              TupPrim
              (VarE $async/4)
              (FuncE
                $lambda
                Local
                Returns
                (params $rep0/1)
                ()
                (PrimE (CallPrim) (VarE $fulfill/2) (VarE $rep0/1))
              )
              (VarE $fail/2)
              (VarE $clean/2)
            )
          )
        )
        (LetD
          WildP
          (SelfCallE
            Principal
            (PrimE
              (CallPrim $)
              (FuncE
                $lambda
                Local
                Returns
                ($@anon-async-464.79 Any)
                (params $k/4 $r/1 $b/1)
                ()
                (DeclareE
                  $available/1
                  (DeclareE
                    $accepted/1
                    (DeclareE
                      $sender_canister_version/3
                      (DeclareE
                        $canister_id/2
                        (BlockE
                          (LetD (VarP $v/12) (PrimE SystemCyclesAvailablePrim))
                          (LetD WildP (DefineE $available/1 Const (VarE $v/12)))
                          (BlockE
                            (LetD (VarP $u/11) (PrimE TupPrim))
                            (BlockE
                              (LetD
                                (VarP $v/13)
                                (PrimE
                                  SystemCyclesAcceptPrim
                                  (VarE $available/1)
                                )
                              )
                              (LetD
                                WildP
                                (DefineE $accepted/1 Const (VarE $v/13))
                              )
                              (BlockE
                                (LetD (VarP $u/12) (PrimE TupPrim))
                                (BlockE
                                  (LetD
                                    (VarP $v/14)
                                    (PrimE OptPrim (PrimE canister_version))
                                  )
                                  (LetD
                                    WildP
                                    (DefineE
                                      $sender_canister_version/3
                                      Const
                                      (VarE $v/14)
                                    )
                                  )
                                  (BlockE
                                    (LetD (VarP $u/13) (PrimE TupPrim))
                                    (BlockE
                                      (LetD
                                        WildP
                                        (AssignE
                                          (VarLE @cycles)
                                          (PrimE
                                            (BinPrim Nat AddOp)
                                            (VarE! @cycles)
                                            (VarE $accepted/1)
                                          )
                                        )
                                      )
                                      (BlockE
                                        (LetD (VarP $u/14) (PrimE TupPrim))
                                        (BlockE
                                          (LetD
                                            (VarP $k/6)
                                            (FuncE
                                              $k/6
                                              Local
                                              Returns
                                              (params $v/16)
                                              ()
                                              (BlockE
                                                (LetD
                                                  (ObjP
                                                    (canister_id (VarP $v/15))
                                                  )
                                                  (VarE $v/16)
                                                )
                                                (LetD
                                                  WildP
                                                  (DefineE
                                                    $canister_id/2
                                                    Const
                                                    (VarE $v/15)
                                                  )
                                                )
                                                (BlockE
                                                  (LetD
                                                    (VarP $u/15)
                                                    (PrimE TupPrim)
                                                  )
                                                  (BlockE
                                                    (LetD
                                                      (VarP $k/5)
                                                      (FuncE
                                                        $k/5
                                                        Local
                                                        Returns
                                                        ()
                                                        (BlockE
                                                          (LetD
                                                            (VarP $v/17)
                                                            (PrimE TupPrim)
                                                          )
                                                          (BlockE
                                                            (LetD
                                                              WildP
                                                              (VarE $v/17)
                                                            )
                                                            (BlockE
                                                              (LetD
                                                                (VarP $u/16)
                                                                (PrimE TupPrim)
                                                              )
                                                              (BlockE
                                                                (LetD
                                                                  (VarP $u/17)
                                                                  (PrimE
                                                                    TupPrim
                                                                  )
                                                                )
                                                                (PrimE
                                                                  (CallPrim)
                                                                  (VarE $k/4)
                                                                  (PrimE
                                                                    RetPrim
                                                                    (PrimE
                                                                      (CallPrim)
                                                                      (VarE
                                                                        $k/4
                                                                      )
                                                                      (VarE
                                                                        $canister_id/2
                                                                      )
                                                                    )
                                                                  )
                                                                )
                                                              )
                                                            )
                                                          )
                                                        )
                                                      )
                                                    )
                                                    (BlockE
                                                      (LetD
                                                        (VarP $v/18)
                                                        (PrimE
                                                          (ActorDotPrim
                                                            install_code
                                                          )
                                                          (VarE @ic00)
                                                        )
                                                      )
                                                      (BlockE
                                                        (LetD
                                                          (VarP $u/18)
                                                          (BlockE
                                                            (LetD
                                                              (TupP
                                                                (VarP $async/9)
                                                                (VarP $reply/4)
                                                                (VarP $reject/4)
                                                                (VarP
                                                                  $cleanup/4
                                                                )
                                                              )
                                                              (BlockE
                                                                (LetD
                                                                  (TupP
                                                                    (VarP
                                                                      $async/8
                                                                    )
                                                                    (VarP
                                                                      $fulfill/4
                                                                    )
                                                                    (VarP
                                                                      $fail/4
                                                                    )
                                                                    (VarP
                                                                      $clean/4
                                                                    )
                                                                  )
                                                                  (PrimE
                                                                    (CallPrim
                                                                      ()
                                                                    )
                                                                    (VarE
                                                                      @new_async
                                                                    )
                                                                    (PrimE
                                                                      TupPrim
                                                                    )
                                                                  )
                                                                )
                                                                (PrimE
                                                                  TupPrim
                                                                  (FuncE
                                                                    $lambda
                                                                    Local
                                                                    Returns
                                                                    (params
                                                                      $k/11
                                                                      $r/6
                                                                      $b/5
                                                                    )
                                                                    {#schedule : () -> (); #suspend}
                                                                    (PrimE
                                                                      (CallPrim)
                                                                      (VarE
                                                                        $async/8
                                                                      )
                                                                      (PrimE
                                                                        TupPrim
                                                                        (FuncE
                                                                          $lambda
                                                                          Local
                                                                          Returns
                                                                          (params
                                                                            $v/40
                                                                          )
                                                                          ()
                                                                          (PrimE
                                                                            (CallPrim
                                                                            )
                                                                            (VarE
                                                                              $k/11
                                                                            )
                                                                            (VarE
                                                                              $v/40
                                                                            )
                                                                          )
                                                                        )
                                                                        (VarE
                                                                          $r/6
                                                                        )
                                                                        (VarE
                                                                          $b/5
                                                                        )
                                                                      )
                                                                    )
                                                                  )
                                                                  (FuncE
                                                                    $lambda
                                                                    Local
                                                                    Returns
                                                                    ()
                                                                    (PrimE
                                                                      (CallPrim)
                                                                      (VarE
                                                                        $fulfill/4
                                                                      )
                                                                      (PrimE
                                                                        TupPrim
                                                                      )
                                                                    )
                                                                  )
                                                                  (VarE $fail/4)
                                                                  (VarE
                                                                    $clean/4
                                                                  )
                                                                )
                                                              )
                                                            )
                                                            (LetD
                                                              (VarP $x/4)
                                                              (BlockE
                                                                (LetD
                                                                  (VarP
                                                                    $$mode/0/0
                                                                  )
                                                                  (PrimE
                                                                    (TagE
                                                                      install
                                                                    )
                                                                    (PrimE
                                                                      TupPrim
                                                                    )
                                                                  )
                                                                )
                                                                (LetD
                                                                  (VarP
                                                                    $$sender_canister_version/1/0
                                                                  )
                                                                  (PrimE
                                                                    OptPrim
                                                                    (PrimE
                                                                      canister_version
                                                                    )
                                                                  )
                                                                )
                                                                (NewObjE
                                                                  Object
                                                                  (sender_canister_version
                                                                    $$sender_canister_version/1/0
                                                                  )
                                                                  (arg arg)
                                                                  (wasm_module
                                                                    wasm_module
                                                                  )
                                                                  (canister_id
                                                                    $canister_id/2
                                                                  )
                                                                  (mode
                                                                    $$mode/0/0
                                                                  )
                                                                  {arg : Blob; canister_id : Principal; mode : {#install; #reinstall; #upgrade : ?@UpgradeOptions}; sender_canister_version : ?Nat64; wasm_module : wasm_module}
                                                                )
                                                              )
                                                            )
                                                            (LetD
                                                              WildP
                                                              (PrimE
                                                                ICCallPrim
                                                                (VarE $v/18)
                                                                (VarE $x/4)
                                                                (VarE $reply/4)
                                                                (VarE $reject/4)
                                                                (VarE
                                                                  $cleanup/4
                                                                )
                                                              )
                                                            )
                                                            (VarE $async/9)
                                                          )
                                                        )
                                                        (IfE
                                                          (PrimE
                                                            (CallPrim)
                                                            (VarE
                                                              @call_succeeded
                                                            )
                                                            (PrimE TupPrim)
                                                          )
                                                          (BlockE
                                                            (LetD
                                                              (VarP $v/39)
                                                              (PrimE
                                                                TupPrim
                                                                (VarE $k/5)
                                                                (VarE $r/1)
                                                                (VarE $b/1)
                                                              )
                                                            )
                                                            (SwitchE
                                                              (PrimE
                                                                (CallPrim)
                                                                (VarE $u/18)
                                                                (VarE $v/39)
                                                              )
                                                              (case
                                                                (TagP
                                                                  suspend
                                                                  WildP
                                                                )
                                                                (PrimE TupPrim)
                                                              )
                                                              (case
                                                                (TagP
                                                                  schedule
                                                                  (VarP
                                                                    $schedule/3
                                                                  )
                                                                )
                                                                (BlockE
                                                                  (LetD
                                                                    (VarP
                                                                      $call/3
                                                                    )
                                                                    (SelfCallE
                                                                      ()
                                                                      (PrimE
                                                                        (ICReplyPrim
                                                                        )
                                                                        (PrimE
                                                                          TupPrim
                                                                        )
                                                                      )
                                                                      (VarE
                                                                        $schedule/3
                                                                      )
                                                                      (PrimE
                                                                        (ProjPrim
                                                                          1
                                                                        )
                                                                        (VarE
                                                                          $v/39
                                                                        )
                                                                      )
                                                                      (FuncE
                                                                        $lambda
                                                                        Local
                                                                        Returns
                                                                        ()
                                                                        (PrimE
                                                                          (CallPrim
                                                                          )
                                                                          (PrimE
                                                                            (ProjPrim
                                                                              2
                                                                            )
                                                                            (VarE
                                                                              $v/39
                                                                            )
                                                                          )
                                                                          (PrimE
                                                                            TupPrim
                                                                          )
                                                                        )
                                                                      )
                                                                    )
                                                                  )
                                                                  (IfE
                                                                    (PrimE
                                                                      (CallPrim)
                                                                      (VarE
                                                                        @call_succeeded
                                                                      )
                                                                      (PrimE
                                                                        TupPrim
                                                                      )
                                                                    )
                                                                    (VarE
                                                                      $call/3
                                                                    )
                                                                    (PrimE
                                                                      (CallPrim)
                                                                      (PrimE
                                                                        (ProjPrim
                                                                          1
                                                                        )
                                                                        (VarE
                                                                          $v/39
                                                                        )
                                                                      )
                                                                      (PrimE
                                                                        (CallPrim
                                                                        )
                                                                        (VarE
                                                                          @call_error
                                                                        )
                                                                        (PrimE
                                                                          TupPrim
                                                                        )
                                                                      )
                                                                    )
                                                                  )
                                                                )
                                                              )
                                                            )
                                                          )
                                                          (PrimE
                                                            (CallPrim)
                                                            (VarE $r/1)
                                                            (PrimE
                                                              (CallPrim)
                                                              (VarE @call_error)
                                                              (PrimE TupPrim)
                                                            )
                                                          )
                                                        )
                                                      )
                                                    )
                                                  )
                                                )
                                              )
                                            )
                                          )
                                          (BlockE
                                            (LetD
                                              (VarP $v/19)
                                              (PrimE
                                                (ActorDotPrim create_canister)
                                                (VarE @ic00)
                                              )
                                            )
                                            (BlockE
                                              (LetD
                                                (VarP $u/19)
                                                (BlockE
                                                  (LetD
                                                    (TupP
                                                      (VarP $async/7)
                                                      (VarP $reply/3)
                                                      (VarP $reject/3)
                                                      (VarP $cleanup/3)
                                                    )
                                                    (BlockE
                                                      (LetD
                                                        (TupP
                                                          (VarP $async/6)
                                                          (VarP $fulfill/3)
                                                          (VarP $fail/3)
                                                          (VarP $clean/3)
                                                        )
                                                        (PrimE
                                                          (CallPrim
                                                            {canister_id : Principal}
                                                          )
                                                          (VarE @new_async)
                                                          (PrimE TupPrim)
                                                        )
                                                      )
                                                      (PrimE
                                                        TupPrim
                                                        (VarE $async/6)
                                                        (FuncE
                                                          $lambda
                                                          Local
                                                          Returns
                                                          (params $rep0/2)
                                                          ()
                                                          (PrimE
                                                            (CallPrim)
                                                            (VarE $fulfill/3)
                                                            (VarE $rep0/2)
                                                          )
                                                        )
                                                        (VarE $fail/3)
                                                        (VarE $clean/3)
                                                      )
                                                    )
                                                  )
                                                  (LetD
                                                    (VarP $x/3)
                                                    (BlockE
                                                      (LetD
                                                        (VarP $$settings/1/0)
                                                        (LitE NullLit)
                                                      )
                                                      (NewObjE
                                                        Object
                                                        (sender_canister_version
                                                          $sender_canister_version/3
                                                        )
                                                        (settings
                                                          $$settings/1/0
                                                        )
                                                        {sender_canister_version : ?Nat64; settings : ?canister_settings}
                                                      )
                                                    )
                                                  )
                                                  (LetD
                                                    WildP
                                                    (PrimE
                                                      ICCallPrim
                                                      (VarE $v/19)
                                                      (VarE $x/3)
                                                      (VarE $reply/3)
                                                      (VarE $reject/3)
                                                      (VarE $cleanup/3)
                                                    )
                                                  )
                                                  (VarE $async/7)
                                                )
                                              )
                                              (IfE
                                                (PrimE
                                                  (CallPrim)
                                                  (VarE @call_succeeded)
                                                  (PrimE TupPrim)
                                                )
                                                (BlockE
                                                  (LetD
                                                    (VarP $v/38)
                                                    (PrimE
                                                      TupPrim
                                                      (VarE $k/6)
                                                      (VarE $r/1)
                                                      (VarE $b/1)
                                                    )
                                                  )
                                                  (SwitchE
                                                    (PrimE
                                                      (CallPrim)
                                                      (VarE $u/19)
                                                      (VarE $v/38)
                                                    )
                                                    (case
                                                      (TagP suspend WildP)
                                                      (PrimE TupPrim)
                                                    )
                                                    (case
                                                      (TagP
                                                        schedule
                                                        (VarP $schedule/2)
                                                      )
                                                      (BlockE
                                                        (LetD
                                                          (VarP $call/2)
                                                          (SelfCallE
                                                            ()
                                                            (PrimE
                                                              (ICReplyPrim)
                                                              (PrimE TupPrim)
                                                            )
                                                            (VarE $schedule/2)
                                                            (PrimE
                                                              (ProjPrim 1)
                                                              (VarE $v/38)
                                                            )
                                                            (FuncE
                                                              $lambda
                                                              Local
                                                              Returns
                                                              ()
                                                              (PrimE
                                                                (CallPrim)
                                                                (PrimE
                                                                  (ProjPrim 2)
                                                                  (VarE $v/38)
                                                                )
                                                                (PrimE TupPrim)
                                                              )
                                                            )
                                                          )
                                                        )
                                                        (IfE
                                                          (PrimE
                                                            (CallPrim)
                                                            (VarE
                                                              @call_succeeded
                                                            )
                                                            (PrimE TupPrim)
                                                          )
                                                          (VarE $call/2)
                                                          (PrimE
                                                            (CallPrim)
                                                            (PrimE
                                                              (ProjPrim 1)
                                                              (VarE $v/38)
                                                            )
                                                            (PrimE
                                                              (CallPrim)
                                                              (VarE @call_error)
                                                              (PrimE TupPrim)
                                                            )
                                                          )
                                                        )
                                                      )
                                                    )
                                                  )
                                                )
                                                (PrimE
                                                  (CallPrim)
                                                  (VarE $r/1)
                                                  (PrimE
                                                    (CallPrim)
                                                    (VarE @call_error)
                                                    (PrimE TupPrim)
                                                  )
                                                )
                                              )
                                            )
                                          )
                                        )
                                      )
                                    )
                                  )
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              )
              (PrimE
                TupPrim
                (FuncE
                  $lambda
                  Local
                  Returns
                  (params $v/37)
                  ()
                  (PrimE (ICReplyPrim Principal) (VarE $v/37))
                )
                (FuncE
                  $lambda
                  Local
                  Returns
                  (params $e/2)
                  ()
                  (PrimE
                    ICRejectPrim
                    (PrimE
                      (ProjPrim 1)
                      (PrimE
                        (CastPrim
                          Error
                          ({#call_error : {err_code : Nat32}; #canister_error; #canister_reject; #destination_invalid; #future : Nat32; #system_fatal; #system_transient; #system_unknown}, Text)
                        )
                        (VarE $e/2)
                      )
                    )
                  )
                )
                (VarE @cleanup)
              )
            )
            (VarE $reply/2)
            (VarE $reject/2)
            (VarE $cleanup/2)
          )
        )
        (VarE $async/5)
      )
    )
  )
  (LetD
    (VarP @call_raw)
    (FuncE
      @call_raw
      Local
      Returns
      ($ Any)
      (params p m a)
      (Blob -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}
      (BlockE
        (LetD
          (TupP
            (VarP $async/11)
            (VarP $reply/5)
            (VarP $reject/5)
            (VarP $cleanup/5)
          )
          (BlockE
            (LetD
              (TupP
                (VarP $async/10)
                (VarP $fulfill/5)
                (VarP $fail/5)
                (VarP $clean/5)
              )
              (PrimE (CallPrim Blob) (VarE @new_async) (PrimE TupPrim))
            )
            (PrimE
              TupPrim
              (VarE $async/10)
              (FuncE
                $lambda
                Local
                Returns
                (params $rep0/3)
                ()
                (PrimE (CallPrim) (VarE $fulfill/5) (VarE $rep0/3))
              )
              (VarE $fail/5)
              (VarE $clean/5)
            )
          )
        )
        (LetD
          WildP
          (SelfCallE
            Blob
            (PrimE
              (CallPrim $)
              (FuncE
                $lambda
                Local
                Returns
                ($@call_raw Any)
                (params $k/7 $r/2 $b/2)
                ()
                (DeclareE
                  $available/2
                  (BlockE
                    (LetD (VarP $v/20) (PrimE SystemCyclesAvailablePrim))
                    (LetD WildP (DefineE $available/2 Const (VarE $v/20)))
                    (BlockE
                      (LetD (VarP $u/20) (PrimE TupPrim))
                      (BlockE
                        (LetD
                          WildP
                          (IfE
                            (PrimE
                              (RelPrim Bool EqOp)
                              (PrimE
                                (RelPrim Nat EqOp)
                                (VarE $available/2)
                                (LitE (NatLit 0))
                              )
                              (LitE (BoolLit false))
                            )
                            (AssignE
                              (VarLE @cycles)
                              (PrimE SystemCyclesAcceptPrim (VarE $available/2))
                            )
                            (PrimE TupPrim)
                          )
                        )
                        (BlockE
                          (LetD (VarP $u/21) (PrimE TupPrim))
                          (BlockE
                            (LetD (VarP $u/22) (PrimE TupPrim))
                            (BlockE
                              (LetD
                                (VarP $u/23)
                                (BlockE
                                  (LetD
                                    (TupP
                                      (VarP $async/13)
                                      (VarP $reply/6)
                                      (VarP $reject/6)
                                      (VarP $cleanup/6)
                                    )
                                    (BlockE
                                      (LetD
                                        (TupP
                                          (VarP $async/12)
                                          (VarP $fulfill/6)
                                          (VarP $fail/6)
                                          (VarP $clean/6)
                                        )
                                        (PrimE
                                          (CallPrim Blob)
                                          (VarE @new_async)
                                          (PrimE TupPrim)
                                        )
                                      )
                                      (PrimE
                                        TupPrim
                                        (VarE $async/12)
                                        (FuncE
                                          $lambda
                                          Local
                                          Returns
                                          (params $rep0/4)
                                          ()
                                          (PrimE
                                            (CallPrim)
                                            (VarE $fulfill/6)
                                            (VarE $rep0/4)
                                          )
                                        )
                                        (VarE $fail/6)
                                        (VarE $clean/6)
                                      )
                                    )
                                  )
                                  (LetD
                                    WildP
                                    (PrimE
                                      ICCallRawPrim
                                      (VarE p)
                                      (VarE m)
                                      (VarE a)
                                      (VarE $reply/6)
                                      (VarE $reject/6)
                                      (VarE $cleanup/6)
                                    )
                                  )
                                  (VarE $async/13)
                                )
                              )
                              (IfE
                                (PrimE
                                  (CallPrim)
                                  (VarE @call_succeeded)
                                  (PrimE TupPrim)
                                )
                                (BlockE
                                  (LetD
                                    (VarP $v/42)
                                    (PrimE
                                      TupPrim
                                      (VarE $k/7)
                                      (VarE $r/2)
                                      (VarE $b/2)
                                    )
                                  )
                                  (SwitchE
                                    (PrimE (CallPrim) (VarE $u/23) (VarE $v/42))
                                    (case (TagP suspend WildP) (PrimE TupPrim))
                                    (case
                                      (TagP schedule (VarP $schedule/4))
                                      (BlockE
                                        (LetD
                                          (VarP $call/4)
                                          (SelfCallE
                                            ()
                                            (PrimE
                                              (ICReplyPrim)
                                              (PrimE TupPrim)
                                            )
                                            (VarE $schedule/4)
                                            (PrimE (ProjPrim 1) (VarE $v/42))
                                            (FuncE
                                              $lambda
                                              Local
                                              Returns
                                              ()
                                              (PrimE
                                                (CallPrim)
                                                (PrimE
                                                  (ProjPrim 2)
                                                  (VarE $v/42)
                                                )
                                                (PrimE TupPrim)
                                              )
                                            )
                                          )
                                        )
                                        (IfE
                                          (PrimE
                                            (CallPrim)
                                            (VarE @call_succeeded)
                                            (PrimE TupPrim)
                                          )
                                          (VarE $call/4)
                                          (PrimE
                                            (CallPrim)
                                            (PrimE (ProjPrim 1) (VarE $v/42))
                                            (PrimE
                                              (CallPrim)
                                              (VarE @call_error)
                                              (PrimE TupPrim)
                                            )
                                          )
                                        )
                                      )
                                    )
                                  )
                                )
                                (PrimE
                                  (CallPrim)
                                  (VarE $r/2)
                                  (PrimE
                                    (CallPrim)
                                    (VarE @call_error)
                                    (PrimE TupPrim)
                                  )
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              )
              (PrimE
                TupPrim
                (FuncE
                  $lambda
                  Local
                  Returns
                  (params $v/41)
                  ()
                  (PrimE (ICReplyPrim Blob) (VarE $v/41))
                )
                (FuncE
                  $lambda
                  Local
                  Returns
                  (params $e/3)
                  ()
                  (PrimE
                    ICRejectPrim
                    (PrimE
                      (ProjPrim 1)
                      (PrimE
                        (CastPrim
                          Error
                          ({#call_error : {err_code : Nat32}; #canister_error; #canister_reject; #destination_invalid; #future : Nat32; #system_fatal; #system_transient; #system_unknown}, Text)
                        )
                        (VarE $e/3)
                      )
                    )
                  )
                )
                (VarE @cleanup)
              )
            )
            (VarE $reply/5)
            (VarE $reject/5)
            (VarE $cleanup/5)
          )
        )
        (VarE $async/11)
      )
    )
  )
  (LetD
    (VarP @call_succeeded)
    (FuncE
      @call_succeeded
      Local
      Returns
      Bool
      (PrimE
        (RelPrim Nat32 EqOp)
        (PrimE call_perform_status)
        (LitE (Nat32Lit 0))
      )
    )
  )
  (LetD
    (VarP @call_error)
    (FuncE
      @call_error
      Local
      Returns
      Error
      (BlockE
        (LetD (VarP status) (PrimE call_perform_status))
        (LetD (VarP message) (PrimE call_perform_message))
        (LetD
          (VarP code)
          (PrimE
            (TagE call_error)
            (NewObjE Object (err_code status) {err_code : Nat32})
          )
        )
        (PrimE
          (CastPrim ({#call_error : {err_code : Nat32}}, Text) Error)
          (PrimE TupPrim (VarE code) (VarE message))
        )
      )
    )
  )
  (VarD @timers ?@Node (LitE NullLit))
  (LetD
    (VarP @prune)
    (FuncE
      @prune
      Local
      Returns
      (params $id0/0)
      ?@Node
      (BlockE
        (VarD $temp0/60 ?@Node (VarE $id0/0))
        (LoopE
          (LabelE
            $tailcall/77
            ()
            (BlockE
              (LetD (VarP n) (VarE! $temp0/60))
              (PrimE
                RetPrim
                (SwitchE
                  (VarE n)
                  (case (LitP NullLit) (LitE NullLit))
                  (case
                    (OptP (VarP n))
                    (IfE
                      (PrimE
                        (RelPrim Nat64 EqOp)
                        (PrimE
                          IdxPrim
                          (PrimE (DotPrim expire) (VarE n))
                          (LitE (NatLit 0))
                        )
                        (LitE (Nat64Lit 0))
                      )
                      (BlockE
                        (LetD
                          WildP
                          (AssignE
                            (VarLE $temp0/60)
                            (PrimE (DotPrim post) (VarE n))
                          )
                        )
                        (PrimE (BreakPrim $tailcall/77) (PrimE TupPrim))
                      )
                      (PrimE
                        OptPrim
                        (BlockE
                          (LetD (VarP $base/1) (VarE n))
                          (LetD
                            (VarP $pre/0)
                            (PrimE
                              (CallPrim)
                              (VarE @prune)
                              (PrimE (DotPrim pre) (VarE n))
                            )
                          )
                          (LetD
                            (VarP $delay/0)
                            (PrimE (DotPrim delay) (VarE $base/1))
                          )
                          (LetD
                            (VarP $expire/0)
                            (PrimE (DotPrim expire) (VarE $base/1))
                          )
                          (LetD
                            (VarP $id/0)
                            (PrimE (DotPrim id) (VarE $base/1))
                          )
                          (LetD
                            (VarP $job/0)
                            (PrimE (DotPrim job) (VarE $base/1))
                          )
                          (LetD
                            (VarP $post/0)
                            (PrimE (DotPrim post) (VarE $base/1))
                          )
                          (NewObjE
                            Object
                            (post $post/0)
                            (job $job/0)
                            (id $id/0)
                            (expire $expire/0)
                            (delay $delay/0)
                            (pre $pre/0)
                            {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @nextExpiration)
    (FuncE
      @nextExpiration
      Local
      Returns
      (params $id0/1)
      Nat64
      (BlockE
        (VarD $temp0/61 ?@Node (VarE $id0/1))
        (LoopE
          (LabelE
            $tailcall/78
            ()
            (BlockE
              (LetD (VarP n) (VarE! $temp0/61))
              (PrimE
                RetPrim
                (SwitchE
                  (VarE n)
                  (case (LitP NullLit) (LitE (Nat64Lit 0)))
                  (case
                    (OptP (VarP n))
                    (BlockE
                      (LetD
                        (VarP pivot)
                        (PrimE
                          IdxPrim
                          (PrimE (DotPrim expire) (VarE n))
                          (LitE (NatLit 0))
                        )
                      )
                      (LetD
                        WildP
                        (IfE
                          (PrimE
                            (RelPrim Nat64 EqOp)
                            (VarE pivot)
                            (LitE (Nat64Lit 0))
                          )
                          (PrimE
                            RetPrim
                            (BlockE
                              (LetD
                                WildP
                                (AssignE
                                  (VarLE $temp0/61)
                                  (PrimE (DotPrim post) (VarE n))
                                )
                              )
                              (PrimE (BreakPrim $tailcall/78) (PrimE TupPrim))
                            )
                          )
                          (PrimE TupPrim)
                        )
                      )
                      (LetD
                        (VarP exp)
                        (PrimE
                          (CallPrim)
                          (VarE @nextExpiration)
                          (PrimE (DotPrim pre) (VarE n))
                        )
                      )
                      (IfE
                        (PrimE
                          (RelPrim Nat64 EqOp)
                          (VarE exp)
                          (LitE (Nat64Lit 0))
                        )
                        (VarE pivot)
                        (VarE exp)
                      )
                    )
                  )
                )
              )
            )
          )
        )
      )
    )
  )
  (LetD
    (VarP @timer_helper)
    (FuncE
      @timer_helper
      Local
      Returns
      ($ Any)
      (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}
      (BlockE
        (LetD
          (TupP
            (VarP $async/15)
            (VarP $reply/7)
            (VarP $reject/7)
            (VarP $cleanup/7)
          )
          (BlockE
            (LetD
              (TupP
                (VarP $async/14)
                (VarP $fulfill/7)
                (VarP $fail/7)
                (VarP $clean/7)
              )
              (PrimE (CallPrim ()) (VarE @new_async) (PrimE TupPrim))
            )
            (PrimE
              TupPrim
              (FuncE
                $lambda
                Local
                Returns
                (params $k/12 $r/7 $b/6)
                {#schedule : () -> (); #suspend}
                (PrimE
                  (CallPrim)
                  (VarE $async/14)
                  (PrimE
                    TupPrim
                    (FuncE
                      $lambda
                      Local
                      Returns
                      (params $v/43)
                      ()
                      (PrimE (CallPrim) (VarE $k/12) (VarE $v/43))
                    )
                    (VarE $r/7)
                    (VarE $b/6)
                  )
                )
              )
              (FuncE
                $lambda
                Local
                Returns
                ()
                (PrimE (CallPrim) (VarE $fulfill/7) (PrimE TupPrim))
              )
              (VarE $fail/7)
              (VarE $clean/7)
            )
          )
        )
        (LetD
          WildP
          (SelfCallE
            ()
            (PrimE
              (CallPrim $)
              (FuncE
                $lambda
                Local
                Returns
                ($@timer_helper Any)
                (params $k/8 $r/3 $b/3)
                ()
                (DeclareE
                  $Array_init/0
                  (DeclareE
                    $now/0
                    (DeclareE
                      $gathered/0
                      (DeclareE
                        $thunks/0
                        (DeclareE
                          $gatherExpired/0
                          (DeclareE
                            $exp/0
                            (DeclareE
                              $failed/0
                              (DeclareE
                                $reinsert/0
                                (BlockE
                                  (LetD
                                    (VarP $v/21)
                                    (FuncE
                                      Array_init
                                      Local
                                      Returns
                                      (T Any)
                                      (params $len/0 $x/0)
                                      [var T]
                                      (PrimE
                                        Array.init
                                        (VarE $len/0)
                                        (VarE $x/0)
                                      )
                                    )
                                  )
                                  (LetD
                                    WildP
                                    (DefineE $Array_init/0 Const (VarE $v/21))
                                  )
                                  (BlockE
                                    (LetD (VarP $u/24) (PrimE TupPrim))
                                    (BlockE
                                      (LetD (VarP $v/22) (PrimE SystemTimePrim))
                                      (LetD
                                        WildP
                                        (DefineE $now/0 Const (VarE $v/22))
                                      )
                                      (BlockE
                                        (LetD (VarP $u/25) (PrimE TupPrim))
                                        (BlockE
                                          (LetD
                                            (VarP $u/26)
                                            (DefineE
                                              $gathered/0
                                              Var
                                              (LitE (NatLit 0))
                                            )
                                          )
                                          (BlockE
                                            (LetD
                                              (VarP $v/23)
                                              (PrimE
                                                (CallPrim
                                                  ?(<system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend})
                                                )
                                                (VarE $Array_init/0)
                                                (PrimE
                                                  TupPrim
                                                  (LitE (NatLit 10))
                                                  (LitE NullLit)
                                                )
                                              )
                                            )
                                            (LetD
                                              WildP
                                              (DefineE
                                                $thunks/0
                                                Const
                                                (VarE $v/23)
                                              )
                                            )
                                            (BlockE
                                              (LetD
                                                (VarP $u/27)
                                                (PrimE TupPrim)
                                              )
                                              (BlockE
                                                (LetD
                                                  (VarP $v/24)
                                                  (FuncE
                                                    gatherExpired
                                                    Local
                                                    Returns
                                                    (params $n/0)
                                                    ()
                                                    (SwitchE
                                                      (VarE $n/0)
                                                      (case
                                                        (LitP NullLit)
                                                        (PrimE TupPrim)
                                                      )
                                                      (case
                                                        (OptP (VarP $n/1))
                                                        (BlockE
                                                          (LetD
                                                            (VarP $pivot/0)
                                                            (PrimE
                                                              IdxPrim
                                                              (PrimE
                                                                (DotPrim expire)
                                                                (VarE $n/1)
                                                              )
                                                              (LitE (NatLit 0))
                                                            )
                                                          )
                                                          (LetD
                                                            WildP
                                                            (IfE
                                                              (PrimE
                                                                (RelPrim
                                                                  Nat64
                                                                  GtOp
                                                                )
                                                                (VarE $pivot/0)
                                                                (LitE
                                                                  (Nat64Lit 0)
                                                                )
                                                              )
                                                              (PrimE
                                                                (CallPrim)
                                                                (VarE
                                                                  $gatherExpired/0
                                                                )
                                                                (PrimE
                                                                  (DotPrim pre)
                                                                  (VarE $n/1)
                                                                )
                                                              )
                                                              (PrimE TupPrim)
                                                            )
                                                          )
                                                          (IfE
                                                            (IfE
                                                              (PrimE
                                                                (RelPrim
                                                                  Nat64
                                                                  LeOp
                                                                )
                                                                (VarE $pivot/0)
                                                                (VarE $now/0)
                                                              )
                                                              (PrimE
                                                                (RelPrim
                                                                  Nat
                                                                  LtOp
                                                                )
                                                                (VarE!
                                                                  $gathered/0
                                                                )
                                                                (PrimE
                                                                  array_len
                                                                  (VarE
                                                                    $thunks/0
                                                                  )
                                                                )
                                                              )
                                                              (LitE
                                                                (BoolLit false)
                                                              )
                                                            )
                                                            (BlockE
                                                              (LetD
                                                                WildP
                                                                (IfE
                                                                  (PrimE
                                                                    (RelPrim
                                                                      Nat64
                                                                      GtOp
                                                                    )
                                                                    (VarE
                                                                      $pivot/0
                                                                    )
                                                                    (LitE
                                                                      (Nat64Lit
                                                                        0
                                                                      )
                                                                    )
                                                                  )
                                                                  (BlockE
                                                                    (LetD
                                                                      WildP
                                                                      (AssignE
                                                                        (IdxLE
                                                                          (VarE
                                                                            $thunks/0
                                                                          )
                                                                          (VarE!
                                                                            $gathered/0
                                                                          )
                                                                        )
                                                                        (PrimE
                                                                          OptPrim
                                                                          (PrimE
                                                                            (DotPrim
                                                                              job
                                                                            )
                                                                            (VarE
                                                                              $n/1
                                                                            )
                                                                          )
                                                                        )
                                                                      )
                                                                    )
                                                                    (LetD
                                                                      WildP
                                                                      (SwitchE
                                                                        (PrimE
                                                                          (DotPrim
                                                                            delay
                                                                          )
                                                                          (VarE
                                                                            $n/1
                                                                          )
                                                                        )
                                                                        (case
                                                                          (AltP
                                                                            (LitP
                                                                              NullLit
                                                                            )
                                                                            (OptP
                                                                              (LitP
                                                                                (Nat64Lit
                                                                                  0
                                                                                )
                                                                              )
                                                                            )
                                                                          )
                                                                          (AssignE
                                                                            (IdxLE
                                                                              (PrimE
                                                                                (DotPrim
                                                                                  expire
                                                                                )
                                                                                (VarE
                                                                                  $n/1
                                                                                )
                                                                              )
                                                                              (LitE
                                                                                (NatLit
                                                                                  0
                                                                                )
                                                                              )
                                                                            )
                                                                            (LitE
                                                                              (Nat64Lit
                                                                                0
                                                                              )
                                                                            )
                                                                          )
                                                                        )
                                                                        (case
                                                                          (OptP
                                                                            (VarP
                                                                              $delay/9
                                                                            )
                                                                          )
                                                                          (BlockE
                                                                            (LetD
                                                                              (VarP
                                                                                $expire/11
                                                                              )
                                                                              (PrimE
                                                                                (BinPrim
                                                                                  Nat64
                                                                                  AddOp
                                                                                )
                                                                                (VarE
                                                                                  $pivot/0
                                                                                )
                                                                                (PrimE
                                                                                  (BinPrim
                                                                                    Nat64
                                                                                    MulOp
                                                                                  )
                                                                                  (VarE
                                                                                    $delay/9
                                                                                  )
                                                                                  (PrimE
                                                                                    (BinPrim
                                                                                      Nat64
                                                                                      AddOp
                                                                                    )
                                                                                    (LitE
                                                                                      (Nat64Lit
                                                                                        1
                                                                                      )
                                                                                    )
                                                                                    (PrimE
                                                                                      (BinPrim
                                                                                        Nat64
                                                                                        DivOp
                                                                                      )
                                                                                      (PrimE
                                                                                        (BinPrim
                                                                                          Nat64
                                                                                          SubOp
                                                                                        )
                                                                                        (VarE
                                                                                          $now/0
                                                                                        )
                                                                                        (VarE
                                                                                          $pivot/0
                                                                                        )
                                                                                      )
                                                                                      (VarE
                                                                                        $delay/9
                                                                                      )
                                                                                    )
                                                                                  )
                                                                                )
                                                                              )
                                                                            )
                                                                            (LetD
                                                                              WildP
                                                                              (AssignE
                                                                                (IdxLE
                                                                                  (PrimE
                                                                                    (DotPrim
                                                                                      expire
                                                                                    )
                                                                                    (VarE
                                                                                      $n/1
                                                                                    )
                                                                                  )
                                                                                  (LitE
                                                                                    (NatLit
                                                                                      0
                                                                                    )
                                                                                  )
                                                                                )
                                                                                (LitE
                                                                                  (Nat64Lit
                                                                                    0
                                                                                  )
                                                                                )
                                                                              )
                                                                            )
                                                                            (LetD
                                                                              (VarP
                                                                                $reinsert/1
                                                                              )
                                                                              (FuncE
                                                                                reinsert
                                                                                Local
                                                                                Returns
                                                                                (params
                                                                                  $m/0
                                                                                )
                                                                                @Node
                                                                                (SwitchE
                                                                                  (VarE
                                                                                    $m/0
                                                                                  )
                                                                                  (case
                                                                                    (LitP
                                                                                      NullLit
                                                                                    )
                                                                                    (BlockE
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$base/2/0
                                                                                        )
                                                                                        (VarE
                                                                                          $n/1
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$expire/1/0
                                                                                        )
                                                                                        (PrimE
                                                                                          (ArrayPrim
                                                                                            Var
                                                                                            Nat64
                                                                                          )
                                                                                          (VarE
                                                                                            $expire/11
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$pre/1/0
                                                                                        )
                                                                                        (LitE
                                                                                          NullLit
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$post/1/0
                                                                                        )
                                                                                        (LitE
                                                                                          NullLit
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$delay/1/0
                                                                                        )
                                                                                        (PrimE
                                                                                          (DotPrim
                                                                                            delay
                                                                                          )
                                                                                          (VarE
                                                                                            $$base/2/0
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$id/1/0
                                                                                        )
                                                                                        (PrimE
                                                                                          (DotPrim
                                                                                            id
                                                                                          )
                                                                                          (VarE
                                                                                            $$base/2/0
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$job/1/0
                                                                                        )
                                                                                        (PrimE
                                                                                          (DotPrim
                                                                                            job
                                                                                          )
                                                                                          (VarE
                                                                                            $$base/2/0
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (NewObjE
                                                                                        Object
                                                                                        (job
                                                                                          $$job/1/0
                                                                                        )
                                                                                        (id
                                                                                          $$id/1/0
                                                                                        )
                                                                                        (delay
                                                                                          $$delay/1/0
                                                                                        )
                                                                                        (post
                                                                                          $$post/1/0
                                                                                        )
                                                                                        (pre
                                                                                          $$pre/1/0
                                                                                        )
                                                                                        (expire
                                                                                          $$expire/1/0
                                                                                        )
                                                                                        {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                                                                                      )
                                                                                    )
                                                                                  )
                                                                                  (case
                                                                                    (OptP
                                                                                      (VarP
                                                                                        $m/1
                                                                                      )
                                                                                    )
                                                                                    (BlockE
                                                                                      (LetD
                                                                                        WildP
                                                                                        (PrimE
                                                                                          AssertPrim
                                                                                          (PrimE
                                                                                            (RelPrim
                                                                                              Bool
                                                                                              EqOp
                                                                                            )
                                                                                            (PrimE
                                                                                              (RelPrim
                                                                                                Nat64
                                                                                                EqOp
                                                                                              )
                                                                                              (PrimE
                                                                                                IdxPrim
                                                                                                (PrimE
                                                                                                  (DotPrim
                                                                                                    expire
                                                                                                  )
                                                                                                  (VarE
                                                                                                    $m/1
                                                                                                  )
                                                                                                )
                                                                                                (LitE
                                                                                                  (NatLit
                                                                                                    0
                                                                                                  )
                                                                                                )
                                                                                              )
                                                                                              (LitE
                                                                                                (Nat64Lit
                                                                                                  0
                                                                                                )
                                                                                              )
                                                                                            )
                                                                                            (LitE
                                                                                              (BoolLit
                                                                                                false
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (IfE
                                                                                        (PrimE
                                                                                          (RelPrim
                                                                                            Nat64
                                                                                            LtOp
                                                                                          )
                                                                                          (VarE
                                                                                            $expire/11
                                                                                          )
                                                                                          (PrimE
                                                                                            IdxPrim
                                                                                            (PrimE
                                                                                              (DotPrim
                                                                                                expire
                                                                                              )
                                                                                              (VarE
                                                                                                $m/1
                                                                                              )
                                                                                            )
                                                                                            (LitE
                                                                                              (NatLit
                                                                                                0
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                        )
                                                                                        (BlockE
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$base/4/0
                                                                                            )
                                                                                            (VarE
                                                                                              $m/1
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$pre/3/0
                                                                                            )
                                                                                            (PrimE
                                                                                              OptPrim
                                                                                              (PrimE
                                                                                                (CallPrim
                                                                                                )
                                                                                                (VarE
                                                                                                  $reinsert/1
                                                                                                )
                                                                                                (PrimE
                                                                                                  (DotPrim
                                                                                                    pre
                                                                                                  )
                                                                                                  (VarE
                                                                                                    $m/1
                                                                                                  )
                                                                                                )
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$delay/3/0
                                                                                            )
                                                                                            (PrimE
                                                                                              (DotPrim
                                                                                                delay
                                                                                              )
                                                                                              (VarE
                                                                                                $$base/4/0
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$expire/3/0
                                                                                            )
                                                                                            (PrimE
                                                                                              (DotPrim
                                                                                                expire
                                                                                              )
                                                                                              (VarE
                                                                                                $$base/4/0
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$id/3/0
                                                                                            )
                                                                                            (PrimE
                                                                                              (DotPrim
                                                                                                id
                                                                                              )
                                                                                              (VarE
                                                                                                $$base/4/0
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$job/3/0
                                                                                            )
                                                                                            (PrimE
                                                                                              (DotPrim
                                                                                                job
                                                                                              )
                                                                                              (VarE
                                                                                                $$base/4/0
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$post/3/0
                                                                                            )
                                                                                            (PrimE
                                                                                              (DotPrim
                                                                                                post
                                                                                              )
                                                                                              (VarE
                                                                                                $$base/4/0
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (NewObjE
                                                                                            Object
                                                                                            (post
                                                                                              $$post/3/0
                                                                                            )
                                                                                            (job
                                                                                              $$job/3/0
                                                                                            )
                                                                                            (id
                                                                                              $$id/3/0
                                                                                            )
                                                                                            (expire
                                                                                              $$expire/3/0
                                                                                            )
                                                                                            (delay
                                                                                              $$delay/3/0
                                                                                            )
                                                                                            (pre
                                                                                              $$pre/3/0
                                                                                            )
                                                                                            {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                                                                                          )
                                                                                        )
                                                                                        (BlockE
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$base/3/0
                                                                                            )
                                                                                            (VarE
                                                                                              $m/1
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$post/2/0
                                                                                            )
                                                                                            (PrimE
                                                                                              OptPrim
                                                                                              (PrimE
                                                                                                (CallPrim
                                                                                                )
                                                                                                (VarE
                                                                                                  $reinsert/1
                                                                                                )
                                                                                                (PrimE
                                                                                                  (DotPrim
                                                                                                    post
                                                                                                  )
                                                                                                  (VarE
                                                                                                    $m/1
                                                                                                  )
                                                                                                )
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$delay/2/0
                                                                                            )
                                                                                            (PrimE
                                                                                              (DotPrim
                                                                                                delay
                                                                                              )
                                                                                              (VarE
                                                                                                $$base/3/0
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$expire/2/0
                                                                                            )
                                                                                            (PrimE
                                                                                              (DotPrim
                                                                                                expire
                                                                                              )
                                                                                              (VarE
                                                                                                $$base/3/0
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$id/2/0
                                                                                            )
                                                                                            (PrimE
                                                                                              (DotPrim
                                                                                                id
                                                                                              )
                                                                                              (VarE
                                                                                                $$base/3/0
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$job/2/0
                                                                                            )
                                                                                            (PrimE
                                                                                              (DotPrim
                                                                                                job
                                                                                              )
                                                                                              (VarE
                                                                                                $$base/3/0
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $$pre/2/0
                                                                                            )
                                                                                            (PrimE
                                                                                              (DotPrim
                                                                                                pre
                                                                                              )
                                                                                              (VarE
                                                                                                $$base/3/0
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (NewObjE
                                                                                            Object
                                                                                            (pre
                                                                                              $$pre/2/0
                                                                                            )
                                                                                            (job
                                                                                              $$job/2/0
                                                                                            )
                                                                                            (id
                                                                                              $$id/2/0
                                                                                            )
                                                                                            (expire
                                                                                              $$expire/2/0
                                                                                            )
                                                                                            (delay
                                                                                              $$delay/2/0
                                                                                            )
                                                                                            (post
                                                                                              $$post/2/0
                                                                                            )
                                                                                            {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                  )
                                                                                )
                                                                              )
                                                                            )
                                                                            (AssignE
                                                                              (VarLE
                                                                                @timers
                                                                              )
                                                                              (PrimE
                                                                                OptPrim
                                                                                (PrimE
                                                                                  (CallPrim
                                                                                  )
                                                                                  (VarE
                                                                                    $reinsert/1
                                                                                  )
                                                                                  (PrimE
                                                                                    (CallPrim
                                                                                    )
                                                                                    (VarE
                                                                                      @prune
                                                                                    )
                                                                                    (VarE!
                                                                                      @timers
                                                                                    )
                                                                                  )
                                                                                )
                                                                              )
                                                                            )
                                                                          )
                                                                        )
                                                                      )
                                                                    )
                                                                    (AssignE
                                                                      (VarLE
                                                                        $gathered/0
                                                                      )
                                                                      (PrimE
                                                                        (BinPrim
                                                                          Nat
                                                                          AddOp
                                                                        )
                                                                        (VarE!
                                                                          $gathered/0
                                                                        )
                                                                        (LitE
                                                                          (NatLit
                                                                            1
                                                                          )
                                                                        )
                                                                      )
                                                                    )
                                                                  )
                                                                  (PrimE
                                                                    TupPrim
                                                                  )
                                                                )
                                                              )
                                                              (PrimE
                                                                (CallPrim)
                                                                (VarE
                                                                  $gatherExpired/0
                                                                )
                                                                (PrimE
                                                                  (DotPrim post)
                                                                  (VarE $n/1)
                                                                )
                                                              )
                                                            )
                                                            (PrimE TupPrim)
                                                          )
                                                        )
                                                      )
                                                    )
                                                  )
                                                )
                                                (LetD
                                                  WildP
                                                  (DefineE
                                                    $gatherExpired/0
                                                    Const
                                                    (VarE $v/24)
                                                  )
                                                )
                                                (BlockE
                                                  (LetD
                                                    (VarP $u/28)
                                                    (PrimE TupPrim)
                                                  )
                                                  (BlockE
                                                    (LetD
                                                      WildP
                                                      (PrimE
                                                        (CallPrim)
                                                        (VarE $gatherExpired/0)
                                                        (VarE! @timers)
                                                      )
                                                    )
                                                    (BlockE
                                                      (LetD
                                                        (VarP $u/29)
                                                        (PrimE TupPrim)
                                                      )
                                                      (BlockE
                                                        (LetD
                                                          (VarP $v/25)
                                                          (PrimE
                                                            (CallPrim)
                                                            (VarE
                                                              @nextExpiration
                                                            )
                                                            (VarE! @timers)
                                                          )
                                                        )
                                                        (LetD
                                                          WildP
                                                          (DefineE
                                                            $exp/0
                                                            Const
                                                            (VarE $v/25)
                                                          )
                                                        )
                                                        (BlockE
                                                          (LetD
                                                            (VarP $u/30)
                                                            (PrimE TupPrim)
                                                          )
                                                          (BlockE
                                                            (LetD
                                                              WildP
                                                              (BlockE
                                                                (LetD
                                                                  WildP
                                                                  (PrimE
                                                                    global_timer_set
                                                                    (VarE
                                                                      $exp/0
                                                                    )
                                                                  )
                                                                )
                                                                (PrimE TupPrim)
                                                              )
                                                            )
                                                            (BlockE
                                                              (LetD
                                                                (VarP $u/31)
                                                                (PrimE TupPrim)
                                                              )
                                                              (BlockE
                                                                (LetD
                                                                  WildP
                                                                  (IfE
                                                                    (PrimE
                                                                      (RelPrim
                                                                        Nat64
                                                                        EqOp
                                                                      )
                                                                      (VarE
                                                                        $exp/0
                                                                      )
                                                                      (LitE
                                                                        (Nat64Lit
                                                                          0
                                                                        )
                                                                      )
                                                                    )
                                                                    (AssignE
                                                                      (VarLE
                                                                        @timers
                                                                      )
                                                                      (LitE
                                                                        NullLit
                                                                      )
                                                                    )
                                                                    (PrimE
                                                                      TupPrim
                                                                    )
                                                                  )
                                                                )
                                                                (BlockE
                                                                  (LetD
                                                                    (VarP $u/32)
                                                                    (PrimE
                                                                      TupPrim
                                                                    )
                                                                  )
                                                                  (BlockE
                                                                    (LetD
                                                                      (VarP
                                                                        $u/33
                                                                      )
                                                                      (DefineE
                                                                        $failed/0
                                                                        Var
                                                                        (LitE
                                                                          (Nat64Lit
                                                                            0
                                                                          )
                                                                        )
                                                                      )
                                                                    )
                                                                    (BlockE
                                                                      (LetD
                                                                        (VarP
                                                                          $v/26
                                                                        )
                                                                        (FuncE
                                                                          reinsert
                                                                          Local
                                                                          Returns
                                                                          (params
                                                                            $job/8
                                                                          )
                                                                          ()
                                                                          (BlockE
                                                                            (LetD
                                                                              WildP
                                                                              (IfE
                                                                                (PrimE
                                                                                  (RelPrim
                                                                                    Nat64
                                                                                    EqOp
                                                                                  )
                                                                                  (VarE!
                                                                                    $failed/0
                                                                                  )
                                                                                  (LitE
                                                                                    (Nat64Lit
                                                                                      0
                                                                                    )
                                                                                  )
                                                                                )
                                                                                (BlockE
                                                                                  (LetD
                                                                                    WildP
                                                                                    (AssignE
                                                                                      (VarLE
                                                                                        @timers
                                                                                      )
                                                                                      (PrimE
                                                                                        (CallPrim
                                                                                        )
                                                                                        (VarE
                                                                                          @prune
                                                                                        )
                                                                                        (VarE!
                                                                                          @timers
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                  )
                                                                                  (BlockE
                                                                                    (LetD
                                                                                      WildP
                                                                                      (PrimE
                                                                                        global_timer_set
                                                                                        (LitE
                                                                                          (Nat64Lit
                                                                                            1
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                    (PrimE
                                                                                      TupPrim
                                                                                    )
                                                                                  )
                                                                                )
                                                                                (PrimE
                                                                                  TupPrim
                                                                                )
                                                                              )
                                                                            )
                                                                            (LetD
                                                                              WildP
                                                                              (AssignE
                                                                                (VarLE
                                                                                  $failed/0
                                                                                )
                                                                                (PrimE
                                                                                  (BinPrim
                                                                                    Nat64
                                                                                    AddOp
                                                                                  )
                                                                                  (VarE!
                                                                                    $failed/0
                                                                                  )
                                                                                  (LitE
                                                                                    (Nat64Lit
                                                                                      1
                                                                                    )
                                                                                  )
                                                                                )
                                                                              )
                                                                            )
                                                                            (AssignE
                                                                              (VarLE
                                                                                @timers
                                                                              )
                                                                              (PrimE
                                                                                OptPrim
                                                                                (SwitchE
                                                                                  (VarE!
                                                                                    @timers
                                                                                  )
                                                                                  (case
                                                                                    (OptP
                                                                                      (ObjP
                                                                                        (id
                                                                                          (LitP
                                                                                            (IntLit
                                                                                              0
                                                                                            )
                                                                                          )
                                                                                        )
                                                                                        (pre
                                                                                          (VarP
                                                                                            $pre/11
                                                                                          )
                                                                                        )
                                                                                        (post
                                                                                          (VarP
                                                                                            $post/11
                                                                                          )
                                                                                        )
                                                                                        (job
                                                                                          (VarP
                                                                                            $j/0
                                                                                          )
                                                                                        )
                                                                                        (expire
                                                                                          (VarP
                                                                                            $expire/12
                                                                                          )
                                                                                        )
                                                                                        (delay
                                                                                          (VarP
                                                                                            $delay/10
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                    (BlockE
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$expire/4/0
                                                                                        )
                                                                                        (PrimE
                                                                                          (ArrayPrim
                                                                                            Var
                                                                                            Nat64
                                                                                          )
                                                                                          (VarE!
                                                                                            $failed/0
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$id/4/0
                                                                                        )
                                                                                        (LitE
                                                                                          (NatLit
                                                                                            0
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$pre/4/0
                                                                                        )
                                                                                        (PrimE
                                                                                          OptPrim
                                                                                          (BlockE
                                                                                            (LetD
                                                                                              (VarP
                                                                                                $$id/5/0
                                                                                              )
                                                                                              (LitE
                                                                                                (NatLit
                                                                                                  0
                                                                                                )
                                                                                              )
                                                                                            )
                                                                                            (LetD
                                                                                              (VarP
                                                                                                $$post/4/0
                                                                                              )
                                                                                              (LitE
                                                                                                NullLit
                                                                                              )
                                                                                            )
                                                                                            (NewObjE
                                                                                              Object
                                                                                              (job
                                                                                                $j/0
                                                                                              )
                                                                                              (delay
                                                                                                $delay/10
                                                                                              )
                                                                                              (post
                                                                                                $$post/4/0
                                                                                              )
                                                                                              (pre
                                                                                                $pre/11
                                                                                              )
                                                                                              (expire
                                                                                                $expire/12
                                                                                              )
                                                                                              (id
                                                                                                $$id/5/0
                                                                                              )
                                                                                              {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                                                                                            )
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (NewObjE
                                                                                        Object
                                                                                        (pre
                                                                                          $$pre/4/0
                                                                                        )
                                                                                        (post
                                                                                          $post/11
                                                                                        )
                                                                                        (job
                                                                                          $job/8
                                                                                        )
                                                                                        (delay
                                                                                          $delay/10
                                                                                        )
                                                                                        (id
                                                                                          $$id/4/0
                                                                                        )
                                                                                        (expire
                                                                                          $$expire/4/0
                                                                                        )
                                                                                        {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                                                                                      )
                                                                                    )
                                                                                  )
                                                                                  (case
                                                                                    WildP
                                                                                    (BlockE
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$expire/5/0
                                                                                        )
                                                                                        (PrimE
                                                                                          (ArrayPrim
                                                                                            Var
                                                                                            Nat64
                                                                                          )
                                                                                          (VarE!
                                                                                            $failed/0
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$id/6/0
                                                                                        )
                                                                                        (LitE
                                                                                          (NatLit
                                                                                            0
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$delay/4/0
                                                                                        )
                                                                                        (LitE
                                                                                          NullLit
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$pre/5/0
                                                                                        )
                                                                                        (LitE
                                                                                          NullLit
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $$post/5/0
                                                                                        )
                                                                                        (VarE!
                                                                                          @timers
                                                                                        )
                                                                                      )
                                                                                      (NewObjE
                                                                                        Object
                                                                                        (post
                                                                                          $$post/5/0
                                                                                        )
                                                                                        (pre
                                                                                          $$pre/5/0
                                                                                        )
                                                                                        (job
                                                                                          $job/8
                                                                                        )
                                                                                        (delay
                                                                                          $$delay/4/0
                                                                                        )
                                                                                        (id
                                                                                          $$id/6/0
                                                                                        )
                                                                                        (expire
                                                                                          $$expire/5/0
                                                                                        )
                                                                                        {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                                                                                      )
                                                                                    )
                                                                                  )
                                                                                )
                                                                              )
                                                                            )
                                                                          )
                                                                        )
                                                                      )
                                                                      (LetD
                                                                        WildP
                                                                        (DefineE
                                                                          $reinsert/0
                                                                          Const
                                                                          (VarE
                                                                            $v/26
                                                                          )
                                                                        )
                                                                      )
                                                                      (BlockE
                                                                        (LetD
                                                                          (VarP
                                                                            $u/34
                                                                          )
                                                                          (PrimE
                                                                            TupPrim
                                                                          )
                                                                        )
                                                                        (BlockE
                                                                          (LetD
                                                                            (VarP
                                                                              $u/35
                                                                            )
                                                                            (PrimE
                                                                              TupPrim
                                                                            )
                                                                          )
                                                                          (DeclareE
                                                                            $$arr/2/0
                                                                            (DeclareE
                                                                              $$last/2/0
                                                                              (DeclareE
                                                                                $$indx/2/0
                                                                                (BlockE
                                                                                  (LetD
                                                                                    (VarP
                                                                                      $v/27
                                                                                    )
                                                                                    (VarE
                                                                                      $thunks/0
                                                                                    )
                                                                                  )
                                                                                  (LetD
                                                                                    WildP
                                                                                    (DefineE
                                                                                      $$arr/2/0
                                                                                      Const
                                                                                      (VarE
                                                                                        $v/27
                                                                                      )
                                                                                    )
                                                                                  )
                                                                                  (BlockE
                                                                                    (LetD
                                                                                      (VarP
                                                                                        $u/36
                                                                                      )
                                                                                      (PrimE
                                                                                        TupPrim
                                                                                      )
                                                                                    )
                                                                                    (BlockE
                                                                                      (LetD
                                                                                        (VarP
                                                                                          $v/28
                                                                                        )
                                                                                        (PrimE
                                                                                          GetLastArrayOffset
                                                                                          (VarE
                                                                                            $$arr/2/0
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (LetD
                                                                                        WildP
                                                                                        (DefineE
                                                                                          $$last/2/0
                                                                                          Const
                                                                                          (VarE
                                                                                            $v/28
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                      (BlockE
                                                                                        (LetD
                                                                                          (VarP
                                                                                            $u/37
                                                                                          )
                                                                                          (PrimE
                                                                                            TupPrim
                                                                                          )
                                                                                        )
                                                                                        (BlockE
                                                                                          (LetD
                                                                                            (VarP
                                                                                              $u/38
                                                                                            )
                                                                                            (DefineE
                                                                                              $$indx/2/0
                                                                                              Var
                                                                                              (LitE
                                                                                                (NatLit
                                                                                                  0
                                                                                                )
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                          (BlockE
                                                                                            (LetD
                                                                                              (VarP
                                                                                                $u/39
                                                                                              )
                                                                                              (PrimE
                                                                                                TupPrim
                                                                                              )
                                                                                            )
                                                                                            (IfE
                                                                                              (PrimE
                                                                                                EqArrayOffset
                                                                                                (VarE
                                                                                                  $$last/2/0
                                                                                                )
                                                                                                (LitE
                                                                                                  (IntLit
                                                                                                    -1
                                                                                                  )
                                                                                                )
                                                                                              )
                                                                                              (PrimE
                                                                                                (CallPrim
                                                                                                )
                                                                                                (VarE
                                                                                                  $k/8
                                                                                                )
                                                                                                (PrimE
                                                                                                  TupPrim
                                                                                                )
                                                                                              )
                                                                                              (BlockE
                                                                                                (LetD
                                                                                                  (VarP
                                                                                                    $loop/0
                                                                                                  )
                                                                                                  (FuncE
                                                                                                    $loop/0
                                                                                                    Local
                                                                                                    Returns
                                                                                                    ()
                                                                                                    (BlockE
                                                                                                      (LetD
                                                                                                        (VarP
                                                                                                          $v/29
                                                                                                        )
                                                                                                        (PrimE
                                                                                                          TupPrim
                                                                                                        )
                                                                                                      )
                                                                                                      (DeclareE
                                                                                                        $o/0
                                                                                                        (BlockE
                                                                                                          (LetD
                                                                                                            (VarP
                                                                                                              $v/30
                                                                                                            )
                                                                                                            (PrimE
                                                                                                              DerefArrayOffset
                                                                                                              (VarE
                                                                                                                $$arr/2/0
                                                                                                              )
                                                                                                              (VarE!
                                                                                                                $$indx/2/0
                                                                                                              )
                                                                                                            )
                                                                                                          )
                                                                                                          (LetD
                                                                                                            WildP
                                                                                                            (DefineE
                                                                                                              $o/0
                                                                                                              Const
                                                                                                              (VarE
                                                                                                                $v/30
                                                                                                              )
                                                                                                            )
                                                                                                          )
                                                                                                          (BlockE
                                                                                                            (LetD
                                                                                                              (VarP
                                                                                                                $u/40
                                                                                                              )
                                                                                                              (PrimE
                                                                                                                TupPrim
                                                                                                              )
                                                                                                            )
                                                                                                            (BlockE
                                                                                                              (LetD
                                                                                                                (VarP
                                                                                                                  $k/9
                                                                                                                )
                                                                                                                (FuncE
                                                                                                                  $k/9
                                                                                                                  Local
                                                                                                                  Returns
                                                                                                                  ()
                                                                                                                  (BlockE
                                                                                                                    (LetD
                                                                                                                      (VarP
                                                                                                                        $v/31
                                                                                                                      )
                                                                                                                      (PrimE
                                                                                                                        TupPrim
                                                                                                                      )
                                                                                                                    )
                                                                                                                    (BlockE
                                                                                                                      (LetD
                                                                                                                        WildP
                                                                                                                        (VarE
                                                                                                                          $v/31
                                                                                                                        )
                                                                                                                      )
                                                                                                                      (BlockE
                                                                                                                        (LetD
                                                                                                                          (VarP
                                                                                                                            $u/41
                                                                                                                          )
                                                                                                                          (PrimE
                                                                                                                            TupPrim
                                                                                                                          )
                                                                                                                        )
                                                                                                                        (BlockE
                                                                                                                          (LetD
                                                                                                                            (VarP
                                                                                                                              $u/42
                                                                                                                            )
                                                                                                                            (PrimE
                                                                                                                              TupPrim
                                                                                                                            )
                                                                                                                          )
                                                                                                                          (PrimE
                                                                                                                            (CallPrim
                                                                                                                            )
                                                                                                                            (VarE
                                                                                                                              $loop/0
                                                                                                                            )
                                                                                                                            (IfE
                                                                                                                              (PrimE
                                                                                                                                EqArrayOffset
                                                                                                                                (VarE!
                                                                                                                                  $$indx/2/0
                                                                                                                                )
                                                                                                                                (VarE
                                                                                                                                  $$last/2/0
                                                                                                                                )
                                                                                                                              )
                                                                                                                              (PrimE
                                                                                                                                RetPrim
                                                                                                                                (PrimE
                                                                                                                                  (CallPrim
                                                                                                                                  )
                                                                                                                                  (VarE
                                                                                                                                    $k/8
                                                                                                                                  )
                                                                                                                                  (PrimE
                                                                                                                                    TupPrim
                                                                                                                                  )
                                                                                                                                )
                                                                                                                              )
                                                                                                                              (AssignE
                                                                                                                                (VarLE
                                                                                                                                  $$indx/2/0
                                                                                                                                )
                                                                                                                                (PrimE
                                                                                                                                  NextArrayOffset
                                                                                                                                  (VarE!
                                                                                                                                    $$indx/2/0
                                                                                                                                  )
                                                                                                                                )
                                                                                                                              )
                                                                                                                            )
                                                                                                                          )
                                                                                                                        )
                                                                                                                      )
                                                                                                                    )
                                                                                                                  )
                                                                                                                )
                                                                                                              )
                                                                                                              (SwitchE
                                                                                                                (VarE
                                                                                                                  $o/0
                                                                                                                )
                                                                                                                (case
                                                                                                                  (OptP
                                                                                                                    (VarP
                                                                                                                      $thunk/0
                                                                                                                    )
                                                                                                                  )
                                                                                                                  (BlockE
                                                                                                                    (LetD
                                                                                                                      (VarP
                                                                                                                        $r/4
                                                                                                                      )
                                                                                                                      (FuncE
                                                                                                                        $r/4
                                                                                                                        Local
                                                                                                                        Returns
                                                                                                                        (params
                                                                                                                          $e/0
                                                                                                                        )
                                                                                                                        ()
                                                                                                                        (SwitchE
                                                                                                                          (VarE
                                                                                                                            $e/0
                                                                                                                          )
                                                                                                                          (case
                                                                                                                            WildP
                                                                                                                            (PrimE
                                                                                                                              (CallPrim
                                                                                                                              )
                                                                                                                              (VarE
                                                                                                                                $k/9
                                                                                                                              )
                                                                                                                              (PrimE
                                                                                                                                (CallPrim
                                                                                                                                )
                                                                                                                                (VarE
                                                                                                                                  $reinsert/0
                                                                                                                                )
                                                                                                                                (VarE
                                                                                                                                  $thunk/0
                                                                                                                                )
                                                                                                                              )
                                                                                                                            )
                                                                                                                          )
                                                                                                                        )
                                                                                                                      )
                                                                                                                    )
                                                                                                                    (BlockE
                                                                                                                      (LetD
                                                                                                                        (VarP
                                                                                                                          $u/43
                                                                                                                        )
                                                                                                                        (PrimE
                                                                                                                          (CallPrim
                                                                                                                            $@timer_helper
                                                                                                                          )
                                                                                                                          (VarE
                                                                                                                            $thunk/0
                                                                                                                          )
                                                                                                                          (PrimE
                                                                                                                            TupPrim
                                                                                                                          )
                                                                                                                        )
                                                                                                                      )
                                                                                                                      (IfE
                                                                                                                        (PrimE
                                                                                                                          (CallPrim
                                                                                                                          )
                                                                                                                          (VarE
                                                                                                                            @call_succeeded
                                                                                                                          )
                                                                                                                          (PrimE
                                                                                                                            TupPrim
                                                                                                                          )
                                                                                                                        )
                                                                                                                        (BlockE
                                                                                                                          (LetD
                                                                                                                            WildP
                                                                                                                            (VarE
                                                                                                                              $u/43
                                                                                                                            )
                                                                                                                          )
                                                                                                                          (BlockE
                                                                                                                            (LetD
                                                                                                                              (VarP
                                                                                                                                $u/44
                                                                                                                              )
                                                                                                                              (PrimE
                                                                                                                                TupPrim
                                                                                                                              )
                                                                                                                            )
                                                                                                                            (BlockE
                                                                                                                              (LetD
                                                                                                                                (VarP
                                                                                                                                  $u/45
                                                                                                                                )
                                                                                                                                (PrimE
                                                                                                                                  TupPrim
                                                                                                                                )
                                                                                                                              )
                                                                                                                              (PrimE
                                                                                                                                (CallPrim
                                                                                                                                )
                                                                                                                                (VarE
                                                                                                                                  $k/9
                                                                                                                                )
                                                                                                                                (PrimE
                                                                                                                                  TupPrim
                                                                                                                                )
                                                                                                                              )
                                                                                                                            )
                                                                                                                          )
                                                                                                                        )
                                                                                                                        (PrimE
                                                                                                                          (CallPrim
                                                                                                                          )
                                                                                                                          (VarE
                                                                                                                            $r/4
                                                                                                                          )
                                                                                                                          (PrimE
                                                                                                                            (CallPrim
                                                                                                                            )
                                                                                                                            (VarE
                                                                                                                              @call_error
                                                                                                                            )
                                                                                                                            (PrimE
                                                                                                                              TupPrim
                                                                                                                            )
                                                                                                                          )
                                                                                                                        )
                                                                                                                      )
                                                                                                                    )
                                                                                                                  )
                                                                                                                )
                                                                                                                (case
                                                                                                                  WildP
                                                                                                                  (PrimE
                                                                                                                    (CallPrim
                                                                                                                    )
                                                                                                                    (VarE
                                                                                                                      $k/9
                                                                                                                    )
                                                                                                                    (PrimE
                                                                                                                      RetPrim
                                                                                                                      (PrimE
                                                                                                                        (CallPrim
                                                                                                                        )
                                                                                                                        (VarE
                                                                                                                          $k/8
                                                                                                                        )
                                                                                                                        (PrimE
                                                                                                                          TupPrim
                                                                                                                        )
                                                                                                                      )
                                                                                                                    )
                                                                                                                  )
                                                                                                                )
                                                                                                              )
                                                                                                            )
                                                                                                          )
                                                                                                        )
                                                                                                      )
                                                                                                    )
                                                                                                  )
                                                                                                )
                                                                                                (PrimE
                                                                                                  (CallPrim
                                                                                                  )
                                                                                                  (VarE
                                                                                                    $loop/0
                                                                                                  )
                                                                                                  (PrimE
                                                                                                    TupPrim
                                                                                                  )
                                                                                                )
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                  )
                                                                                )
                                                                              )
                                                                            )
                                                                          )
                                                                        )
                                                                      )
                                                                    )
                                                                  )
                                                                )
                                                              )
                                                            )
                                                          )
                                                        )
                                                      )
                                                    )
                                                  )
                                                )
                                              )
                                            )
                                          )
                                        )
                                      )
                                    )
                                  )
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              )
              (PrimE
                TupPrim
                (FuncE
                  $lambda
                  Local
                  Returns
                  ()
                  (BlockE
                    (LetD (VarP $v/44) (PrimE TupPrim))
                    (PrimE (ICReplyPrim) (VarE $v/44))
                  )
                )
                (FuncE
                  $lambda
                  Local
                  Returns
                  (params $e/4)
                  ()
                  (PrimE
                    ICRejectPrim
                    (PrimE
                      (ProjPrim 1)
                      (PrimE
                        (CastPrim
                          Error
                          ({#call_error : {err_code : Nat32}; #canister_error; #canister_reject; #destination_invalid; #future : Nat32; #system_fatal; #system_transient; #system_unknown}, Text)
                        )
                        (VarE $e/4)
                      )
                    )
                  )
                )
                (VarE @cleanup)
              )
            )
            (VarE $reply/7)
            (VarE $reject/7)
            (VarE $cleanup/7)
          )
        )
        (VarE $async/15)
      )
    )
  )
  (VarD @lastTimerId Nat (LitE (NatLit 0)))
  (LetD
    (VarP @setTimer)
    (FuncE
      @setTimer
      Local
      Returns
      ($ Any)
      (params delayNanos recurring job)
      Nat
      (BlockE
        (LetD
          WildP
          (AssignE
            (VarLE @lastTimerId)
            (PrimE (BinPrim Nat AddOp) (VarE! @lastTimerId) (LitE (NatLit 1)))
          )
        )
        (LetD (VarP id) (VarE! @lastTimerId))
        (LetD (VarP now) (PrimE SystemTimePrim))
        (LetD
          (VarP expire)
          (PrimE (BinPrim Nat64 AddOp) (VarE now) (VarE delayNanos))
        )
        (LetD
          (VarP delay)
          (IfE
            (VarE recurring)
            (PrimE OptPrim (VarE delayNanos))
            (LitE NullLit)
          )
        )
        (LetD
          (VarP insert)
          (FuncE
            insert
            Local
            Returns
            (params n)
            @Node
            (SwitchE
              (VarE n)
              (case
                (LitP NullLit)
                (BlockE
                  (LetD
                    (VarP $expire/6)
                    (PrimE (ArrayPrim Var Nat64) (VarE expire))
                  )
                  (LetD (VarP $pre/6) (LitE NullLit))
                  (LetD (VarP $post/6) (LitE NullLit))
                  (NewObjE
                    Object
                    (post $post/6)
                    (pre $pre/6)
                    (job job)
                    (delay delay)
                    (id id)
                    (expire $expire/6)
                    {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                  )
                )
              )
              (case
                (OptP (VarP n))
                (BlockE
                  (LetD
                    WildP
                    (PrimE
                      AssertPrim
                      (PrimE
                        (RelPrim Bool EqOp)
                        (PrimE
                          (RelPrim Nat64 EqOp)
                          (PrimE
                            IdxPrim
                            (PrimE (DotPrim expire) (VarE n))
                            (LitE (NatLit 0))
                          )
                          (LitE (Nat64Lit 0))
                        )
                        (LitE (BoolLit false))
                      )
                    )
                  )
                  (IfE
                    (PrimE
                      (RelPrim Nat64 LtOp)
                      (VarE expire)
                      (PrimE
                        IdxPrim
                        (PrimE (DotPrim expire) (VarE n))
                        (LitE (NatLit 0))
                      )
                    )
                    (BlockE
                      (LetD (VarP $base/6) (VarE n))
                      (LetD
                        (VarP $pre/8)
                        (PrimE
                          OptPrim
                          (PrimE
                            (CallPrim)
                            (VarE insert)
                            (PrimE (DotPrim pre) (VarE n))
                          )
                        )
                      )
                      (LetD
                        (VarP $delay/6)
                        (PrimE (DotPrim delay) (VarE $base/6))
                      )
                      (LetD
                        (VarP $expire/8)
                        (PrimE (DotPrim expire) (VarE $base/6))
                      )
                      (LetD (VarP $id/8) (PrimE (DotPrim id) (VarE $base/6)))
                      (LetD (VarP $job/5) (PrimE (DotPrim job) (VarE $base/6)))
                      (LetD
                        (VarP $post/8)
                        (PrimE (DotPrim post) (VarE $base/6))
                      )
                      (NewObjE
                        Object
                        (post $post/8)
                        (job $job/5)
                        (id $id/8)
                        (expire $expire/8)
                        (delay $delay/6)
                        (pre $pre/8)
                        {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                      )
                    )
                    (BlockE
                      (LetD (VarP $base/5) (VarE n))
                      (LetD
                        (VarP $post/7)
                        (PrimE
                          OptPrim
                          (PrimE
                            (CallPrim)
                            (VarE insert)
                            (PrimE (DotPrim post) (VarE n))
                          )
                        )
                      )
                      (LetD
                        (VarP $delay/5)
                        (PrimE (DotPrim delay) (VarE $base/5))
                      )
                      (LetD
                        (VarP $expire/7)
                        (PrimE (DotPrim expire) (VarE $base/5))
                      )
                      (LetD (VarP $id/7) (PrimE (DotPrim id) (VarE $base/5)))
                      (LetD (VarP $job/4) (PrimE (DotPrim job) (VarE $base/5)))
                      (LetD (VarP $pre/7) (PrimE (DotPrim pre) (VarE $base/5)))
                      (NewObjE
                        Object
                        (pre $pre/7)
                        (job $job/4)
                        (id $id/7)
                        (expire $expire/7)
                        (delay $delay/5)
                        (post $post/7)
                        {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          WildP
          (AssignE
            (VarLE @timers)
            (PrimE
              OptPrim
              (PrimE
                (CallPrim)
                (VarE insert)
                (PrimE (CallPrim) (VarE @prune) (VarE! @timers))
              )
            )
          )
        )
        (LetD
          (VarP exp)
          (PrimE (CallPrim) (VarE @nextExpiration) (VarE! @timers))
        )
        (LetD
          WildP
          (IfE
            (PrimE (RelPrim Nat64 EqOp) (VarE exp) (LitE (Nat64Lit 0)))
            (AssignE (VarLE @timers) (LitE NullLit))
            (PrimE TupPrim)
          )
        )
        (LetD
          WildP
          (BlockE
            (LetD WildP (PrimE global_timer_set (VarE exp)))
            (PrimE TupPrim)
          )
        )
        (VarE id)
      )
    )
  )
  (LetD
    (VarP @cancelTimer)
    (FuncE
      @cancelTimer
      Local
      Returns
      (params id)
      ()
      (BlockE
        (LetD
          (VarP graft)
          (FuncE
            graft
            Local
            Returns
            (params onto branch)
            ?@Node
            (SwitchE
              (PrimE TupPrim (VarE onto) (VarE branch))
              (case (TupP (LitP NullLit) (LitP NullLit)) (LitE NullLit))
              (case (TupP (LitP NullLit) WildP) (VarE branch))
              (case (TupP WildP (LitP NullLit)) (VarE onto))
              (case
                (TupP (OptP (VarP onto)) WildP)
                (PrimE
                  OptPrim
                  (BlockE
                    (LetD (VarP $base/7) (VarE onto))
                    (LetD
                      (VarP $post/9)
                      (PrimE
                        (CallPrim)
                        (VarE graft)
                        (PrimE
                          TupPrim
                          (PrimE (DotPrim post) (VarE onto))
                          (VarE branch)
                        )
                      )
                    )
                    (LetD
                      (VarP $delay/7)
                      (PrimE (DotPrim delay) (VarE $base/7))
                    )
                    (LetD
                      (VarP $expire/9)
                      (PrimE (DotPrim expire) (VarE $base/7))
                    )
                    (LetD (VarP $id/9) (PrimE (DotPrim id) (VarE $base/7)))
                    (LetD (VarP $job/6) (PrimE (DotPrim job) (VarE $base/7)))
                    (LetD (VarP $pre/9) (PrimE (DotPrim pre) (VarE $base/7)))
                    (NewObjE
                      Object
                      (pre $pre/9)
                      (job $job/6)
                      (id $id/9)
                      (expire $expire/9)
                      (delay $delay/7)
                      (post $post/9)
                      {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          (VarP hunt)
          (FuncE
            hunt
            Local
            Returns
            (params n)
            ?@Node
            (SwitchE
              (VarE n)
              (case (LitP NullLit) (VarE n))
              (case
                (OptP
                  (ObjP (id (VarP node)) (pre (VarP pre)) (post (VarP post)))
                )
                (IfE
                  (PrimE (RelPrim Nat EqOp) (VarE node) (VarE id))
                  (PrimE
                    (CallPrim)
                    (VarE graft)
                    (PrimE TupPrim (VarE pre) (VarE post))
                  )
                  (LabelE
                    !
                    ?@Node
                    (PrimE
                      OptPrim
                      (BlockE
                        (LetD
                          (VarP $base/8)
                          (SwitchE
                            (VarE n)
                            (case
                              (LitP NullLit)
                              (PrimE (BreakPrim !) (LitE NullLit))
                            )
                            (case (OptP (VarP $v/0)) (VarE $v/0))
                          )
                        )
                        (LetD
                          (VarP $pre/10)
                          (PrimE (CallPrim) (VarE hunt) (VarE pre))
                        )
                        (LetD
                          (VarP $post/10)
                          (PrimE (CallPrim) (VarE hunt) (VarE post))
                        )
                        (LetD
                          (VarP $delay/8)
                          (PrimE (DotPrim delay) (VarE $base/8))
                        )
                        (LetD
                          (VarP $expire/10)
                          (PrimE (DotPrim expire) (VarE $base/8))
                        )
                        (LetD (VarP $id/10) (PrimE (DotPrim id) (VarE $base/8)))
                        (LetD
                          (VarP $job/7)
                          (PrimE (DotPrim job) (VarE $base/8))
                        )
                        (NewObjE
                          Object
                          (job $job/7)
                          (id $id/10)
                          (expire $expire/10)
                          (delay $delay/8)
                          (post $post/10)
                          (pre $pre/10)
                          {delay : ?Nat64; expire : [var Nat64]; id : Nat; job : <system>() -> (() -> (), Error -> (), () -> ()) -> {#schedule : () -> (); #suspend}; post : ?@Node; pre : ?@Node}
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          WildP
          (AssignE
            (VarLE @timers)
            (PrimE (CallPrim) (VarE hunt) (VarE! @timers))
          )
        )
        (IfE
          (PrimE
            (RelPrim Nat64 EqOp)
            (PrimE (CallPrim) (VarE @nextExpiration) (VarE! @timers))
            (LitE (Nat64Lit 0))
          )
          (BlockE
            (LetD
              WildP
              (BlockE
                (LetD WildP (PrimE global_timer_set (LitE (Nat64Lit 0))))
                (PrimE TupPrim)
              )
            )
            (AssignE (VarLE @timers) (LitE NullLit))
          )
          (PrimE TupPrim)
        )
      )
    )
  )
  (LetD
    (VarP @set_global_timer)
    (FuncE
      @set_global_timer
      Local
      Returns
      (params time)
      ()
      (BlockE (LetD WildP (PrimE global_timer_set (VarE time))) (PrimE TupPrim))
    )
  )
  (LetD
    (VarP @dedup)
    (FuncE
      @dedup
      Local
      Returns
      (params b)
      Blob
      (BlockE
        (LetD
          (VarP Array_tabulate)
          (FuncE
            Array_tabulate
            Local
            Returns
            (T Any)
            (params len gen)
            [T]
            (PrimE Array.tabulate (VarE len) (VarE gen))
          )
        )
        (LetD
          (VarP Array_tabulateVar)
          (FuncE
            Array_tabulateVar
            Local
            Returns
            (T Any)
            (params len gen)
            [var T]
            (PrimE Array.tabulateVar (VarE len) (VarE gen))
          )
        )
        (LetD (VarP HASH_ARRAY_SIZE) (LitE (NatLit 16_384)))
        (LetD
          (VarP debugPrint)
          (FuncE debugPrint Local Returns (params x) () (PrimE print (VarE x)))
        )
        (LetD
          (VarP hashBlob)
          (FuncE
            hashBlob
            Local
            Returns
            (params b)
            Nat32
            (PrimE crc32Hash (VarE b))
          )
        )
        (LetD
          (VarP allocWeakRef)
          (FuncE
            allocWeakRef
            Local
            Returns
            (T Any)
            (params obj)
            weak T
            (PrimE alloc_weak_ref (VarE obj))
          )
        )
        (LetD
          (VarP weakGet)
          (FuncE
            weakGet
            Local
            Returns
            (T Any)
            (params w)
            ?T
            (PrimE weak_get (VarE w))
          )
        )
        (LetD
          (VarP getDedupTable)
          (FuncE
            getDedupTable
            Local
            Returns
            ?[var List]
            (PrimE get_dedup_table)
          )
        )
        (LetD
          (VarP setDedupTable)
          (FuncE
            setDedupTable
            Local
            Returns
            (params dedupTable)
            ()
            (PrimE set_dedup_table (VarE dedupTable))
          )
        )
        (LetD
          (VarP arrayToBlob)
          (FuncE
            arrayToBlob
            Local
            Returns
            (params a)
            Blob
            (PrimE arrayToBlob (VarE a))
          )
        )
        (LetD
          (VarP getOriginalBlob)
          (FuncE
            getOriginalBlob
            Local
            Returns
            (params b)
            Blob
            (BlockE
              (LetD
                (VarP copiedArr)
                (PrimE
                  (CallPrim Nat8)
                  (VarE Array_tabulate)
                  (PrimE
                    TupPrim
                    (PrimE
                      (BinPrim Nat SubOp)
                      (PrimE blob_size (VarE b))
                      (LitE (NatLit 5))
                    )
                    (FuncE
                      @anon-func-744.50
                      Local
                      Returns
                      (params i)
                      Nat8
                      (PrimE
                        IdxBlobPrim
                        (VarE b)
                        (PrimE (BinPrim Nat AddOp) (VarE i) (LitE (NatLit 5)))
                      )
                    )
                  )
                )
              )
              (LetD
                (VarP originalBlob)
                (PrimE (CallPrim) (VarE arrayToBlob) (VarE copiedArr))
              )
              (VarE originalBlob)
            )
          )
        )
        (LetD
          (VarP blobCompare)
          (FuncE
            blobCompare
            Local
            Returns
            (params b1 b2)
            Int8
            (PrimE blob_compare (VarE b1) (VarE b2))
          )
        )
        (LetD
          (VarP addToList)
          (FuncE
            addToList
            Local
            Returns
            (params list originalBlob weakRef)
            List
            (BlockE
              (LetD
                (VarP newList)
                (BlockE
                  (VarD
                    $next/0
                    ?{index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}
                    (PrimE OptPrim (VarE list))
                  )
                  (LetD (VarP $value/0) (PrimE OptPrim (VarE weakRef)))
                  (LetD
                    (VarP $index/0)
                    (PrimE
                      (BinPrim Nat AddOp)
                      (PrimE (DotPrim index) (VarE list))
                      (LitE (NatLit 1))
                    )
                  )
                  (NewObjE
                    Object
                    (index $index/0)
                    (originalBlob originalBlob)
                    (value $value/0)
                    (next $next/0)
                    {index : Nat; var next : ?{index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}; originalBlob : Blob; value : ?{ref : weak Blob}}
                  )
                )
              )
              (VarE newList)
            )
          )
        )
        (LetD
          (VarP getFromList)
          (FuncE
            getFromList
            Local
            Returns
            (params list originalBlob)
            ?WeakRef
            (BlockE
              (VarD
                copy
                {index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}
                (VarE list)
              )
              (LoopE
                (IfE
                  (PrimE
                    (RelPrim Int8 EqOp)
                    (PrimE
                      (CallPrim)
                      (VarE blobCompare)
                      (PrimE
                        TupPrim
                        (PrimE (DotPrim originalBlob) (VarE! copy))
                        (VarE originalBlob)
                      )
                    )
                    (LitE (Int8Lit 0))
                  )
                  (PrimE RetPrim (PrimE (DotPrim value) (VarE! copy)))
                  (BlockE
                    (LetD (VarP next) (PrimE (DotPrim next) (VarE! copy)))
                    (SwitchE
                      (VarE next)
                      (case (LitP NullLit) (PrimE RetPrim (LitE NullLit)))
                      (case
                        (OptP (VarP next))
                        (AssignE (VarLE copy) (VarE next))
                      )
                    )
                  )
                )
              )
            )
          )
        )
        (LetD
          (VarP getListLen)
          (FuncE
            getListLen
            Local
            Returns
            (params list)
            Nat
            (PrimE (DotPrim index) (VarE list))
          )
        )
        (LetD
          (VarP getHashArrayLen)
          (FuncE
            getHashArrayLen
            Local
            Returns
            (params hashArray)
            Nat
            (BlockE
              (VarD len Nat (LitE (NatLit 0)))
              (VarD i Nat (LitE (NatLit 0)))
              (LetD
                WildP
                (LabelE
                  $done/7
                  ()
                  (LoopE
                    (IfE
                      (PrimE
                        (RelPrim Nat LtOp)
                        (VarE! i)
                        (VarE HASH_ARRAY_SIZE)
                      )
                      (BlockE
                        (LetD
                          WildP
                          (AssignE
                            (VarLE len)
                            (PrimE
                              (BinPrim Nat AddOp)
                              (VarE! len)
                              (PrimE
                                (CallPrim)
                                (VarE getListLen)
                                (PrimE IdxPrim (VarE hashArray) (VarE! i))
                              )
                            )
                          )
                        )
                        (AssignE
                          (VarLE i)
                          (PrimE
                            (BinPrim Nat AddOp)
                            (VarE! i)
                            (LitE (NatLit 1))
                          )
                        )
                      )
                      (PrimE (BreakPrim $done/7) (PrimE TupPrim))
                    )
                  )
                )
              )
              (VarE! len)
            )
          )
        )
        (LetD
          (VarP addToHashArray)
          (FuncE
            addToHashArray
            Local
            Returns
            (params hashArray b)
            ()
            (BlockE
              (LetD
                (VarP hashValue)
                (PrimE (CallPrim) (VarE hashBlob) (VarE b))
              )
              (LetD
                (VarP index)
                (PrimE
                  (BinPrim Nat ModOp)
                  (PrimE (CallPrim) (VarE @nat32ToNat) (VarE hashValue))
                  (VarE HASH_ARRAY_SIZE)
                )
              )
              (LetD (VarP list) (PrimE IdxPrim (VarE hashArray) (VarE index)))
              (LetD
                (VarP weakRef)
                (BlockE
                  (LetD
                    (VarP $ref/0)
                    (PrimE (CallPrim Blob) (VarE allocWeakRef) (VarE b))
                  )
                  (NewObjE Object (ref $ref/0) {ref : weak Blob})
                )
              )
              (AssignE
                (IdxLE (VarE hashArray) (VarE index))
                (PrimE
                  (CallPrim)
                  (VarE addToList)
                  (PrimE
                    TupPrim
                    (VarE list)
                    (PrimE (CallPrim) (VarE getOriginalBlob) (VarE b))
                    (VarE weakRef)
                  )
                )
              )
            )
          )
        )
        (LetD
          (VarP getFromHashArray)
          (FuncE
            getFromHashArray
            Local
            Returns
            (params hashArray b)
            ?WeakRef
            (BlockE
              (LetD
                (VarP hashValue)
                (PrimE (CallPrim) (VarE hashBlob) (VarE b))
              )
              (LetD
                (VarP index)
                (PrimE
                  (BinPrim Nat ModOp)
                  (PrimE (CallPrim) (VarE @nat32ToNat) (VarE hashValue))
                  (VarE HASH_ARRAY_SIZE)
                )
              )
              (LetD (VarP list) (PrimE IdxPrim (VarE hashArray) (VarE index)))
              (PrimE
                (CallPrim)
                (VarE getFromList)
                (PrimE
                  TupPrim
                  (VarE list)
                  (PrimE (CallPrim) (VarE getOriginalBlob) (VarE b))
                )
              )
            )
          )
        )
        (LetD
          WildP
          (IfE
            (PrimE
              (RelPrim Nat LtOp)
              (PrimE blob_size (VarE b))
              (LitE (NatLit 5))
            )
            (PrimE RetPrim (VarE b))
            (PrimE TupPrim)
          )
        )
        (LetD
          WildP
          (IfE
            (IfE
              (IfE
                (IfE
                  (IfE
                    (PrimE
                      (RelPrim Bool EqOp)
                      (PrimE
                        (RelPrim Nat8 EqOp)
                        (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 0)))
                        (LitE (Nat8Lit 33))
                      )
                      (LitE (BoolLit false))
                    )
                    (LitE (BoolLit true))
                    (PrimE
                      (RelPrim Bool EqOp)
                      (PrimE
                        (RelPrim Nat8 EqOp)
                        (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 1)))
                        (LitE (Nat8Lit 99))
                      )
                      (LitE (BoolLit false))
                    )
                  )
                  (LitE (BoolLit true))
                  (PrimE
                    (RelPrim Bool EqOp)
                    (PrimE
                      (RelPrim Nat8 EqOp)
                      (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 2)))
                      (LitE (Nat8Lit 97))
                    )
                    (LitE (BoolLit false))
                  )
                )
                (LitE (BoolLit true))
                (PrimE
                  (RelPrim Bool EqOp)
                  (PrimE
                    (RelPrim Nat8 EqOp)
                    (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 3)))
                    (LitE (Nat8Lit 102))
                  )
                  (LitE (BoolLit false))
                )
              )
              (LitE (BoolLit true))
              (PrimE
                (RelPrim Bool EqOp)
                (PrimE
                  (RelPrim Nat8 EqOp)
                  (PrimE IdxBlobPrim (VarE b) (LitE (NatLit 4)))
                  (LitE (Nat8Lit 33))
                )
                (LitE (BoolLit false))
              )
            )
            (PrimE RetPrim (VarE b))
            (PrimE TupPrim)
          )
        )
        (LetD
          (VarP ptr)
          (PrimE (CallPrim) (VarE getDedupTable) (PrimE TupPrim))
        )
        (LetD
          (VarP hashArray)
          (SwitchE
            (VarE ptr)
            (case (OptP (VarP dedupTable)) (VarE dedupTable))
            (case
              (LitP NullLit)
              (BlockE
                (LetD
                  (VarP arr)
                  (PrimE
                    (CallPrim List)
                    (VarE Array_tabulateVar)
                    (PrimE
                      TupPrim
                      (VarE HASH_ARRAY_SIZE)
                      (FuncE
                        @anon-func-830.58
                        Local
                        Returns
                        (params i)
                        List
                        (BlockE
                          (VarD $next/1 ?List (LitE NullLit))
                          (LetD (VarP $value/1) (LitE NullLit))
                          (LetD (VarP $originalBlob/0) (LitE (BlobLit "")))
                          (LetD (VarP $index/1) (LitE (NatLit 0)))
                          (NewObjE
                            Object
                            (index $index/1)
                            (originalBlob $originalBlob/0)
                            (value $value/1)
                            (next $next/1)
                            {index : Nat; var next : ?List; originalBlob : Blob; value : ?WeakRef}
                          )
                        )
                      )
                    )
                  )
                )
                (LetD WildP (PrimE (CallPrim) (VarE setDedupTable) (VarE arr)))
                (VarE arr)
              )
            )
          )
        )
        (LetD
          (VarP dedupedBlobWeakRef)
          (PrimE
            (CallPrim)
            (VarE getFromHashArray)
            (PrimE TupPrim (VarE hashArray) (VarE b))
          )
        )
        (LetD
          (VarP result)
          (SwitchE
            (VarE dedupedBlobWeakRef)
            (case
              (OptP (VarP weakRef))
              (BlockE
                (LetD
                  (VarP derefed)
                  (PrimE
                    (CallPrim Blob)
                    (VarE weakGet)
                    (PrimE (DotPrim ref) (VarE weakRef))
                  )
                )
                (SwitchE
                  (VarE derefed)
                  (case (OptP (VarP derefed)) (VarE derefed))
                  (case
                    (LitP NullLit)
                    (BlockE
                      (LetD
                        WildP
                        (PrimE
                          (CallPrim)
                          (VarE addToHashArray)
                          (PrimE TupPrim (VarE hashArray) (VarE b))
                        )
                      )
                      (VarE b)
                    )
                  )
                )
              )
            )
            (case
              (LitP NullLit)
              (BlockE
                (LetD
                  WildP
                  (PrimE
                    (CallPrim)
                    (VarE addToHashArray)
                    (PrimE TupPrim (VarE hashArray) (VarE b))
                  )
                )
                (VarE b)
              )
            )
          )
        )
        (VarE result)
      )
    )
  )
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 57))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (NatLit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (IntLit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat8Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat16Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat32Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat64Lit 42))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat8Lit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat16Lit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat32Lit 25))) (PrimE TupPrim)))
  (LetD WildP (BlockE (LetD WildP (LitE (Nat64Lit 25))) (PrimE TupPrim)))
)
-- constness analysis issue-5555.mo:
-- Compiling issue-5555.mo:
